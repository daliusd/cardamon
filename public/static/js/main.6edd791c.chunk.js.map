{"version":3,"sources":["components/rotate.svg","components/Card.module.css","components/SidebarImage.module.css","components/ConfirmedDelete.module.css","components/EditableTitle.module.css","components/FontSelector.module.css","components/SidebarText.module.css","components/image.svg","components/ImageField.module.css","components/ContentEditable.module.css","components/text.svg","components/SidebarGeneratePng.module.css","components/SidebarGeneratePdf.module.css","components/SidebarMeasurements.module.css","components/SidebarSettings.module.css","components/SidebarUpload.module.css","components/CardSets.module.css","components/FeatureList.module.css","components/screenshot.png","components/FieldController.module.css","actions.ts","constants.ts","requests.ts","utils.ts","types.ts","workerController.ts","storage.ts","fontLoader.tsx","sagas.ts","reducers.ts","store.ts","components/KawaiiMessage.tsx","AboutPage.tsx","components/FieldController.tsx","components/ImageField.tsx","components/ContentEditable.tsx","components/TextField.tsx","components/Card.tsx","components/EditableTitle.tsx","components/Loader.tsx","components/SidebarDetails.tsx","components/SidebarGeneratePng.tsx","components/PDFGenerator.tsx","components/SidebarGeneratePdf.tsx","components/ColorButton.tsx","components/SidebarImage.tsx","components/SidebarImportExport.tsx","components/SidebarMeasurements.tsx","components/SidebarSettings.tsx","components/FontSelector.tsx","components/SidebarText.tsx","components/SidebarUpload.tsx","components/Sidebar.tsx","components/CardSet.tsx","CardSetPage.tsx","ChangelogPage.tsx","ErrorBoundry.tsx","components/ConfirmedDelete.tsx","components/CardSets.tsx","GamePage.tsx","HelpPage.tsx","components/Login.tsx","LoginPage.tsx","components/FeatureList.tsx","components/Games.tsx","Main.tsx","selectors.ts","components/Logout.tsx","components/Navbar.tsx","NotFoundPage.tsx","components/SignUp.tsx","SignUpPage.tsx","App.tsx","serviceWorker.ts","index.tsx","components/Sidebar.module.css","components/Navbar.module.css","components/Loader.module.css","components/SidebarDetails.module.css","components/CardSet.module.css","components/pan.svg","components/zoom.svg","components/resize.svg"],"names":["module","exports","__webpack_require__","p","card","title","active","disabled","view","images","button","answer","input","fontFamily","fontVariant","over","content","cardsets","features","fieldcontroller","fieldcontrolleractivefield","fieldcontrolleractive","controller","touchactivated","SidebarState","CURRENT_CARDSET_VERSION","DEFAULT_FONT_SIZE","DEFAULT_LINE_HEIGHT","BLEED_WIDTH","INIT_REQUEST","MESSAGE_DISPLAY","MESSAGE_HIDE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_REQUEST","LOGOUT_FAILURE","LOGOUT_SUCCESS","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILURE","GAME_CREATE_REQUEST","GAME_CREATE_SUCCESS","GAME_DELETE_REQUEST","GAME_RENAME_REQUEST","GAME_LIST_SUCCESS","GAME_LIST_REQUEST","GAME_LIST_FAILURE","GAME_LIST_RESET","GAME_SELECT_REQUEST","GAME_SELECT_SUCCESS","GAME_SELECT_FAILURE","GAME_CREATE_PDF_REQUEST","GAME_CREATE_PDF_SUCCESS","GAME_CREATE_PDF_FAILURE","GAME_CREATE_PNG_REQUEST","GAME_CREATE_PNG_SUCCESS","GAME_CREATE_PNG_FAILURE","GAME_GET_ATTRIBUTIONS_REQUEST","GAME_GET_ATTRIBUTIONS_SUCCESS","GAME_GET_ATTRIBUTIONS_FAILURE","CARDSETS_SELECT_SUCCESS","CARDSET_CREATE_REQUEST","CARDSET_CREATE_SUCCESS","CARDSET_CREATE_FAILURE","CARDSET_DELETE_REQUEST","CARDSET_RENAME_REQUEST","CARDSET_IMPORT_DATA","CARDSET_LIST_SUCCESS","CARDSET_LIST_RESET","CARDSET_SELECT_REQUEST","CARDSET_SELECT_SUCCESS","CARDSET_CREATE_CARD","CARDSET_ROTATE_CARDS_RIGHT","CARDSET_ROTATE_CARDS_LEFT","CARDSET_CLONE_CARD","CARDSET_REMOVE_CARD","CARDSET_UPDATE_CARD_COUNT","CARDSET_ADD_TEXT_FIELD","CARDSET_ADD_IMAGE_FIELD","CARDSET_CHANGE_ACTIVE_FIELD_NAME","CARDSET_REMOVE_ACTIVE_FIELD","CARDSET_RAISE_ACTIVE_FIELD","CARDSET_RAISE_ACTIVE_FIELD_TO_TOP","CARDSET_LOWER_ACTIVE_FIELD","CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM","CARDSET_LOCK_ACTIVE_FIELD","CARDSET_UNLOCK_ACTIVE_FIELD","CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD","CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD","CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD","CARDSET_CHANGE_WIDTH","CARDSET_CHANGE_HEIGHT","CARDSET_CHANGE_IS_TWO_SIDED","CARDSET_CHANGE_SNAPPING_DISTANCE","CARDSET_CHANGE_FIELD_POSITION","CARDSET_CHANGE_FIELD_PAN","CARDSET_CHANGE_FIELD_ZOOM","CARDSET_CHANGE_FIELD_SIZE","CARDSET_CHANGE_FIELD_ANGLE","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE","CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT","CARDSET_CHANGE_TEXT","CARDSET_CHANGE_IMAGE","CARDSET_CHANGE_IMAGE_BASE64","CARDSET_SET_ACTIVE_CARD_AND_FIELD","CARDSET_CHANGE_APPLY_TO_ALLCARDS","CARDSET_SELECT_FAILURE","CARDSET_SET_SIDEBAR_STATE","CARDSET_SET_ZOOM","CARDSET_UPLOAD_IMAGE","CARDSET_UPLOAD_IMAGE_SUCCESS","CARDSET_UPLOAD_IMAGE_FAILURE","CARDSET_DELETE_IMAGE","CARDSET_UNDO","CARDSET_REDO","IMAGE_LIST_REQUEST","IMAGE_LIST_SUCCESS","IMAGE_LIST_FAILURE","messageDisplay","type","text","id","message","shortid","generate","gameCreateRequest","gamename","gameDeleteRequest","gameId","gameRenameRequest","newName","gameSelectRequest","updateCardSets","gameCreatePdfRequest","collectionType","collectionId","pageWidth","pageHeight","topBottomMargin","leftRightMargin","verticalSpace","horizontalSpace","includeBleedingArea","cutMarksForScissors","cutMarksForGuillotine","cutMarksInMarginArea","cutMarksOnFrontSideOnly","gameCreatePngRequest","dpi","gameGetAttributionsRequest","cardSetCreateRequest","cardsetname","width","height","cardSetDeleteRequest","cardSetId","cardSetRenameRequest","cardSetImportData","data","cardSetCreateCard","cardSetRotateCardsRight","cardSetRotateCardsLeft","cardSetCloneCard","cardSetRemoveCard","cardSetUpdateCardCount","count","cardSetAddTextField","cardSetAddImageField","cardSetChangeActiveFieldName","name","cardSetRemoveActiveField","cardSetRaiseActiveField","cardSetRaiseActiveFieldToTop","cardSetLowerActiveField","cardSetLowerActiveFieldToBottom","cardSetLockActiveField","cardSetUnlockActiveField","cardSetChangeFitForActiveField","fit","cardSetChangeCropForActiveField","crop","cardSetChangeUnclickableForActiveField","unclickable","cardSetChangeWidth","maintainAspectRatio","resizeContent","cardSetChangeHeight","cardSetChangeIsTwoSided","isTwoSided","cardSetChangeSnappingDistance","snappingDistance","cardSetChangeFieldPosition","cardId","fieldId","x","y","group","cardSetChangeFieldPan","cx","cy","cardSetChangeFieldZoom","zoom","cardSetChangeFieldSize","cardSetChangeFieldAngle","angle","cardSetChangeActiveTextFieldAlign","align","cardSetChangeActiveTextFieldColor","color","cardSetChangeActiveTextFieldFontVariant","cardSetChangeActiveTextFieldFontFamilyAndVariant","cardSetChangeActiveTextFieldFontSize","fontSize","cardSetChangeActiveTextFieldLineHeight","lineHeight","cardSetChangeText","textInfo","cardSetChangeImage","imageInfo","cardSetChangeImageBase64","base64","cardSetActiveCardAndField","isBackActive","cardSetChangeApplyToAllCards","applyToAllCards","cardSetSetSidebarState","sidebarState","cardSetSetZoom","cardSetUploadImage","file","load","error","progress","abort","cancelToken","cardSetDeleteImage","imageId","cardSetUndo","cardSetRedo","imageListRequest","filter","location","handleAxiosError","response","Error","request","console","log","getTokens","creds","axios","post","then","resp","catch","refreshToken","refreshTokenValue","config","headers","Authorization","concat","accessToken","deleteAccessToken","token","delete","status","deleteRefreshToken","registerUser","getRequest","url","get","postRequest","postRequestFormDataCancelable","progressCallback","cancelCallback","Content-Type","onUploadProgress","isCancel","putRequest","put","deleteRequest","downloadBlob","blobURL","filename","resolve","tempLink","document","createElement","style","display","href","setAttribute","download","body","appendChild","click","removeChild","setTimeout","window","URL","revokeObjectURL","rotateVec","a","sinA","Math","sin","cosA","cos","rx","ry","calculateImageDimensions","imageFieldInfo","calculatedImageWidth","calculatedImageHeight","imageWidth","imageHeight","UserError","_Error","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","wrapNativeSuper","reportError","StackTrace","fromError","stackframes","stringifiedStack","map","sf","toString","join","state","store","JSON","stringify","getState","stack","ImageType","generatePdfUsingWorker","Worker","Promise","reject","worker","addEventListener","event","postMessage","e","loadImage","img","Image","onload","onerror","src","prepareImageToDrawSpace","context","imageToDraw","ptpmm","save","translate","rotate","ax","ay","rect","clip","fixWidthAndHeightInSvg","doc","XmlDocument","attr","viewBox","split","btoa","compressed","PNGGenerator","_this","tasksQueue","push","cardSetData","cardIdx","isBack","cardsetFolder","offscreenCanvas","calculatedWidth","round","calculatedHeight","getContext","fillStyle","fillRect","stopped","length","task","shift","SVG_PATH","scale","Path2D","fill","restore","IMAGE","SVG","undefined","dim","image","svgData","atob","drawImage","BLOCK_START","BLOCK_END","subType","delay","dataUrl","toDataURL","slice","padStart","zip","cardsetsList","cardsetInfo","generateCardset","cardsetId","parse","folder","cardsAllIds","entries","generateCard","generatePngUsingWorker","_ref4","asyncToGenerator","regenerator_default","mark","_callee4","pngGenerator","blob","wrap","_context4","prev","next","JSZip","generateGame","generateAsync","sent","createObjectURL","stop","_x15","_x16","_x17","_x18","getImageAttribution","_callee6","meta","_context6","abrupt","metadata","source","attribution","retrieveGameAttributions","_ref5","_callee5","attributions","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_resp","cardFields","fieldInfo","start","end","_name","_attribution","_context5","Set","Symbol","iterator","done","value","t0","keys","fields","t1","t2","t3","replace","add","indexOf","t4","return","finish","Array","from","_x21","_x22","saveTokens","localStorage","setItem","saveUsername","username","saveAccessToken","cleanTokens","removeItem","getTokenFromStorage","getItem","getRefreshTokenFromStorage","getUsernameFromStorage","loadFontsUsedInPlaceholders","fontsToLoad","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","fieldsAllIds","field","fontToLoad","err","WebFont","objectSpread","inactive","webFontsLoadPromise","google","families","toConsumableArray","putError","putInfo","putProgress","hideProgress","handleMessageDisplay","getToken","handleLoginRequest","handleLoginSuccess","logoutToken","logoutRefreshToken","handleLogoutRequest","handleSignupRequest","handleInitRequest","authorizedGetRequest","authorizedPostRequest","authorizedDeleteRequest","authorizedPostFormDataRequest","authorizedPutRequest","handleGameCreateRequest","handleGameDeleteRequest","handleGameRenameRequest","handleGameListRequest","handleGameSelectRequest","handleGameCreatePdfRequest","handleGameCreatePngRequest","handleGameGetAttributionsRequest","handleCardSetCreateRequest","handleCardSetDeleteRequest","handleCardSetRenameRequest","handleCardSetSelectRequest","handleCardSetUploadImage","handleCardSetDeleteImage","handleCardSetFitChange","handleCardSetChangeImage","handleCardSetChange","handleImageListRequest","rootSaga","_context","call","_marked","_context2","_marked2","_context3","_marked3","messageId","_marked4","action","_marked5","validateToken","jwtDecode","exp","Date","getTime","withErrorIfMissing","getFreshToken","newToken","_args6","_marked6","_context7","_marked7","_context8","_marked8","_context9","_marked9","_context10","_marked10","_context11","_marked11","_context12","_marked12","_context13","_marked13","_context14","_marked14","_context15","_marked15","_context16","_marked16","_context17","_marked17","_context18","_marked18","_context19","_marked19","_context20","_marked20","_context21","_marked21","allIds","byId","_context22","games","g","reduce","obj","_marked22","_context23","_marked23","progressId","_context24","_marked24","_context25","_marked25","_context26","select","_marked26","_context27","version","_marked27","_context28","_marked28","_context29","_marked29","loadImageInfo","naturalWidth","naturalHeight","processData","_x","_processData","_callee","processedData","plId","placeholder","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_placeholder","_cardId","_fieldId","info","_context38","placeholdersAllIds","placeholders","global","texts","cardsById","t5","t6","parsedData","_context30","ActionCreators","clearHistory","_marked30","formData","_context31","FormData","set","append","lengthComputable","loaded","total","_marked31","_context32","_marked32","adjustSvg","preserveAspectRatio","walkChildren","node","children","child","imageResp","svg","_svg","_context33","cardset","present","activeFieldId","_marked33","cardsToFix","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_svg2","_context34","_marked34","closeHandler","preventDefault","returnValue","allowWindowClose","removeEventListener","_context35","_marked35","game","_context36","encodeURIComponent","_marked36","_context37","all","takeEvery","takeLatest","_marked37","ACTIVITY_SELECTING","ACTIVITY_CREATING_PDF","ACTIVITY_CREATING_PNG","DefaultMessageState","messages","DefaultAuthState","isAuthenticated","user","DefaultSignUpState","signingup","DefaultGameState","activity","DefaultCardSetsState","DefaultCardSetState","activeCardId","textSettings","activeSidebar","DefaultImageState","resizeFields","widthRatio","heightRatio","newFields","rotateRight","newCx","newCy","PI","rotateLeft","undoableCardset","undoable","assign","defineProperty","isOnBack","newCard","index","fieldIndex","splice","locked","unshift","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","fitImageWidth","fitImageHeight","min","max","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","oldZoom","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","nx","ny","_rotateVec","ratio","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","testFieldInfo","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","Measurements","Details","Text","ignoreInitialState","undoType","redoType","groupBy","startsWith","reducers","combineReducers","find","m","auth","signup","Character","AboutPage","react_default","Component","FieldController","props","cDiv","panDiv","zoomDiv","resizeDiv","rotateDiv","originalBodyCursor","handleBrowserDragStart","stopPropagation","handleMouseDown","handleDragStart","handleMouseMove","handleMouseUp","handleTouchStart","touches","changedTouches","handleTouchMove","passive","handleTouchEnd","co","current","cursor","setState","startX","clientX","startY","clientY","handleDragMove","ctrlKey","disableSnapping","_this$props","isLocked","_this$props2","ppmm","onDrag","handleComplete","isTouchEvent","_this$props3","activatedUsingTouch","handlePanMouseDown","handlePanStart","handlePanMouseMove","handlePanMouseUp","handlePanTouchStart","handlePanTouchMove","handlePanTouchEnd","panIcon","handlePanMove","_this$props4","onPan","handlePanComplete","_this$props5","handleZoomMouseDown","handleZoomStart","handleZoomMouseMove","handleZoomMouseUp","handleZoomTouchStart","handleZoomTouchMove","handleZoomTouchEnd","zoomIcon","handleZoomMove","_this$props6","onZoom","dx","dy","z","abs","newZoom","handleZoomComplete","handleResizeMouseDown","handleResizeStart","handleResizeMouseMove","handleResizeMouseUp","handleResizeTouchStart","handleResizeTouchMove","handleResizeTouchEnd","resizeIcon","handleResizeMove","_this$props7","onResize","_rotateVec2","newWidth","newHeight","handleResizeComplete","_this$props8","handleRotateMouseDown","handleRotateStart","handleRotateMouseMove","handleRotateMouseUp","handleRotateTouchStart","handleRotateTouchMove","handleRotateTouchEnd","_this$props9","rotateIcon","getBoundingClientRect","left","clientWidth","top","clientHeight","originalAngle","atan2","handleRotateMove","_this$props10","onRotate","_this$state","newAngle","handleRotateComplete","React","createRef","_this$props11","isActive","isActiveField","isUnclickable","ref","onDragStart","className","position","transform","pointerEvents","alt","right","bottom","connect","ImageField","handleDrag","cardOnly","dispatch","handlePan","handleZoom","handleResize","handleRotate","wasMoved","handleDragOver","dragIsOver","handleDragLeave","handleDrop","dataTransfer","getData","imagefilesPos","ii","substr","imageUrl","cardWidth","cardHeight","components_FieldController","overflow","onMouseDown","onTouchStart","onMouseMove","onTouchMove","onMouseUp","onTouchEnd","onDragOver","onDragLeave","onDrop","opacity","emptyImageImage","PureComponent","ContentEditable","editDiv","currentText","currentAlign","currentColor","currentFontFamily","currentFontVariant","currentFontSize","currentLineHeight","timeout","handleStart","handleMove","focus","onFocus","textValue","range","createRange","selectNodeContents","collapse","selection","getSelection","removeAllRanges","addRange","updateContent","timeoutInMiliseconds","innerHTML","imgUrlIdx","clearTimeout","handleBlur","handleInput","handlePaste","clipboardData","s","execCommand","nextProps","isItalic","fontWeight","parseInt","contentEditable","onBlur","onInput","onPaste","textAlign","DEFAULT_FONT","fontStyle","outline","overflowWrap","dangerouslySetInnerHTML","__html","TextField","textFieldInfo","zIndex","emptyTextImage","components_ContentEditable","Card","dimensions","handleFieldDeselect","target","getAttribute","_this2","fieldsIds","isActiveCard","widthWithBleeds","heightWithBleeds","index_esm","client","contentRect","_ref","measureRef","components_ImageField","key","components_TextField","border","borderRadius","EditableTitle","titleIsEdited","handleClick","handleChange","onChange","Fragment","onClick","autoFocus","KawaiiMessage","character","mood","marginTop","marginBottom","padding","backgroundColor","grid","Ghost","size","Browser","marginLeft","Loader","fixed","small","loader","relative","SidebarDetails","_Component","_getPrototypeOf2","_len","args","_key","handleRotateRightClick","handleRotateLeftClick","handleCloneCardClick","activeCard","handleRemoveCardClick","handleCountChange","handleUndoClick","handleRedoClick","createClass","visible","SidebarGeneratePng","handleDpiChange","handleGenerate","activeCardset","isCreatingPng","htmlFor","step","PDFGenerator","handleGeneratePdfClick","handlePageWidthChange","parseFloat","handlePageHeightChange","handleTopBottomMarginChange","handleLeftRightMarginChange","handleVerticalSpaceChange","handleHorizontalSpaceChange","handleIncludeBleedingAreaChange","checked","handleCutMarksForScissors","handleCutMarksForGuillotine","handleCutMarksInMarginArea","handleCutMarksOnFrontSideOnly","isCreatingPdf","withHelp","KawaiiMessage_KawaiiMessage","SidebarGeneratePdf","activeCardSetId","components_PDFGenerator","ColorButton","displayColorPicker","handleClose","react_color_lib","disableAlpha","SidebarImage","handleAddImageClick","changeImage","activeFieldInfo","handleRemoveImageFromFieldClick","handleRemoveClick","handleNameChange","trim","handleFilterChange","handleImageSelect","imageName","handleRaise","handleLower","handleLockField","handleUnlockField","handleFitOptionChange","handleOptionChange","handleColorChange","hex","handleRemoveColorClick","handleApplyToAllCardChange","handleChangeCrop","ColorButton_ColorButton","im","data-width","data-height","registerPlugin","FilePondPluginFileValidateType","SidebarImportExport","prepareImagePaths","activeGame","ending","md5","preparedImages","fieldsByCard","endsWith","handleExportJson","json","Blob","handleExportCsv","preparedFields","csvData","header","usedNames","dataRow","written","fieldIndo","csv","Papa","unparse","handleProcess","fieldName","reader","FileReader","readAsText","result","isGlobal","newCardsAllIds","newCardsById","row","handleRevert","uniqueFileId","react_filepond","server","process","revert","acceptedFileTypes","SidebarMeasurements","handlePrevField","activeField","prevField","idx","handleNextField","nextField","handleWidthChange","handleHeightChange","handleXChange","handleYChange","handleAngleChange","_this$props12","handleChangeUnclickable","_this$props13","_this$props14","SidebarSettings","_this$state2","handleIsTwoSidedChange","handleSnappingDistance","_this$state3","FontOptionComponent","isDisabled","react_select_esm","Option","webfontsThumbs","options","webfonts","sort","fi","label","FontSelector","getFontStringForLoad","family","variant","stringForLoad","selectedOption","activeFontVariant","wf","handleFontVariantChange","activeFont","handleFontSizeChange","handleLineHeightChange","selectedFontFamily","f","fontVariantOptions","fv","selectedFontVariant","activeFontSize","components","activeLineHeight","SidebarText","handleAddTextClick","handleSetTextAlignLeft","getRangeAt","rangeCount","collapsed","handleSetTextAlignCenter","handleSetTextAlignRight","handleSetTextBold","handleSetTextItalic","components_FontSelector","FilePondPluginFileValidateSize","SidebarUpload","CancelToken","cancel","visibility","allowMultiple","allowFileSizeValidation","maxFileSize","SIDEBARS","Settings","icon","component","Upload","ImportExport","Png","Pdf","Sidebar","handleSidebar","sidebar","controls","sb","hidden","CardSet","keyDown","shiftKey","handleCreateCardClick","handleClickOutsideOfCard","handleCardSetNameChange","activeCardSet","EditableTitle_EditableTitle","cardsetview","components_Sidebar","Loader_Loader","gridTemplateColumns","components_Card","createCard","CardSetPage","match","params","components_CardSet","Redirect","to","ChangelogPage","evt","reason","ErrorBoundary","hasError","ConfirmedDelete","deleteClicked","handleRemove","handleYes","onDelete","handleNo","question","CardSets","cardSetName","handleGameNameChange","handleCreateCardSetClick","handleCardSetDelete","handleGetAttributions","b","cardsetItems","Link","ConfirmedDelete_ConfirmedDelete","GamePage","components_CardSets","Login","password","handleUsernameChange","handlePasswordChange","handleSubmit","onLogin","onLoginFailure","onSubmit","LoginPage","Login_Login","loginRequest","msg","FeatureList","screenshot","Games","gameName","handleCreateGameClick","handleGameDelete","gameItems","FeatureList_FeatureList","Main","components_Games","getActiveGame","getActiveCardSet","Logout","onLogout","Navbar","menu","components_Logout","NotFoundPage","SignUp","passwordRepeat","handlePasswordRepeatChange","onSignUp","SignUpPage","components_SignUp","signupRequest","App","isIE","BrowserRouter","ErrorBoundry_ErrorBoundary","components_Navbar","Switch","Route","exact","path","HelpPage","getFullYear","Boolean","hostname","sagaMiddleware","createSagaMiddleware","createStore","__REDUX_DEVTOOLS_EXTENSION__","compose","applyMiddleware","run","createAppStore","ReactDOM","render","es","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister","loader-small"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wDCCxCH,EAAAC,QAAA,CAAkBG,KAAA,mBAAAC,MAAA,oBAAAC,OAAA,qBAAAC,SAAA,6CCAlBP,EAAAC,QAAA,CAAkBO,KAAA,2BAAAD,SAAA,+BAAAE,OAAA,yjyNCAlBT,EAAAC,QAAA,CAAkBS,OAAA,gCAAAC,OAAA,sDCAlBX,EAAAC,QAAA,CAAkBW,MAAA,mDCAlBZ,EAAAC,QAAA,CAAkBY,WAAA,iCAAAC,YAAA,wDCAlBd,EAAAC,QAAA,CAAkBO,KAAA,0BAAAD,SAAA,oDCDlBP,EAAAC,QAAiBC,EAAAC,EAAuB,uDCCxCH,EAAAC,QAAA,CAAkBc,KAAA,+CCAlBf,EAAAC,QAAA,CAAkBe,QAAA,uDCDlBhB,EAAAC,QAAiBC,EAAAC,EAAuB,sDCCxCH,EAAAC,QAAA,CAAkBO,KAAA,uDCAlBR,EAAAC,QAAA,CAAkBO,KAAA,6ECAlBR,EAAAC,QAAA,CAAkBO,KAAA,kCAAAD,SAAA,4DCAlBP,EAAAC,QAAA,CAAkBO,KAAA,0m/9CCAlBR,EAAAC,QAAA,CAAkBO,KAAA,kDCAlBR,EAAAC,QAAA,CAAkBgB,SAAA,iDCAlBjB,EAAAC,QAAA,CAAkBiB,SAAA,oDCDlBlB,EAAAC,QAAiBC,EAAAC,EAAuB,qLCCxCH,EAAAC,QAAA,CAAkBkB,gBAAA,yCAAAC,2BAAA,oDAAAC,sBAAA,+CAAAC,WAAA,oCAAAC,eAAA,mHCqhBNC,4ICthBCC,EAA0B,EAG1BC,EAAoB,EACpBC,EAAsB,KAEtBC,EAAc,uBDedC,EAAe,eACfC,EAAkB,kBAClBC,EAAe,eACfC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAoB,oBACpBC,EAAoB,oBACpBC,EAAoB,oBACpBC,EAAkB,kBAClBC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAA0B,0BAC1BC,EAA0B,0BAC1BC,EAA0B,0BAC1BC,EAA0B,0BAC1BC,GAA0B,0BAC1BC,GAA0B,0BAC1BC,GAAgC,gCAChCC,GAAgC,gCAChCC,GAAgC,gCAChCC,GAA0B,0BAC1BC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAsB,sBACtBC,GAAuB,uBAGvBC,GAAqB,qBACrBC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAsB,sBACtBC,GAA6B,6BAC7BC,GAA4B,4BAC5BC,GAAqB,qBACrBC,GAAsB,sBACtBC,GAA4B,4BAC5BC,GAAyB,yBACzBC,GAA0B,0BAC1BC,GAAmC,mCACnCC,GAA8B,8BAC9BC,GAA6B,6BAC7BC,GAAoC,oCACpCC,GAA6B,uBAC7BC,GAAuC,uCACvCC,GAA4B,4BAC5BC,GAA8B,8BAC9BC,GAAsC,sCACtCC,GAAuC,uCACvCC,GAA8C,8CAC9CC,GAAuB,uBACvBC,GAAwB,wBACxBC,GAA8B,8BAC9BC,GAAmC,mCACnCC,GAAgC,gCAChCC,GAA2B,2BAC3BC,GAA4B,4BAC5BC,GAA4B,4BAC5BC,GAA6B,6BAC7BC,GAAyC,yCACzCC,GAAyC,yCACzCC,GAA+C,+CAC/CC,GAAgD,gDAChDC,GACT,2DACSC,GAA6C,6CAC7CC,GAA+C,+CAC/CC,GAAsB,sBACtBC,GAAuB,uBACvBC,GAA8B,8BAC9BC,GAAoC,oCACpCC,GAAmC,mCACnCC,GAAyB,yBACzBC,GAA4B,4BAC5BC,GAAmB,mBACnBC,GAAuB,uBACvBC,GAA+B,+BAC/BC,GAA+B,+BAC/BC,GAAuB,uBACvBC,GAAe,eACfC,GAAe,eACfC,GAAqB,qBACrBC,GAAqB,qBACrBC,GAAqB,+BAgatBnG,0OAyIL,IAAMoG,GAAiB,SAACC,EAAcC,EAAcC,GACvD,MAAO,CACHF,KAAM/F,EACNkG,QAAS,CACLD,GAAIA,GAAME,IAAQC,WAClBL,KAAMA,EACNC,KAAMA,KA6BLK,GAAoB,SAACC,GAC9B,MAAO,CACHP,KAAMpF,EACN2F,SAAUA,IAILC,GAAoB,SAACC,GAC9B,MAAO,CACHT,KAAMlF,EACN2F,WAIKC,GAAoB,SAACD,EAAgBE,GAC9C,MAAO,CACHX,KAAMjF,EACN0F,SACAE,YAUKC,GAAoB,SAACV,EAAYW,GAC1C,MAAO,CACHb,KAAM5E,EACN8E,KACAW,mBAIKC,GAAuB,SAChCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACH3B,KAAMzE,EACNwF,iBACAC,eACAC,YACAC,aACAC,kBACAC,kBACAC,gBACAC,kBACAC,sBACAC,sBACAC,wBACAC,uBACAC,4BAIKC,GAAuB,SAChCC,EACAd,EACAC,GAEA,MAAO,CACHhB,KAAMtE,EACNmG,MACAd,iBACAC,iBAIKc,GAA6B,WACtC,MAAO,CACH9B,KAAMnE,KAIDkG,GAAuB,SAChCC,EACAC,EACAC,EACAzB,GAEA,MAAO,CACHT,KAAM/D,GACN+F,YAAaA,EACbC,QACAC,SACAzB,WAIK0B,GAAuB,SAACC,GACjC,MAAO,CACHpC,KAAM5D,GACNgG,cAIKC,GAAuB,SAACD,EAAmBzB,GACpD,MAAO,CACHX,KAAM3D,GACN+F,YACAzB,YAIK2B,GAAoB,SAACC,GAC9B,MAAO,CACHvC,KAAM1D,GACNiG,SAWKC,GAAoB,SAACjK,GAC9B,MAAO,CACHyH,KAAMrD,GACNpE,SAIKkK,GAA0B,WACnC,MAAO,CACHzC,KAAMpD,KAID8F,GAAyB,WAClC,MAAO,CACH1C,KAAMnD,KAID8F,GAAmB,SAACpK,GAC7B,MAAO,CACHyH,KAAMlD,GACNvE,SAIKqK,GAAoB,SAACrK,GAC9B,MAAO,CACHyH,KAAMjD,GACNxE,SAIKsK,GAAyB,SAACtK,EAAgBuK,GACnD,MAAO,CACH9C,KAAMhD,GACNzE,OACAuK,UAIKC,GAAsB,WAC/B,MAAO,CACH/C,KAAM/C,KAID+F,GAAuB,WAChC,MAAO,CACHhD,KAAM9C,KAID+F,GAA+B,SAACC,GACzC,MAAO,CACHlD,KAAM7C,GACN+F,SAIKC,GAA2B,WACpC,MAAO,CACHnD,KAAM5C,KAIDgG,GAA0B,WACnC,MAAO,CACHpD,KAAM3C,KAIDgG,GAA+B,WACxC,MAAO,CACHrD,KAAM1C,KAIDgG,GAA0B,WACnC,MAAO,CACHtD,KAAMzC,KAIDgG,GAAkC,WAC3C,MAAO,CACHvD,KAAMxC,KAIDgG,GAAyB,WAClC,MAAO,CACHxD,KAAMvC,KAIDgG,GAA2B,WACpC,MAAO,CACHzD,KAAMtC,KAIDgG,GAAiC,SAACC,GAC3C,MAAO,CACH3D,KAAMrC,GACNgG,QAIKC,GAAkC,SAACC,GAC5C,MAAO,CACH7D,KAAMpC,GACNiG,SAIKC,GAAyC,SAClDC,GAEA,MAAO,CACH/D,KAAMnC,GACNkG,gBAIKC,GAAqB,SAC9B/B,EACAgC,EACAC,GAEA,MAAO,CACHlE,KAAMlC,GACNmE,QACAgC,sBACAC,kBAIKC,GAAsB,SAC/BjC,EACA+B,EACAC,GAEA,MAAO,CACHlE,KAAMjC,GACNmE,SACA+B,sBACAC,kBAIKE,GAA0B,SAACC,GACpC,MAAO,CACHrE,KAAMhC,GACNqG,eAIKC,GAAgC,SAACC,GAC1C,MAAO,CACHvE,KAAM/B,GACNsG,qBAIKC,GAA6B,SACtCC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACH7E,KAAM9B,GACNuG,SACAC,UACAC,IACAC,IACAC,UAIKC,GAAwB,SACjCL,EACAC,EACAK,EACAC,EACAH,GAEA,MAAO,CACH7E,KAAM7B,GACNsG,SACAC,UACAK,KACAC,KACAH,UAIKI,GAAyB,SAClCR,EACAC,EACAQ,EACAL,GAEA,MAAO,CACH7E,KAAM5B,GACNqG,SACAC,UACAQ,OACAL,UAIKM,GAAyB,SAClCV,EACAC,EACAzC,EACAC,EACA2C,GAEA,MAAO,CACH7E,KAAM3B,GACNoG,SACAC,UACAzC,QACAC,SACA2C,UAIKO,GAA0B,SACnCX,EACAC,EACAW,EACAR,GAEA,MAAO,CACH7E,KAAM1B,GACNmG,SACAC,UACAW,QACAR,UAIKS,GAAoC,SAACC,GAC9C,MAAO,CACHvF,KAAMzB,GACNgH,UAIKC,GAAoC,SAACC,GAC9C,MAAO,CACHzF,KAAMxB,GACNiH,UAWKC,GAA0C,SACnDzM,GAEA,MAAO,CACH+G,KAAMtB,GACNzF,gBAIK0M,GAAmD,SAC5D3M,EACAC,GAEA,MAAO,CACH+G,KAAMrB,GACN3F,aACAC,gBAIK2M,GAAuC,SAACC,GACjD,MAAO,CACH7F,KAAMpB,GACNiH,aAIKC,GAAyC,SAACC,GACnD,MAAO,CACH/F,KAAMnB,GACNkH,eAIKC,GAAoB,SAACvB,EAAgBC,EAAiBuB,GAC/D,MAAO,CACHjG,KAAMlB,GACN2F,SACAC,UACAuB,aAIKC,GAAqB,SAC9BzB,EACAC,EACAyB,GAEA,MAAO,CACHnG,KAAMjB,GACN0F,SACAC,UACAyB,cAIKC,GAA2B,SACpC3B,EACAC,EACA2B,GAEA,MAAO,CACHrG,KAAMhB,GACNyF,SACAC,UACA2B,WAIKC,GAA4B,SACrC7B,EACA8B,EACA7B,GAEA,MAAO,CACH1E,KAAMf,GACNwF,SACA8B,eACA7B,YAIK8B,GAA+B,SAACC,GACzC,MAAO,CACHzG,KAAMd,GACNuH,oBAIKC,GAAyB,SAACC,GACnC,MAAO,CACH3G,KAAMZ,GACNuH,iBAIKC,GAAiB,SAAC1B,GAC3B,MAAO,CACHlF,KAAMX,GACN6F,SAIK2B,GAAqB,SAC9BpG,EACAqG,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACHnH,KAAMV,GACNmB,SACAqG,OACAC,OACAC,QACAC,WACAC,QACAC,gBAIKC,GAAqB,SAC9BC,EACAN,EACAC,GAEA,MAAO,CACHhH,KAAMP,GACN4H,UACAN,OACAC,UAIKM,GAAc,WACvB,MAAO,CACHtH,KAAMN,KAID6H,GAAc,WACvB,MAAO,CACHvH,KAAML,KAID6H,GAAmB,SAACC,EAAgBC,GAC7C,MAAO,CACH1H,KAAMJ,GACN6H,SACAC,iCEtuCD,SAASC,GAAiBX,GAC7B,MAAIA,EAAMY,SAIA,IAAIC,MAAMb,EAAMY,SAASrF,KAAKpC,SAC7B6G,EAAMc,SACbC,QAAQC,IAAIhB,EAAMc,SACZ,IAAID,MAAMb,EAAMc,UAEhB,IAAID,MAAM,oBAIjB,SAASI,GAAUC,GACtB,OAAOC,KACFC,KAAK,cAAeF,GACpBG,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAASwB,GAAaC,GACzB,IAAIC,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYJ,KAExC,OAAON,KACFC,KAAK,qBAAsB,GAAIM,GAC/BL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,KAAKuG,cAEpBP,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAAS+B,GAAkBC,GAC9B,IAAIN,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACFc,OAAO,qBAAsBP,GAC7BL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACH,GAA8B,MAA1BA,EAAMY,SAASsB,OAAgB,MAAO,GAC1CvB,GAAiBX,KAItB,SAASmC,GAAmBH,GAC/B,IAAIN,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACFc,OAAO,sBAAuBP,GAC9BL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACH,GAA8B,MAA1BA,EAAMY,SAASsB,OAAgB,MAAO,GAC1CvB,GAAiBX,KAItB,SAASoC,GAAalB,GACzB,OAAOC,KACFC,KAAK,aAAcF,GACnBG,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAASqC,GAAWC,EAAaN,GACpC,IAAIN,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACFoB,IAAID,EAAKZ,GACTL,KAAK,SAAAC,GACF,OAAOA,IAEVC,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAASwC,GAAYF,EAAaN,EAAezG,GACpD,IAAImG,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACFC,KAAKkB,EAAK/G,EAAMmG,GAChBL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAASyC,GACZH,EACAN,EACAzG,EACAmH,EACAvC,EACAwC,GAEA,IAAIjB,EAAS,CACTC,QAAS,CACLC,cAAa,UAAAC,OAAYG,GACzBY,eAAgB,uBAEpBzC,cACA0C,iBAAkBH,GAGtB,OAAOvB,KACFC,KAAKkB,EAAK/G,EAAMmG,GAChBL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACCmB,KAAM2B,SAAS9C,GACf2C,IAEAhC,GAAiBX,KAK1B,SAAS+C,GAAWT,EAAaN,EAAezG,GACnD,IAAImG,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACF6B,IAAIV,EAAK/G,EAAMmG,GACfL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACHW,GAAiBX,KAItB,SAASiD,GAAcX,EAAaN,GACvC,IAAIN,EAAS,CACTC,QAAS,CAAEC,cAAa,UAAAC,OAAYG,KAExC,OAAOb,KACFc,OAAOK,EAAKZ,GACZL,KAAK,SAAAC,GACF,OAAOA,EAAK/F,OAEfgG,MAAM,SAAAvB,GACHW,GAAiBX,2FCjKtB,SAASkD,GAAaC,EAAiBC,EAAkBC,GAC5D,IAAMC,EAAWC,SAASC,cAAc,KACxCF,EAASG,MAAMC,QAAU,OACzBJ,EAASK,KAAOR,EAChBG,EAASM,aAAa,WAAYR,GACD,qBAAtBE,EAASO,UAChBP,EAASM,aAAa,SAAU,UAEpCL,SAASO,KAAKC,YAAYT,GAC1BA,EAASU,QACTT,SAASO,KAAKG,YAAYX,GAC1BY,WAAW,WACPC,OAAOC,IAAIC,gBAAgBlB,GACvBE,GAASA,KACd,KAGA,SAASiB,GAAU3G,EAAWC,EAAW2G,GAC5C,IAAMC,EAAOC,KAAKC,IAAIH,GAChBI,EAAOF,KAAKG,IAAIL,GAItB,MAAO,CAAEM,GAHEF,EAAOhH,EAAI6G,EAAO5G,EAGhBkH,GAFFN,EAAO7G,EAAIgH,EAAO/G,GAK1B,SAASmH,GAAyBC,GACrC,IAAIC,EAAsBC,EACtBC,EAAaH,EAAeG,YAAc,EAC1CC,EAAcJ,EAAeI,aAAe,EAiBhD,OAfKJ,EAAerI,KAA8B,UAAvBqI,EAAerI,IAGR,WAAvBqI,EAAerI,KACtBsI,EAAwBD,EAAe9J,OAASiK,EAAcC,EAC9DF,EAAwBF,EAAe9J,SAGvC+J,EAAuBD,EAAe/J,MACtCiK,EAAwBF,EAAe9J,SARvC+J,EAAuBD,EAAe/J,MACtCiK,EAAyBF,EAAe/J,MAAQmK,EAAeD,GAa5D,CAAElK,MAHTgK,GAAwBD,EAAe9G,MAAQ,EAGThD,OAFtCgK,GAAyBF,EAAe9G,MAAQ,GAK7C,IAAMmH,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAE,OAAAC,GAAA,EAAAD,CAAAE,KAAAJ,GAAAE,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAF,GAAAO,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAAF,EAAAC,GAAAD,EAAA,CAAAE,OAAAQ,GAAA,EAAAR,CAA+B1E,QAExB,SAASmF,GAAYhG,GACpBA,aAAiBqF,IAIrBY,KAAWC,UAAUlG,GAAOqB,KAAK,SAAA8E,GAC7B,IAAIC,EAAmBD,EAClBE,IAAI,SAASC,GACV,OAAOA,EAAGC,aAEbC,KAAK,MAGFC,EAAQ,GACRC,KACAD,EAAQE,KAAKC,UAAUF,GAAMG,aAEjC1F,KAAMC,KAAK,eAAgB,CAAEjI,QAAS6G,EAAM7G,QAAS2N,MAAOV,EAAkBK,gBCiH9EM,kLCnLZ,IAEaC,GAAyB,SAClClF,EACA/H,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGA,IAAKwJ,OAAO8C,OACR,MAAM,IAAIpG,MAAM,mFAGpB,OAAO,IAAIqG,QAAQ,SAAC7D,EAAS8D,GACzB,IACI,IAAMC,EAAS,IAAIH,OAAO,iBAC1BG,EAAOC,iBAAiB,UAAW,SAAAC,GAC/B,GAAwB,gBAApBA,EAAM/L,KAAKvC,KAEXkK,GADgBoE,EAAM/L,KAAK+G,IACL,WAAYe,QAC/B,GAAwB,kBAApBiE,EAAM/L,KAAKvC,KAA0B,CAC5C,IAAMgH,EAAQsH,EAAM/L,KAAKyE,MACzBmH,EAAO,CAAEhO,QAAS,0BAA4BmO,EAAM/L,KAAKpC,QAAS2N,MAAO9G,EAAM8G,WAIvFM,EAAOG,YAAY,CACfvO,KAAM,cACN8I,cACA/H,iBACAC,eACAC,YACAC,aACAC,kBACAC,kBACAC,gBACAC,kBACAC,sBACAC,sBACAC,wBACAC,uBACAC,4BAEN,MAAO6M,GACLL,EAAOK,OAKnB,SAASC,GAAUnF,GACf,OAAO,IAAI4E,QAAQ,SAAC7D,EAAS8D,GACzB,IAAMO,EAAM,IAAIC,MAChBD,EAAIE,OAAS,kBAAMvE,EAAQqE,IAC3BA,EAAIG,QAAU,kBAAMV,KAEpBO,EAAII,IAAMxF,IAIlB,SAASyF,GAAwBC,EAAmCC,EAA0BC,GAC1FF,EAAQG,OACR,IAAIxK,GAAKsK,EAAYtK,EAAIsK,EAAYhN,MAAQ,GAAKiN,EAC9CtK,GAAKqK,EAAYrK,EAAIqK,EAAY/M,OAAS,GAAKgN,EACnDF,EAAQI,UAAUzK,EAAGC,GACrBoK,EAAQK,OAAOJ,EAAY5J,OAC3B,IAAIiK,GAAOL,EAAYhN,MAAQ,EAAKiN,EAChCK,GAAON,EAAY/M,OAAS,EAAKgN,EACrCF,EAAQI,UAAUE,EAAIC,GAClBN,EAAYpL,OACZmL,EAAQQ,KAAK,EAAG,EAAGP,EAAYhN,MAAQiN,EAAOD,EAAY/M,OAASgN,GACnEF,EAAQS,QAIhB,SAASC,GAAuBnN,GAC5B,IAAMoN,EAAM,IAAIC,cAAYrN,GAC5B,KAAM,UAAWoN,EAAIE,SAAW,WAAYF,EAAIE,MAAO,CACnD,IAAMC,EAAUH,EAAIE,KAAJ,QAAoBE,MAAM,KAC1CJ,EAAIE,KAAJ,MAAoBC,EAAQ,GAC5BH,EAAIE,KAAJ,OAAqBC,EAAQ,GAGjC,OAAOE,KAAKL,EAAIpC,SAAS,CAAE0C,YAAY,SAGrCC,cASF,SAAAA,IAAc,IAAAC,EAAA1D,KAEV,GAFUF,OAAAC,GAAA,EAAAD,CAAAE,KAAAyD,GAAAzD,KARd2D,WAKM,GAGQ3D,KAFd2B,YAEc,GAELjD,OAAO8C,OACR,MAAM,IAAIpG,MAAM,mFAGpB4E,KAAK2B,OAAS,IAAIH,OAAO,iBACzBxB,KAAK2B,OAAOC,iBAAiB,UAAW,SAAAC,GACZ,iBAApBA,EAAM/L,KAAKvC,MAA+C,kBAApBsO,EAAM/L,KAAKvC,MACjDmQ,EAAKC,WAAWC,KAAK/B,EAAM/L,0GAMnC+N,EACA7L,EACA8L,EACA1O,EACA2O,EACAC,0GAEAhE,KAAK2B,OAAOG,YAAY,CACpBvO,KAAM,eACNsQ,cACA7L,SACA+L,WAGAE,EAAkBnG,SAASC,cAAc,UAEvCmG,EAAkBlF,KAAKmF,MAAM/O,GAAOyO,EAAYrO,MAAQ,KAAO,MAC/D4O,EAAmBpF,KAAKmF,MAAM/O,GAAOyO,EAAYpO,OAAS,KAAO,MAEvEwO,EAAgBzO,MAAQ0O,EACxBD,EAAgBxO,OAAS2O,EAET,QADZ7B,EAAU0B,EAAgBI,WAAW,6BAE/B,IAAIjJ,MAAM,mFAEpBmH,EAAQ+B,UAAY,QACpB/B,EAAQgC,SAAS,EAAG,EAAGL,EAAiBE,GAEpCI,GAAU,EAER/B,EAAQrN,EAAM,gBAEZoP,gCACGxE,KAAK2D,WAAWc,OAAS,yBACxBC,EAAO1E,KAAK2D,WAAWgB,WAEfD,EAAKlC,iCACPA,EAAckC,EAAKlC,aAETjP,OAAS+N,GAAUsD,0BAC/BtC,GAAwBC,EAASC,EAAaC,GAC1CD,EAAYqC,OAASrC,EAAYxJ,QACjCuJ,EAAQ+B,UAAY9B,EAAYxJ,MAChCuJ,EAAQsC,MAAMrC,EAAYqC,MAAQpC,EAAOD,EAAYqC,MAAQpC,GACzD5W,EAAI,IAAIiZ,OAAOtC,EAAY1M,MAC/ByM,EAAQwC,KAAKlZ,IAEjB0W,EAAQyC,qCACDxC,EAAYjP,OAAS+N,GAAU2D,OAASzC,EAAYjP,OAAS+N,GAAU4D,wBAC9E5C,GAAwBC,EAASC,EAAaC,QAEvB0C,IAAnB3C,EAAYlK,SAAuC6M,IAAnB3C,EAAYjK,IAC5CgK,EAAQI,UAAUH,EAAYlK,GAAKmK,EAAOD,EAAYjK,GAAKkK,GAE3D2C,EAAM9F,GAAyBkD,GAE/B6C,SACA7C,EAAYjP,OAAS+N,GAAU4D,4BAC3BI,EAAUrC,GAAuBsC,KAAK/C,EAAY1M,iBACxCkM,GAlLpB,6BAkL8CsD,WAAxCD,kDAEiB3J,KAAMoB,IAAI0F,EAAY1M,iBACF,mBADjC+F,UACKK,QAAQ,wCACToJ,EAAUrC,GAAuBpH,EAAK/F,gBAC5BkM,GAvLxB,6BAuLkDsD,WAAxCD,kDAEcrD,GAAUQ,EAAY1M,cAApCuP,iBAIR9C,EAAQiD,UAAUH,EAAO,EAAG,EAAGD,EAAI5P,MAAQiN,EAAO2C,EAAI3P,OAASgN,GAE/DF,EAAQyC,kCACDxC,EAAYjP,OAAS+N,GAAUmE,YACtCnD,GAAwBC,EAASC,EAAaC,GACvCD,EAAYjP,OAAS+N,GAAUoE,WACtCnD,EAAQyC,qBAIZN,GAAyB,SAAjBA,EAAKiB,UACbnB,GAAU,IAGVE,GAAsB,kBAAdA,EAAKnR,OAA4BmR,EAAKnK,6BAC1CA,EAAQa,MAAM,2BAA6BsJ,EAAKnK,MAAM7G,UACpD2N,MAAQqD,EAAKnK,MAAM8G,MACnB9G,qCAGTiK,oCACKoB,YAAM,qCAKpBC,GADIA,EAAU5B,EAAgB6B,aACZC,MAAM,yBAAyBtB,QACjDT,EAAc3J,KAAd,GAAA+B,OACO0H,EAAQhD,WAAWkF,SAAS,EAAG,KADtC,KAAA5J,OAC8CpE,EAD9C,KAAAoE,OACwD2H,EAAS,OAAS,QAD1E,QAEI8B,EACA,CAAEjM,QAAQ,+LAICyC,EAAqBrI,EAAgBoB,EAAa6Q,uGAChDrJ,GAAW,cAAgB5I,EAAQqI,aAAhDR,0DAGEqK,EAAerK,EAAK/F,KAAKnJ,uCACLuZ,4EAAfC,oBACDnG,KAAKoG,gBAAgB/J,EAAa8J,EAAY1S,GAAI2B,EAAK6Q,8dAI/C5J,EAAqBgK,EAAmBjR,EAAa6Q,+GACpDrJ,GAAW,iBAAmByJ,EAAWhK,aAAtDR,6DAGFgI,EAA2B3C,KAAKoF,MAAMzK,EAAK/F,KAAKA,MAEhDkO,EAAgBiC,EAAIM,OAAO1K,EAAK/F,KAAKW,OAErCoN,EAAY2C,4DACoB3C,EAAY2C,YAAYC,kHAA5C3C,OAAS9L,iBACXgI,KAAK0G,aAAa7C,EAAa7L,EAAQ8L,EAAS1O,GAAK,EAAO4O,eAC9DH,EAAYjM,6CACNoI,KAAK0G,aAAa7C,EAAa7L,EAAQ8L,EAAS1O,GAAK,EAAM4O,yZAOxE2C,GAAsB,eAAAC,EAAA9G,OAAA+G,EAAA,EAAA/G,CAAAgH,EAAAhI,EAAAiI,KAAG,SAAAC,EAClC3K,EACA/H,EACAC,EACAa,GAJkC,IAAA6R,EAAAhB,EAAAiB,EAAA,OAAAJ,EAAAhI,EAAAqI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAM5BL,EAAe,IAAIxD,GAErBwC,EAAM,IAAIsB,KAES,UAAnBjT,EAV8B,CAAA8S,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAWxBL,EAAaO,aAAanL,EAAa9H,EAAca,EAAK6Q,GAXlC,OAAAmB,EAAAE,KAAA,mBAYJ,aAAnBhT,EAZuB,CAAA8S,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAaxBL,EAAab,gBAAgB/J,EAAa9H,EAAca,EAAK6Q,GAbrC,eAAAmB,EAAAE,KAAA,GAgBjBrB,EAAIwB,cAAc,CAAElU,KAAM,SAhBT,QAgB9B2T,EAhB8BE,EAAAM,KAkBlCjK,GADUiB,OAAOC,IAAIgJ,gBAAgBT,GACnB,aAlBgB,yBAAAE,EAAAQ,SAAAZ,MAAH,gBAAAa,EAAAC,EAAAC,EAAAC,GAAA,OAAApB,EAAAzG,MAAAH,KAAAI,YAAA,YAqBpB6H,qFAAf,SAAAC,EAAmCzR,EAAc4F,GAAjD,IAAAR,EAAAsM,EAAA,OAAArB,EAAAhI,EAAAqI,KAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,cAAAc,EAAAd,KAAA,EACuB1K,GAAW,eAAiBnG,EAAM4F,GADzD,UACUR,EADVuM,EAAAV,KAAA,CAAAU,EAAAd,KAAA,eAAAc,EAAAC,OAAA,cAGelD,GAHf,WAMQtJ,EAAK/F,KAAKwS,SANlB,CAAAF,EAAAd,KAAA,YAQ4B,gBADhBa,EAAOjH,KAAKoF,MAAMzK,EAAK/F,KAAKwS,WACvBC,OARjB,CAAAH,EAAAd,KAAA,gBAAAc,EAAAC,OAAA,SASmB,qBATnB,WAUmC,YAAhBF,EAAKI,OAVxB,CAAAH,EAAAd,KAAA,gBAAAc,EAAAC,OAAA,SAWmB,iBAXnB,WAYmC,eAAhBF,EAAKI,SAA2BJ,EAAKK,YAZxD,CAAAJ,EAAAd,KAAA,gBAAAc,EAAAC,OAAA,SAamBF,EAAKK,aAbxB,eAAAJ,EAAAC,OAAA,cAiBWlD,GAjBX,yBAAAiD,EAAAR,SAAAM,6BAoBO,IAAMO,GAAwB,eAAAC,EAAA5I,OAAA+G,EAAA,EAAA/G,CAAAgH,EAAAhI,EAAAiI,KAAG,SAAA4B,EAAOtM,EAAqBrI,GAA5B,IAAA6H,EAAA+M,EAAA1C,EAAA2C,EAAAC,EAAAC,EAAAC,EAAAC,EAAA9C,EAAA+C,EAAArF,EAAA7L,EAAAmR,EAAAlR,EAAAmR,EAAA3S,EAAA+R,EAAAa,EAAAC,EAAAC,EAAAC,EAAA,OAAA1C,EAAAhI,EAAAqI,KAAA,SAAAsC,GAAA,cAAAA,EAAApC,KAAAoC,EAAAnC,MAAA,cAAAmC,EAAAnC,KAAA,EACnB1K,GAAW,cAAgB5I,EAAQqI,GADhB,UAChCR,EADgC4N,EAAA/B,KAAA,CAAA+B,EAAAnC,KAAA,eAAAmC,EAAApB,OAAA,SAElB,IAFkB,OAIhCO,EAAe,IAAIc,IAEjBxD,EAAerK,EAAK/F,KAAKnJ,SANKkc,GAAA,EAAAC,GAAA,EAAAC,OAAA5D,EAAAsE,EAAApC,KAAA,GAAA2B,EAOV9C,EAPUyD,OAAAC,YAAA,WAAAf,GAAAI,EAAAD,EAAA1B,QAAAuC,KAAA,CAAAJ,EAAAnC,KAAA,gBAOzBnB,EAPyB8C,EAAAa,MAAAL,EAAAnC,KAAA,GAQb1K,GAAW,iBAAmBuJ,EAAY1S,GAAI4I,GARjC,WAQ1BR,EAR0B4N,EAAA/B,KAAA,CAAA+B,EAAAnC,KAAA,gBAAAmC,EAAApB,OAAA,uBAa1BxE,EAA2B3C,KAAKoF,MAAMzK,EAAK/F,KAAKA,MAbtB2T,EAAAM,GAAAjD,EAAAhI,EAAAkL,KAcXnG,EAAYoG,QAdD,YAAAR,EAAAS,GAAAT,EAAAM,MAAAF,KAAA,CAAAJ,EAAAnC,KAAA,SAcrBtP,EAdqByR,EAAAS,GAAAJ,MAetBX,EAAatF,EAAYoG,OAAOjS,GAfVyR,EAAAU,GAAArD,EAAAhI,EAAAkL,KAgBNb,GAhBM,YAAAM,EAAAW,GAAAX,EAAAU,MAAAN,KAAA,CAAAJ,EAAAnC,KAAA,YAgBjBrP,EAhBiBwR,EAAAW,GAAAN,MAkBD,WADjBV,EAAYD,EAAWlR,IACf1E,WAAsC4R,IAAlBiE,EAAUvM,IAlBpB,CAAA4M,EAAAnC,KAAA,gBAmBhB7Q,EAAO2S,EAAUvM,IAAIwN,QAAQ,mBAAoB,IAnBjCZ,EAAAnC,KAAA,GAoBIW,GAAoBxR,EAAM4F,GApB9B,SAoBhBmM,EApBgBiB,EAAA/B,OAsBhBkB,EAAa0B,IAAI9B,GAtBDiB,EAAAnC,KAAA,oBAwBM,SAAnB8B,EAAU7V,KAxBG,CAAAkW,EAAAnC,KAAA,SAyBhB+B,EAAQD,EAAUU,MAAMS,QAAQ,oBAzBhB,YA0BF,IAAXlB,EA1Ba,CAAAI,EAAAnC,KAAA,gBA2BZgC,EAAMF,EAAUU,MAAMS,QAAQ,IAAKlB,GACnC5S,EAAO2S,EAAUU,MAAM/D,MAAMsD,EAAOC,GAAKe,QAAQ,mBAAoB,IAEzE/O,QAAQC,IAAI9E,GA9BIgT,EAAAnC,KAAA,GAgCQW,GAAoBxR,EAAM4F,GAhClC,SAgCZmM,EAhCYiB,EAAA/B,OAkCZkB,EAAa0B,IAAI9B,GAGrBa,EAAQD,EAAUU,MAAMS,QAAQ,mBAAoBjB,GArCpCG,EAAAnC,KAAA,iBAAAmC,EAAAnC,KAAA,iBAAAmC,EAAAnC,KAAA,iBAAAuB,GAAA,EAAAY,EAAAnC,KAAA,iBAAAmC,EAAAnC,KAAA,iBAAAmC,EAAApC,KAAA,GAAAoC,EAAAe,GAAAf,EAAA,UAAAX,GAAA,EAAAC,EAAAU,EAAAe,GAAA,QAAAf,EAAApC,KAAA,GAAAoC,EAAApC,KAAA,GAAAwB,GAAA,MAAAG,EAAAyB,QAAAzB,EAAAyB,SAAA,WAAAhB,EAAApC,KAAA,IAAAyB,EAAA,CAAAW,EAAAnC,KAAA,eAAAyB,EAAA,eAAAU,EAAAiB,OAAA,mBAAAjB,EAAAiB,OAAA,mBAAAjB,EAAApB,OAAA,SA4C7BsC,MAAMC,KAAKhC,IA5CkB,yBAAAa,EAAA7B,SAAAe,EAAA,qCAAH,gBAAAkC,EAAAC,GAAA,OAAApC,EAAAvI,MAAAH,KAAAI,YAAA,GC7S9B,SAAS2K,GAAWjV,GACvBkV,aAAaC,QAAQ,cAAenV,EAAKuG,aACzC2O,aAAaC,QAAQ,eAAgBnV,EAAKiG,cAGvC,SAASmP,GAAaC,GACzBH,aAAaC,QAAQ,WAAYE,GAG9B,SAASC,GAAgB/O,GAC5B2O,aAAaC,QAAQ,cAAe5O,GAGjC,SAASgP,KACZL,aAAaM,WAAW,eACxBN,aAAaM,WAAW,gBAOrB,SAASC,KAEZ,OADYP,aAAaQ,QAAQ,gBAAkB,KAIhD,SAASC,KAEZ,OADYT,aAAaQ,QAAQ,iBAAmB,KAIjD,SAASE,KAEZ,OADeV,aAAaQ,QAAQ,aAAe,sCCvB1CG,GAA8B,SAAC7V,GACxC,GAAM,iBAAkBA,EAAxB,CAIA,IAAI8V,EAA2B,IAAIlC,IACnCkC,EAAYtB,INfY,UMSqD,IAAAuB,GAAA,EAAAC,GAAA,EAAAC,OAAA5G,EAAA,IAO7E,QAAA6G,EAAAC,EAAsBnW,EAAKoW,aAA3BvC,OAAAC,cAAAiC,GAAAG,EAAAC,EAAA3E,QAAAuC,MAAAgC,GAAA,EAAyC,KAA9B5T,EAA8B+T,EAAAlC,MAC/BqC,EAAQrW,EAAKmU,OAAOnU,EAAK0Q,YAAY,IAAIvO,GAC/C,GAAIkU,GAAwB,SAAfA,EAAM5Y,MAAmB4Y,EAAM5f,WAAY,CACpD,IAAI6f,EAAaD,EAAM5f,WACnB4f,EAAM3f,aAAqC,YAAtB2f,EAAM3f,cAC3B4f,GAAc,IAAMD,EAAM3f,aAG9Bof,EAAYtB,IAAI8B,KAfqD,MAAAC,GAAAP,GAAA,EAAAC,EAAAM,EAAA,YAAAR,GAAA,MAAAI,EAAAxB,QAAAwB,EAAAxB,SAAA,WAAAqB,EAAA,MAAAC,GAyB7E,OA9BwB,SAAC9P,GAAD,OACxB,IAAIwF,QAAQ,SAAC7D,EAAS8D,GAClB4K,KAAQhS,KAARwF,OAAAyM,EAAA,EAAAzM,CAAA,GAAkB7D,EAAlB,CAA0BjQ,OAAQ4R,EAAS4O,SAAU9K,OA4BlD+K,CANwB,CAC3BC,OAAQ,CACJC,SAAS7M,OAAA8M,GAAA,EAAA9M,CAAK6K,MAAMC,KAAKgB,qBC0HpBiB,gBAKAC,gBAIAC,gBAMAC,gBAIAC,gBAoBAC,gBAgCAC,gBAYAC,gBAMAC,gBAUAC,gBAUAC,gBAiBAC,gBAcAC,gBAWAC,gBAKAC,gBAKAC,gBAKAC,gBAWAC,gBAMAC,gBAYAC,gBASAC,gBASAC,gBAmBAC,gBA0BAC,gBAoCAC,gBAoBAC,gBA2BAC,gBAiBAC,gBAYAC,gBAmIAC,gBAwBAC,gBAiCAC,gBAkCAC,gBA+BAC,gBAuDAC,gBAwCAC,gBAqBAC,IAnuBV,SAAUpC,GAAS9K,GAAnB,OAAA+E,EAAAhI,EAAAqI,KAAA,SAAA+H,GAAA,cAAAA,EAAA7H,KAAA6H,EAAA5H,MAAA,OACH,OADG4H,EAAA5H,KAAA,EACG/J,YAAIjK,GAAe,QAASyO,EAAErO,UADjC,OAEH,OAFGwb,EAAA5H,KAAA,EAEG6H,YAAK5O,GAAawB,GAFrB,wBAAAmN,EAAAtH,SAAAwH,IAKA,SAAUtC,GAAQpZ,GAAlB,OAAAoT,EAAAhI,EAAAqI,KAAA,SAAAkI,GAAA,cAAAA,EAAAhI,KAAAgI,EAAA/H,MAAA,OACH,OADG+H,EAAA/H,KAAA,EACG/J,YAAIjK,GAAe,OAAQI,IAD9B,wBAAA2b,EAAAzH,SAAA0H,IAIA,SAAUvC,GAAYvZ,GAAtB,IAAAE,EAAA,OAAAoT,EAAAhI,EAAAqI,KAAA,SAAAoI,GAAA,cAAAA,EAAAlI,KAAAkI,EAAAjI,MAAA,OAEH,OADM5T,EAAUJ,GAAe,WAAYE,EAAMA,GAD9C+b,EAAAjI,KAAA,EAEG/J,YAAI7J,GAFP,cAAA6b,EAAAlH,OAAA,SAGI3U,EAAQA,QAAQD,IAHpB,wBAAA8b,EAAA3H,SAAA4H,IAMA,SAAUxC,GAAayC,GAAvB,OAAA3I,EAAAhI,EAAAqI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACH,OADGF,EAAAE,KAAA,EACG/J,YAAI,CAAEhK,KAAM9F,EAAcgiB,cAD7B,wBAAArI,EAAAQ,SAAA8H,IAIA,SAAUzC,GAAqB0C,GAA/B,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAAsC,GAAA,cAAAA,EAAApC,KAAAoC,EAAAnC,MAAA,UACyB,aAAxBqI,EAAOjc,QAAQH,KADhB,CAAAkW,EAAAnC,KAAA,eAAAmC,EAAApB,OAAA,iBAGH,OAHGoB,EAAAnC,KAAA,EAGG6H,YAAKvJ,IAAO,KAHf,OAIH,OAJG6D,EAAAnC,KAAA,EAIG/J,YAAI,CAAEhK,KAAM9F,EAAcgiB,UAAWE,EAAOjc,QAAQD,KAJvD,wBAAAgW,EAAA7B,SAAAgI,IAUA,SAASC,GAActT,GAC1B,IAGI,OAFgBuT,IAA2BvT,GACrBwT,KAAM,IAAIC,MAAOC,UAAY,IAAO,EAE5D,MAAOlO,GACL,OAAO,GAIR,SAAUmL,GAASgD,GAAnB,IAAAC,EAAA5T,EAAAP,EAAAoU,EAAAC,EAAAjQ,UAAA,OAAA0G,EAAAhI,EAAAqI,KAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,OACW,OADqC6I,EAAhDE,EAAA5L,OAAA,QAAAU,IAAAkL,EAAA,IAAAA,EAAA,GAAAjI,EAAAd,KAAA,EACiB6H,YAAK5D,IADtB,YACGhP,EADH6L,EAAAV,OAEWyI,EAFX,CAAA/H,EAAAd,KAAA,SAGoB,OAHpBc,EAAAd,KAAA,EAG0B6H,YAAKU,GAAetT,GAH9C,WAAA6L,EAAAV,KAAA,CAAAU,EAAAd,KAAA,gBAAAc,EAAAC,OAAA,SAIwB9L,GAJxB,QAOuB,OAPvB6L,EAAAd,KAAA,GAO6B6H,YAAK1D,IAPlC,WAOGzP,EAPHoM,EAAAV,KAAA,CAAAU,EAAAd,KAAA,SASC,OATDc,EAAAd,KAAA,GASO/J,YAAI,CAAEhK,KAAM1F,IATnB,YAUKqiB,EAVL,CAAA9H,EAAAd,KAAA,eAWW,IAAI1H,GAAU,uBAXzB,eAAAwI,EAAAC,OAAA,SAaQ,MAbR,QAgBuB,OAhBvBD,EAAAd,KAAA,GAgB6B6H,YAAKU,GAAe7T,GAhBjD,WAAAoM,EAAAV,KAAA,CAAAU,EAAAd,KAAA,SAkBC,OAlBDc,EAAAd,KAAA,GAkBO/J,YAAI,CAAEhK,KAAM1F,IAlBnB,YAmBKqiB,EAnBL,CAAA9H,EAAAd,KAAA,eAoBW,IAAI1H,GAAU,uBApBzB,eAAAwI,EAAAC,OAAA,SAsBQ,MAtBR,QAyBc,OAzBdD,EAAAd,KAAA,GAyBoB6H,YAAKpT,GAAcC,GAzBvC,QA0BH,OADMoU,EAzBHhI,EAAAV,KAAAU,EAAAd,KAAA,GA0BG6H,YAAK/D,GAAiBgF,GA1BzB,eAAAhI,EAAAC,OAAA,SA2BI+H,GA3BJ,yBAAAhI,EAAAR,SAAA0I,IAgCA,SAAUnD,GAAmBwC,GAA7B,IAAA7Z,EAAA,OAAAgR,EAAAhI,EAAAqI,KAAA,SAAAoJ,GAAA,cAAAA,EAAAlJ,KAAAkJ,EAAAjJ,MAAA,OAEc,OAFdiJ,EAAAlJ,KAAA,EAAAkJ,EAAAjJ,KAAA,EAEoB6H,YAAK3T,GAAWmU,EAAOlU,OAF3C,OAGC,OADM3F,EAFPya,EAAA7I,KAAA6I,EAAAjJ,KAAA,EAGO6H,YAAKpE,GAAYjV,GAHxB,OAIC,OAJDya,EAAAjJ,KAAA,EAIO6H,YAAKjE,GAAcyE,EAAOlU,MAAM0P,UAJvC,OAKC,OALDoF,EAAAjJ,KAAA,GAKO/J,YAAI,CAAEhK,KAAM5F,EAAewd,SAAUwE,EAAOlU,MAAM0P,WALzD,QAAAoF,EAAAjJ,KAAA,iBAOC,OAPDiJ,EAAAlJ,KAAA,GAAAkJ,EAAAxG,GAAAwG,EAAA,SAAAA,EAAAjJ,KAAA,GAOO/J,YAAI,CAAEhK,KAAM3F,IAPnB,QAQC,OARD2iB,EAAAjJ,KAAA,GAQO6H,YAAKtC,GAAD0D,EAAAxG,IARX,yBAAAwG,EAAA3I,SAAA4I,GAAA,eAYA,SAAUpD,KAAV,OAAAtG,EAAAhI,EAAAqI,KAAA,SAAAsJ,GAAA,cAAAA,EAAApJ,KAAAoJ,EAAAnJ,MAAA,OACH,OADGmJ,EAAAnJ,KAAA,EACG/J,YAAI,CAAEhK,KAAM/E,IADf,wBAAAiiB,EAAA7I,SAAA8I,IAMA,SAAUrD,KAAV,IAAA9Q,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAAwJ,GAAA,cAAAA,EAAAtJ,KAAAsJ,EAAArJ,MAAA,OACW,OADXqJ,EAAArJ,KAAA,EACiB6H,YAAK5D,IADtB,YACGhP,EADHoU,EAAAjJ,MAAA,CAAAiJ,EAAArJ,KAAA,SAGoB,OAHpBqJ,EAAArJ,KAAA,EAG0B6H,YAAKU,GAAetT,GAH9C,WAAAoU,EAAAjJ,KAAA,CAAAiJ,EAAArJ,KAAA,SAKK,OALLqJ,EAAArJ,KAAA,GAKW6H,YAAK7S,GAAmBC,GALnC,yBAAAoU,EAAA/I,SAAAgJ,IAUA,SAAUtD,KAAV,IAAAtR,EAAA,OAAA8K,EAAAhI,EAAAqI,KAAA,SAAA0J,GAAA,cAAAA,EAAAxJ,KAAAwJ,EAAAvJ,MAAA,OACuB,OADvBuJ,EAAAvJ,KAAA,EAC6B6H,YAAK1D,IADlC,YACGzP,EADH6U,EAAAnJ,MAAA,CAAAmJ,EAAAvJ,KAAA,SAG2B,OAH3BuJ,EAAAvJ,KAAA,EAGiC6H,YAAKU,GAAe7T,GAHrD,WAAA6U,EAAAnJ,KAAA,CAAAmJ,EAAAvJ,KAAA,SAKK,OALLuJ,EAAAvJ,KAAA,GAKW6H,YAAKzS,GAAoBV,GALpC,yBAAA6U,EAAAjJ,SAAAkJ,IAUA,SAAUvD,KAAV,OAAAzG,EAAAhI,EAAAqI,KAAA,SAAA4J,GAAA,cAAAA,EAAA1J,KAAA0J,EAAAzJ,MAAA,OAEC,OAFDyJ,EAAA1J,KAAA,EAAA0J,EAAAzJ,KAAA,EAEO6H,YAAK9B,IAFZ,OAGC,OAHD0D,EAAAzJ,KAAA,EAGO6H,YAAK7B,IAHZ,OAIC,OAJDyD,EAAAzJ,KAAA,EAIO6H,YAAK9D,IAJZ,OAMC,OAND0F,EAAAzJ,KAAA,EAMO/J,YAAI,CAAEhK,KAAMxD,KANnB,OAOC,OAPDghB,EAAAzJ,KAAA,GAOO/J,YAAI,CAAEhK,KAAM7E,IAPnB,QAQC,OARDqiB,EAAAzJ,KAAA,GAQO/J,YAAI,CAAEhK,KAAMxF,IARnB,QAAAgjB,EAAAzJ,KAAA,iBAUC,OAVDyJ,EAAA1J,KAAA,GAAA0J,EAAAhH,GAAAgH,EAAA,SAAAA,EAAAzJ,KAAA,GAUO/J,YAAI,CAAEhK,KAAMzF,IAVnB,QAWC,OAXDijB,EAAAzJ,KAAA,GAWO6H,YAAKtC,GAADkE,EAAAhH,IAXX,yBAAAgH,EAAAnJ,SAAAoJ,GAAA,eAiBA,SAAUxD,GAAoBmC,GAA9B,IAAA7Z,EAAA,OAAAgR,EAAAhI,EAAAqI,KAAA,SAAA8J,GAAA,cAAAA,EAAA5J,KAAA4J,EAAA3J,MAAA,OAEc,OAFd2J,EAAA5J,KAAA,EAAA4J,EAAA3J,KAAA,EAEoB6H,YAAKxS,GAAcgT,EAAOlU,OAF9C,OAGC,OADM3F,EAFPmb,EAAAvJ,KAAAuJ,EAAA3J,KAAA,EAGO6H,YAAKpE,GAAYjV,GAHxB,OAIC,OAJDmb,EAAA3J,KAAA,EAIO6H,YAAKjE,GAAcyE,EAAOlU,MAAM0P,UAJvC,OAKC,OALD8F,EAAA3J,KAAA,GAKO/J,YAAI,CAAEhK,KAAMtF,IALnB,QAMC,OANDgjB,EAAA3J,KAAA,GAMO/J,YAAI,CAAEhK,KAAM5F,EAAewd,SAAUwE,EAAOlU,MAAM0P,WANzD,QAAA8F,EAAA3J,KAAA,iBAQC,OARD2J,EAAA5J,KAAA,GAAA4J,EAAAlH,GAAAkH,EAAA,SAAAA,EAAA3J,KAAA,GAQO/J,YAAI,CAAEhK,KAAMrF,IARnB,QASC,OATD+iB,EAAA3J,KAAA,GASO6H,YAAKtC,GAADoE,EAAAlH,IATX,yBAAAkH,EAAArJ,SAAAsJ,GAAA,eAcA,SAAUzD,KAAV,IAAAtC,EAAA,OAAArE,EAAAhI,EAAAqI,KAAA,SAAAgK,GAAA,cAAAA,EAAA9J,KAAA8J,EAAA7J,MAAA,OAEa,OAFb6J,EAAA9J,KAAA,EAAA8J,EAAA7J,KAAA,EAEmB6H,YAAKjC,IAAU,GAFlC,WAAAiE,EAAAzJ,KAAA,CAAAyJ,EAAA7J,KAAA,SAIsB,OAJtB6J,EAAA7J,KAAA,EAI4B6H,YAAKzD,IAJjC,OAKK,OADMP,EAJXgG,EAAAzJ,KAAAyJ,EAAA7J,KAAA,GAKW/J,YAAI,CAAEhK,KAAM5F,EAAewd,aALtC,QAAAgG,EAAA7J,KAAA,iBAAA6J,EAAA9J,KAAA,GAAA8J,EAAApH,GAAAoH,EAAA,kCAAAA,EAAAvJ,SAAAwJ,GAAA,eAWA,SAAU1D,GAAqB7Q,GAA/B,IAAAN,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAAkK,GAAA,cAAAA,EAAAhK,KAAAgK,EAAA/J,MAAA,OACW,OADX+J,EAAA/J,KAAA,EACiB6H,YAAKjC,IAAU,GADhC,OAEI,OADD3Q,EADH8U,EAAA3J,KAAA2J,EAAA/J,KAAA,EAEU6H,YAAKvS,GAAYC,EAAKN,GAFhC,cAAA8U,EAAAhJ,OAAA,SAAAgJ,EAAA3J,MAAA,wBAAA2J,EAAAzJ,SAAA0J,IAKA,SAAU3D,GAAsB9Q,EAAa/G,GAA7C,IAAAyG,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAAoK,GAAA,cAAAA,EAAAlK,KAAAkK,EAAAjK,MAAA,OACW,OADXiK,EAAAjK,KAAA,EACiB6H,YAAKjC,IAAU,GADhC,OAEI,OADD3Q,EADHgV,EAAA7J,KAAA6J,EAAAjK,KAAA,EAEU6H,YAAKpS,GAAaF,EAAKN,EAAOzG,GAFxC,cAAAyb,EAAAlJ,OAAA,SAAAkJ,EAAA7J,MAAA,wBAAA6J,EAAA3J,SAAA4J,IAKA,SAAU5D,GAAwB/Q,GAAlC,IAAAN,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAAsK,GAAA,cAAAA,EAAApK,KAAAoK,EAAAnK,MAAA,OACW,OADXmK,EAAAnK,KAAA,EACiB6H,YAAKjC,IAAU,GADhC,OAEI,OADD3Q,EADHkV,EAAA/J,KAAA+J,EAAAnK,KAAA,EAEU6H,YAAK3R,GAAeX,EAAKN,GAFnC,cAAAkV,EAAApJ,OAAA,SAAAoJ,EAAA/J,MAAA,wBAAA+J,EAAA7J,SAAA8J,IAKA,SAAU7D,GACbhR,EACA/G,EACAmH,EACAvC,EACAwC,GALG,IAAAX,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAAwK,GAAA,cAAAA,EAAAtK,KAAAsK,EAAArK,MAAA,OAOW,OAPXqK,EAAArK,KAAA,EAOiB6H,YAAKjC,IAAU,GAPhC,OAQI,OADD3Q,EAPHoV,EAAAjK,KAAAiK,EAAArK,KAAA,EAQU6H,YAAKnS,GAA+BH,EAAKN,EAAOzG,EAAMmH,EAAkBvC,EAAawC,GAR/F,cAAAyU,EAAAtJ,OAAA,SAAAsJ,EAAAjK,MAAA,wBAAAiK,EAAA/J,SAAAgK,IAWA,SAAU9D,GAAqBjR,EAAa/G,GAA5C,IAAAyG,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAA0K,GAAA,cAAAA,EAAAxK,KAAAwK,EAAAvK,MAAA,OACW,OADXuK,EAAAvK,KAAA,EACiB6H,YAAKjC,IAAU,GADhC,OAEI,OADD3Q,EADHsV,EAAAnK,KAAAmK,EAAAvK,KAAA,EAEU6H,YAAK7R,GAAYT,EAAKN,EAAOzG,GAFvC,cAAA+b,EAAAxJ,OAAA,SAAAwJ,EAAAnK,MAAA,wBAAAmK,EAAAjK,SAAAkK,IAMA,SAAU/D,GAAwB4B,GAAlC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAA4K,GAAA,cAAAA,EAAA1K,KAAA0K,EAAAzK,MAAA,OAEC,OAFDyK,EAAA1K,KAAA,EAAA0K,EAAAzK,KAAA,EAEO6H,YAAKxB,GAAuB,aAAc,CAAElX,KAAMkZ,EAAO7b,WAFhE,OAGC,OAHDie,EAAAzK,KAAA,EAGO/J,YAAI,CACNhK,KAAMnF,IAJX,OAMC,OAND2jB,EAAAzK,KAAA,EAMO/J,YAAI,CAAEhK,KAAM/E,IANnB,OAAAujB,EAAAzK,KAAA,gBAQC,OARDyK,EAAA1K,KAAA,EAAA0K,EAAAhI,GAAAgI,EAAA,SAAAA,EAAAzK,KAAA,GAQO6H,YAAKtC,GAADkF,EAAAhI,IARX,yBAAAgI,EAAAnK,SAAAoK,GAAA,cAYA,SAAUhE,GAAwB2B,GAAlC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAA8K,GAAA,cAAAA,EAAA5K,KAAA4K,EAAA3K,MAAA,OAEC,OAFD2K,EAAA5K,KAAA,EAAA4K,EAAA3K,KAAA,EAEO6H,YAAKvB,GAAyB,cAAgB+B,EAAO3b,QAF5D,OAGC,OAHDie,EAAA3K,KAAA,EAGO/J,YAAI,CAAEhK,KAAM/E,IAHnB,OAAAyjB,EAAA3K,KAAA,gBAKC,OALD2K,EAAA5K,KAAA,EAAA4K,EAAAlI,GAAAkI,EAAA,SAAAA,EAAA3K,KAAA,GAKO6H,YAAKtC,GAADoF,EAAAlI,IALX,yBAAAkI,EAAArK,SAAAsK,GAAA,cASA,SAAUjE,GAAwB0B,GAAlC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAAgL,GAAA,cAAAA,EAAA9K,KAAA8K,EAAA7K,MAAA,OAEC,OAFD6K,EAAA9K,KAAA,EAAA8K,EAAA7K,KAAA,EAEO6H,YAAKvJ,IAAO,KAFnB,OAGC,OAHDuM,EAAA7K,KAAA,EAGO6H,YAAKrB,GAAsB,cAAgB6B,EAAO3b,OAAQ,CAAEyC,KAAMkZ,EAAOzb,UAHhF,OAAAie,EAAA7K,KAAA,gBAKC,OALD6K,EAAA9K,KAAA,EAAA8K,EAAApI,GAAAoI,EAAA,SAAAA,EAAA7K,KAAA,GAKO6H,YAAKtC,GAADsF,EAAApI,IALX,yBAAAoI,EAAAvK,SAAAwK,GAAA,cASA,SAAUlE,KAAV,IAAArS,EAAAwW,EAAAC,EAAA,OAAAxL,EAAAhI,EAAAqI,KAAA,SAAAoL,GAAA,cAAAA,EAAAlL,KAAAkL,EAAAjL,MAAA,OAEc,OAFdiL,EAAAlL,KAAA,EAAAkL,EAAAjL,KAAA,EAEoB6H,YAAKzB,GAAsB,cAF/C,OAQC,OANM7R,EAFP0W,EAAA7K,KAGO2K,EAASxW,EAAK/F,KAAK0c,MAAM5R,IAAI,SAAC6R,GAAD,OAAiBA,EAAEhf,KAChD6e,EAAOzW,EAAK/F,KAAK0c,MAAME,OAAO,SAACC,EAAsBF,GAEvD,OADAE,EAAIF,EAAEhf,IAAMgf,EACLE,GACR,IAPJJ,EAAAjL,KAAA,EAQO/J,YAAI,CACNhK,KAAMhF,EACN8jB,SACAC,SAXL,OAAAC,EAAAjL,KAAA,iBAcC,OAdDiL,EAAAlL,KAAA,GAAAkL,EAAAxI,GAAAwI,EAAA,SAAAA,EAAAjL,KAAA,GAcO/J,YAAI,CAAEhK,KAAM9E,IAdnB,QAeC,OAfD8jB,EAAAjL,KAAA,GAeO6H,YAAKtC,GAAD0F,EAAAxI,IAfX,yBAAAwI,EAAA3K,SAAAgL,GAAA,eAmBA,SAAUzE,GAAwBwB,GAAlC,IAAA9T,EAAAwW,EAAAC,EAAA,OAAAxL,EAAAhI,EAAAqI,KAAA,SAAA0L,GAAA,cAAAA,EAAAxL,KAAAwL,EAAAvL,MAAA,OAEc,OAFduL,EAAAxL,KAAA,EAAAwL,EAAAvL,KAAA,EAEoB6H,YAAKzB,GAAsB,cAAgBiC,EAAOlc,IAFtE,OAGC,OADMoI,EAFPgX,EAAAnL,KAAAmL,EAAAvL,KAAA,EAGO/J,YAAI,CACNhK,KAAM3E,EACN6E,GAAIkc,EAAOlc,KALhB,WAQKkc,EAAOvb,eARZ,CAAAye,EAAAvL,KAAA,SAcK,OALM+K,EAASxW,EAAK/F,KAAKnJ,SAASiU,IAAI,SAAC6R,GAAD,OAAoBA,EAAEhf,KACtD6e,EAAOzW,EAAK/F,KAAKnJ,SAAS+lB,OAAO,SAACC,EAAyBF,GAE7D,OADAE,EAAIF,EAAEhf,IAAMgf,EACLE,GACR,IAbRE,EAAAvL,KAAA,GAcW/J,YAAI,CACNhK,KAAMzD,GACNuiB,SACAC,SAjBT,QAAAO,EAAAvL,KAAA,iBAqBC,OArBDuL,EAAAxL,KAAA,GAAAwL,EAAA9I,GAAA8I,EAAA,SAAAA,EAAAvL,KAAA,GAqBO/J,YAAI,CAAEhK,KAAM1E,IArBnB,QAsBC,OAtBDgkB,EAAAvL,KAAA,GAsBO6H,YAAKtC,GAADgG,EAAA9I,IAtBX,yBAAA8I,EAAAjL,SAAAkL,GAAA,eA0BA,SAAU1E,GAA2BuB,GAArC,IAAAoD,EAAAxW,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAA6L,GAAA,cAAAA,EAAA3L,KAAA2L,EAAA1L,MAAA,OAGc,OAFbyL,EAAa,KADdC,EAAA3L,KAAA,EAAA2L,EAAA1L,KAAA,EAGoB6H,YAAKpC,GAAa,kBAHtC,OAKe,OAFdgG,EAHDC,EAAAtL,KAAAsL,EAAA1L,KAAA,EAKqB6H,YAAKjC,IAAU,GAAM,GAL1C,OAOC,OAFM3Q,EALPyW,EAAAtL,KAAAsL,EAAA1L,KAAA,GAOO6H,YACF5N,GACAhF,EACAoT,EAAOrb,eACPqb,EAAOpb,aACPob,EAAOnb,UACPmb,EAAOlb,WACPkb,EAAOjb,gBACPib,EAAOhb,gBACPgb,EAAO/a,cACP+a,EAAO9a,gBACP8a,EAAO7a,oBACP6a,EAAO5a,oBACP4a,EAAO3a,sBACP2a,EAAO1a,qBACP0a,EAAOza,yBAtBZ,QAwBC,OAxBD8d,EAAA1L,KAAA,GAwBO6H,YAAKnC,GAAc+F,GAxB1B,QAyBC,OAzBDC,EAAA1L,KAAA,GAyBO6H,YAAKrC,GAAS,kBAzBrB,QA0BC,OA1BDkG,EAAA1L,KAAA,GA0BO/J,YAAI,CACNhK,KAAMxE,IA3BX,QAAAikB,EAAA1L,KAAA,iBA8BC,OA9BD0L,EAAA3L,KAAA,GAAA2L,EAAAjJ,GAAAiJ,EAAA,SAAAA,EAAA1L,KAAA,GA8BO/J,YAAI,CAAEhK,KAAMvE,IA9BnB,WA+BoB,OAAf+jB,EA/BL,CAAAC,EAAA1L,KAAA,SA+B0B,OA/B1B0L,EAAA1L,KAAA,GA+BgC6H,YAAKnC,GAAc+F,GA/BnD,QAgCC,OAhCDC,EAAA1L,KAAA,GAgCO6H,YAAKtC,GAADmG,EAAAjJ,IAhCX,yBAAAiJ,EAAApL,SAAAqL,GAAA,eAoCA,SAAU5E,GAA2BsB,GAArC,IAAAoD,EAAAxW,EAAA,OAAAuK,EAAAhI,EAAAqI,KAAA,SAAA+L,GAAA,cAAAA,EAAA7L,KAAA6L,EAAA5L,MAAA,OAGc,OAFbyL,EAAa,KADdG,EAAA7L,KAAA,EAAA6L,EAAA5L,KAAA,EAGoB6H,YAAKpC,GAAa,kBAHtC,OAKe,OAFdgG,EAHDG,EAAAxL,KAAAwL,EAAA5L,KAAA,EAKqB6H,YAAKjC,IAAU,GAAM,GAL1C,OAOC,OAFM3Q,EALP2W,EAAAxL,KAAAwL,EAAA5L,KAAA,GAOO6H,YAAKxI,GAAwBpK,EAAOoT,EAAOrb,eAAgBqb,EAAOpb,aAAcob,EAAOva,KAP9F,QAQC,OARD8d,EAAA5L,KAAA,GAQO6H,YAAKnC,GAAc+F,GAR1B,QASC,OATDG,EAAA5L,KAAA,GASO6H,YAAKrC,GAAS,kBATrB,QAUC,OAVDoG,EAAA5L,KAAA,GAUO/J,YAAI,CACNhK,KAAMrE,KAXX,QAAAgkB,EAAA5L,KAAA,iBAcC,OAdD4L,EAAA7L,KAAA,GAAA6L,EAAAnJ,GAAAmJ,EAAA,SAAAA,EAAA5L,KAAA,GAcO/J,YAAI,CAAEhK,KAAMpE,KAdnB,WAeoB,OAAf4jB,EAfL,CAAAG,EAAA5L,KAAA,SAe0B,OAf1B4L,EAAA5L,KAAA,GAegC6H,YAAKnC,GAAc+F,GAfnD,QAgBC,OAhBDG,EAAA5L,KAAA,GAgBO6H,YAAKtC,GAADqG,EAAAnJ,IAhBX,yBAAAmJ,EAAAtL,SAAAuL,GAAA,eAoBA,SAAU7E,KAAV,IAAAyE,EAAAxW,EAAAyE,EAAA4H,EAAA,OAAA9B,EAAAhI,EAAAqI,KAAA,SAAAiM,GAAA,cAAAA,EAAA/L,KAAA+L,EAAA9L,MAAA,OAGc,OAFbyL,EAAa,KADdK,EAAA/L,KAAA,EAAA+L,EAAA9L,KAAA,EAGoB6H,YAAKpC,GAAa,2BAHtC,OAKe,OAFdgG,EAHDK,EAAA1L,KAAA0L,EAAA9L,KAAA,EAKqB6H,YAAKjC,IAAU,GAAM,GAL1C,OAMsB,OADf3Q,EALP6W,EAAA1L,KAAA0L,EAAA9L,KAAA,GAM4B+L,cAN5B,WAMOrS,EANPoS,EAAA1L,KAQKkB,EAAe,GACQ,OAAvB5H,EAAMwR,MAAMxmB,OATjB,CAAAonB,EAAA9L,KAAA,SAUoB,OAVpB8L,EAAA9L,KAAA,GAU0B6H,YAAK1G,GAA0BlM,EAAOyE,EAAMwR,MAAMxmB,QAV5E,QAUK4c,EAVLwK,EAAA1L,KAAA,QAYC,OAZD0L,EAAA9L,KAAA,GAYO6H,YAAKnC,GAAc+F,GAZ1B,QAaC,OAbDK,EAAA9L,KAAA,GAaO6H,YAAKrC,GAAS,2BAbrB,QAcC,OAdDsG,EAAA9L,KAAA,GAcO/J,YAAI,CACNhK,KAAMlE,GACNuZ,iBAhBL,QAAAwK,EAAA9L,KAAA,iBAmBC,OAnBD8L,EAAA/L,KAAA,GAAA+L,EAAArJ,GAAAqJ,EAAA,SAAAA,EAAA9L,KAAA,GAmBO/J,YAAI,CAAEhK,KAAMjE,KAnBnB,WAoBoB,OAAfyjB,EApBL,CAAAK,EAAA9L,KAAA,SAoB0B,OApB1B8L,EAAA9L,KAAA,GAoBgC6H,YAAKnC,GAAc+F,GApBnD,QAqBC,OArBDK,EAAA9L,KAAA,GAqBO6H,YAAKtC,GAADuG,EAAArJ,IArBX,yBAAAqJ,EAAAxL,SAAA0L,GAAA,eA2BA,SAAU/E,GAA2BoB,GAArC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAAoM,GAAA,cAAAA,EAAAlM,KAAAkM,EAAAjM,MAAA,OAEC,OAFDiM,EAAAlM,KAAA,EAAAkM,EAAAjM,KAAA,EAEO6H,YAAKxB,GAAuB,gBAAiB,CAC/ClX,KAAMkZ,EAAOpa,YACbvB,OAAQ2b,EAAO3b,OACf8B,KAAMoL,KAAKC,UAAU,CAAE3L,MAAOma,EAAOna,MAAOC,OAAQka,EAAOla,OAAQ+d,QAASrmB,MALjF,OAOC,OAPDomB,EAAAjM,KAAA,EAOO/J,YAAI,CACNhK,KAAM9D,KARX,OAUC,OAVD8jB,EAAAjM,KAAA,EAUO/J,YAAIpJ,GAAkBwb,EAAO3b,QAAQ,IAV5C,OAAAuf,EAAAjM,KAAA,gBAYC,OAZDiM,EAAAlM,KAAA,EAAAkM,EAAAxJ,GAAAwJ,EAAA,SAAAA,EAAAjM,KAAA,GAYO/J,YAAI,CAAEhK,KAAM7D,KAZnB,QAaC,OAbD6jB,EAAAjM,KAAA,GAaO6H,YAAKtC,GAAD0G,EAAAxJ,IAbX,yBAAAwJ,EAAA3L,SAAA6L,GAAA,cAiBA,SAAUjF,GAA2BmB,GAArC,IAAA3O,EAAA,OAAA8F,EAAAhI,EAAAqI,KAAA,SAAAuM,GAAA,cAAAA,EAAArM,KAAAqM,EAAApM,MAAA,OAEC,OAFDoM,EAAArM,KAAA,EAAAqM,EAAApM,KAAA,EAEO6H,YAAKvB,GAAyB,iBAAmB+B,EAAOha,WAF/D,OAGC,OAHD+d,EAAApM,KAAA,EAGO/J,YAAI,CAAEhK,KAAM/E,IAHnB,OAKe,OALfklB,EAAApM,KAAA,EAKqB+L,cALrB,OAMC,OADMrS,EALP0S,EAAAhM,KAAAgM,EAAApM,KAAA,GAMO/J,YAAIpJ,GAAkB6M,EAAMwR,MAAMxmB,QAAQ,IANjD,QAAA0nB,EAAApM,KAAA,iBAQC,OARDoM,EAAArM,KAAA,GAAAqM,EAAA3J,GAAA2J,EAAA,SAAAA,EAAApM,KAAA,GAQO6H,YAAKtC,GAAD6G,EAAA3J,IARX,yBAAA2J,EAAA9L,SAAA+L,GAAA,eAYA,SAAUlF,GAA2BkB,GAArC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAAyM,GAAA,cAAAA,EAAAvM,KAAAuM,EAAAtM,MAAA,OAEC,OAFDsM,EAAAvM,KAAA,EAAAuM,EAAAtM,KAAA,EAEO6H,YAAKvJ,IAAO,KAFnB,OAGC,OAHDgO,EAAAtM,KAAA,EAGO6H,YAAKrB,GAAsB,iBAAmB6B,EAAOha,UAAW,CAAEc,KAAMkZ,EAAOzb,UAHtF,OAAA0f,EAAAtM,KAAA,gBAKC,OALDsM,EAAAvM,KAAA,EAAAuM,EAAA7J,GAAA6J,EAAA,SAAAA,EAAAtM,KAAA,GAKO6H,YAAKtC,GAAD+G,EAAA7J,IALX,yBAAA6J,EAAAhM,SAAAiM,GAAA,cASP,SAASC,GAAcjX,GACnB,OAAO,IAAI4E,QAAQ,SAAC7D,EAAS8D,GACzB,IACI,IAAIO,EAAM,IAAIC,MAEdD,EAAIL,iBAAiB,OAAQ,WACzBhE,EAAQ,CACJpI,MAAOwK,KAAK+T,aACZte,OAAQuK,KAAKgU,kBAGrB/R,EAAIL,iBAAiB,QAAS,SAASyK,GACnC3K,EAAO2K,KAEXpK,EAAII,IAAMxF,EACZ,MAAOkF,GACLL,EAAOK,MAKZ,SAAekS,GAAtBC,GAAA,OAAAC,GAAAhU,MAAAH,KAAAI,wDAAO,SAAAgU,EAA2Bte,GAA3B,IAAAue,EAAAC,EAAAC,EAAArI,EAAAjC,EAAApB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAjR,EAAAwc,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3c,EAAA4c,EAAAnb,EAAAob,EAAAC,EAAA3L,EAAA4L,EAAA,OAAAlO,EAAAhI,EAAAqI,KAAA,SAAA8N,GAAA,cAAAA,EAAA5N,KAAA4N,EAAA3N,MAAA,OAGH,KAAM,YAFF+M,EAAgBve,IAUhB,IAAWwe,MAPL,uBAAwBD,IAAkB,iBAAkBA,IAC7DA,EAA6Ca,mBAAqBpV,OAAOkK,KACrEqK,EAA6Cc,eAIrDd,EAA6Cb,QAAU,EACpCa,EAA6Cc,cACvDZ,EAAeF,EAA6Cc,aAAab,IACnEpc,GAAK5K,EACjBinB,EAAYpc,GAAK7K,EAdtB,GAkB2B,IAA1B+mB,EAAcb,QAlBf,CAAAyB,EAAA3N,KAAA,SAmBK4E,EAAemI,EAAca,mBAC7BjL,EAAoC,GApBzCpB,GAAA,EAAAC,GAAA,EAAAC,OAAA5D,EAAA8P,EAAA5N,KAAA,EAAA2B,EAsBsBqL,EAAc7N,YAtBpCmD,OAAAC,YAAA,WAAAf,GAAAI,EAAAD,EAAA1B,QAAAuC,KAAA,CAAAoL,EAAA3N,KAAA,SAyBK,IAHOtP,EAtBZiR,EAAAa,MAuBKG,EAAOjS,GAAU,GAvBtBwc,GAAA,EAAAC,GAAA,EAAAC,OAAAvP,EAAA8P,EAAA5N,KAAA,GAyBKsN,EAAsBzI,EAAtBvC,OAAAC,cAAA4K,GAAAI,EAAAD,EAAArN,QAAAuC,MAAA2K,GAAA,EAAWvc,EAAyB2c,EAAA9K,MAEP,WADrByK,EAAcF,EAAcc,aAAald,IAC7B1E,KACRyE,KAAUqc,EAAcloB,QAAU8L,KAAWoc,EAAcloB,OAAO6L,IAC9D0B,EAAY2a,EAAcloB,OAAO6L,GAAQC,GAC7CgS,EAAOjS,GAAQC,GAAf6H,OAAAyM,EAAA,EAAAzM,CAAA,CACIvM,KAAM,SACHghB,EAFP,CAGI1X,IAAKnD,GAAaA,EAAUmD,IAC5BuY,OAAQ1b,GAAaA,EAAU0b,OAC/Bxb,OAAQF,GAAaA,EAAUE,OAC/BZ,MAAOU,GAAaA,EAAUV,MAC9B0G,WAAYhG,GAAaA,EAAUlE,MACnCmK,YAAajG,GAAaA,EAAUjE,UAGxCwU,EAAOjS,GAAQC,GAAf6H,OAAAyM,EAAA,EAAAzM,CAAA,CACIvM,KAAM,SACHghB,GAGiB,SAArBA,EAAYhhB,OACfyE,KAAUqc,EAAcgB,OAASpd,KAAWoc,EAAcgB,MAAMrd,GAChEiS,EAAOjS,GAAQC,GAAf6H,OAAAyM,EAAA,EAAAzM,CAAA,CACIvM,KAAM,QACHghB,EACAF,EAAcgB,MAAMrd,GAAQC,IAGnCgS,EAAOjS,GAAQC,GAAf6H,OAAAyM,EAAA,EAAAzM,CAAA,CACIvM,KAAM,QACHghB,EAFP,CAGIzK,MAAO,MAzD5BmL,EAAA3N,KAAA,iBAAA2N,EAAA5N,KAAA,GAAA4N,EAAAlL,GAAAkL,EAAA,UAAAR,GAAA,EAAAC,EAAAO,EAAAlL,GAAA,QAAAkL,EAAA5N,KAAA,GAAA4N,EAAA5N,KAAA,GAAAmN,GAAA,MAAAG,EAAAlK,QAAAkK,EAAAlK,SAAA,WAAAwK,EAAA5N,KAAA,IAAAoN,EAAA,CAAAQ,EAAA3N,KAAA,eAAAoN,EAAA,eAAAO,EAAAvK,OAAA,mBAAAuK,EAAAvK,OAAA,YAAA7B,GAAA,EAAAoM,EAAA3N,KAAA,iBAAA2N,EAAA3N,KAAA,iBAAA2N,EAAA5N,KAAA,GAAA4N,EAAA/K,GAAA+K,EAAA,SAAAnM,GAAA,EAAAC,EAAAkM,EAAA/K,GAAA,QAAA+K,EAAA5N,KAAA,GAAA4N,EAAA5N,KAAA,GAAAwB,GAAA,MAAAG,EAAAyB,QAAAzB,EAAAyB,SAAA,WAAAwK,EAAA5N,KAAA,IAAAyB,EAAA,CAAAmM,EAAA3N,KAAA,eAAAyB,EAAA,eAAAkM,EAAAvK,OAAA,mBAAAuK,EAAAvK,OAAA,YAgEC2J,EAAgB,CACZb,QAAS,EACThe,MAAO6e,EAAc7e,MACrBC,OAAQ4e,EAAc5e,OACtBmC,WAAYyc,EAAczc,WAC1BE,iBAAkBuc,EAAcvc,iBAChC0O,YAAa6N,EAAc7N,YAC3B8O,UAAWjB,EAAciB,UACzBrL,SACAiC,eACAzT,KAAM4b,EAAc5b,MA1EzB,QAAAwc,EAAA9K,GAAArD,EAAAhI,EAAAkL,KAgFkBqK,EAAcpK,QAhFhC,YAAAgL,EAAA7K,GAAA6K,EAAA9K,MAAAN,KAAA,CAAAoL,EAAA3N,KAAA,SAgFQtP,EAhFRid,EAAA7K,GAAAN,MAAAmL,EAAAzK,GAAA1D,EAAAhI,EAAAkL,KAiFuBqK,EAAcpK,OAAOjS,IAjF5C,YAAAid,EAAAM,GAAAN,EAAAzK,MAAAX,KAAA,CAAAoL,EAAA3N,KAAA,YAiFYrP,EAjFZgd,EAAAM,GAAAzL,MAmF4B,WADjBV,EAAYiL,EAAcpK,OAAOjS,GAAQC,IACjC1E,OAAoB6V,EAAUvM,IAnFjD,CAAAoY,EAAA3N,KAAA,gBAAA2N,EAAA5N,KAAA,GAAA4N,EAAA3N,KAAA,GAqF8BwM,GAAc1K,EAAUvM,KArFtD,SAqFiBmY,EArFjBC,EAAAvN,MAsFsBlS,QAAU4T,EAAU1J,YAAcsV,EAAKvf,SAAW2T,EAAUzJ,cACjEyJ,EAAU1J,WAAasV,EAAKxf,MAC5B4T,EAAUzJ,YAAcqV,EAAKvf,OAC7B2T,EAAU9Q,GAAK,EACf8Q,EAAU7Q,GAAK,EACf6Q,EAAU3Q,KAAO,GA3FlCwc,EAAA3N,KAAA,iBAAA2N,EAAA5N,KAAA,GAAA4N,EAAAO,GAAAP,EAAA,kBAAAA,EAAA3N,KAAA,iBAAA2N,EAAA3N,KAAA,wBAAA2N,EAAA5M,OAAA,SAkGIgM,GAlGJ,yBAAAY,EAAArN,SAAAwM,EAAA,6FAqGA,SAAU1F,GAA2BiB,GAArC,IAAA9T,EAAA4Z,EAAApB,EAAA,OAAAvN,EAAAhI,EAAAqI,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAApO,MAAA,OAEc,OAFdoO,EAAArO,KAAA,EAAAqO,EAAApO,KAAA,EAEoB6H,YAAKzB,GAAsB,iBAAmBiC,EAAOlc,IAFzE,OAIiD,OAF1CoI,EAFP6Z,EAAAhO,KAGK+N,EAAavU,KAAKoF,MAAMzK,EAAK/F,KAAKA,MAHvC4f,EAAApO,KAAA,EAIuD6H,YAAK8E,GAAawB,GAJzE,OAMC,OAFIpB,EAJLqB,EAAAhO,KAAAgO,EAAApO,KAAA,GAMO6H,YAAKxD,GAA6B0I,GANzC,QAOC,OAPDqB,EAAApO,KAAA,GAOO/J,YAAI,CACNhK,KAAMhE,GACNkE,GAAIoI,EAAK/F,KAAKrC,GACdgD,KAAMoF,EAAK/F,KAAKW,OAVrB,QAYC,OAZDif,EAAApO,KAAA,GAYO/J,YAAI,CACNhK,KAAMtD,GACN6F,KAAMue,IAdX,QAgBC,OAhBDqB,EAAApO,KAAA,GAgBO/J,YAAIpJ,GAAkB0H,EAAK/F,KAAK9B,QAAQ,IAhB/C,QAiBC,OAjBD0hB,EAAApO,KAAA,GAiBO/J,YAAIoY,iBAAeC,gBAjB1B,QAAAF,EAAApO,KAAA,iBAmBC,OAnBDoO,EAAArO,KAAA,GAAAqO,EAAA3L,GAAA2L,EAAA,SAAAA,EAAApO,KAAA,GAmBO/J,YAAI,CAAEhK,KAAMb,KAnBnB,QAoBC,OApBDgjB,EAAApO,KAAA,GAoBO6H,YAAKtC,GAAD6I,EAAA3L,IApBX,yBAAA2L,EAAA9N,SAAAiO,GAAA,eAwBA,SAAUlH,GAAyBgB,GAAnC,IAAAoD,EAAA+C,EAAAhgB,EAAA,OAAAgR,EAAAhI,EAAAqI,KAAA,SAAA4O,GAAA,cAAAA,EAAA1O,KAAA0O,EAAAzO,MAAA,OAGc,OAFbyL,EAAa,KADdgD,EAAA1O,KAAA,EAAA0O,EAAAzO,KAAA,EAGoB6H,YAAKpC,GAAD,aAAA3Q,OAA2BuT,EAAOtV,KAAK5D,OAH/D,OAQc,OALbsc,EAHDgD,EAAArO,MAIOoO,EAAW,IAAIE,UACZC,IAAI,SAAUtG,EAAO3b,QAC9B8hB,EAASI,OAAO,QAASvG,EAAOtV,KAAMsV,EAAOtV,KAAK5D,MANnDsf,EAAAzO,KAAA,GAQoB6H,YACftB,GACA,cACAiI,EACA,SAACjU,GAAD,OAA0B8N,EAAOnV,SAASqH,EAAMsU,iBAAkBtU,EAAMuU,OAAQvU,EAAMwU,QACtF1G,EAAOjV,YACP,WACIiV,EAAOlV,UAfhB,gBAkBc0K,KAVPrP,EARPigB,EAAArO,MAAA,CAAAqO,EAAAzO,KAAA,SAqBK,OADAqI,EAAOrV,KAAKxE,EAAK8E,QAAQkG,YApB9BiV,EAAAzO,KAAA,GAqBW/J,YAAI,CAAEhK,KAAMT,KArBvB,QAsBK,OAtBLijB,EAAAzO,KAAA,GAsBW6H,YAAKrC,GAAD,GAAA1Q,OAAauT,EAAOtV,KAAK5D,KAAzB,cAtBf,QAwBC,OAxBDsf,EAAAzO,KAAA,GAwBO6H,YAAKnC,GAAc+F,GAxB1B,QAAAgD,EAAAzO,KAAA,iBA0BC,OA1BDyO,EAAA1O,KAAA,GAAA0O,EAAAhM,GAAAgM,EAAA,SAAAA,EAAAzO,KAAA,GA0BO/J,YAAI,CAAEhK,KAAMR,KA1BnB,WA2BoB,OAAfggB,EA3BL,CAAAgD,EAAAzO,KAAA,SA2B0B,OA3B1ByO,EAAAzO,KAAA,GA2BgC6H,YAAKnC,GAAc+F,GA3BnD,QA4BC,OA5BDgD,EAAAzO,KAAA,GA4BO6H,YAAKtC,GAADkJ,EAAAhM,IA5BX,QA6BC4F,EAAOpV,MAAMwb,EAAAhM,GAAErW,SA7BhB,yBAAAqiB,EAAAnO,SAAA0O,GAAA,eAiCA,SAAU1H,GAAyBe,GAAnC,OAAA7I,EAAAhI,EAAAqI,KAAA,SAAAoP,GAAA,cAAAA,EAAAlP,KAAAkP,EAAAjP,MAAA,OAEC,OAFDiP,EAAAlP,KAAA,EAAAkP,EAAAjP,KAAA,EAEO6H,YAAKvB,GAAyB,eAAiB+B,EAAO/U,SAF7D,OAGC+U,EAAOrV,OAHRic,EAAAjP,KAAA,eAAAiP,EAAAlP,KAAA,EAAAkP,EAAAxM,GAAAwM,EAAA,SAKC5G,EAAOpV,MAAMgc,EAAAxM,GAAErW,SALhB,wBAAA6iB,EAAA3O,SAAA4O,GAAA,cAqBP,SAASC,GAAU3gB,EAAc4gB,EAA8B1d,GAC3D,IAAMkK,EAAM,IAAIC,cAAYrN,GAS5B,OARK4gB,IACDxT,EAAIE,KAAJ,oBAAkC,QAGlCpK,GAlBR,SAAS2d,EAAaC,EAAe5d,GACjC,GAAkB,YAAd4d,EAAKrjB,KAAoB,KAAAsY,GAAA,EAAAC,GAAA,EAAAC,OAAA5G,EAAA,IACzB,QAAA6G,EAAAC,EAAkB2K,EAAKC,SAAvBlN,OAAAC,cAAAiC,GAAAG,EAAAC,EAAA3E,QAAAuC,MAAAgC,GAAA,EAAiC,KAAxBiL,EAAwB9K,EAAAlC,MACV,YAAfgN,EAAMvjB,MACa,SAAfujB,EAAMrgB,OACNqgB,EAAM1T,KAAN,KAAqBpK,GAE7B2d,EAAaG,EAAO9d,IANC,MAAAqT,GAAAP,GAAA,EAAAC,EAAAM,EAAA,YAAAR,GAAA,MAAAI,EAAAxB,QAAAwB,EAAAxB,SAAA,WAAAqB,EAAA,MAAAC,KAkBzB4K,CAAazT,EAAKlK,GAGfuK,KAAKL,EAAIpC,SAAS,CAAE0C,YAAY,KAGpC,SAAUqL,GAAuBc,GAAjC,IAAA3O,EAAAhJ,EAAAoR,EAAA2N,EAAAC,EAAAC,EAAA,OAAAnQ,EAAAhI,EAAAqI,KAAA,SAAA+P,GAAA,cAAAA,EAAA7P,KAAA6P,EAAA5P,MAAA,OAEC,OAFD4P,EAAA7P,KAAA,EAAA6P,EAAA5P,KAAA,EAEO6H,YAAKvJ,IAAO,KAFnB,OAGsB,OAHtBsR,EAAA5P,KAAA,EAG4B+L,cAH5B,eAK6ClO,KAFtCnE,EAHPkW,EAAAxP,MAKWyP,QAAQC,QAAQC,cAL3B,CAAAH,EAAA5P,KAAA,eAAA4P,EAAA7O,OAAA,iBAAA6O,EAAAnN,GAAAjD,EAAAhI,EAAAkL,KASsBhJ,EAAMmW,QAAQC,QAAQ9B,WAT5C,WAAA4B,EAAAhN,GAAAgN,EAAAnN,MAAAF,KAAA,CAAAqN,EAAA5P,KAAA,YASYtP,EATZkf,EAAAhN,GAAAJ,MAW4B,WADjBV,EAAYpI,EAAMmW,QAAQC,QAAQnN,OAAOjS,GAAQgJ,EAAMmW,QAAQC,QAAQC,gBAC/D9jB,OAAoB6V,EAAUvM,IAXjD,CAAAqa,EAAA5P,KAAA,SAY2B,OAZ3B4P,EAAA5P,KAAA,GAYiC6H,YAAKzB,GAAsBtE,EAAUvM,KAZtE,WAamD,mBADpCka,EAZfG,EAAAxP,MAauBxL,QAAQ,gBAb/B,CAAAgb,EAAA5P,KAAA,YAcgC,YAAfqI,EAAOzY,IAdxB,CAAAggB,EAAA5P,KAAA,SAgBiB,OADM0P,EAAMP,GAAUM,EAAUjhB,MAAM,EAAOsT,EAAUpQ,OAfxEke,EAAA5P,KAAA,GAgBuB/J,YAAI5D,GAAyB3B,EAAQgJ,EAAMmW,QAAQC,QAAQC,cAAeL,IAhBjG,QAAAE,EAAA5P,KAAA,qBAiBwB8B,EAAUpQ,MAjBlC,CAAAke,EAAA5P,KAAA,SAmBiB,OADM0P,EAAMP,GAAUM,EAAUjhB,MAAM,EAAMsT,EAAUpQ,OAlBvEke,EAAA5P,KAAA,GAmBuB/J,YAAI5D,GAAyB3B,EAAQgJ,EAAMmW,QAAQC,QAAQC,cAAeL,IAnBjG,QAAAE,EAAA5P,KAAA,iBAqBiB,OArBjB4P,EAAA5P,KAAA,GAqBuB/J,YAAI5D,GAAyB3B,EAAQgJ,EAAMmW,QAAQC,QAAQC,mBAAelS,IArBjG,QAAA+R,EAAA5P,KAAA,gBAAA4P,EAAA5P,KAAA,iBA2BC,OA3BD4P,EAAA7P,KAAA,GAAA6P,EAAA/M,GAAA+M,EAAA,SAAAA,EAAA5P,KAAA,GA2BO6H,YAAKtC,GAADqK,EAAA/M,IA3BX,yBAAA+M,EAAAtP,SAAA0P,GAAA,eA+BA,SAAUxI,GAAyBa,GAAnC,IAAA3O,EAAAuW,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA5f,EAAAmR,EAAAzP,EAAAqd,EAAAtgB,EAAAwB,EAAAmR,EAAA4N,EAAAa,EAAA,OAAA/Q,EAAAhI,EAAAqI,KAAA,SAAA2Q,GAAA,cAAAA,EAAAzQ,KAAAyQ,EAAAxQ,MAAA,OAEC,OAFDwQ,EAAAzQ,KAAA,EAAAyQ,EAAAxQ,KAAA,EAEO6H,YAAKvJ,IAAO,KAFnB,OAGsB,OAHtBkS,EAAAxQ,KAAA,EAG4B+L,cAH5B,OAGOrS,EAHP8W,EAAApQ,KAKK6P,EACAvW,EAAMmW,QAAQC,QAAQpd,sBAAqCmL,IAAlBwK,EAAO3X,OAC1CgJ,EAAMmW,QAAQC,QAAQ5Q,YACtB,CAACmJ,EAAO3X,QARnBwf,GAAA,EAAAC,GAAA,EAAAC,OAAAvS,EAAA2S,EAAAzQ,KAAA,GAAAsQ,EAUsBJ,EAVtB5N,OAAAC,YAAA,WAAA4N,GAAAI,EAAAD,EAAArQ,QAAAuC,KAAA,CAAAiO,EAAAxQ,KAAA,YAUYtP,EAVZ4f,EAAA9N,MAWWX,EAAanI,EAAMmW,QAAQC,QAAQnN,OAAOjS,GAEzB,WADjB0B,EAAYyP,EAAWwG,EAAO1X,UACtB1E,OAAoBmG,EAAUmD,IAbjD,CAAAib,EAAAxQ,KAAA,SAc2B,OAd3BwQ,EAAAxQ,KAAA,GAciC6H,YAAKzB,GAAsBhU,EAAUmD,KAdtE,WAgBmD,mBAFpCka,EAdfe,EAAApQ,MAgBuBxL,QAAQ,gBAhB/B,CAAA4b,EAAAxQ,KAAA,SAiBmB7Q,EAAOiD,EAAUjD,MAAQiD,EAAUjG,GAjBtDqkB,EAAA/N,GAAAjD,EAAAhI,EAAAkL,KAmBmCb,GAnBnC,YAAA2O,EAAA5N,GAAA4N,EAAA/N,MAAAF,KAAA,CAAAiO,EAAAxQ,KAAA,YAmBwBrP,EAnBxB6f,EAAA5N,GAAAJ,OAoBuBV,EAAYD,EAAWlR,IAEdxB,OAASA,GAAQ2S,EAAU3V,KAAOgD,GAA4B,UAAnB2S,EAAU7V,KAtBrF,CAAAukB,EAAAxQ,KAAA,YAuB2C,YAAlB8B,EAAUlS,IAvBnC,CAAA4gB,EAAAxQ,KAAA,SAyByB,OADM0P,EAAMP,GAAUM,EAAUjhB,MAAM,EAAO4D,EAAUV,OAxBhF8e,EAAAxQ,KAAA,GAyB+B/J,YAAI5D,GAAyB3B,EAAQC,EAAS+e,IAzB7E,QAAAc,EAAAxQ,KAAA,qBA0BgC5N,EAAUV,MA1B1C,CAAA8e,EAAAxQ,KAAA,SA4ByB,OADM0P,EAAMP,GAAUM,EAAUjhB,MAAM,EAAM4D,EAAUV,OA3B/E8e,EAAAxQ,KAAA,GA4B+B/J,YAAI5D,GAAyB3B,EAAQC,EAAS+e,IA5B7E,QAAAc,EAAAxQ,KAAA,iBA8ByB,OA9BzBwQ,EAAAxQ,KAAA,GA8B+B/J,YAAI5D,GAAyB3B,EAAQC,OAASkN,IA9B7E,QAAA2S,EAAAxQ,KAAA,iBAAAkQ,GAAA,EAAAM,EAAAxQ,KAAA,iBAAAwQ,EAAAxQ,KAAA,iBAAAwQ,EAAAzQ,KAAA,GAAAyQ,EAAA3N,GAAA2N,EAAA,UAAAL,GAAA,EAAAC,EAAAI,EAAA3N,GAAA,QAAA2N,EAAAzQ,KAAA,GAAAyQ,EAAAzQ,KAAA,GAAAmQ,GAAA,MAAAG,EAAAlN,QAAAkN,EAAAlN,SAAA,WAAAqN,EAAAzQ,KAAA,IAAAoQ,EAAA,CAAAK,EAAAxQ,KAAA,eAAAoQ,EAAA,eAAAI,EAAApN,OAAA,mBAAAoN,EAAApN,OAAA,YAAAoN,EAAAxQ,KAAA,iBAsCC,OAtCDwQ,EAAAzQ,KAAA,GAAAyQ,EAAA1N,GAAA0N,EAAA,SAAAA,EAAAxQ,KAAA,GAsCO6H,YAAKtC,GAADiL,EAAA1N,IAtCX,yBAAA0N,EAAAlQ,SAAAmQ,GAAA,yCA0CP,SAASC,GAAajW,GAClBA,EAAEkW,iBACFlW,EAAEmW,aAAc,EAOpB,SAASC,KACLzZ,OAAO0Z,oBAAoB,eAAgBJ,IAGxC,SAAUjJ,KAAV,IAAAgE,EAAA/R,EAAAqF,EAAAvQ,EAAA,OAAAgR,EAAAhI,EAAAqI,KAAA,SAAAkR,GAAA,cAAAA,EAAAhR,KAAAgR,EAAA/Q,MAAA,OAKc,OAJbyL,EAAa,KADdsF,EAAAhR,KAAA,EAPH3I,OAAOkD,iBAAiB,eAAgBoW,IAOrCK,EAAA/Q,KAAA,EAKoB6H,YAAKpC,GAAa,mBALtC,OAOC,OAFAgG,EALDsF,EAAA3Q,KAAA2Q,EAAA/Q,KAAA,EAOO6H,YAAKvJ,IAAO,KAPnB,OAQsB,OARtByS,EAAA/Q,KAAA,GAQ4B+L,cAR5B,WAQOrS,EARPqX,EAAA3Q,KAWmB,QADZrB,EAAYrF,EAAMrU,SAASX,QAVlC,CAAAqsB,EAAA/Q,KAAA,eAW+BlM,MAAM,gBAXrC,QAyBC,OAbMtF,EAAO,CACTN,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9BmC,WAAYoJ,EAAMmW,QAAQC,QAAQxf,WAClCE,iBAAkBkJ,EAAMmW,QAAQC,QAAQtf,iBACxC0b,QAASxS,EAAMmW,QAAQC,QAAQ5D,QAC/BhN,YAAaxF,EAAMmW,QAAQC,QAAQ5Q,YACnC8O,UAAWtU,EAAMmW,QAAQC,QAAQ9B,UACjCpJ,aAAclL,EAAMmW,QAAQC,QAAQlL,aACpCjC,OAAQjJ,EAAMmW,QAAQC,QAAQnN,OAC9BxR,KAAMuI,EAAMmW,QAAQC,QAAQ3e,MAtBjC4f,EAAA/Q,KAAA,GAyBO6H,YAAKrB,GAAsB,iBAAmBzH,EAAW,CAC3D5P,KAAMuK,EAAMrU,SAAS2lB,KAAKjM,GAAW5P,KACrCX,KAAMoL,KAAKC,UAAUrL,KA3B1B,QA6BC,OA7BDuiB,EAAA/Q,KAAA,GA6BO6H,YAAKnC,GAAc+F,GA7B1B,QA8BC,OA9BDsF,EAAA/Q,KAAA,GA8BO6H,YAAKrC,GAAS,kBA9BrB,QA+BCqL,KA/BDE,EAAA/Q,KAAA,oBAAA+Q,EAAAhR,KAAA,GAAAgR,EAAAtO,GAAAsO,EAAA,SAiCoB,OAAftF,EAjCL,CAAAsF,EAAA/Q,KAAA,SAiC0B,OAjC1B+Q,EAAA/Q,KAAA,GAiCgC6H,YAAKnC,GAAc+F,GAjCnD,QAkCC,OAlCDsF,EAAA/Q,KAAA,GAkCO6H,YAAKtC,GAADwL,EAAAtO,IAlCX,QAmCCoO,KAnCD,yBAAAE,EAAAzQ,SAAA0Q,GAAA,eAwCA,SAAUtJ,GAAuBW,GAAjC,IAAA3O,EAAAhG,EAAAC,EAAAsd,EAAA1c,EAAA1P,EAAA,OAAA2a,EAAAhI,EAAAqI,KAAA,SAAAqR,GAAA,cAAAA,EAAAnR,KAAAmR,EAAAlR,MAAA,OAEC,OAFDkR,EAAAnR,KAAA,EAAAmR,EAAAlR,KAAA,EAEO6H,YAAKvJ,IAAO,KAFnB,OAGe,OAHf4S,EAAAlR,KAAA,EAGqB+L,cAHrB,OAQc,OALPrS,EAHPwX,EAAA9Q,KAKO1M,EAASyd,mBAAmB9I,EAAO3U,QACnCC,EAAWwd,mBAAmB9I,EAAO1U,UACrCsd,EAAOE,mBAAmBzX,EAAMwR,MAAMxmB,QAP7CwsB,EAAAlR,KAAA,GAQoB6H,YAAKzB,GAAD,oBAAAtR,OAA2CpB,EAA3C,cAAAoB,OAA8DnB,EAA9D,UAAAmB,OAA+Emc,IARvG,QAUC,OAFM1c,EARP2c,EAAA9Q,KASOvb,EAAS0P,EAAK/F,KAAK3J,OAT1BqsB,EAAAlR,KAAA,GAUO/J,YAAI,CACNhK,KAAMH,GACNjH,WAZL,QAAAqsB,EAAAlR,KAAA,iBAeC,OAfDkR,EAAAnR,KAAA,GAAAmR,EAAAzO,GAAAyO,EAAA,SAAAA,EAAAlR,KAAA,GAeO/J,YAAI,CAAEhK,KAAMF,KAfnB,QAgBC,OAhBDmlB,EAAAlR,KAAA,GAgBO6H,YAAKtC,GAAD2L,EAAAzO,IAhBX,yBAAAyO,EAAA5Q,SAAA8Q,GAAA,eAqBA,SAAUzJ,KAAV,OAAAnI,EAAAhI,EAAAqI,KAAA,SAAAwR,GAAA,cAAAA,EAAAtR,KAAAsR,EAAArR,MAAA,OACH,OADGqR,EAAArR,KAAA,EACGsR,YAAI,CACNC,YAAUrrB,EAAiByf,IAC3B6L,YAAWprB,EAAeyf,IAC1B2L,YAAWnrB,EAAeyf,IAC1B0L,YAAWjrB,EAAgB0f,IAC3BuL,YAAW9qB,EAAgBwf,IAC3BsL,YAAW3qB,EAAqB4f,IAChC+K,YAAWzqB,EAAqB2f,IAChC8K,YAAWxqB,EAAqB2f,IAChC6K,YAAWtqB,EAAmB0f,IAC9B4K,YAAWnqB,EAAqBwf,IAChC2K,YAAWhqB,EAAyBsf,IACpC0K,YAAW7pB,EAAyBof,IACpCyK,YAAW1pB,GAA+Bkf,IAC1CwK,YAAWtpB,GAAwB+e,IACnCuK,YAAWnpB,GAAwB6e,IACnCsK,YAAWlpB,GAAwB6e,IACnCqK,YAAW9oB,GAAwB0e,IACnCmK,YAAUhmB,GAAsB8b,IAChCkK,YAAU7lB,GAAsB4b,IAChCiK,YAAU3nB,GAAqC2d,IAC/CgK,YAAUvmB,GAAsBwc,IAEhCgK,YAAW5oB,GAAqB6e,IAChC+J,YAAW3oB,GAA4B4e,IACvC+J,YAAW1oB,GAA2B2e,IACtC+J,YAAWzoB,GAAoB0e,IAC/B+J,YAAWxoB,GAAqBye,IAChC+J,YAAWvoB,GAA2Bwe,IACtC+J,YAAWtoB,GAAwBue,IACnC+J,YAAWroB,GAAyBse,IACpC+J,YAAWpoB,GAAkCqe,IAC7C+J,YAAWnoB,GAA6Boe,IACxC+J,YAAWloB,GAA4Bme,IACvC+J,YAAWjoB,GAAmCke,IAC9C+J,YAAWhoB,GAA4Bie,IACvC+J,YAAW/nB,GAAsCge,IACjD+J,YAAW9nB,GAA2B+d,IACtC+J,YAAW7nB,GAA6B8d,IACxC+J,YAAW5nB,GAAqC6d,IAChD+J,YAAW3nB,GAAsC4d,IACjD+J,YAAW1nB,GAA6C2d,IACxD+J,YAAWznB,GAAsB0d,IACjC+J,YAAWxnB,GAAuByd,IAClC+J,YAAWvnB,GAA6Bwd,IACxC+J,YAAWtnB,GAAkCud,IAC7C+J,YAAWrnB,GAA+Bsd,IAC1C+J,YAAWpnB,GAA0Bqd,IACrC+J,YAAWnnB,GAA2Bod,IACtC+J,YAAWlnB,GAA2Bmd,IACtC+J,YAAWjnB,GAA4Bkd,IACvC+J,YAAWhnB,GAAwCid,IACnD+J,YAAW/mB,GAAwCgd,IACnD+J,YAAW9mB,GAA8C+c,IACzD+J,YAAW7mB,GAA+C8c,IAC1D+J,YAAW5mB,GAA0D6c,IACrE+J,YAAW3mB,GAA4C4c,IACvD+J,YAAW1mB,GAA8C2c,IACzD+J,YAAWzmB,GAAqB0c,IAChC+J,YAAWxmB,GAAsByc,IACjC+J,YAAWlmB,GAAkBmc,IAC7B+J,YAAWjpB,GAAqBkf,IAChC+J,YAAW7lB,GAAc8b,IACzB+J,YAAW5lB,GAAc6b,IAEzB+J,YAAW3lB,GAAoB6b,IAE/B8J,YAAWvrB,EAAckgB,MApE1B,wBAAAkL,EAAA/Q,SAAAmR,iBC3wBMC,GAAqB,EACrBC,GAAwB,EACxBC,GAAwB,EAMxBC,GAAoC,CAC7CC,SAAU,IAQDC,GAA8B,CACvCC,qBAAiBnU,EACjBoU,KAAM,IAOGC,GAAkC,CAC3CC,WAAW,GAWFC,GAA8B,CACvCpH,KAAM,GACND,OAAQ,GACRsH,SAAU,EACV3tB,OAAQ,KACR4c,aAAc,IAkBLgR,GAAsC,CAC/CtH,KAAM,GACND,OAAQ,GACRrmB,OAAQ,MAuBC6tB,GAAoC,CAC7CrkB,MAAO,KACPC,OAAQ,KACRmC,YAAY,EACZE,iBAAkB,EAClB0b,QAASrmB,EACTwsB,SAAU,EACVrE,UAAW,GACX9O,YAAa,GACbsT,kBAAc3U,EACdrL,cAAc,EACdud,mBAAelS,EACf+G,aAAc,GACdjC,OAAQ,GACR8P,aAAc,CACVjhB,MAAO,OACPE,MAAO,UACPzM,WRxNoB,SQyNpBC,YRxN4B,UQyN5B4M,SAAUhM,EACVkM,WAAYjM,GAEhB2sB,cAAe,KACfvhB,KAAM,EACNuB,iBAAiB,GASRigB,GAAgC,CACzCN,SAAU,EACV3e,OAAQ,GACR7O,OAAQ,IAoNZ,SAAS+tB,GAAajQ,EAAmCkQ,EAAoBC,GACzE,IAAIC,EAASva,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GACrB,IAAK,IAAMjS,KAAUqiB,EAAW,CAC5B,IAAIlR,EAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,EAAOjS,IAC7B,IAAK,IAAMC,KAAWkR,EAAY,CAC9B,IAAIC,EAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,EAAWlR,IAChCmR,EAAUlR,GAAKkR,EAAUlR,EAAI5K,GAAe6sB,EAAa7sB,EACzD8b,EAAUjR,GAAKiR,EAAUjR,EAAI7K,GAAe8sB,EAAc9sB,EAC1D8b,EAAU5T,OAAS2kB,EACnB/Q,EAAU3T,QAAU2kB,EACG,UAAnBhR,EAAU7V,MACN6V,EAAU9Q,KACV8Q,EAAU9Q,IAAM6hB,GAEhB/Q,EAAU7Q,KACV6Q,EAAU7Q,IAAM6hB,IAEM,SAAnBhR,EAAU7V,OACjB6V,EAAUhQ,UAAYghB,GAE1BjR,EAAWlR,GAAWmR,EAE1BiR,EAAUriB,GAAUmR,EAExB,OAAOkR,EAGX,SAASC,GAAYlR,EAAsB5T,GACvC,IAAI8C,EAAK8Q,EAAUlR,EAAIkR,EAAU5T,MAAQ,EAAIlI,EAGzCitB,EAAQ/kB,GAFH4T,EAAUjR,EAAIiR,EAAU3T,OAAS,EAAInI,GAG1CktB,EAAQliB,EAEZ8Q,EAAUlR,EAAIqiB,EAAQnR,EAAU5T,MAAQ,EAAIlI,EAC5C8b,EAAUjR,EAAIqiB,EAAQpR,EAAU3T,OAAS,EAAInI,EAC7C8b,EAAUxQ,OAASoG,KAAKyb,GAAK,EAGjC,SAASC,GAAWtR,EAAsB3T,GACtC,IAAI6C,EAAK8Q,EAAUlR,EAAIkR,EAAU5T,MAAQ,EAAIlI,EAGzCitB,EAFKnR,EAAUjR,EAAIiR,EAAU3T,OAAS,EAAInI,EAG1CktB,EAAQ/kB,EAAS6C,EAErB8Q,EAAUlR,EAAIqiB,EAAQnR,EAAU5T,MAAQ,EAAIlI,EAC5C8b,EAAUjR,EAAIqiB,EAAQpR,EAAU3T,OAAS,EAAInI,EAC7C8b,EAAUxQ,OAASoG,KAAKyb,GAAK,EA6pCjC,ICvoDWxZ,GDuoDL0Z,GAAkBC,IA1pCjB,WAAiG,IAAhF5Z,EAAgFZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAA1DyZ,GAAqBlK,EAAqCvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EACpG,OAAQwK,EAAOpc,MACX,KAAKvD,GACD,OAAO8P,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,SAAWX,GAC3BphB,YAAY,EACZ4O,YAAa,GACb8O,UAAW,GACXrL,OAAQ,GACRiC,aAAc,GACd4N,kBAAc3U,EACdkS,mBAAelS,EACfrL,cAAc,IAEtB,KAAK7J,GACD,OAAO6P,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI2Y,SAAU3Y,EAAM2Y,UAAYX,GAC5BxjB,MAAOma,EAAO7Z,KAAKN,OAAS,KAC5BC,OAAQka,EAAO7Z,KAAKL,QAAU,KAC9BmC,WAAY+X,EAAO7Z,KAAK8B,aAAc,EACtCE,iBAAkB6X,EAAO7Z,KAAKgC,kBAAoB,EAClD0b,QAAS7D,EAAO7Z,KAAK0d,QACrBhN,YAAamJ,EAAO7Z,KAAK0Q,aAAe,GACxC8O,UAAW3F,EAAO7Z,KAAKwf,WAAa,GACpCrL,OAAQ0F,EAAO7Z,KAAKmU,QAAU,GAC9BiC,aAAcyD,EAAO7Z,KAAKoW,cAAgB,GAC1C4N,kBAAc3U,EACdkS,mBAAelS,EACfrL,cAAc,EACdrB,KAAMkX,EAAO7Z,KAAK2C,MAAQ,IAGlC,KAAK/F,GACD,OAAOoN,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,UAAYX,KAEpC,KAAK9oB,GACD,IAAIiZ,EAAkC,GACtC,GAAInI,EAAMwF,YAAY/B,OAAS,EAAG,CAC9B0E,EAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACHkB,EAAMiJ,OAAOjJ,EAAMwF,YAAY,KAFR,IAAAqF,GAAA,EAAAC,GAAA,EAAAC,OAAA5G,EAAA,IAK9B,QAAA6G,EAAAC,EAAsBjL,EAAMkL,aAA5BvC,OAAAC,cAAAiC,GAAAG,EAAAC,EAAA3E,QAAAuC,MAAAgC,GAAA,EAA0C,KAA/B5T,EAA+B+T,EAAAlC,MAClCV,EAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,EAAWlR,IACT,SAAnBmR,EAAU7V,KACV6V,EAAUU,MAAQ,GACQ,UAAnBV,EAAU7V,cACV6V,EAAUvM,WACVuM,EAAUxP,QAErBuP,EAAWlR,GAAWmR,GAbI,MAAAiD,IAAAP,GAAA,EAAAC,EAAAM,GAAA,YAAAR,GAAA,MAAAI,EAAAxB,QAAAwB,EAAAxB,SAAA,WAAAqB,EAAA,MAAAC,IAgBlC,OAAOjM,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsU,UAAUxV,OAAAyM,EAAA,EAAAzM,CAAA,GACHkB,EAAMsU,UADJxV,OAAAgb,GAAA,EAAAhb,CAAA,GAEJ6P,EAAO7jB,KAAK2H,GAAKkc,EAAO7jB,OAE7B0a,YAAaxF,EAAMwF,YAAcxF,EAAMwF,YAAYpK,OAAOuT,EAAO7jB,KAAK2H,IAAM,CAACkc,EAAO7jB,KAAK2H,IACzFwW,OAAOnK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EAAMiJ,OADPnK,OAAAgb,GAAA,EAAAhb,CAAA,GAED6P,EAAO7jB,KAAK2H,GAAK0V,MAI9B,KAAKhZ,GACD,IAAI8Z,EAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBzU,EAAQwL,EAAMvL,OACdA,EAASuL,EAAMxL,MAEnB,IAAK,IAAMwC,KAAUiS,EAAQ,CACzB,IAAId,EAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,EAAOjS,IAC7B,IAAK,IAAMC,KAAWkR,EAAY,CAC9B,IAAIC,EAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,EAAWlR,IAC5BmR,EAAU2R,SACVL,GAAWtR,EAAW3T,GAEtB6kB,GAAYlR,EAAW5T,GAG3B2T,EAAWlR,GAAWmR,EAG1Ba,EAAOjS,GAAUmR,EAErB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIxL,QACAC,SACAwU,WAGR,KAAK7Z,GACD,IAAI6Z,EAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBzU,EAAQwL,EAAMvL,OACdA,EAASuL,EAAMxL,MAEnB,IAAK,IAAMwC,KAAUiS,EAAQ,CACzB,IAAId,EAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,EAAOjS,IAC7B,IAAK,IAAMC,KAAWkR,EAAY,CAC9B,IAAIC,EAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,EAAWlR,IAC5BmR,EAAU2R,SACVT,GAAYlR,EAAW5T,GAEvBklB,GAAWtR,EAAW3T,GAG1B0T,EAAWlR,GAAWmR,EAG1Ba,EAAOjS,GAAUmR,EAErB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIxL,QACAC,SACAwU,WAGR,KAAK5Z,GACD,IAAI2qB,EAAOlb,OAAAyM,EAAA,EAAAzM,CAAA,GAAQ6P,EAAO7jB,KAAf,CAAqB2H,GAAIE,IAAQC,aAEtCqnB,EAAQja,EAAMwF,YAAY+D,QAAQoF,EAAO7jB,KAAK2H,IAAM,EACpD+S,EAAW,GAAApK,OAAA0D,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMwF,YAAYT,MAAM,EAAGkV,IAAlC,CAA0CD,EAAQvnB,IAAlDqM,OAAA8M,GAAA,EAAA9M,CAAyDkB,EAAMwF,YAAYT,MAAMkV,KAElG,OAAOnb,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsU,UAAUxV,OAAAyM,EAAA,EAAAzM,CAAA,GACHkB,EAAMsU,UADJxV,OAAAgb,GAAA,EAAAhb,CAAA,GAEJkb,EAAQvnB,GAAKunB,IAElBxU,cACAyD,OAAOnK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EAAMiJ,OADPnK,OAAAgb,GAAA,EAAAhb,CAAA,GAEDkb,EAAQvnB,GAFPqM,OAAAyM,EAAA,EAAAzM,CAAA,GAGKkB,EAAMiJ,OAAO0F,EAAO7jB,KAAK2H,SAK5C,KAAKnD,GACD,IAAM0H,EAAS2X,EAAO7jB,KAAK2H,GACvB6hB,EAASxV,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMsU,kBACpBA,EAAUtd,GAEjB,IAAIiS,EAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBjS,KAAUiS,UACHA,EAAOjS,GAGlB,IAAI8hB,EAAe9Y,EAAM8Y,eAAiB9hB,OAASmN,EAAYnE,EAAM8Y,aAE/DtT,EAAcxF,EAAMwF,YAAYxL,OAAO,SAAAvH,GAAE,OAAIA,IAAOuE,IAEtDkU,EAAelL,EAAMkL,aAKzB,OAJ2B,IAAvB1F,EAAY/B,SACZyH,EAAe,IAGZpM,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsU,YACA9O,cACA0F,eACAjC,SACA6P,iBAGR,KAAKvpB,GACD,IAAMyH,EAAS2X,EAAO7jB,KAAK2H,GACvB3H,EAAIgU,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMsU,UAAUtd,IAGhC,OAFAlM,EAAKuK,MAAQsZ,EAAOtZ,MAEbyJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsU,UAAUxV,OAAAyM,EAAA,EAAAzM,CAAA,GACHkB,EAAMsU,UADJxV,OAAAgb,GAAA,EAAAhb,CAAA,GAEJ9H,EAASlM,MAItB,KAAK0E,GACD,GAAiC,IAA7BwQ,EAAMwF,YAAY/B,OAClB,OAAOzD,EAGX,IAAI+Y,EAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAM+Y,cACxBtmB,EAAKE,IAAQC,WACfqW,EAAoC,GAPfuN,GAAA,EAAAC,GAAA,EAAAC,OAAAvS,EAAA,IAQzB,QAAAyS,EAAAD,EAAqB3W,EAAMwF,YAA3BmD,OAAAC,cAAA4N,GAAAI,EAAAD,EAAArQ,QAAAuC,MAAA2N,GAAA,EAAwC,KAA7Bxf,EAA6B4f,EAAA9N,MACpCG,EAAOjS,GAAP8H,OAAAyM,EAAA,EAAAzM,CAAA,GACOkB,EAAMiJ,OAAOjS,GADpB8H,OAAAgb,GAAA,EAAAhb,CAAA,GAEKrM,EAAK,CACFF,KAAM,OACNE,KACAyE,EAAG,EACHC,EAAG,EACH3C,MAAO,GACPC,OAAQ,GACRmD,MAAO,EACPmiB,SAAU/Z,EAAMlH,aAChBgQ,MAAO,GACPhR,MAAOihB,EAAajhB,MACpBE,MAAO+gB,EAAa/gB,MACpBzM,WAAYwtB,EAAaxtB,WACzBC,YAAautB,EAAavtB,YAC1B4M,SAAU2gB,EAAa3gB,SACvBE,WAAYygB,EAAazgB,YAAcjM,MA1B1B,MAAAgf,IAAAoL,GAAA,EAAAC,EAAArL,GAAA,YAAAmL,GAAA,MAAAG,EAAAlN,QAAAkN,EAAAlN,SAAA,WAAAgN,EAAA,MAAAC,GA+BzB,OAAO5X,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,aAAY,GAAA9P,OAAA0D,OAAA8M,GAAA,EAAA9M,CAAMkB,EAAMkL,cAAZ,CAA0BzY,IACtCwW,WAGR,KAAKxZ,GACD,GAAiC,IAA7BuQ,EAAMwF,YAAY/B,OAClB,OAAOzD,EAGX,IAAMvN,EAAKE,IAAQC,WACfqW,EAAoC,GANdpB,GAAA,EAAAC,GAAA,EAAAC,OAAA5D,EAAA,IAO1B,QAAA8D,EAAAD,GAAqBhI,EAAMwF,YAA3BmD,OAAAC,cAAAf,GAAAI,EAAAD,GAAA1B,QAAAuC,MAAAhB,GAAA,EAAwC,KAA7B7Q,GAA6BiR,EAAAa,MACpCG,EAAOjS,IAAP8H,OAAAyM,EAAA,EAAAzM,CAAA,GACOkB,EAAMiJ,OAAOjS,IADpB8H,OAAAgb,GAAA,EAAAhb,CAAA,GAEKrM,EAAK,CACFF,KAAM,QACNE,KACAyE,EAAG,EACHC,EAAG,EACH3C,MAAO,GACPC,OAAQ,GACRmD,MAAO,EACPmiB,SAAU/Z,EAAMlH,aAChB1C,MAAM,MAnBQ,MAAAiV,IAAAvD,GAAA,EAAAC,EAAAsD,GAAA,YAAAxD,GAAA,MAAAG,GAAAyB,QAAAzB,GAAAyB,SAAA,WAAA3B,EAAA,MAAAC,GAwB1B,OAAOjJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,aAAY,GAAA9P,OAAA0D,OAAA8M,GAAA,EAAA9M,CAAMkB,EAAMkL,cAAZ,CAA0BzY,IACtCwW,WAGR,KAAKvZ,GACD,QAA4ByU,IAAxBnE,EAAMqW,cAA6B,CACnC,IAAIpN,GAAoC,GACpCxW,GAAKuN,EAAMqW,cAFoB7C,IAAA,EAAAC,IAAA,EAAAC,QAAAvP,EAAA,IAInC,QAAAyP,GAAAD,GAAqB3T,EAAMwF,YAA3BmD,OAAAC,cAAA4K,IAAAI,GAAAD,GAAArN,QAAAuC,MAAA2K,IAAA,EAAwC,KAA7Bxc,GAA6B4c,GAAA9K,MACpCG,GAAOjS,IAAP8H,OAAAyM,EAAA,EAAAzM,CAAA,GACOkB,EAAMiJ,OAAOjS,IADpB8H,OAAAgb,GAAA,EAAAhb,CAAA,GAEKrM,GAFLqM,OAAAyM,EAAA,EAAAzM,CAAA,GAGWkB,EAAMiJ,OAAOjS,IAAQvE,IAHhC,CAIQgD,KAAMkZ,EAAOlZ,UATU,MAAA4V,IAAAoI,IAAA,EAAAC,GAAArI,GAAA,YAAAmI,IAAA,MAAAG,GAAAlK,QAAAkK,GAAAlK,SAAA,WAAAgK,GAAA,MAAAC,IAcnC,OAAO5U,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAGX,KAAKrQ,GACD,IAAMsH,GAAU+I,EAAMqW,cACtB,QAAgBlS,IAAZlN,GAAuB,CACvB,IAAIiU,GAAYpM,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMkL,cACzBgP,GAAahP,GAAa3B,QAAQtS,KAClB,IAAhBijB,IACAhP,GAAaiP,OAAOD,GAAY,GAGpC,IAAIjR,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACxB,IAAK,IAAMjS,MAAUiS,GACjB,GAAIhS,MAAWgS,GAAOjS,MAAYiS,GAAOjS,IAAQC,IAASmjB,OAAQ,CAC9D,IAAIjS,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,YACtBmR,GAAWlR,IAClBgS,GAAOjS,IAAUmR,GAIzB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,gBACAjC,UACAoN,mBAAelS,IAGvB,OAAOnE,EAEX,KAAKpQ,GACD,IAAIsb,GAAYpM,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMkL,cAE7B,QAA4B/G,IAAxBnE,EAAMqW,cAA6B,CACnC,IAAI4D,GAAQ/O,GAAa3B,QAAQvJ,EAAMqW,gBACxB,IAAX4D,IAAgBA,GAAQ/O,GAAazH,OAAS,GAC9CyH,GAAaiP,OAAOF,GAAQ,EAAG,EAAG/O,GAAaiP,OAAOF,GAAO,GAAG,IAIxE,OAAOnb,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,kBAGR,KAAKrb,GACD,IAAIqb,GAAYpM,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMkL,cAE7B,QAA4B/G,IAAxBnE,EAAMqW,cAA6B,CACnC,IAAI4D,GAAQ/O,GAAa3B,QAAQvJ,EAAMqW,gBACxB,IAAX4D,IACA/O,GAAatI,KAAKsI,GAAaiP,OAAOF,GAAO,GAAG,IAIxD,OAAOnb,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,kBAGR,KAAKpb,GACD,IAAIob,GAAYpM,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMkL,cAE7B,QAA4B/G,IAAxBnE,EAAMqW,cAA6B,CACnC,IAAI4D,GAAQ/O,GAAa3B,QAAQvJ,EAAMqW,eACnC4D,GAAQ,GACR/O,GAAaiP,OAAOF,GAAQ,EAAG,EAAG/O,GAAaiP,OAAOF,GAAO,GAAG,IAIxE,OAAOnb,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,kBAGR,KAAKnb,GACD,IAAImb,GAAYpM,OAAA8M,GAAA,EAAA9M,CAAOkB,EAAMkL,cAE7B,QAA4B/G,IAAxBnE,EAAMqW,cAA6B,CACnC,IAAI4D,GAAQ/O,GAAa3B,QAAQvJ,EAAMqW,gBACxB,IAAX4D,IACA/O,GAAamP,QAAQnP,GAAaiP,OAAOF,GAAO,GAAG,IAI3D,OAAOnb,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIkL,kBAGR,KAAKlb,GACD,GAAIgQ,EAAMqW,cAAe,CACrB,IAAIpN,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KACzBC,MAAWkR,KACXA,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOqJ,GAAWlR,IADlB,CAEImjB,QAAQ,KAGhBnR,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAEX,KAAK/P,GACD,GAAI+P,EAAMqW,cAAe,CACrB,IAAIpN,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KACzBC,MAAWkR,KACXA,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOqJ,GAAWlR,IADlB,CAEImjB,QAAQ,KAGhBnR,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAEX,KAAK9P,GACD,GAAI8P,EAAMqW,cAAe,CACrB,IAAIpN,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,GAAWlR,KACT,UAAnBmR,GAAU7V,OACV6V,GAAUlS,IAAMyY,EAAOzY,KAE3BiS,GAAWlR,IAAWmR,GAE1Ba,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAEX,KAAK7P,GACD,GAAI6P,EAAMqW,cAAe,CACrB,IAAIpN,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,GAAWlR,KACT,UAAnBmR,GAAU7V,OACV6V,GAAUhS,KAAOuY,EAAOvY,MAE5B+R,GAAWlR,IAAWmR,GAE1Ba,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAEX,KAAK5P,GACD,GAAI4P,EAAMqW,cAAe,CACrB,IAAIpN,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,GAAWlR,KAChCmR,GAAU9R,YAAcqY,EAAOrY,YAC/B6R,GAAWlR,IAAWmR,GAE1Ba,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAIR,OAAOjJ,EAEX,KAAK3P,GACD,IAAKse,EAAOna,OAASma,EAAOna,OAAS,EACjC,OAAOwL,EAGX,IAAIvL,GAASuL,EAAMvL,OACfka,EAAOnY,sBACP/B,GAASka,EAAOna,OAASwL,EAAMvL,OAASuL,EAAMxL,QAGlD,IAAIyU,GAASjJ,EAAMiJ,OAKnB,OAJI0F,EAAOlY,gBACPwS,GAASiQ,GAAajQ,GAAQ0F,EAAOna,MAAQwL,EAAMxL,MAAOC,GAASuL,EAAMvL,SAGtEqK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIxL,MAAOma,EAAOna,MACdC,UACAwU,YAGR,KAAK3Y,GACD,IAAKqe,EAAOla,QAAUka,EAAOla,QAAU,EACnC,OAAOuL,EAGX,IAAIxL,GAAQwL,EAAMxL,MACdma,EAAOnY,sBACPhC,GAAQma,EAAOla,QAAUuL,EAAMxL,MAAQwL,EAAMvL,SAGjD,IAAIwU,GAASjJ,EAAMiJ,OAKnB,OAJI0F,EAAOlY,gBACPwS,GAASiQ,GAAajQ,GAAQzU,GAAQwL,EAAMxL,MAAOma,EAAOla,OAASuL,EAAMvL,SAGtEqK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIvL,OAAQka,EAAOla,OACfD,SACAyU,YAGR,KAAK1Y,GACD,OAAOuO,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIpJ,WAAY+X,EAAO/X,aAG3B,KAAKpG,GACD,OAAOsO,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIlJ,iBAAkB6X,EAAO7X,mBAGjC,KAAKrG,GACD,IAAIyG,GAAIyX,EAAOzX,EACXC,GAAIwX,EAAOxX,EACXL,GAAmBkJ,EAAMlJ,iBAEJ,IAArBA,KACAI,GAAI8G,KAAKmF,MAAMjM,GAAIJ,IAAoBA,GACvCK,GAAI6G,KAAKmF,MAAMhM,GAAIL,IAAoBA,IAG3C,IAAImS,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU0X,EAAO1X,QACjBsf,GAAa5H,EAAO3X,OAAS,CAAC2X,EAAO3X,QAAUgJ,EAAMwF,YAZzB8U,IAAA,EAAAC,IAAA,EAAAC,QAAArW,EAAA,IAchC,QAAAsW,GAAAC,GAAqBnE,GAArB5N,OAAAC,cAAA0R,IAAAG,GAAAC,GAAApU,QAAAuC,MAAAyR,IAAA,EAAiC,KAAtBtjB,GAAsByjB,GAAA3R,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KACzBC,MAAWkR,KACXA,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOqJ,GAAWlR,IADlB,CAEIC,KACAC,QAGR8R,GAAOjS,IAAUmR,IAvBW,MAAAkD,IAAAkP,IAAA,EAAAC,GAAAnP,GAAA,YAAAiP,IAAA,MAAAI,GAAAjR,QAAAiR,GAAAjR,SAAA,WAAA8Q,GAAA,MAAAC,IA0BhC,OAAO1b,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAKvY,GAA0B,IACrB4G,GAAWqX,EAAXrX,GAAIC,GAAOoX,EAAPpX,GAEN0R,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU0X,EAAO1X,QACjBsf,GAAavW,EAAMhH,sBAAqCmL,IAAlBwK,EAAO3X,OAAuBgJ,EAAMwF,YAAc,CAACmJ,EAAO3X,QALzE2jB,IAAA,EAAAC,IAAA,EAAAC,QAAA1W,EAAA,IAO3B,QAAA2W,GAAAC,GAAqBxE,GAArB5N,OAAAC,cAAA+R,IAAAG,GAAAC,GAAAzU,QAAAuC,MAAA8R,IAAA,EAAiC,KAAtB3jB,GAAsB8jB,GAAAhS,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IAC3B,GAAuB,UAAnBmR,GAAU7V,KAAkB,KACtBiC,GAAsD4T,GAAtD5T,MAAOC,GAA+C2T,GAA/C3T,OAAQgD,GAAuC2Q,GAAvC3Q,KAAMvB,GAAiCkS,GAAjClS,IAAKwI,GAA4B0J,GAA5B1J,WAAYC,GAAgByJ,GAAhBzJ,YAC5ClH,GAAOA,IAAQ,EACfkH,GAAcA,IAAe,EAC7BD,GAAaA,IAAc,EAE3B,IAAIsc,GAAgBxmB,GAChBymB,GAAiBxmB,GACT,UAARyB,SAA2BiO,IAARjO,GACnB+kB,GAAiBzmB,IAASmK,GAAcD,IACzB,WAARxI,KACP8kB,GAAgBvmB,IAAUiK,GAAaC,KAE3CrH,GAAK0G,KAAKkd,IAAIld,KAAKmd,IAAI3mB,GAAQiD,GAAOujB,GAAe1jB,IAAK,GAC1DC,GAAKyG,KAAKkd,IAAIld,KAAKmd,IAAI1mB,GAASgD,GAAOwjB,GAAgB1jB,IAAK,GAE5D4Q,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI9Q,MACAC,SAIZ0R,GAAOjS,IAAUmR,IAlCM,MAAAkD,IAAAuP,IAAA,EAAAC,GAAAxP,GAAA,YAAAsP,IAAA,MAAAI,GAAAtR,QAAAsR,GAAAtR,SAAA,WAAAmR,GAAA,MAAAC,IAqC3B,OAAO/b,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAKtY,GACD,IAAI8G,GAAOkX,EAAOlX,KAEdwR,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU0X,EAAO1X,QAEjBsf,GAAavW,EAAMhH,sBAAqCmL,IAAlBwK,EAAO3X,OAAuBgJ,EAAMwF,YAAc,CAACmJ,EAAO3X,QANxEokB,IAAA,EAAAC,IAAA,EAAAC,QAAAnX,EAAA,IAQ5B,QAAAoX,GAAAC,GAAqBjF,GAArB5N,OAAAC,cAAAwS,IAAAG,GAAAC,GAAAlV,QAAAuC,MAAAuS,IAAA,EAAiC,KAAtBpkB,GAAsBukB,GAAAzS,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IAC3B,GAAuB,UAAnBmR,GAAU7V,KAAkB,KACtB2D,GAAgDkS,GAAhDlS,IAAK1B,GAA2C4T,GAA3C5T,MAAOC,GAAoC2T,GAApC3T,OAAQiK,GAA4B0J,GAA5B1J,WAAYC,GAAgByJ,GAAhBzJ,YAEtCA,GAAcA,IAAe,EAC7BD,GAAaA,IAAc,EAE3B,IAAIsc,GAAgBxmB,GAChBymB,GAAiBxmB,GACT,UAARyB,SAA2BiO,IAARjO,GACnB+kB,GAAiBzmB,IAASmK,GAAcD,IACzB,WAARxI,KACP8kB,GAAgBvmB,IAAUiK,GAAaC,KAG3C,IAAIrH,GAAK8Q,GAAU9Q,IAAM,EACrBC,GAAK6Q,GAAU7Q,IAAM,EACrBkkB,GAAUrT,GAAU3Q,MAAQ,EAChCH,KAAYmkB,GAAUhkB,IAAQujB,GAAiB,EAC/CzjB,KAAYkkB,GAAUhkB,IAAQwjB,GAAkB,EAEhD3jB,GAAK0G,KAAKkd,IAAIld,KAAKmd,IAAI3mB,GAAQiD,GAAOujB,GAAe1jB,IAAK,GAC1DC,GAAKyG,KAAKkd,IAAIld,KAAKmd,IAAI1mB,GAASgD,GAAOwjB,GAAgB1jB,IAAK,GAE5D4Q,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI3Q,QACAH,MACAC,SAIZ0R,GAAOjS,IAAUmR,IA3CO,MAAAkD,IAAAgQ,IAAA,EAAAC,GAAAjQ,GAAA,YAAA+P,IAAA,MAAAI,GAAA/R,QAAA+R,GAAA/R,SAAA,WAAA4R,GAAA,MAAAC,IA8C5B,OAAOxc,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAKrY,GACD,IAAI4D,GAAQma,EAAOna,MACfC,GAASka,EAAOla,OAChBqC,GAAmBkJ,EAAMlJ,iBAEJ,IAArBA,KACAtC,GAAQwJ,KAAKmF,MAAM3O,GAAQsC,IAAoBA,GAC/CrC,GAASuJ,KAAKmF,MAAM1O,GAASqC,IAAoBA,IAGrD,IAAImS,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU0X,EAAO1X,QACjBsf,GAAa5H,EAAO3X,OAAS,CAAC2X,EAAO3X,QAAUgJ,EAAMwF,YAZ7BkW,IAAA,EAAAC,IAAA,EAAAC,QAAAzX,EAAA,IAc5B,QAAA0X,GAAAC,GAAqBvF,GAArB5N,OAAAC,cAAA8S,IAAAG,GAAAC,GAAAxV,QAAAuC,MAAA6S,IAAA,EAAiC,KAAtB1kB,GAAsB6kB,GAAA/S,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAStJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQqJ,GAAWlR,KAE5B8kB,GAAK3T,GAAUlR,EAAIkR,GAAU5T,MAAQ,EACrCwnB,GAAK5T,GAAUjR,EAAIiR,GAAU3T,OAAS,EAJnBwnB,GAKNpe,IACZrJ,GAAQ4T,GAAU5T,OAAS,GAC3BC,GAAS2T,GAAU3T,QAAU,EAC9B2T,GAAUxQ,OAHRwG,GALiB6d,GAKjB7d,GAAIC,GALa4d,GAKb5d,GASV,GAHA0d,GAAKA,GAAK3d,GAAK5J,GAAQ,EACvBwnB,GAAKA,GAAK3d,GAAK5J,GAAS,EAED,UAAnB2T,GAAU7V,MAAoB6V,GAAU9Q,IAAM8Q,GAAU7Q,GACxD,GAAsB,UAAlB6Q,GAAUlS,UAAqCiO,IAAlBiE,GAAUlS,IAAmB,CAC1D,IAAIgmB,GAAQ1nB,GAAQ4T,GAAU5T,MAC9B4T,GAAU9Q,IAAM4kB,GAChB9T,GAAU7Q,IAAM2kB,QACb,GAAsB,WAAlB9T,GAAUlS,IAAkB,CACnC,IAAIgmB,GAAQznB,GAAS2T,GAAU3T,OAC/B2T,GAAU9Q,IAAM4kB,GAChB9T,GAAU7Q,IAAM2kB,QAEhB9T,GAAU9Q,IAAM9C,GAAQ4T,GAAU5T,MAClC4T,GAAU7Q,IAAM9C,GAAS2T,GAAU3T,OAI3C2T,GAAUlR,EAAI6kB,GACd3T,GAAUjR,EAAI6kB,GACd5T,GAAU5T,MAAQA,GAClB4T,GAAU3T,OAASA,GACnB0T,GAAWlR,IAAWmR,GAE1Ba,GAAOjS,IAAUmR,IAnDO,MAAAkD,IAAAsQ,IAAA,EAAAC,GAAAvQ,GAAA,YAAAqQ,IAAA,MAAAI,GAAArS,QAAAqS,GAAArS,SAAA,WAAAkS,GAAA,MAAAC,IAsD5B,OAAO9c,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAKpY,GACD,IAAI+G,GAAQ+W,EAAO/W,MAEfqR,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU0X,EAAO1X,QAEjBsf,GAAa5H,EAAO3X,OAAS,CAAC2X,EAAO3X,QAAUgJ,EAAMwF,YAN5B2W,IAAA,EAAAC,IAAA,EAAAC,QAAAlY,EAAA,IAQ7B,QAAAmY,GAAAC,GAAqBhG,GAArB5N,OAAAC,cAAAuT,IAAAG,GAAAC,GAAAjW,QAAAuC,MAAAsT,IAAA,EAAiC,KAAtBnlB,GAAsBslB,GAAAxT,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KACzBC,MAAWkR,KACXA,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOqJ,GAAWlR,IADlB,CAEIW,YAGRqR,GAAOjS,IAAUmR,IAhBQ,MAAAkD,IAAA+Q,IAAA,EAAAC,GAAAhR,GAAA,YAAA8Q,IAAA,MAAAI,GAAA9S,QAAA8S,GAAA9S,SAAA,WAAA2S,GAAA,MAAAC,IAmB7B,OAAOvd,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAKnY,GACD,IAAIioB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZjhB,MAAO6W,EAAO7W,QAGlB,GAAIkI,EAAMqW,cAAe,CACrB,IAAIve,GAAQ6W,EAAO7W,MAEfmR,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEItQ,YAIZmR,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAKhoB,GACD,IAAIgoB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZ/gB,MAAO2W,EAAO3W,QAGlB,GAAIgI,EAAMqW,cAAe,CACrB,IAAIre,GAAQ2W,EAAO3W,MAEfiR,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEIpQ,YAIZiR,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK/nB,GACD,IAAI+nB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZ/gB,MAAO2W,EAAOpjB,aAGlB,GAAIyU,EAAMqW,cAAe,CACrB,IAAI9qB,GAAaojB,EAAOpjB,WAEpB0d,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI7c,iBAIZ0d,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK9nB,GACD,IAAI8nB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZ/gB,MAAO2W,EAAOnjB,cAGlB,GAAIwU,EAAMqW,cAAe,CACrB,IAAI7qB,GAAcmjB,EAAOnjB,YAErByd,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI5c,kBAIZyd,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK7nB,GACD,IAAI6nB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZxtB,WAAYojB,EAAOpjB,WACnBC,YAAamjB,EAAOnjB,cAGxB,GAAIwU,EAAMqW,cAAe,CACrB,IAAI9qB,GAAaojB,EAAOpjB,WACpBC,GAAcmjB,EAAOnjB,YAErByd,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI7c,cACAC,kBAIZyd,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK5nB,GACD,IAAI4nB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZ3gB,SAAUuW,EAAOvW,WAGrB,GAAI4H,EAAMqW,cAAe,CACrB,IAAIje,GAAWuW,EAAOvW,SAElB6Q,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEIhQ,eAIZ6Q,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK3nB,GACD,IAAI2nB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GACTkB,EAAM+Y,aADG,CAEZzgB,WAAYqW,EAAOrW,aAGvB,GAAI0H,EAAMqW,cAAe,CACrB,IAAI/d,GAAaqW,EAAOrW,WAEpB2Q,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QACpBhS,GAAU+I,EAAMqW,cACpB,IAAK,IAAMrf,MAAUiS,GAAQ,CACzB,IAAId,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,GAAOjS,KAC7B,GAAIC,MAAWkR,GAAY,CACvB,IAAIC,GAAYD,GAAWlR,IACJ,SAAnBmR,GAAU7V,OACV4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,GADP,CAEI9P,iBAIZ2Q,GAAOjS,IAAUmR,GAGrB,OAAOrJ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,UACA8P,kBAGJ,OAAOja,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI+Y,kBAIZ,KAAK1nB,GACD,IAAI8W,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,OAAO0F,EAAO3X,SAEpCoR,GAAYD,GAAWwG,EAAO1X,SAC9BxB,GAAO2S,GAAU3S,MAAQ2S,GAAU3V,GAEzC,IAAK,IAAMwE,MAAWkR,GAAY,CAC9B,IAAMqU,GAAgBrU,GAAWlR,IAE5BulB,GAAc/mB,OAASA,IAAQ+mB,GAAc/pB,KAAOgD,IAAgC,SAAvB+mB,GAAcjqB,OAC5E4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACO0d,GADP,CAEI1T,MAAO6F,EAAOnW,SAASsQ,SAKnC,OAAOhK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,OAAOnK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EAAMiJ,OADPnK,OAAAgb,GAAA,EAAAhb,CAAA,GAED6P,EAAO3X,OAASmR,OAI7B,KAAK7W,GACD,IAAIilB,GAAavW,EAAMhH,sBAAqCmL,IAAlBwK,EAAO3X,OAAuBgJ,EAAMwF,YAAc,CAACmJ,EAAO3X,QAEhGiS,GAAMnK,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,QAHDwT,IAAA,EAAAC,IAAA,EAAAC,QAAAxY,EAAA,IAKvB,QAAAyY,GAAAC,GAAqBtG,GAArB5N,OAAAC,cAAA6T,IAAAG,GAAAC,GAAAvW,QAAAuC,MAAA4T,IAAA,EAAiC,KAAtBzlB,GAAsB4lB,GAAA9T,MACzBX,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,OAAOjS,KAE7BoR,GAAYD,GAAWwG,EAAO1X,SAC9BxB,GAAO2S,GAAU3S,MAAQ2S,GAAU3V,GAEzC,IAAK,IAAMwE,MAAWkR,GAAY,CAC9B,IAAMqU,GAAgBrU,GAAWlR,IAE5BulB,GAAc/mB,OAASA,IAAQ+mB,GAAc/pB,KAAOgD,IAAgC,UAAvB+mB,GAAcjqB,OAC5E4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACO0d,GADP,CAEI3gB,IAAK,QAAS8S,EAAOjW,UAAYiW,EAAOjW,UAAUmD,IAAM2gB,GAAc3gB,IACtEjD,OAAQ,WAAY+V,EAAOjW,UAAYiW,EAAOjW,UAAUE,OAAS4jB,GAAc5jB,OAC/EZ,MAAO,UAAW2W,EAAOjW,UAAYiW,EAAOjW,UAAUV,MAAQwkB,GAAcxkB,MAC5E0G,WAAY,UAAWiQ,EAAOjW,UAAYiW,EAAOjW,UAAUlE,MAAQgoB,GAAc9d,WACjFC,YACI,WAAYgQ,EAAOjW,UAAYiW,EAAOjW,UAAUjE,OAAS+nB,GAAc7d,YAC3ErH,GAAI,EACJC,GAAI,EACJE,KAAM,KAKlBwR,GAAOjS,IAAUmR,IA9BE,MAAAkD,IAAAqR,IAAA,EAAAC,GAAAtR,GAAA,YAAAoR,IAAA,MAAAI,GAAApT,QAAAoT,GAAApT,SAAA,WAAAiT,GAAA,MAAAC,IAiCvB,OAAO7d,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,YAGR,KAAK1X,GACD,IAAI4W,GAAUrJ,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAMiJ,OAAO0F,EAAO3X,SAEpCoR,GAAYD,GAAWwG,EAAO1X,SAC9BxB,GAAO2S,GAAU3S,MAAQ2S,GAAU3V,GAEzC,IAAK,IAAMwE,MAAWkR,GAAY,CAC9B,IAAMqU,GAAgBrU,GAAWlR,IAE5BulB,GAAc/mB,OAASA,IAAQ+mB,GAAc/pB,KAAOgD,IAAgC,UAAvB+mB,GAAcjqB,OAC5E4V,GAAWlR,IAAX6H,OAAAyM,EAAA,EAAAzM,CAAA,GACO0d,GADP,CAEI5jB,OAAQ+V,EAAO/V,OACftB,GAAI,EACJC,GAAI,EACJE,KAAM,KAKlB,OAAOqH,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIiJ,OAAOnK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EAAMiJ,OADPnK,OAAAgb,GAAA,EAAAhb,CAAA,GAED6P,EAAO3X,OAASmR,OAI7B,KAAK3W,GACD,IAAIunB,GAAYja,OAAAyM,EAAA,EAAAzM,CAAA,GAAQkB,EAAM+Y,cAC1BC,GAAgBhZ,EAAMgZ,cAM1B,GAJIA,KAAkB9sB,EAAa4wB,mBAAkC3Y,IAAlBwK,EAAO3X,SACtDgiB,GAAgB9sB,EAAa6wB,cAGX5Y,IAAlBwK,EAAO3X,aAA2CmN,IAAnBwK,EAAO1X,QAAuB,CAC7D,IAAMmR,GAAYpI,EAAMiJ,OAAO0F,EAAO3X,QAAQ2X,EAAO1X,SAE9B,SAAnBmR,GAAU7V,MACVwmB,GAAajhB,MAAQsQ,GAAUtQ,MAC/BihB,GAAa/gB,MAAQoQ,GAAUpQ,MAC/B+gB,GAAaxtB,WAAa6c,GAAU7c,WACpCwtB,GAAavtB,YAAc4c,GAAU5c,YACrCutB,GAAa3gB,SAAWgQ,GAAUhQ,SAClC2gB,GAAazgB,WAAa8P,GAAU9P,WAEhC0gB,KAAkB9sB,EAAa4wB,eAC/B9D,GAAgB9sB,EAAa8wB,OAG7BhE,KAAkB9sB,EAAa4wB,eAC/B9D,GAAgB9sB,EAAagV,OAKzC,OAAOpC,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI8Y,aAAcnK,EAAO3X,OACrB8B,aAAc6V,EAAO7V,aACrBud,cAAe1H,EAAO1X,QACtB8hB,gBACAC,mBAIR,KAAKvnB,GACD,OAAOqN,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIhH,gBAAiB2V,EAAO3V,kBAIhC,KAAKrH,GACD,OAAOmN,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIgZ,cAAerK,EAAOzV,eAG9B,KAAKtH,GACD,OAAOkN,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIvI,KAAMkX,EAAOlX,OAGrB,KAAK5I,GACD,OAAOiQ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EACA2O,EAAO7Z,MAGlB,QACI,OAAOkL,IAmBuB,CACtCid,oBAAoB,EACpBC,SAAUjrB,GACVkrB,SAAUjrB,GACVkrB,QAAS,SAACzO,GACN,MACoB,8BAAhBA,EAAOpc,MACS,kCAAhBoc,EAAOpc,MACS,+BAAhBoc,EAAOpc,MACS,8BAAhBoc,EAAOpc,MACS,6BAAhBoc,EAAOpc,KAEAoc,EAAOvX,MAEX,MAEX4C,OAAQ,SAAC2U,GACL,QAAKA,EAAOpc,KAAK8qB,WAAW,cAKxB1O,EAAOpc,OAASvD,IAChB2f,EAAOpc,OAASf,IAChBmd,EAAOpc,OAASZ,OAkBb2rB,GAVEC,YAAgB,CAC7B7qB,QAv6CG,WAAiG,IAAhFsN,EAAgFZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAA1D+Y,GAAqBxJ,EAAqCvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EACpG,OAAQwK,EAAOpc,MACX,KAAK/F,EAED,OADcwT,EAAMoY,SAASoF,KAAK,SAAAC,GAAC,OAAIA,EAAEhrB,KAAOkc,EAAOjc,QAAQD,KAC7CuN,EAEXlB,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIoY,SAAUpY,EAAMoY,SAAShd,OAAOuT,EAAOjc,WAE/C,KAAKjG,EACD,OAAOqS,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BoY,SAAUpY,EAAMoY,SAASpe,OAAO,SAAAyjB,GAAC,OAAIA,EAAEhrB,KAAOkc,EAAOF,cAE7D,QACI,OAAOzO,IAy5Cf0d,KAr5CG,WAAmF,IAArE1d,EAAqEZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAAlDiZ,GAAkB1J,EAAgCvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EACtF,OAAQwK,EAAOpc,MACX,KAAK7F,EACD,OAAOoS,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsY,qBAAiBnU,EACjBoU,KAAM,KAEd,KAAK5rB,EACD,OAAOmS,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsY,iBAAiB,EACjBC,KAAM5J,EAAOxE,WAErB,KAAKvd,EACD,OAAOkS,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsY,iBAAiB,IAEzB,KAAKvrB,EACD,OAAO+R,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsY,iBAAiB,EACjBC,KAAM,KAEd,QACI,OAAOvY,IAg4Cf2d,OA53CG,WAA4F,IAA5E3d,EAA4EZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAAvDoZ,GACxC,QAD+FpZ,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,GAChF5R,MACX,KAAKvF,EACD,OAAO8R,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5ByY,WAAW,IAEnB,KAAKxrB,EAIL,KAAKC,EACD,OAAO4R,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5ByY,WAAW,IAEnB,QACI,OAAOzY,IA82CfwR,MA12CG,WAAmF,IAApExR,EAAoEZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAAjDsZ,GAAkB/J,EAA+BvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EACtF,OAAQwK,EAAOpc,MACX,KAAKjF,EACD,IAAMiqB,EAAOvX,EAAMsR,KAAK3C,EAAO3b,QAE/B,OAAO8L,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsR,KAAKxS,OAAAyM,EAAA,EAAAzM,CAAA,GACEkB,EAAMsR,KADTxS,OAAAgb,GAAA,EAAAhb,CAAA,GAECyY,EAAK9kB,GAFNqM,OAAAyM,EAAA,EAAAzM,CAAA,GAGOyY,EAHP,CAII9hB,KAAMkZ,EAAOzb,cAI7B,KAAK3F,EACD,OAAOuR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsR,KAAM3C,EAAO2C,KACbD,OAAQ1C,EAAO0C,SAEvB,KAAK3jB,EACD,OAAOoR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU,EACVrH,KAAM,GACND,OAAQ,KAEhB,KAAK1jB,EACD,OAAOmR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAUX,KAElB,KAAKpqB,EACD,OAAOkR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,UAAYX,GAC5BhtB,OAAQ2jB,EAAOlc,GACfmV,aAAc,KAEtB,KAAK/Z,EACD,OAAOiR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,UAAYX,GAC5BpQ,aAAc,KAEtB,KAAK9Z,EACD,OAAOgR,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,SAAWV,KAEnC,KAAKlqB,EAIL,KAAKC,EACD,OAAO8Q,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,UAAYV,KAEpC,KAAKhqB,EACD,OAAO6Q,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,SAAWT,KAEnC,KAAKhqB,GAIL,KAAKC,GACD,OAAO2Q,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B2Y,SAAU3Y,EAAM2Y,UAAYT,KAEpC,KAAK7pB,GACD,OAAOyQ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI4H,aAAc+G,EAAO/G,eAE7B,KAAKtZ,GACD,OAAOwQ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEI4H,aAAc,KAEtB,QACI,OAAO5H,IA+xCfrU,SA3xCG,WAAsG,IAApFqU,EAAoFZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAA7DwZ,GAAsBjK,EAAuCvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EACzG,OAAQwK,EAAOpc,MACX,KAAKhE,GACD,OAAOuQ,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIhV,OAAQ2jB,EAAOlc,GACf6e,KAAMxS,OAAO+a,OAAO,GAAI7Z,EAAMsR,KAAxBxS,OAAAgb,GAAA,EAAAhb,CAAA,GACD6P,EAAOlc,GAAK,CACTA,GAAIkc,EAAOlc,GACXgD,KAAMkZ,EAAOlZ,UAI7B,KAAK7G,GACD,IAAMunB,EAAUnW,EAAMsR,KAAK3C,EAAOha,WAElC,OAAOmK,OAAAyM,EAAA,EAAAzM,CAAA,GACAkB,EADP,CAEIsR,KAAKxS,OAAAyM,EAAA,EAAAzM,CAAA,GACEkB,EAAMsR,KADTxS,OAAAgb,GAAA,EAAAhb,CAAA,GAECqX,EAAQ1jB,GAFTqM,OAAAyM,EAAA,EAAAzM,CAAA,GAGOqX,EAHP,CAII1gB,KAAMkZ,EAAOzb,cAI7B,KAAKpE,GACD,OAAOgQ,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsR,KAAM3C,EAAO2C,KACbD,OAAQ1C,EAAO0C,SAEvB,KAAKtiB,GACD,OAAO+P,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BsR,KAAM,GACND,OAAQ,KAEhB,QACI,OAAOrR,IAuvCfmW,QAASwD,GACTxuB,OAtDG,WAA4F,IAA5E6U,EAA4EZ,UAAAqE,OAAA,QAAAU,IAAA/E,UAAA,GAAAA,UAAA,GAAxD6Z,GAAmBtK,EAAqCvP,UAAAqE,OAAA,EAAArE,UAAA,QAAA+E,EAC/F,OAAQwK,EAAOpc,MACX,KAAKJ,GACD,OAAO2M,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5BhG,OAAQ2U,EAAO3U,SAEvB,KAAK5H,GACD,OAAO0M,OAAO+a,OAAO,GAAI7Z,EAAO,CAC5B7U,OAAQwjB,EAAOxjB,SAEvB,QACI,OAAO6U,iBEtoDP4d,2CCDSC,yLAEb,OACIC,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,mBACA+gB,EAAAhgB,EAAAf,cAAA,sUAIiB+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,yBAAR,kBAJjB,KAMA4gB,EAAAhgB,EAAAf,cAAA,qBARJ,0FAUI+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,wBAAR,SADJ,qCAGA4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,6BAAR,iBAEJ4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,uCAAR,eAEJ4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,sBAAR,YAGR4gB,EAAAhgB,EAAAf,cAAA,uCA3BuBghB,sICuDjCC,eAQF,SAAAA,EAAYC,GAAc,IAAAvb,EAAA,OAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAgf,IACtBtb,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAkf,GAAA7P,KAAAnP,KAAMif,KARVC,UAO0B,EAAAxb,EAN1Byb,YAM0B,EAAAzb,EAL1B0b,aAK0B,EAAA1b,EAJ1B2b,eAI0B,EAAA3b,EAH1B4b,eAG0B,EAAA5b,EAF1B6b,wBAE0B,EAAA7b,EAsC1B8b,uBAAyB,SAAC3d,GACtBA,EAAM4d,kBACN5d,EAAMoW,kBAxCgBvU,EA6C1Bgc,gBAAkB,SAAC7d,GACf6B,EAAKic,gBAAgB9d,GAErB/D,SAAS8D,iBAAiB,YAAa8B,EAAKkc,iBAC5C9hB,SAAS8D,iBAAiB,UAAW8B,EAAKmc,gBAjDpBnc,EAoD1Boc,iBAAmB,SAACje,GACZA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKic,gBAAgB9d,EAAMme,eAAe,IAE1CliB,SAAS8D,iBAAiB,YAAa8B,EAAKuc,gBAAiB,CAAEC,SAAS,IACxEpiB,SAAS8D,iBAAiB,WAAY8B,EAAKyc,eAAgB,CAAED,SAAS,MA5DhDxc,EA+D1Bic,gBAAkB,SAACS,GACW,OAAtB1c,EAAKwb,KAAKmB,UAEd3c,EAAKwb,KAAKmB,QAAQriB,MAAMsiB,OAAS,WAEjC5c,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,QAASvoB,MAAOzE,IAAQC,eApEjD8P,EAuE1Bkc,gBAAkB,SAAC/d,GACf6B,EAAKkd,eAAe/e,EAAOA,EAAMgf,UAxEXnd,EA2E1Buc,gBAAkB,SAACpe,GACXA,EAAMke,QAAQtb,OAAS,IAI3B5C,EAAMoW,iBACNvU,EAAKkd,eAAe/e,EAAMme,eAAe,GAAIne,EAAMgf,WAjF7Bnd,EAoF1Bkd,eAAiB,SAACR,EAAwBU,GAA6B,IAAAC,EACxCrd,EAAKub,MAAxB+B,EAD2DD,EAC3DC,SAAU9oB,EADiD6oB,EACjD7oB,EAAGC,EAD8C4oB,EAC9C5oB,EAErB,IAAI6oB,EAAJ,CAHmE,IAAAC,EAKhCvd,EAAKub,MAAhCiC,EAL2DD,EAK3DC,KAAMppB,EALqDmpB,EAKrDnpB,iBAEVilB,EAAK7kB,EAAIkoB,EAAGK,QAAU/c,EAAK1C,MAAMwf,OACjCxD,EAAK7kB,EAAIioB,EAAGO,QAAUjd,EAAK1C,MAAM0f,OAEhCI,GAAwC,IAArBhpB,IACpBilB,EAAK/d,KAAKmF,MAAM4Y,EAAKmE,EAAOppB,GAAoBA,EAAmBopB,EACnElE,EAAKhe,KAAKmF,MAAM6Y,EAAKkE,EAAOppB,GAAoBA,EAAmBopB,GAGvExd,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,UAC/Cjd,EAAKub,MAAMkC,OAAOpE,EAAIC,GAAI,EAAMtZ,EAAK1C,MAAM5I,SApGrBsL,EAuG1Bmc,cAAgB,SAAChe,GACb6B,EAAK0d,eAAevf,GAAO,GAE3B/D,SAASsa,oBAAoB,YAAa1U,EAAKkc,iBAC/C9hB,SAASsa,oBAAoB,UAAW1U,EAAKmc,gBA3GvBnc,EA8G1Byc,eAAiB,SAACte,GACVA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK0d,eAAevf,GAAO,GAE3B/D,SAASsa,oBAAoB,YAAa1U,EAAKuc,iBAC/CniB,SAASsa,oBAAoB,WAAY1U,EAAKyc,kBAtHxBzc,EAyH1B0d,eAAiB,SAACvf,EAAgCwf,GAA0B,IAAAC,EAC7C5d,EAAKub,MAAxB+B,EADgEM,EAChEN,SAAU9oB,EADsDopB,EACtDppB,EAAGC,EADmDmpB,EACnDnpB,EAEK,OAAtBuL,EAAKwb,KAAKmB,UAETW,GACDtd,EAAKub,MAAMkC,OAAOjpB,EAAGC,GAAG,EAAOuL,EAAK1C,MAAM5I,OAE9CsL,EAAK6c,SAAS,CAAEgB,oBAAqBF,IAErC3d,EAAKwb,KAAKmB,QAAQriB,MAAMsiB,OAAS,SAnIX5c,EAwI1B8d,mBAAqB,SAAC3f,GAClB6B,EAAK+d,eAAe5f,GAEpB/D,SAAS8D,iBAAiB,YAAa8B,EAAKge,oBAC5C5jB,SAAS8D,iBAAiB,UAAW8B,EAAKie,kBAC1C9f,EAAM4d,mBA7IgB/b,EAgJ1Bke,oBAAsB,SAAC/f,GACfA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK+d,eAAe5f,EAAMme,eAAe,IAEzCliB,SAAS8D,iBAAiB,YAAa8B,EAAKme,mBAAoB,CAAE3B,SAAS,IAC3EpiB,SAAS8D,iBAAiB,WAAY8B,EAAKoe,kBAAmB,CAAE5B,SAAS,IACzEre,EAAM4d,kBACN5d,EAAMoW,mBA1JgBvU,EA6J1B+d,eAAiB,SAACrB,GACdtiB,SAASO,KAAKL,MAAMsiB,OAApB,OAAAlkB,OAAoC2lB,KAApC,WAEAre,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,QAASvoB,MAAOzE,IAAQC,cAhKjD8P,EAmK1Bge,mBAAqB,SAAC7f,GAClB6B,EAAKse,cAAcngB,GACnBA,EAAMoW,kBArKgBvU,EAwK1Bme,mBAAqB,SAAChgB,GACdA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKse,cAAcngB,EAAMme,eAAe,IACxCne,EAAMoW,mBA9KgBvU,EAiL1Bse,cAAgB,SAAC5B,GAA2B,IAAA6B,EACPve,EAAKub,MAA9B3mB,EADgC2pB,EAChC3pB,GAAIC,EAD4B0pB,EAC5B1pB,GAAIK,EADwBqpB,EACxBrpB,MAAOspB,EADiBD,EACjBC,MACvB,GAAKA,QAAgB/c,IAAP7M,QAA2B6M,IAAP5M,EAAlC,CAEA,IAJwC0kB,EAMrBpe,GAFVuhB,EAAGK,QAAU/c,EAAK1C,MAAMwf,OACxBJ,EAAGO,QAAUjd,EAAK1C,MAAM0f,QACK9nB,GAEhC2hB,EAAQjiB,EAR0B2kB,EAMhC7d,GAGFob,EAAQjiB,EAT0B0kB,EAM5B5d,GAKZqE,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,UAE/CuB,EAAM3H,EAAOC,GAAO,EAAM9W,EAAK1C,MAAM5I,SA9LfsL,EAiM1Bie,iBAAmB,SAAC9f,GAChB6B,EAAKye,kBAAkBtgB,GAEvB/D,SAASsa,oBAAoB,YAAa1U,EAAKge,oBAC/C5jB,SAASsa,oBAAoB,UAAW1U,EAAKie,mBArMvBje,EAwM1Boe,kBAAoB,SAACjgB,GACbA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKye,kBAAkBtgB,GAEvB/D,SAASsa,oBAAoB,YAAa1U,EAAKme,oBAC/C/jB,SAASsa,oBAAoB,WAAY1U,EAAKoe,qBAhNxBpe,EAmN1Bye,kBAAoB,SAACtgB,GAAmC,IAAAugB,EAC1B1e,EAAKub,MAAvB3mB,EAD4C8pB,EAC5C9pB,GAAIC,EADwC6pB,EACxC7pB,GAAI2pB,EADoCE,EACpCF,MACZA,QAAgB/c,IAAP7M,QAA2B6M,IAAP5M,GAC7B2pB,EAAM5pB,EAAIC,GAAI,EAAMmL,EAAK1C,MAAM5I,OAGnC0F,SAASO,KAAKL,MAAMsiB,OAAS5c,EAAK6b,mBAClC1d,EAAMoW,kBA1NgBvU,EA+N1B2e,oBAAsB,SAACxgB,GACnB6B,EAAK4e,gBAAgBzgB,GAErB/D,SAAS8D,iBAAiB,YAAa8B,EAAK6e,qBAC5CzkB,SAAS8D,iBAAiB,UAAW8B,EAAK8e,mBAC1C3gB,EAAM4d,mBApOgB/b,EAuO1B+e,qBAAuB,SAAC5gB,GAChBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK4e,gBAAgBzgB,EAAMme,eAAe,IAE1CliB,SAAS8D,iBAAiB,YAAa8B,EAAKgf,oBAAqB,CAAExC,SAAS,IAC5EpiB,SAAS8D,iBAAiB,WAAY8B,EAAKif,mBAAoB,CAAEzC,SAAS,IAC1Ere,EAAM4d,kBACN5d,EAAMoW,mBAjPgBvU,EAoP1B4e,gBAAkB,SAAClC,GACftiB,SAASO,KAAKL,MAAMsiB,OAApB,OAAAlkB,OAAoCwmB,KAApC,WAEAlf,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,QAASvoB,MAAOzE,IAAQC,cAvPjD8P,EA0P1B6e,oBAAsB,SAAC1gB,GACnB6B,EAAKmf,eAAehhB,GACpBA,EAAMoW,kBA5PgBvU,EA+P1Bgf,oBAAsB,SAAC7gB,GACfA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKmf,eAAehhB,EAAMme,eAAe,IACzCne,EAAMoW,mBArQgBvU,EAwQ1Bmf,eAAiB,SAACzC,GAA2B,IAAA0C,EAChBpf,EAAKub,MAAtBxmB,EADiCqqB,EACjCrqB,KAAMsqB,EAD2BD,EAC3BC,OACd,GAAKA,QAAmB5d,IAAT1M,EAAf,CAEA,IAAMuqB,EAAK5C,EAAGK,QAAU/c,EAAK1C,MAAMwf,OAC7ByC,EAAK7C,EAAGO,QAAUjd,EAAK1C,MAAM0f,OAE/BwC,EAAIlkB,KAAKmkB,IAAIH,GAAMhkB,KAAKmkB,IAAIF,GAAMD,EAAKC,EAEvCG,EAAUpkB,KAAKmd,IAAI1jB,EAAOyqB,EAAI,GAAI,GACtCxf,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,UAE/CoC,EAAOK,GAAS,EAAM1f,EAAK1C,MAAM5I,SApRXsL,EAuR1B8e,kBAAoB,SAAC3gB,GACjB6B,EAAK2f,mBAAmBxhB,GAExB/D,SAASsa,oBAAoB,YAAa1U,EAAK6e,qBAC/CzkB,SAASsa,oBAAoB,UAAW1U,EAAK8e,oBA3RvB9e,EA8R1Bif,mBAAqB,SAAC9gB,GACdA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK2f,mBAAmBxhB,GAExB/D,SAASsa,oBAAoB,YAAa1U,EAAKgf,qBAC/C5kB,SAASsa,oBAAoB,WAAY1U,EAAKif,sBAtSxBjf,EAyS1B2f,mBAAqB,SAACxhB,GAClB/D,SAASO,KAAKL,MAAMsiB,OAAS5c,EAAK6b,mBAClC1d,EAAMoW,kBA3SgBvU,EAgT1B4f,sBAAwB,SAACzhB,GACrB6B,EAAK6f,kBAAkB1hB,GAEvB/D,SAAS8D,iBAAiB,YAAa8B,EAAK8f,uBAC5C1lB,SAAS8D,iBAAiB,UAAW8B,EAAK+f,qBAC1C5hB,EAAM4d,mBArTgB/b,EAwT1BggB,uBAAyB,SAAC7hB,GAClBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK6f,kBAAkB1hB,EAAMme,eAAe,IAE5CliB,SAAS8D,iBAAiB,YAAa8B,EAAKigB,sBAAuB,CAAEzD,SAAS,IAC9EpiB,SAAS8D,iBAAiB,WAAY8B,EAAKkgB,qBAAsB,CAAE1D,SAAS,IAC5Ere,EAAM4d,kBACN5d,EAAMoW,mBAlUgBvU,EAqU1B6f,kBAAoB,SAACnD,GACI1c,EAAKub,MAAlB+B,WAIRljB,SAASO,KAAKL,MAAMsiB,OAApB,OAAAlkB,OAAoCynB,KAApC,WAEAngB,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,QAASvoB,MAAOzE,IAAQC,eA5UjD8P,EA+U1B8f,sBAAwB,SAAC3hB,GACrB6B,EAAKogB,iBAAiBjiB,EAAOA,EAAMgf,SACnChf,EAAMoW,kBAjVgBvU,EAoV1BigB,sBAAwB,SAAC9hB,GACjBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKogB,iBAAiBjiB,EAAMme,eAAe,GAAIne,EAAMgf,SACrDhf,EAAMoW,mBA1VgBvU,EA6V1BogB,iBAAmB,SAAC1D,EAA0CU,GAA6B,IAAAiD,EACVrgB,EAAKub,MAA1E+B,EAD+E+C,EAC/E/C,SAAUE,EADqE6C,EACrE7C,KAAM1rB,EAD+DuuB,EAC/DvuB,MAAOC,EADwDsuB,EACxDtuB,OAAQmD,EADgDmrB,EAChDnrB,MAAOd,EADyCisB,EACzCjsB,iBAAkBksB,EADuBD,EACvBC,SAEhE,IAAIhD,EAAJ,CAEA,IALuFiD,EAQpEplB,GAHRuhB,EAAGK,QAAU/c,EAAK1C,MAAMwf,OACxBJ,EAAGO,QAAUjd,EAAK1C,MAAM0f,QAEG9nB,GAElCsrB,EAAW1uB,EAVwEyuB,EAQ/E7kB,GAGJ+kB,EAAY1uB,EAXuEwuB,EAQ3E5kB,GAKPyhB,GAAwC,IAArBhpB,IACpBosB,EAAWllB,KAAKmF,MAAM+f,EAAWhD,EAAOppB,GAAoBA,EAAmBopB,EAC/EiD,EAAYnlB,KAAKmF,MAAMggB,EAAYjD,EAAOppB,GAAoBA,EAAmBopB,GAGrFxd,EAAK6c,SAAS,CAAEC,OAAQJ,EAAGK,QAASC,OAAQN,EAAGO,UAE/CqD,EAASE,EAAUC,GAAW,EAAMzgB,EAAK1C,MAAM5I,SAjXzBsL,EAoX1B+f,oBAAsB,SAAC5hB,GACnB6B,EAAK0gB,qBAAqBviB,GAE1B/D,SAASsa,oBAAoB,YAAa1U,EAAK8f,uBAC/C1lB,SAASsa,oBAAoB,UAAW1U,EAAK+f,sBAxXvB/f,EA2X1BkgB,qBAAuB,SAAC/hB,GAChBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK0gB,qBAAqBviB,GAE1B/D,SAASsa,oBAAoB,YAAa1U,EAAKigB,uBAC/C7lB,SAASsa,oBAAoB,WAAY1U,EAAKkgB,wBAnYxBlgB,EAsY1B0gB,qBAAuB,SAACviB,GAGpB,IAFqB6B,EAAKub,MAAlB+B,SAEO,KAAAqD,EACyB3gB,EAAKub,MAAjCzpB,EADG6uB,EACH7uB,MAAOC,EADJ4uB,EACI5uB,QACfuuB,EAFWK,EACYL,UACdxuB,EAAOC,GAAQ,EAAOiO,EAAK1C,MAAM5I,OAG9C0F,SAASO,KAAKL,MAAMsiB,OAAS5c,EAAK6b,mBAElC1d,EAAMoW,kBAhZgBvU,EAqZ1B4gB,sBAAwB,SAACziB,GACrB6B,EAAK6gB,kBAAkB1iB,GAEvB/D,SAAS8D,iBAAiB,YAAa8B,EAAK8gB,uBAC5C1mB,SAAS8D,iBAAiB,UAAW8B,EAAK+gB,qBAC1C5iB,EAAM4d,mBA1ZgB/b,EA6Z1BghB,uBAAyB,SAAC7iB,GAClBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK6gB,kBAAkB1iB,EAAMme,eAAe,IAE5CliB,SAAS8D,iBAAiB,YAAa8B,EAAKihB,sBAAuB,CAAEzE,SAAS,IAC9EpiB,SAAS8D,iBAAiB,WAAY8B,EAAKkhB,qBAAsB,CAAE1E,SAAS,IAC5Ere,EAAM4d,kBACN5d,EAAMoW,mBAvagBvU,EA0a1B6gB,kBAAoB,SAACnE,GAA6C,IAAAyE,EAClCnhB,EAAKub,MAAzB+B,EADsD6D,EACtD7D,SAAUpoB,EAD4CisB,EAC5CjsB,MAElB,IAAIooB,GAAkC,OAAtBtd,EAAKwb,KAAKmB,QAA1B,CAEAviB,SAASO,KAAKL,MAAMsiB,OAApB,OAAAlkB,OAAoC0oB,KAApC,WAEA,IAAM/hB,EAAOW,EAAKwb,KAAKmB,QAAQ0E,wBAC3BvE,EAASzd,EAAKiiB,KAAOthB,EAAKwb,KAAKmB,QAAQ4E,YAAc,EACrDvE,EAAS3d,EAAKmiB,IAAMxhB,EAAKwb,KAAKmB,QAAQ8E,aAAe,EAErDC,EAAgBxsB,EAAQoG,KAAKqmB,MAAM7E,EAASJ,EAAGK,QAASC,EAASN,EAAGO,SAExEjd,EAAK6c,SAAS,CAAEC,SAAQE,SAAQ0E,gBAAehtB,MAAOzE,IAAQC,eAvbxC8P,EA0b1B8gB,sBAAwB,SAAC3iB,GACrB6B,EAAK4hB,iBAAiBzjB,EAAOA,EAAMgf,SACnChf,EAAMoW,kBA5bgBvU,EA+b1BihB,sBAAwB,SAAC9iB,GACjBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAK4hB,iBAAiBzjB,EAAMme,eAAe,GAAIne,EAAMgf,SACrDhf,EAAMoW,mBArcgBvU,EAwc1B4hB,iBAAmB,SAAClF,EAAwBU,GAA6B,IAAAyE,EACtC7hB,EAAKub,MAA5B+B,EAD6DuE,EAC7DvE,SAAUwE,EADmDD,EACnDC,SAElB,IAAIxE,EAAJ,CAHqE,IAAAyE,EAK3B/hB,EAAK1C,MAAvCokB,EAL6DK,EAK7DL,cAAe5E,EAL8CiF,EAK9CjF,OAAQE,EALsC+E,EAKtC/E,OAG3BgF,EAAWN,EADApmB,KAAKqmB,MAAM7E,EAASJ,EAAGK,QAASC,EAASN,EAAGO,SAGtDG,IACD4E,EAA4D,EAA/C1mB,KAAKmF,MAAQuhB,EAAW1mB,KAAKyb,GAAM,IAAO,GAAU,IAAOzb,KAAKyb,IAGjF+K,EAASE,GAAU,EAAMhiB,EAAK1C,MAAM5I,SAtddsL,EAyd1B+gB,oBAAsB,SAAC5iB,GACnB6B,EAAKiiB,qBAAqB9jB,GAE1B/D,SAASsa,oBAAoB,YAAa1U,EAAK8gB,uBAC/C1mB,SAASsa,oBAAoB,UAAW1U,EAAK+gB,sBA7dvB/gB,EAge1BkhB,qBAAuB,SAAC/iB,GAChBA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKiiB,qBAAqB9jB,GAE1B/D,SAASsa,oBAAoB,YAAa1U,EAAKihB,uBAC/C7mB,SAASsa,oBAAoB,WAAY1U,EAAKkhB,wBAxexBlhB,EA2e1BiiB,qBAAuB,SAAC9jB,GAGpB,IAFqB6B,EAAKub,MAAlB+B,SAEO,KACHpoB,EAAU8K,EAAKub,MAAfrmB,MACR8K,EAAKub,MAAMuG,SAAS5sB,GAAO,EAAO8K,EAAK1C,MAAM5I,OAGjD0F,SAASO,KAAKL,MAAMsiB,OAAS5c,EAAK6b,mBAElC1d,EAAMoW,kBAnfNvU,EAAKwb,KAAO0G,IAAMC,YAClBniB,EAAKyb,OAASyG,IAAMC,YACpBniB,EAAK0b,QAAUwG,IAAMC,YACrBniB,EAAK2b,UAAYuG,IAAMC,YACvBniB,EAAK4b,UAAYsG,IAAMC,YACvBniB,EAAK6b,mBAAqB,KAC1B7b,EAAK1C,MAAQ,CACTugB,qBAAqB,EACrBf,OAAQ,EACRE,OAAQ,EACR0E,cAAe,EACfhtB,MAAO,IAbWsL,qFAkBI,OAAtB1D,KAAKkf,KAAKmB,SACc,OAAxBrgB,KAAKmf,OAAOkB,SACa,OAAzBrgB,KAAKof,QAAQiB,SACc,OAA3BrgB,KAAKqf,UAAUgB,SACY,OAA3BrgB,KAAKsf,UAAUe,UAEnBrgB,KAAKuf,mBAAqBzhB,SAASO,KAAKL,MAAMsiB,OAE9CtgB,KAAKkf,KAAKmB,QAAQze,iBAAiB,YAAa5B,KAAK0f,iBACrD1f,KAAKkf,KAAKmB,QAAQze,iBAAiB,aAAc5B,KAAK8f,kBACtD9f,KAAKmf,OAAOkB,QAAQze,iBAAiB,YAAa5B,KAAKwhB,oBACvDxhB,KAAKmf,OAAOkB,QAAQze,iBAAiB,aAAc5B,KAAK4hB,qBACxD5hB,KAAKof,QAAQiB,QAAQze,iBAAiB,YAAa5B,KAAKqiB,qBACxDriB,KAAKof,QAAQiB,QAAQze,iBAAiB,aAAc5B,KAAKyiB,sBACzDziB,KAAKqf,UAAUgB,QAAQze,iBAAiB,YAAa5B,KAAKsjB,uBAC1DtjB,KAAKqf,UAAUgB,QAAQze,iBAAiB,aAAc5B,KAAK0jB,wBAC3D1jB,KAAKsf,UAAUe,QAAQze,iBAAiB,YAAa5B,KAAKskB,uBAC1DtkB,KAAKsf,UAAUe,QAAQze,iBAAiB,aAAc5B,KAAK0kB,0DAudtD,IAAAoB,EAcD9lB,KAAKif,MAZL/mB,EAFC4tB,EAED5tB,EACAC,EAHC2tB,EAGD3tB,EACA3C,EAJCswB,EAIDtwB,MACAC,EALCqwB,EAKDrwB,OACAmD,EANCktB,EAMDltB,MACAH,EAPCqtB,EAODrtB,KACAH,EARCwtB,EAQDxtB,GACAue,EATCiP,EASDjP,SACAkP,EAVCD,EAUDC,SACAC,EAXCF,EAWDE,cACAhF,EAZC8E,EAYD9E,SACAiF,EAbCH,EAaDG,cAGJ,OACInH,EAAAhgB,EAAAf,cAAA,OACImoB,IAAKlmB,KAAKkf,KACViH,YAAanmB,KAAKwf,uBAClB4G,UAAS,GAAAhqB,OAAK4B,KAAMnR,gBAAX,KAAAuP,OAA8B4pB,EAAgBhoB,KAAMlR,2BAA6B,GAAjF,KAAAsP,OACL2pB,EAAW/nB,KAAMjR,sBAAwB,GADpC,KAAAqP,OAEL2pB,GAAY/lB,KAAKgB,MAAMugB,oBAAsBvjB,KAAM/Q,eAAiB,GAF/D,KAGT+Q,MAAO,CACHqoB,SAAU,WACVrB,KAAM9sB,EACNgtB,IAAK/sB,EACL3C,MAAOA,EACPC,OAAQA,EACR6qB,OAAQ,OACRgG,UAAS,UAAAlqB,OAAYxD,EAAZ,QACT2tB,cAAeN,EAAgB,OAAS,YAG3CpP,EACDiI,EAAAhgB,EAAAf,cAAA,OACIsE,IAAK0f,KACLyE,IAAI,MACJN,IAAKlmB,KAAKmf,OACViH,UAAWpoB,KAAMhR,WACjBgR,MAAO,CACHqoB,SAAU,WACVrB,KAAM,EACNE,IAAK,EACL5E,OAAM,OAAAlkB,OAAS2lB,KAAT,WACN9jB,aAAgBkH,IAAP7M,QAA6B6M,IAAT1M,EAAqB,UAAY,UAItEqmB,EAAAhgB,EAAAf,cAAA,OACIsE,IAAKugB,KACL4D,IAAI,OACJN,IAAKlmB,KAAKof,QACVgH,UAAWpoB,KAAMhR,WACjBgR,MAAO,CACHqoB,SAAU,WACVI,MAAO,EACPvB,IAAK,EACL5E,OAAM,OAAAlkB,OAASwmB,KAAT,WACN3kB,aAAkBkH,IAAT1M,EAAqB,UAAY,UAIlDqmB,EAAAhgB,EAAAf,cAAA,OACIsE,IAAKwhB,KACL2C,IAAI,SACJN,IAAKlmB,KAAKqf,UACV+G,UAAWpoB,KAAMhR,WACjBgR,MAAO,CACHqoB,SAAU,WACVI,MAAO,EACPC,OAAQ,EACRpG,OAAM,OAAAlkB,OAASynB,KAAT,WACN5lB,QAAS+iB,EAAW,OAAS,aAGrClC,EAAAhgB,EAAAf,cAAA,OACIsE,IAAKyiB,KACL0B,IAAI,SACJN,IAAKlmB,KAAKsf,UACV8G,UAAWpoB,KAAMhR,WACjBgR,MAAO,CACHqoB,SAAU,WACVrB,KAAM,EACN0B,OAAQ,EACRpG,OAAM,OAAAlkB,OAAS0oB,KAAT,WACN7mB,QAAS+iB,EAAW,OAAS,qBAxlBvB4E,IAAM7G,WAinBrB4H,eAjBS,SAAC3lB,EAAcie,GACnC,IAAM+G,EAAgB/G,EAAMhnB,UAAY+I,EAAMmW,QAAQC,QAAQC,cACxD0O,EACF9G,EAAMjnB,SAAWgJ,EAAMmW,QAAQC,QAAQ0C,cAAgBmF,EAAMhnB,UAAY+I,EAAMmW,QAAQC,QAAQC,cAC7FjO,EAAYpI,EAAMmW,QAAQC,QAAQnN,OAAOgV,EAAMjnB,QAAQinB,EAAMhnB,SAInE,MAAO,CACH8tB,WACAC,gBACAhF,UANkC,IAArB5X,EAAUgS,OAOvB6K,eAN4C,IAA1B7c,EAAU9R,YAO5BQ,iBAAkBkJ,EAAMmW,QAAQC,QAAQtf,mBAIjC6uB,CAAqE3H,8CC5nB9E4H,eACF,SAAAA,EAAY3H,GAAc,IAAAvb,EAAA,OAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAA4mB,IACtBljB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA8mB,GAAAzX,KAAAnP,KAAMif,KASV4H,WAAa,SAAC3uB,EAAWC,EAAW2uB,EAAmB1uB,GAAkB,IAAA2oB,EAClBrd,EAAKub,MAAhD8H,EAD6DhG,EAC7DgG,SAAU/uB,EADmD+oB,EACnD/oB,OAAQuH,EAD2CwhB,EAC3CxhB,eAAgB2hB,EAD2BH,EAC3BG,KAC1C6F,EACIhvB,GAA2B+uB,EAAW9uB,OAASmN,EAAW5F,EAAe9L,GAAIyE,EAAIgpB,EAAM/oB,EAAI+oB,EAAM9oB,KAb/EsL,EAiB1BsjB,UAAY,SAAC1uB,EAAYC,EAAYuuB,EAAmB1uB,GAAkB,IAAA6oB,EACnBvd,EAAKub,MAAhD8H,EAD8D9F,EAC9D8F,SAAU/uB,EADoDipB,EACpDjpB,OAAQuH,EAD4C0hB,EAC5C1hB,eAAgB2hB,EAD4BD,EAC5BC,KAC1C6F,EAAS1uB,GAAsByuB,EAAW9uB,OAASmN,EAAW5F,EAAe9L,GAAI6E,EAAK4oB,EAAM3oB,EAAK2oB,EAAM9oB,KAnBjFsL,EAsB1BujB,WAAa,SAACxuB,EAAcquB,EAAmB1uB,GAAkB,IAAAkpB,EAChB5d,EAAKub,MAA1C8H,EADqDzF,EACrDyF,SAAU/uB,EAD2CspB,EAC3CtpB,OAAQuH,EADmC+hB,EACnC/hB,eAC1BwnB,EAASvuB,GAAuBsuB,EAAW9uB,OAASmN,EAAW5F,EAAe9L,GAAIgF,EAAML,KAxBlEsL,EA2B1BwjB,aAAe,SAAC1xB,EAAeC,EAAgBqxB,EAAmB1uB,GAAkB,IAAA6pB,EAC7Bve,EAAKub,MAAhD8H,EADwE9E,EACxE8E,SAAUxnB,EAD8D0iB,EAC9D1iB,eAAgBvH,EAD8CiqB,EAC9CjqB,OAAQkpB,EADsCe,EACtCf,KAC1C6F,EACIruB,GACIouB,EAAW9uB,OAASmN,EACpB5F,EAAe9L,GACf+B,EAAQ0rB,EACRzrB,EAASyrB,EACT9oB,KAnCcsL,EAwC1ByjB,aAAe,SAACvuB,EAAekuB,EAAmB1uB,GAAkB,IAAAgqB,EACnB1e,EAAKub,MAA1C8H,EADwD3E,EACxD2E,SAAU/uB,EAD8CoqB,EAC9CpqB,OAAQuH,EADsC6iB,EACtC7iB,eAC1BwnB,EAASpuB,GAAwBmuB,EAAW9uB,OAASmN,EAAW5F,EAAe9L,GAAImF,EAAOR,KA1CpEsL,EA6C1Bgc,gBAAkB,WACdhc,EAAK6c,SAAS,CAAE6G,UAAU,KA9CJ1jB,EAiD1Boc,iBAAmB,SAACje,GACZA,EAAMke,QAAQtb,OAAS,GAI3Bf,EAAK6c,SAAS,CAAE6G,UAAU,EAAOlvB,EAAG2J,EAAMme,eAAe,GAAGS,QAAStoB,EAAG0J,EAAMme,eAAe,GAAGW,WAtD1Ejd,EAyD1Bkc,gBAAkB,WACdlc,EAAK6c,SAAS,CAAE6G,UAAU,KA1DJ1jB,EA6D1Buc,gBAAkB,SAACpe,GACf,KAAIA,EAAMke,QAAQtb,OAAS,GAA3B,CAD2C,IAAAghB,EAK1B/hB,EAAK1C,MAAd9I,EALmCutB,EAKnCvtB,EAAGC,EALgCstB,EAKhCttB,GACP6G,KAAKmkB,IAAIthB,EAAMme,eAAe,GAAGS,QAAUvoB,GAAK,GAAK8G,KAAKmkB,IAAIthB,EAAMme,eAAe,GAAGW,QAAUxoB,GAAK,IACrGuL,EAAK6c,SAAS,CAAE6G,UAAU,MApER1jB,EAwE1Bmc,cAAgB,WACZnc,EAAK0d,kBAzEiB1d,EA4E1Byc,eAAiB,SAACte,GACVA,EAAMke,QAAQtb,OAAS,GAI3Bf,EAAK0d,kBAjFiB1d,EAoF1B0d,eAAiB,WAAM,IAAA0B,EACoCpf,EAAKub,MAApD8H,EADWjE,EACXiE,SAAU/uB,EADC8qB,EACD9qB,OAAQ+iB,EADP+H,EACO/H,SAAUxb,EADjBujB,EACiBvjB,eAC/BmE,EAAK1C,MAAMomB,UACZL,EAASltB,GAA0B7B,EAAQ+iB,EAAUxb,EAAe9L,MAvFlDiQ,EA2F1B2jB,eAAiB,SAACxlB,GACd6B,EAAK6c,SAAS,CAAE+G,YAAY,IAC5BzlB,EAAMoW,iBACNpW,EAAM4d,mBA9FgB/b,EAiG1B6jB,gBAAkB,SAAC1lB,GACf6B,EAAK6c,SAAS,CAAE+G,YAAY,IAC5BzlB,EAAMoW,iBACNpW,EAAM4d,mBApGgB/b,EAuG1B8jB,WAAa,SAAC3lB,GACV6B,EAAK6c,SAAS,CAAE+G,YAAY,IAC5BzlB,EAAMoW,iBACNpW,EAAM4d,kBAEN,IAAM5iB,EAAMgF,EAAM4lB,aAAaC,QAAQ,OACjCC,EAAgB9qB,EAAI0N,QAAQ,oBAElC,IAAuB,IAAnBod,EAAsB,KAAA5D,EACuBrgB,EAAKub,MAA1CjnB,EADc+rB,EACd/rB,OAAQuH,EADMwkB,EACNxkB,eAAgBwnB,EADVhD,EACUgD,SAC5B9kB,EAAM,IAAIC,MAEdD,EAAIL,iBAAiB,OAAQ,WACzB,IAAMgmB,EAAgB,CAClB/qB,IAAKA,EAAIgrB,OAAOF,GAChBnyB,MAAOwK,KAAK+T,aACZte,OAAQuK,KAAKgU,eAEjB+S,EAASttB,GAAmBzB,EAAQuH,EAAe9L,GAAIm0B,MAE3D3lB,EAAII,IAAMxF,IAzHd6G,EAAK1C,MAAQ,CACTsmB,YAAY,EACZF,UAAU,EACVlvB,EAAG,EACHC,EAAG,GANeuL,0EA+HjB,IAAA2gB,EAC6DrkB,KAAKif,MAA/D1f,EADH8kB,EACG9kB,eAAgBuoB,EADnBzD,EACmByD,SAAU5G,EAD7BmD,EAC6BnD,KAAM6G,EADnC1D,EACmC0D,UAAWC,EAD9C3D,EAC8C2D,WAE/C5iB,EAAM9F,GAAyBC,GAC/BC,EAAuB4F,EAAI5P,MAAQ0rB,EACnCzhB,EAAwB2F,EAAI3P,OAASyrB,EAEzC,OACIpC,EAAAhgB,EAAAf,cAACkqB,GAAD,CACIjwB,OAAQgI,KAAKif,MAAMjnB,OACnBC,QAASsH,EAAe9L,GACxByE,EAAGqH,EAAerH,EAAIgpB,EACtB/oB,EAAGoH,EAAepH,EAAI+oB,EACtB1rB,MAAO+J,EAAe/J,MAAQ0rB,EAC9BzrB,OAAQ8J,EAAe9J,OAASyrB,EAChC5oB,IAAKiH,EAAejH,IAAM,GAAK4oB,EAC/B3oB,IAAKgH,EAAehH,IAAM,GAAK2oB,EAC/BzoB,KAAM8G,EAAe9G,MAAQ,EAC7BG,MAAO2G,EAAe3G,MACtBuoB,OAAQnhB,KAAK6mB,WACb3E,MAAOliB,KAAKgnB,UACZjE,OAAQ/iB,KAAKinB,WACbjD,SAAUhkB,KAAKknB,aACf1B,SAAUxlB,KAAKmnB,aACfY,UAAWA,EACXC,WAAYA,EACZ9G,KAAMA,GAENpC,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHxI,MAAO,OACPC,OAAQ,OACR4wB,SAAU,WACV6B,SAAU3oB,EAAenI,KAAO,SAAW,WAE/CgvB,UAAWpmB,KAAKgB,MAAMsmB,WAAatpB,KAAMvR,KAAO,GAChD07B,YAAanoB,KAAK0f,gBAClB0I,aAAcpoB,KAAK8f,iBACnBuI,YAAaroB,KAAK4f,gBAClB0I,YAAatoB,KAAKigB,gBAClBsI,UAAWvoB,KAAK6f,cAChB2I,WAAYxoB,KAAKmgB,eACjBsI,WAAYzoB,KAAKqnB,eACjBqB,YAAa1oB,KAAKunB,gBAClBoB,OAAQ3oB,KAAKwnB,YAEb1I,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHqoB,SAAU,WACVuC,QAASd,GAAYA,EAASrjB,OAAS,EAAI,EAAI,GAC/CugB,MAAOzlB,EAAejH,IAAM,GAAK4oB,EACjCgE,KAAM3lB,EAAehH,IAAM,GAAK2oB,EAChC1rB,MAAOgK,EACP/J,OAAQgK,GAEZ4C,IAAKylB,GAAYe,KACjBrC,IAAI,cAxLHsC,iBA+MVnC,eAfS,SAAC3lB,EAAcie,GACnC,IAAI6I,EAA+B,GASnC,OARI7I,EAAM1f,gBAAgD,UAA9B0f,EAAM1f,eAAehM,OAEzCu0B,EADA7I,EAAM1f,eAAe3F,OACV,6BAA+BqlB,EAAM1f,eAAe3F,OAEpDqlB,EAAM1f,gBAAkB0f,EAAM1f,eAAe1C,KAIzD,CACHirB,aAIOnB,CAAqEC,yBC7N9EmC,eAcF,SAAAA,EAAY9J,GAAc,IAAAvb,EAAA,OAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAA+oB,IACtBrlB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAipB,GAAA5Z,KAAAnP,KAAMif,KAdV+J,aAa0B,EAAAtlB,EAZ1BulB,iBAY0B,EAAAvlB,EAX1BwlB,kBAW0B,EAAAxlB,EAV1BylB,kBAU0B,EAAAzlB,EAT1B0lB,uBAS0B,EAAA1lB,EAR1B2lB,wBAQ0B,EAAA3lB,EAP1B4lB,qBAO0B,EAAA5lB,EAN1B6lB,uBAM0B,EAAA7lB,EAL1B8lB,aAK0B,EAAA9lB,EAJ1B0jB,cAI0B,EAAA1jB,EAH1BxL,OAG0B,EAAAwL,EAF1BvL,OAE0B,EAAAuL,EA0D1Bgc,gBAAkB,SAAC7d,GACf6B,EAAK+lB,YAAY5nB,IA3DK6B,EA8D1Boc,iBAAmB,SAACje,GACZA,EAAMke,QAAQtb,OAAS,IAI3Bf,EAAKxL,EAAI2J,EAAMme,eAAe,GAAGS,QACjC/c,EAAKvL,EAAI0J,EAAMme,eAAe,GAAGW,QACjCjd,EAAK+lB,YAAY5nB,KArEK6B,EAwE1B+lB,YAAc,SAAC5nB,GACU6B,EAAKub,MAAlB8G,SAEJlkB,EAAM4d,mBAEN/b,EAAK0jB,UAAW,EAChBvlB,EAAMoW,mBA9EYvU,EAkF1Bkc,gBAAkB,SAAC/d,GACf6B,EAAKgmB,WAAW7nB,IAnFM6B,EAsF1Buc,gBAAkB,SAACpe,GACXA,EAAMke,QAAQtb,OAAS,IAKvBzF,KAAKmkB,IAAIthB,EAAMme,eAAe,GAAGS,QAAU/c,EAAKxL,GAAK,GACrD8G,KAAKmkB,IAAIthB,EAAMme,eAAe,GAAGW,QAAUjd,EAAKvL,GAAK,IAErDuL,EAAKgmB,WAAW7nB,IA/FE6B,EAmG1BgmB,WAAa,SAAC7nB,GACW6B,EAAKub,MAAlB8G,WAEJriB,EAAK0jB,UAAW,EAChBvlB,EAAMoW,mBAvGYvU,EA2G1Bmc,cAAgB,SAAChe,GACb6B,EAAK0d,eAAevf,IA5GE6B,EA+G1Byc,eAAiB,SAACte,GACVA,EAAMke,QAAQtb,OAAS,GAI3Bf,EAAK0d,eAAevf,IApHE6B,EAuH1B0d,eAAiB,SAACvf,GAAiB,IAAAkf,EAC2Brd,EAAKub,MAAvD8H,EADuBhG,EACvBgG,SAAU/uB,EADa+oB,EACb/oB,OAAQ+iB,EADKgG,EACLhG,SAAU9iB,EADL8oB,EACK9oB,QACpC,IAF+B8oB,EACcgF,WAC3BriB,EAAK0jB,SAAU,CAI7B,GAHAvlB,EAAMoW,iBACN8O,EAASltB,GAA0B7B,EAAQ+iB,EAAU9iB,KAEhDyL,EAAKslB,QAAQ3I,QAAS,OAC3B3c,EAAKslB,QAAQ3I,QAAQsJ,UA9HHjmB,EAkI1BkmB,QAAU,WACN,GAAKlmB,EAAKslB,QAAQ3I,QAAlB,CADY,IAAAY,EAG2Dvd,EAAKub,MAApE4K,EAHI5I,EAGJ4I,UAAW/wB,EAHPmoB,EAGOnoB,MAAOE,EAHdioB,EAGcjoB,MAAOzM,EAHrB00B,EAGqB10B,WAAYC,EAHjCy0B,EAGiCz0B,YAAa4M,EAH9C6nB,EAG8C7nB,SAC1DsK,EAAKulB,YAAcY,EACnBnmB,EAAKwlB,aAAepwB,EACpB4K,EAAKylB,aAAenwB,EACpB0K,EAAK0lB,kBAAoB78B,EACzBmX,EAAK2lB,mBAAqB78B,EAC1BkX,EAAK4lB,gBAAkBlwB,EAEvB,IAAM0wB,EAAQhsB,SAASisB,cACvBD,EAAME,mBAAmBtmB,EAAKslB,QAAQ3I,SACtCyJ,EAAMG,UAAS,GACf,IAAMC,EAAYxrB,OAAOyrB,eACzBD,EAAUE,kBACVF,EAAUG,SAASP,KAlJGpmB,EAqJ1B4mB,cAAgB,SAACC,GACb,GAAK7mB,EAAKslB,QAAQ3I,QAAlB,CAIA,IAHA,IAAIvW,EAAQpG,EAAKslB,QAAQ3I,QAAQmK,UAE7BC,GAAa,GACyC,KAAlDA,EAAY3gB,EAAMS,QAAQ,oBAC9BT,EAAQA,EAAM/D,MAAM,EAAG0kB,EAAY,IAAM3gB,EAAM/D,MAAM+D,EAAMS,QAAQ,IAAKkgB,EAAY,KAGpF3gB,IAAUpG,EAAKulB,cACfvlB,EAAKulB,YAAcnf,EAEfpG,EAAK8lB,SACLkB,aAAahnB,EAAK8lB,SAGtB9lB,EAAK8lB,QAAU/qB,WAAW,WAAM,IAAA6iB,EACU5d,EAAKub,MAAnC8H,EADoBzF,EACpByF,SAAU/uB,EADUspB,EACVtpB,OAAQC,EADEqpB,EACFrpB,QAG1B8uB,EAASxtB,GAAkBvB,EAAQC,EAFR,CAAE6R,YAG9BygB,MA1Ke7mB,EA8K1BinB,WAAa,WACTjnB,EAAK4mB,cAAc,IA/KG5mB,EAkL1BknB,YAAc,WACVlnB,EAAK4mB,cAAc,MAnLG5mB,EAsL1BmnB,YAAc,SAAChpB,GAUXA,EAAMoW,iBAEN,IAAIzkB,EAAO,GAGXA,GAFAA,EAAOqO,EAAMipB,cAAcpD,QAAQ,eAG9BpkB,MAAM,MACN1C,IAAI,SAACmqB,GAAD,cAAA3uB,OAAkC2uB,EAdlC1gB,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UAUd,YACJtJ,KAAK,IACVjD,SAASktB,YAAY,cAAc,EAAOx3B,IAvM1CkQ,EAAKslB,QAAUpD,IAAMC,YACrBniB,EAAKulB,YAAc,GACnBvlB,EAAKwlB,aAAe,GACpBxlB,EAAKylB,aAAe,GACpBzlB,EAAK0lB,kBAAoB,GACzB1lB,EAAK2lB,mBAAqB,GAC1B3lB,EAAK4lB,gBAAkBl8B,EACvBsW,EAAK6lB,kBAAoBl8B,EACzBqW,EAAK8lB,QAAU,KACf9lB,EAAK0jB,UAAW,EAChB1jB,EAAKxL,EAAI,EACTwL,EAAKvL,EAAI,EAbauL,qFAgBN,IACRqiB,EAAa/lB,KAAKif,MAAlB8G,SAEH/lB,KAAKgpB,QAAQ3I,UAElBrgB,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,YAAa5B,KAAK0f,iBACxD1f,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,aAAc5B,KAAK8f,kBACzD9f,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,YAAa5B,KAAK4f,iBACxD5f,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,YAAa5B,KAAKigB,gBAAiB,CAAEC,SAAS,IACpFlgB,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,UAAW5B,KAAK6f,eACtD7f,KAAKgpB,QAAQ3I,QAAQze,iBAAiB,WAAY5B,KAAKmgB,eAAgB,CAAED,SAAS,IAE9E6F,GACA/lB,KAAKgpB,QAAQ3I,QAAQsJ,uDAIPsB,GAWlB,OATIA,EAAUpB,YAAc7pB,KAAKipB,aAC7BgC,EAAUnyB,QAAUkH,KAAKkpB,cACzB+B,EAAUjyB,QAAUgH,KAAKmpB,cACzB8B,EAAU1+B,aAAeyT,KAAKopB,mBAC9B6B,EAAUz+B,cAAgBwT,KAAKqpB,oBAC/B4B,EAAU7xB,WAAa4G,KAAKspB,iBAC5B2B,EAAU3xB,aAAe0G,KAAKupB,mBAC9BvpB,KAAKif,MAAM8G,WAAakF,EAAUlF,sDAKrB,IAAA9D,EACkEjiB,KAAKif,MAAhF4K,EADS5H,EACT4H,UAAW/wB,EADFmpB,EACEnpB,MAAOE,EADTipB,EACSjpB,MAAOzM,EADhB01B,EACgB11B,WAAYC,EAD5By1B,EAC4Bz1B,YAAa4M,EADzC6oB,EACyC7oB,SAAUE,EADnD2oB,EACmD3oB,WACpE0G,KAAKipB,YAAcY,EACnB7pB,KAAKkpB,aAAepwB,EACpBkH,KAAKmpB,aAAenwB,EACpBgH,KAAKopB,kBAAoB78B,EACzByT,KAAKqpB,mBAAqB78B,EAC1BwT,KAAKspB,gBAAkBlwB,EACvB4G,KAAKupB,kBAAoBjwB,mCAqJpB,IAAA8oB,EACmEpiB,KAAKif,MAArEjmB,EADHopB,EACGppB,MAAOF,EADVspB,EACUtpB,MAAOvM,EADjB61B,EACiB71B,WAAYC,EAD7B41B,EAC6B51B,YAAa4M,EAD1CgpB,EAC0ChpB,SAAUE,EADpD8oB,EACoD9oB,WACnD4xB,EAAW1+B,IAAkD,IAAnCA,EAAY+d,QAAQ,UAC9C4gB,EAAaD,EACG,WAAhB1+B,EACI,IACA4+B,SAAS5+B,EAAYuZ,MAAM,EAAG,IAClB,YAAhBvZ,EACA,IACA4+B,SAAS5+B,GAEf,OACIsyB,EAAAhgB,EAAAf,cAAA,OACImoB,IAAKlmB,KAAKgpB,QACV5C,UAAWpoB,KAAMtR,QACjB2+B,iBAAiB,EACjBzB,QAAS5pB,KAAK4pB,QACd0B,OAAQtrB,KAAK2qB,WACbY,QAASvrB,KAAK4qB,YACdY,QAASxrB,KAAK6qB,YACd7sB,MAAO,CACHxI,MAAO,OACPC,OAAQ,OACRg2B,UAAqB,SAAV3yB,EAAmB,OAAmB,UAAVA,EAAoB,QAAU,SACrEE,MAAOA,EACPzM,WAAY,IAAA6P,OAAI7P,EAAJ,OAAqBm/B,EACjCC,UAAWT,EAAW,SAAW,SACjCC,aACA/xB,SAAQ,GAAAgD,OAAKhD,EAAL,MACRwyB,QAAS,OACTC,aAAc,aACdvyB,cAEJwyB,wBAAyB,CAAEC,OAAQ/rB,KAAKif,MAAM4K,oBA3PhC9K,aA4Qf4H,eAXS,SAAC3lB,EAAcie,GACnC,IAAI7V,EAAYpI,EAAMmW,QAAQC,QAAQnN,OAAOgV,EAAMjnB,QAAQinB,EAAMhnB,SAEjE,MAAO,CACH4xB,UAFiC,SAAnBzgB,EAAU7V,KAAkB6V,EAAUU,MAAQ,GAG5Dic,SACI9G,EAAMjnB,SAAWgJ,EAAMmW,QAAQC,QAAQ0C,cACvCmF,EAAMhnB,UAAY+I,EAAMmW,QAAQC,QAAQC,gBAIrCsP,CAAqEoC,yBC9Q9EiD,iNACFnF,WAAa,SAAC3uB,EAAWC,EAAW2uB,EAAmB1uB,GAAkB,IAAA2oB,EACnBrd,EAAKub,MAA/C8H,EAD6DhG,EAC7DgG,SAAU/uB,EADmD+oB,EACnD/oB,OAAQi0B,EAD2ClL,EAC3CkL,cAAe/K,EAD4BH,EAC5BG,KACzC6F,EACIhvB,GAA2B+uB,EAAW9uB,OAASmN,EAAW8mB,EAAcx4B,GAAIyE,EAAIgpB,EAAM/oB,EAAI+oB,EAAM9oB,OAIxG8uB,aAAe,SAAC1xB,EAAeC,EAAgBqxB,EAAmB1uB,GAAkB,IAAA6oB,EAC9Bvd,EAAKub,MAA/C8H,EADwE9F,EACxE8F,SAAUkF,EAD8DhL,EAC9DgL,cAAej0B,EAD+CipB,EAC/CjpB,OAAQkpB,EADuCD,EACvCC,KACzC6F,EACIruB,GAAuBouB,EAAW9uB,OAASmN,EAAW8mB,EAAcx4B,GAAI+B,EAAQ0rB,EAAMzrB,EAASyrB,EAAM9oB,OAI7G+uB,aAAe,SAACvuB,EAAekuB,EAAmB1uB,GAAkB,IAAAkpB,EACpB5d,EAAKub,MAAzC8H,EADwDzF,EACxDyF,SAAUkF,EAD8C3K,EAC9C2K,cAAej0B,EAD+BspB,EAC/BtpB,OACjC+uB,EAASpuB,GAAwBmuB,EAAW9uB,OAASmN,EAAW8mB,EAAcx4B,GAAImF,EAAOR,+EAGpF,IAAA6pB,EACwDjiB,KAAKif,MAA1DgN,EADHhK,EACGgK,cAAez4B,EADlByuB,EACkBzuB,KAAM0tB,EADxBe,EACwBf,KAAM6G,EAD9B9F,EAC8B8F,UAAWC,EADzC/F,EACyC+F,WAE9C,OACIlJ,EAAAhgB,EAAAf,cAACkqB,GAAD,CACIjwB,OAAQgI,KAAKif,MAAMjnB,OACnBC,QAASg0B,EAAcx4B,GACvByE,EAAG+zB,EAAc/zB,EAAIgpB,EACrB/oB,EAAG8zB,EAAc9zB,EAAI+oB,EACrB1rB,MAAOy2B,EAAcz2B,MAAQ0rB,EAC7BzrB,OAAQw2B,EAAcx2B,OAASyrB,EAC/BtoB,MAAOqzB,EAAcrzB,MACrBuoB,OAAQnhB,KAAK6mB,WACb7C,SAAUhkB,KAAKknB,aACf1B,SAAUxlB,KAAKmnB,aACfY,UAAWA,EACXC,WAAYA,EACZ9G,KAAMA,GAEI,KAAT1tB,GACGsrB,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHxI,MAAO,OACPC,OAAQ,OACR4wB,SAAU,QACVrB,KAAM,EACNE,IAAK,EACLgH,QAAS,EACTT,UAC4B,SAAxBQ,EAAcnzB,MACR,OACwB,UAAxBmzB,EAAcnzB,MACd,QACA,WAGdgmB,EAAAhgB,EAAAf,cAAA,OAAKC,MAAO,CAAE4qB,QAAS,GAAKpzB,MAAO,OAAQC,OAAQ,QAAU4M,IAAK8pB,KAAgB3F,IAAI,MAI9F1H,EAAAhgB,EAAAf,cAACquB,GAAD,CACIp0B,OAAQgI,KAAKif,MAAMjnB,OACnB+iB,SAAU/a,KAAKif,MAAMlE,SACrB9iB,QAASg0B,EAAcx4B,GACvBqF,MAAOmzB,EAAcnzB,MACrBE,MAAOizB,EAAcjzB,MACrBzM,WAAY0/B,EAAc1/B,WAC1BC,YAAay/B,EAAcz/B,YAC3B4M,SAAU6yB,EAAc7yB,SAAW8nB,EACnC5nB,WAAY2yB,EAAc3yB,YAAcjM,YArEpCy7B,iBAoFTnC,eARS,SAAC3lB,EAAcie,GACnC,IAAI7V,EAAYpI,EAAMmW,QAAQC,QAAQnN,OAAOgV,EAAMjnB,QAAQinB,EAAMgN,cAAcx4B,IAE/E,MAAO,CACHD,KAF0B,SAAnB4V,EAAU7V,KAAkB6V,EAAUU,MAAQ,KAM9C6c,CAAqEqF,yBC1E9EK,iNACFrrB,MAAQ,CACJsrB,WAAY,CACR92B,OAAQ,EACRC,QAAS,MAIjB82B,oBAAsB,SAAC1qB,GAA+C,IAAAkf,EAC/Brd,EAAKub,MAAhC8H,EAD0DhG,EAC1DgG,SAAUj7B,EADgDi1B,EAChDj1B,KAAMiY,EAD0Cgd,EAC1Chd,OACblC,EAAM2qB,OACVC,aAAa,QAAhB,QAAArwB,OAAkCtQ,EAAK2H,MACvCszB,EAASltB,GAA0B/N,EAAK2H,GAAIsQ,OAAQoB,IACpDtD,EAAM4d,8FAIL,IAAAiN,EAAA1sB,KAAAihB,EAC0FjhB,KAAKif,MAA5F9V,EADH8X,EACG9X,WAAYwjB,EADf1L,EACe0L,UAAW7gC,EAD1Bm1B,EAC0Bn1B,KAAMiY,EADhCkd,EACgCld,OAAQvO,EADxCyrB,EACwCzrB,MAAOC,EAD/CwrB,EAC+CxrB,OAAQm3B,EADvD3L,EACuD2L,aAAcn0B,EADrEwoB,EACqExoB,KAAMb,EAD3EqpB,EAC2ErpB,WAC1Ei1B,EAAkBr3B,EAAsB,EAAdlI,EAC1Bw/B,EAAmBr3B,EAAuB,EAAdnI,EAE5B4zB,EAAOlhB,KAAKgB,MAAMsrB,WAAW92B,MAAQq3B,EAE3C,OACI/N,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAACgvB,GAAA,EAAD,CACIC,QAAM,EACNhJ,SAAU,SAAAiJ,GACDA,EAAYD,QAGjBN,EAAKnM,SAAS,CAAE+L,WAAYW,EAAYD,WAG3C,SAAAE,GAAA,IAAGC,EAAHD,EAAGC,WAAH,OACGrO,EAAAhgB,EAAAf,cAAA,OACIqoB,UAAS,GAAAhqB,OAAK4B,KAAMlS,KAAX,KAAAsQ,OAAmBwwB,EAAe5uB,KAAMhS,OAAS,IAC1DyH,GAAE,QAAA2I,OAAUtQ,EAAK2H,IACjByyB,IAAKiH,EACLnvB,MAAO,CACHxI,MAAK,GAAA4G,OAAKywB,EAAkBp0B,EAAvB,MACLhD,OAAM,GAAA2G,OAAK0wB,EAAmBr0B,EAAxB,MACN4tB,SAAU,WACV6B,SAAU,UAEdC,YAAauE,EAAKH,oBAClBnE,aAAcsE,EAAKH,qBAElBI,EAAU/rB,IAAI,SAAAnN,GACX,KAAMA,KAAM0V,GACR,OAAO,KAEX,IAAMtd,EAAIsd,EAAW1V,GACrB,MAAe,UAAX5H,EAAE0H,KAEEurB,EAAAhgB,EAAAf,cAACqvB,GAAD,CACIC,IAAKxhC,EAAE4H,GACPuE,OAAQlM,EAAK2H,GACbsnB,SAAUhX,EACVxE,eAAgB1T,EAChBq1B,KAAMA,EACN6G,UAAW2E,EAAK1rB,MAAMsrB,WAAW92B,MACjCwyB,WAAY0E,EAAK1rB,MAAMsrB,WAAW72B,SAGxB,SAAX5J,EAAE0H,KAELurB,EAAAhgB,EAAAf,cAACuvB,GAAD,CACID,IAAKxhC,EAAE4H,GACPuE,OAAQlM,EAAK2H,GACbsnB,SAAUhX,EACVkoB,cAAepgC,EACfq1B,KAAMA,EACN6G,UAAW2E,EAAK1rB,MAAMsrB,WAAW92B,MACjCwyB,WAAY0E,EAAK1rB,MAAMsrB,WAAW72B,SAIvC,OAGXqpB,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHqoB,SAAU,WACV7wB,MAAK,GAAA4G,OAAK5G,EAAQiD,EAAb,MACLhD,OAAM,GAAA2G,OAAK3G,EAASgD,EAAd,MACNusB,KAAI,GAAA5oB,OAAK9O,EAAcmL,EAAnB,MACJysB,IAAG,GAAA9oB,OAAK9O,EAAcmL,EAAnB,MACH80B,OAAQ,mBACRC,aAAc,MACdjH,cAAe,UAIvBzH,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHqoB,SAAU,WACV7wB,MAAK,GAAA4G,QAAM5G,EAAsB,EAAdlI,GAAmBmL,EAAjC,MACLhD,OAAM,GAAA2G,QAAM3G,EAAuB,EAAdnI,GAAmBmL,EAAlC,MACNusB,KAAI,GAAA5oB,OAAmB,EAAd9O,EAAkBmL,EAAvB,MACJysB,IAAG,GAAA9oB,OAAmB,EAAd9O,EAAkBmL,EAAvB,MACH80B,OAAQ,iBACRC,aAAc,MACdjH,cAAe,aAMlC3uB,GACGknB,EAAAhgB,EAAAf,cAAA,OACIqoB,UAAWpoB,KAAMjS,MACjBiS,MAAO,CACHxI,MAAK,GAAA4G,OAAKywB,EAAkBp0B,EAAvB,MACL4tB,SAAU,aAGbtiB,EAAS,OAAS,iBAtHxBgb,aA+IJ4H,eAjBS,SAAC3lB,EAAcie,GACnC,IAAI9V,EAAanI,EAAMmW,QAAQC,QAAQnN,OAAOgV,EAAMnzB,KAAK2H,KAAO,GAEhE,MAAO,CACH0V,aACAwjB,UAAW3rB,EAAMmW,QAAQC,QAAQlL,aAAalR,OAC1C,SAAAvH,GAAE,OAAMA,KAAM0V,GAAcA,EAAW1V,GAAIsnB,WAAa,KAAWkE,EAAMlb,SAE7EvO,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9BmC,WAAYoJ,EAAMmW,QAAQC,QAAQxf,WAClCg1B,aACI5rB,EAAMmW,QAAQC,QAAQ0C,eAAiBmF,EAAMnzB,KAAK2H,IAAMuN,EAAMmW,QAAQC,QAAQtd,eAAiBmlB,EAAMlb,OACzGtL,KAAMuI,EAAMmW,QAAQC,QAAQ3e,OAIrBkuB,CAAqE0F,yBC/K/DoB,iNACjBzsB,MAAQ,CACJ0sB,eAAe,KAGnBC,YAAc,WACVjqB,EAAK6c,SAAS,CAAEmN,eAAe,OAGnCE,aAAe,SAAC/rB,GACZ6B,EAAKub,MAAM4O,SAAShsB,EAAM2qB,OAAO1iB,UAGrC6gB,WAAa,WACTjnB,EAAK6c,SAAS,CAAEmN,eAAe,+EAG1B,IACGA,EAAkB1tB,KAAKgB,MAAvB0sB,cACA3hC,EAAUiU,KAAKif,MAAflzB,MAER,OACI+yB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,MACMJ,GACE5O,EAAAhgB,EAAAf,cAAA,MAAIqoB,UAAWpoB,KAAM1R,MAAOyhC,QAAS/tB,KAAK2tB,aACrC5hC,GAGR2hC,GACG5O,EAAAhgB,EAAAf,cAAA,SACIiwB,WAAS,EACTz6B,KAAK,OACL6yB,UAAWpoB,KAAM1R,MACjBwd,MAAO/d,EACP8hC,SAAU7tB,KAAK4tB,aACftC,OAAQtrB,KAAK2qB,qBAnCM5L,2CPL/BH,mEASSqP,yLACR,IAAAlN,EACuB/gB,KAAKif,MAAzBiP,EADHnN,EACGmN,UAAWC,EADdpN,EACcoN,KAEnB,OACIrP,EAAAhgB,EAAAf,cAAA,OACIC,MAAO,CACHowB,UAAW,MACXC,aAAc,MACdC,QAAS,MACTd,aAAc,MACde,gBAAiB,iBACjBtwB,QAAS,OACTuwB,KAAM,wCAGTN,IAActP,GAAU6P,OAAS3P,EAAAhgB,EAAAf,cAAC0wB,GAAA,EAAD,CAAOC,KAAM,IAAKP,KAAMA,GAAQ,WAAYn1B,MAAM,YACnFk1B,IAActP,GAAU+P,SAAW7P,EAAAhgB,EAAAf,cAAC4wB,GAAA,EAAD,CAASD,KAAM,IAAKP,KAAMA,GAAQ,WAAYn1B,MAAM,YACxF8lB,EAAAhgB,EAAAf,cAAA,OAAKC,MAAO,CAAE4wB,WAAY,QAAU5uB,KAAKif,MAAMpI,kBAlBpBkI,iCQHtB8P,yLACR,IAAA9N,EACoB/gB,KAAKif,MAAtB6P,EADH/N,EACG+N,MAAOC,EADVhO,EACUgO,MAEf,OACIjQ,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAS,GAAAhqB,OAAK4B,KAAMgxB,OAAX,KAAA5yB,OAAqB0yB,EAAQ9wB,KAAM8wB,MAAQ9wB,KAAMixB,SAAjD,KAAA7yB,OAA6D2yB,EAAQ/wB,KAAM+wB,MAAQ,KAC7FjQ,EAAAhgB,EAAAf,cAAA,YACA+gB,EAAAhgB,EAAAf,cAAA,oBAPoBghB,iCCavBmQ,GAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAkvB,GAAA,QAAAG,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAovB,IAAA/f,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACIE,uBAAyB,YAErBzI,EADqBrjB,EAAKub,MAAlB8H,UACC/wB,OAHjB0N,EAMI+rB,sBAAwB,YAEpB1I,EADqBrjB,EAAKub,MAAlB8H,UACC9wB,OARjByN,EAWIgsB,qBAAuB,WAAM,IAAA3O,EACQrd,EAAKub,MAA9B0Q,EADiB5O,EACjB4O,WAAY5I,EADKhG,EACLgG,SACD,OAAf4I,GACA5I,EAAS7wB,GAAiBy5B,KAdtCjsB,EAkBIksB,sBAAwB,WAAM,IAAA3O,EACOvd,EAAKub,MAA9B0Q,EADkB1O,EAClB0O,WAAY5I,EADM9F,EACN8F,SACD,OAAf4I,GACA5I,EAAS5wB,GAAkBw5B,KArBvCjsB,EAyBImsB,kBAAoB,SAAChuB,GAA+C,IAAAyf,EAC/B5d,EAAKub,MAA9B0Q,EADwDrO,EACxDqO,WAAY5I,EAD4CzF,EAC5CyF,SACD,OAAf4I,GACA5I,EAAS3wB,GAAuBu5B,EAAYvE,SAASvpB,EAAM2qB,OAAO1iB,UA5B9EpG,EAgCIosB,gBAAkB,YAEd/I,EADqBrjB,EAAKub,MAAlB8H,UACClsB,OAlCjB6I,EAqCIqsB,gBAAkB,YAEdhJ,EADqBrjB,EAAKub,MAAlB8H,UACCjsB,OAvCjB4I,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAovB,EAAAC,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAovB,EAAA,EAAA7B,IAAA,SAAAvjB,MAAA,WA0Ca,IAAAmY,EAC2BjiB,KAAKif,MAA7B0Q,EADH1N,EACG0N,WAAYM,EADfhO,EACegO,QAEpB,OACInR,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,UAAY,SAChEnR,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAK0vB,qBACd3jC,MAAM,aACNq6B,UAA0B,OAAfuJ,EAAsB3xB,KAAM/R,SAAW,IAElD6yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,cAGJtH,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLuW,MAAsB,OAAf6lB,EAAsBA,EAAWt5B,MAAMyK,WAAa,EAC3D+sB,SAAU7tB,KAAK6vB,kBACf9jC,MAAM,0BACNq6B,UAA0B,OAAfuJ,EAAsB3xB,KAAM/R,SAAW,KAEtD6yB,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAK4vB,sBACd7jC,MAAM,cACNq6B,UAA0B,OAAfuJ,EAAsB3xB,KAAM/R,SAAW,IAElD6yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,YAIRtH,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK8vB,gBAAiB/jC,MAAM,iBACzC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,SAGJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+vB,gBAAiBhkC,MAAM,iCACzC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,UAIRtH,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKwvB,uBAAwBzjC,MAAM,sBAChD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,iBAGJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKyvB,sBAAuB1jC,MAAM,qBAC/C+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,sBAxFxB8I,EAAA,CAAoCnQ,aAyGrB4H,eATS,SAAC3lB,GACrB,MAAO,CACH2uB,gBAC2CxqB,IAAvCnE,EAAMmW,QAAQC,QAAQ0C,aAChB9Y,EAAMmW,QAAQC,QAAQ9B,UAAUtU,EAAMmW,QAAQC,QAAQ0C,cACtD,OAIH6M,CAA4EuI,yBC1G9EgB,GAAb,SAAAf,GAAA,SAAAe,IAAA,IAAAd,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAkwB,GAAA,QAAAb,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAowB,IAAA/gB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAoB,CAChB5L,IAAK,KAFbsO,EAKIysB,gBAAkB,SAACtuB,GACf6B,EAAK6c,SAAS,CAAEnrB,IAAKg2B,SAASvpB,EAAM2qB,OAAO1iB,UANnDpG,EASI0sB,eAAiB,WAAM,IAAArP,EACiBrd,EAAKub,MAAjC8H,EADWhG,EACXgG,SAAUsJ,EADCtP,EACDsP,cACVj7B,EAAQsO,EAAK1C,MAAb5L,IAEc,OAAlBi7B,GACAtJ,EAAS5xB,GAAqBC,EAAK,WAAYi7B,KAd3D3sB,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAowB,EAAAf,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAowB,EAAA,EAAA7C,IAAA,SAAAvjB,MAAA,WAkBa,IAAAmX,EAC6CjhB,KAAKif,MAA/CgR,EADHhP,EACGgP,QAASz6B,EADZyrB,EACYzrB,MAAOC,EADnBwrB,EACmBxrB,OAAQ66B,EAD3BrP,EAC2BqP,cACxBl7B,EAAQ4K,KAAKgB,MAAb5L,IAEF8O,EAAkBlF,KAAKmF,MAAM/O,GAAOI,EAAQ,KAAO,MACnD4O,EAAmBpF,KAAKmF,MAAM/O,GAAOK,EAAS,KAAO,MAE3D,OACIqpB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,OAAS,SAC7DnR,EAAAhgB,EAAAf,cAAA,8DACA+gB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,OAAf,QACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,MACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,IACL3C,SAAU7tB,KAAKmwB,gBACf/J,UAAU,eACV7R,YAAY,MACZzK,MAAO1U,IAGX0pB,EAAAhgB,EAAAf,cAAA,+BAAuBmG,GACvB4a,EAAAhgB,EAAAf,cAAA,gCAAwBqG,GAExB0a,EAAAhgB,EAAAf,cAAA,UAAQ9R,SAAUqkC,EAAevC,QAAS/tB,KAAKowB,gBAA/C,iBA3ChBF,EAAA,CAAwCnR,aA4DzB4H,eATS,SAAC3lB,GACrB,MAAO,CACHxL,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9B66B,eAAgBtvB,EAAMwR,MAAMmH,SAAWT,MAA2BA,GAClEmX,cAAervB,EAAMrU,SAASX,SAIvB26B,CAA4EuJ,IC5C9EO,GAAb,SAAAtB,GAAA,SAAAsB,IAAA,IAAArB,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAywB,GAAA,QAAApB,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAA2wB,IAAAthB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAQ,CACJxM,UAAW,IACXC,WAAY,IACZC,gBAAiB,GACjBC,gBAAiB,EACjBC,cAAe,EACfC,gBAAiB,EACjBC,qBAAqB,EACrBC,qBAAqB,EACrBC,uBAAuB,EACvBC,sBAAsB,EACtBC,yBAAyB,GAZjCwO,EAeIgtB,uBAAyB,WAAM,IACnB3J,EAAarjB,EAAKub,MAAlB8H,SADmBtB,EAcvB/hB,EAAK1C,MAXLxM,EAHuBixB,EAGvBjxB,UACAC,EAJuBgxB,EAIvBhxB,WACAC,EALuB+wB,EAKvB/wB,gBACAC,EANuB8wB,EAMvB9wB,gBACAC,EAPuB6wB,EAOvB7wB,cACAC,EARuB4wB,EAQvB5wB,gBACAC,EATuB2wB,EASvB3wB,oBACAC,EAVuB0wB,EAUvB1wB,oBACAC,EAXuBywB,EAWvBzwB,sBACAC,EAZuBwwB,EAYvBxwB,qBACAC,EAbuBuwB,EAavBvwB,wBAGJ6xB,EACI1yB,GACIqP,EAAKub,MAAM1rB,KACXmQ,EAAKub,MAAMxrB,GACXe,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,KA7ChBwO,EAkDIitB,sBAAwB,SAAC9uB,GACrB6B,EAAK6c,SAAS,CAAE/rB,UAAWo8B,WAAW/uB,EAAM2qB,OAAO1iB,UAnD3DpG,EAsDImtB,uBAAyB,SAAChvB,GACtB6B,EAAK6c,SAAS,CAAE9rB,WAAYm8B,WAAW/uB,EAAM2qB,OAAO1iB,UAvD5DpG,EA0DIotB,4BAA8B,SAACjvB,GAC3B6B,EAAK6c,SAAS,CAAE7rB,gBAAiBk8B,WAAW/uB,EAAM2qB,OAAO1iB,UA3DjEpG,EA8DIqtB,4BAA8B,SAAClvB,GAC3B6B,EAAK6c,SAAS,CAAE5rB,gBAAiBi8B,WAAW/uB,EAAM2qB,OAAO1iB,UA/DjEpG,EAkEIstB,0BAA4B,SAACnvB,GACzB6B,EAAK6c,SAAS,CAAE3rB,cAAeg8B,WAAW/uB,EAAM2qB,OAAO1iB,UAnE/DpG,EAsEIutB,4BAA8B,SAACpvB,GAC3B6B,EAAK6c,SAAS,CAAE1rB,gBAAiB+7B,WAAW/uB,EAAM2qB,OAAO1iB,UAvEjEpG,EA0EIwtB,gCAAkC,SAACrvB,GAC/B6B,EAAK6c,SAAS,CAAEzrB,oBAAqB+M,EAAM2qB,OAAO2E,WA3E1DztB,EA8EI0tB,0BAA4B,SAACvvB,GACzB6B,EAAK6c,SAAS,CAAExrB,oBAAqB8M,EAAM2qB,OAAO2E,WA/E1DztB,EAkFI2tB,4BAA8B,SAACxvB,GAC3B6B,EAAK6c,SAAS,CAAEvrB,sBAAuB6M,EAAM2qB,OAAO2E,WAnF5DztB,EAsFI4tB,2BAA6B,SAACzvB,GAC1B6B,EAAK6c,SAAS,CAAEtrB,qBAAsB4M,EAAM2qB,OAAO2E,WAvF3DztB,EA0FI6tB,8BAAgC,SAAC1vB,GAC7B6B,EAAK6c,SAAS,CAAErrB,wBAAyB2M,EAAM2qB,OAAO2E,WA3F9DztB,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAA2wB,EAAAtB,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA2wB,EAAA,EAAApD,IAAA,SAAAvjB,MAAA,WA8Fa,IAAAiX,EAC+B/gB,KAAKif,MAAjCuS,EADHzQ,EACGyQ,cAAeC,EADlB1Q,EACkB0Q,SAEvB,OACI3S,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACK2D,GACG3S,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,MAAON,KAAK,WAC5CrP,EAAAhgB,EAAAf,cAAA,uCACA+gB,EAAAhgB,EAAAf,cAAA,2FACA+gB,EAAAhgB,EAAAf,cAAA,iDAIR+gB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QACXtH,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,cAAf,oBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,aACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAK2wB,sBACfpc,YAAY,aACZzK,MAAO9J,KAAKgB,MAAMxM,YAEtBsqB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,eAAf,qBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,cACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAK6wB,uBACftc,YAAY,cACZzK,MAAO9J,KAAKgB,MAAMvM,aAEtBqqB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,yBAAf,gCACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,wBACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAK8wB,4BACfvc,YAAY,oBACZzK,MAAO9J,KAAKgB,MAAMtM,kBAEtBoqB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,yBAAf,gCACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,wBACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAK+wB,4BACfxc,YAAY,oBACZzK,MAAO9J,KAAKgB,MAAMrM,kBAGtBmqB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,uBAAf,sCACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,sBACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAKgxB,0BACfzc,YAAY,iBACZzK,MAAO9J,KAAKgB,MAAMpM,gBAGtBkqB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,yBAAf,wCACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,wBACHF,KAAK,SACLi9B,KAAK,MACL3C,SAAU7tB,KAAKixB,4BACf1c,YAAY,mBACZzK,MAAO9J,KAAKgB,MAAMnM,kBAGtBiqB,EAAAhgB,EAAAf,cAAA,SACIhS,MAAM,gKAGN+yB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASnxB,KAAKgB,MAAMlM,oBACpB+4B,SAAU7tB,KAAKkxB,kCAPvB,gCAYApS,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASnxB,KAAKgB,MAAMjM,oBACpB84B,SAAU7tB,KAAKoxB,4BAJvB,+CASAtS,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASnxB,KAAKgB,MAAMhM,sBACpB64B,SAAU7tB,KAAKqxB,8BAJvB,iDASAvS,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASnxB,KAAKgB,MAAM/L,qBACpB44B,SAAU7tB,KAAKsxB,6BAJvB,gEASAxS,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASnxB,KAAKgB,MAAM9L,wBACpB24B,SAAU7tB,KAAKuxB,gCAJvB,8EASAzS,EAAAhgB,EAAAf,cAAA,UAAQ9R,SAAUulC,EAAezD,QAAS/tB,KAAK0wB,wBAA/C,sBArNpBD,EAAA,CAAkC1R,aAoOnB4H,eANS,SAAC3lB,GACrB,MAAO,CACHwwB,eAAgBxwB,EAAMwR,MAAMmH,SAAWV,MAA2BA,KAI3D0N,CAAqE8J,yBC3PvEkB,GAAb,SAAAxC,GAAA,SAAAwC,IAAA,OAAA7xB,OAAAC,GAAA,EAAAD,CAAAE,KAAA2xB,GAAA7xB,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA6xB,GAAAxxB,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAA6xB,EAAAxC,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA6xB,EAAA,EAAAtE,IAAA,SAAAvjB,MAAA,WACa,IAAAiX,EACgC/gB,KAAKif,MAAlC2S,EADH7Q,EACG6Q,gBAAiB3B,EADpBlP,EACoBkP,QAEzB,OACInR,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,OAAS,SACxC,OAApB2B,GAA4B9S,EAAAhgB,EAAAf,cAAC8zB,GAAD,CAAct+B,KAAK,WAAWE,GAAIm+B,SAN/ED,EAAA,CAAwC5S,aAkBzB4H,eANS,SAAC3lB,GACrB,MAAO,CACH4wB,gBAAiB5wB,EAAMrU,SAASX,SAIzB26B,CAA4EgL,cCpBtEG,iNACjB9wB,MAAQ,CACJ+wB,oBAAoB,KAGxBpE,YAAc,WACVjqB,EAAK6c,SAAS,CAAEwR,oBAAqBruB,EAAK1C,MAAM+wB,wBAGpDC,YAAc,WACVtuB,EAAK6c,SAAS,CAAEwR,oBAAoB,OAGxCnE,aAAe,SAAC50B,GACZ0K,EAAKub,MAAM4O,SAAS70B,8EAepB,OACI8lB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK2tB,YAAa5hC,MAAM,gBACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,eAEHpmB,KAAKgB,MAAM+wB,mBACRjT,EAAAhgB,EAAAf,cAAA,OAAKC,MAjBoB,CACjCqoB,SAAU,WACV6F,OAAQ,IAgBIpN,EAAAhgB,EAAAf,cAAA,OAAKC,MAdc,CAC/BqoB,SAAU,QACVnB,IAAK,MACLuB,MAAO,MACPC,OAAQ,MACR1B,KAAM,OASyB+I,QAAS/tB,KAAKgyB,cACjClT,EAAAhgB,EAAAf,cAACk0B,GAAA,aAAD,CAAcj5B,MAAOgH,KAAKif,MAAMjmB,MAAOk5B,cAAc,EAAMrE,SAAU7tB,KAAK4tB,gBAE9E,aAvCqB7O,kCC6B5BoT,GAAb,SAAAhD,GAAA,SAAAgD,IAAA,IAAA/C,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAmyB,GAAA,QAAA9C,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAqyB,IAAAhjB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAQ,CACJ/F,SAAU,OAFlByI,EAKI0uB,oBAAsB,YAElBrL,EADqBrjB,EAAKub,MAAlB8H,UACCxwB,OAPjBmN,EAUI2uB,YAAc,SAACzK,GAAkB,IAAA7G,EACuBrd,EAAKub,MAAjDnF,EADqBiH,EACrBjH,aAAcwY,EADOvR,EACPuR,gBAAiBvL,EADVhG,EACUgG,SAEnCuL,GACAvL,EAASttB,GAAmBqgB,QAA8B3U,EAAWmtB,EAAgB7+B,GAAIm0B,KAdrGlkB,EAkBI6uB,gCAAkC,WAC9B,IAAM3K,EAAgB,CAAE/qB,SAAKsI,EAAWvL,YAAQuL,GAChDzB,EAAK2uB,YAAYzK,IApBzBlkB,EAuBI8uB,kBAAoB,WAAM,IAAAvR,EACgBvd,EAAKub,MAAnCqT,EADcrR,EACdqR,gBAAiBvL,EADH9F,EACG8F,cACD5hB,IAApBmtB,GACAvL,EAASrwB,OA1BrBgN,EA8BI+uB,iBAAmB,SAAC5wB,GAA+C,IAAAyf,EACzB5d,EAAKub,MAAnCqT,EADuDhR,EACvDgR,gBAAiBvL,EADsCzF,EACtCyF,SACnBtwB,EAAOoL,EAAM2qB,OAAO1iB,MAAM4oB,YACRvtB,IAApBmtB,GACAvL,EAASvwB,GAA6BC,KAlClDiN,EAsCIivB,mBAAqB,SAAC9wB,GAA+C,IACzDklB,EAAarjB,EAAKub,MAAlB8H,SACA9rB,EAAayI,EAAK1C,MAAlB/F,SACFD,EAAS6G,EAAM2qB,OAAO1iB,MAC5Bid,EAAShsB,GAAiBC,EAAQC,KA1C1CyI,EA6CIkvB,kBAAoB,SAACC,EAAmBr9B,EAAeC,GAAmB,IAC9D68B,EAAoB5uB,EAAKub,MAAzBqT,gBAER,QAAwBntB,IAApBmtB,EAA+B,CAC/B,IAAMt5B,EAAQs5B,GAAmBA,EAAgBt5B,MAE3C4uB,EAAgB,CAAE/qB,IAAG,mBAAAT,OAAqBy2B,GAAa75B,QAAOxD,QAAOC,SAAQmE,YAAQuL,GAC3FzB,EAAK2uB,YAAYzK,KApD7BlkB,EAwDIovB,YAAc,SAACjxB,GAA4B,IAAAogB,EACDve,EAAKub,MAAnCqT,EAD+BrQ,EAC/BqQ,gBAAiBvL,EADc9E,EACd8E,cACD5hB,IAApBmtB,IACIzwB,EAAMgf,QACNkG,EAASnwB,MAETmwB,EAASpwB,QA9DzB+M,EAmEIqvB,YAAc,SAAClxB,GAA4B,IAAAugB,EACD1e,EAAKub,MAAnCqT,EAD+BlQ,EAC/BkQ,gBAAiBvL,EADc3E,EACd2E,cACD5hB,IAApBmtB,IACIzwB,EAAMgf,QACNkG,EAASjwB,MAETiwB,EAASlwB,QAzEzB6M,EA8EIsvB,gBAAkB,WAAM,IAAAlQ,EACkBpf,EAAKub,MAAnCqT,EADYxP,EACZwP,gBAAiBvL,EADLjE,EACKiE,cACD5hB,IAApBmtB,GACAvL,EAAShwB,OAjFrB2M,EAqFIuvB,kBAAoB,WAAM,IAAAlP,EACgBrgB,EAAKub,MAAnCqT,EADcvO,EACduO,gBAAiBvL,EADHhD,EACGgD,cACD5hB,IAApBmtB,GACAvL,EAAS/vB,OAxFrB0M,EA4FIwvB,sBAAwB,SAACrxB,GAA+C,IAC5DklB,EAAarjB,EAAKub,MAAlB8H,SACF7vB,EAAM2K,EAAM2qB,OAAO1iB,MAEzBid,EAAS9vB,GAA+BC,KAhGhDwM,EAmGIyvB,mBAAqB,SAACtxB,GAA+C,IAAAwiB,EACpC3gB,EAAKub,MAA1BjkB,EADyDqpB,EACzDrpB,OAAQ+rB,EADiD1C,EACjD0C,SACV9rB,EAAW4G,EAAM2qB,OAAO1iB,MAE9BpG,EAAK6c,SAAS,CAAEtlB,aAChB8rB,EAAShsB,GAAiBC,EAAQC,KAxG1CyI,EA2GI0vB,kBAAoB,SAACp6B,GACjB,IAAM4uB,EAAgB,CAAE5uB,MAAOA,EAAMq6B,KACrC3vB,EAAK2uB,YAAYzK,IA7GzBlkB,EAgHI4vB,uBAAyB,WACrB,IAAM1L,EAAgB,CAAE5uB,WAAOmM,GAC/BzB,EAAK2uB,YAAYzK,IAlHzBlkB,EAqHI6vB,2BAA6B,SAAC1xB,IAE1BklB,EADqBrjB,EAAKub,MAAlB8H,UACChtB,GAA6B8H,EAAM2qB,OAAO2E,WAvH3DztB,EA0HI8vB,iBAAmB,SAAC3xB,GAA+C,IAAAgjB,EACzBnhB,EAAKub,MAAnCqT,EADuDzN,EACvDyN,gBAAiBvL,EADsClC,EACtCkC,cACD5hB,IAApBmtB,GACAvL,EAAS5vB,GAAgC0K,EAAM2qB,OAAO2E,WA7HlEztB,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAqyB,EAAAhD,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAqyB,EAAA,EAAA9E,IAAA,SAAAvjB,MAAA,WAiIa,IAAA4iB,EAAA1sB,KAAAulB,EAC+DvlB,KAAKif,MAAjEqT,EADH/M,EACG+M,gBAAiBl7B,EADpBmuB,EACoBnuB,KAAM4D,EAD1BuqB,EAC0BvqB,OAAQi1B,EADlC1K,EACkC0K,QAASj2B,EAD3CurB,EAC2CvrB,gBACxCiB,EAAa+E,KAAKgB,MAAlB/F,SAER,OACI6jB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,OAAS,SAC7DnR,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKoyB,oBAAqBrmC,MAAM,mBAC7C+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,6BAGiBjhB,IAApBmtB,GACGxT,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK8yB,YAAa/mC,MAAM,0CACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,iBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+yB,YAAahnC,MAAM,6CACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,oBAKXkM,GAC4B,UAAzBA,EAAgB/+B,OACf++B,EAAgBz1B,KAAOy1B,EAAgB14B,SACpCklB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKuyB,gCAAiCxmC,MAAM,2BACzD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,+BAISjhB,IAApBmtB,IAAkCA,EAAgBlX,QAC/C0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKgzB,gBACdjnC,MAAM,kFAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,mBAIajhB,IAApBmtB,GAAiCA,EAAgBlX,QAC9C0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKizB,kBACdlnC,MAAM,yFAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,SAIRtH,EAAAhgB,EAAAf,cAAA,UACIqoB,eAA+BjhB,IAApBmtB,GAAiCA,EAAgBlX,OAASpd,KAAM/R,SAAW,GACtF8hC,QAAS/tB,KAAKwyB,kBACdzmC,MAAM,gBAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,gBAGiBjhB,IAApBmtB,GACGxT,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,OACLuW,MAAOwoB,EAAgB77B,MAAQ,GAC/B8d,YAAa+d,EAAgB7+B,GAC7Bo6B,SAAU7tB,KAAKyyB,iBACf1mC,MAAM,gCAIbumC,GAA4C,UAAzBA,EAAgB/+B,MAChCurB,EAAAhgB,EAAAf,cAAA,YACI+gB,EAAAhgB,EAAAf,cAAA,kBAEI+gB,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,QACNqnB,SAAUmB,EAAgBp7B,KAA+B,UAAxBo7B,EAAgBp7B,IACjD22B,SAAU7tB,KAAKkzB,wBALvB,SASApU,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,SACNqnB,QAAiC,WAAxBmB,EAAgBp7B,IACzB22B,SAAU7tB,KAAKkzB,wBALvB,UASApU,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,UACNqnB,QAAiC,YAAxBmB,EAAgBp7B,IACzB22B,SAAU7tB,KAAKkzB,wBALvB,cAcfZ,GAA4C,UAAzBA,EAAgB/+B,MAChCurB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SAAOxK,KAAK,WAAW49B,QAAS/5B,EAAMy2B,SAAU7tB,KAAKwzB,mBADzD,QAIA1U,EAAAhgB,EAAAf,cAAC01B,GAAD,CACIz6B,MAAQs5B,GAAmBA,EAAgBt5B,OAAU,UACrD60B,SAAU7tB,KAAKozB,oBAElBd,GAAmBA,EAAgBt5B,OAChC8lB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKszB,uBAAwBvnC,MAAM,gBAChD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,kBAGRtH,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACL49B,QAASn3B,EACT6zB,SAAU7tB,KAAKuzB,6BAJvB,wBAWZzU,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,sBAEI+gB,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,MACNqnB,QAAsB,QAAbl2B,EACT4yB,SAAU7tB,KAAKmzB,qBALvB,OASArU,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,OACNqnB,QAAsB,SAAbl2B,EACT4yB,SAAU7tB,KAAKmzB,qBALvB,QASArU,EAAAhgB,EAAAf,cAAA,aACI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,QACLuW,MAAM,OACNqnB,QAAsB,SAAbl2B,EACT4yB,SAAU7tB,KAAKmzB,qBALvB,UAYRrU,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,SAAOxK,KAAK,OAAOghB,YAAY,YAAYzK,MAAO9O,EAAQ6yB,SAAU7tB,KAAK2yB,sBAE7E7T,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM7R,QACjB6T,KAAKif,MAAM9yB,OAAOyU,IAAI,SAAA8yB,GACnB,OACI5U,EAAAhgB,EAAAf,cAAA,OACIsvB,IAAKqG,EAAGjgC,GACR4O,IAAG,mBAAAjG,OAAqBs3B,EAAGj9B,MAC3Bk9B,aAAYD,EAAGl+B,MACfo+B,cAAaF,EAAGj+B,OAChBs4B,QAAS,kBAAMrB,EAAKkG,kBAAkBc,EAAGj9B,KAAMi9B,EAAGl+B,MAAOk+B,EAAGj+B,SAC5D+wB,IAAKkN,EAAGj9B,eA/SxC07B,EAAA,CAAkCpT,aA4UnB4H,eAnBS,SAAC3lB,GACrB,IAAMsxB,OACqCntB,IAAvCnE,EAAMmW,QAAQC,QAAQ0C,mBAAsE3U,IAAxCnE,EAAMmW,QAAQC,QAAQC,cACpErW,EAAMmW,QAAQC,QAAQnN,OAAOjJ,EAAMmW,QAAQC,QAAQ0C,cAAc9Y,EAAMmW,QAAQC,QAAQC,oBACvFlS,EAEJ2U,EAAe9Y,EAAMmW,QAAQC,QAAQ0C,aAE3C,MAAO,CACHwY,kBACAl7B,KAAMk7B,GAA4C,UAAzBA,EAAgB/+B,MAAmB++B,EAAgBl7B,OAAgB,EAC5F0iB,eACA3tB,OAAQ6U,EAAM7U,OAAOA,OACrB6O,OAAQgG,EAAM7U,OAAO6O,OACrBwL,YAAaxF,EAAMmW,QAAQC,QAAQ5Q,YACnCxM,gBAAiBgH,EAAMmW,QAAQC,QAAQpd,kBAIhC2sB,CAA4EwL,yGC7V3F0B,0BAAeC,MAeR,IAAMC,GAAb,SAAA5E,GAAA,SAAA4E,IAAA,IAAA3E,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAA+zB,GAAA,QAAA1E,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAi0B,IAAA5kB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACI0E,kBAAoB,SAAC/pB,GAAsC,IAC/CgqB,EAAevwB,EAAKub,MAApBgV,WACR,GAAmB,OAAfA,EAAqB,OAAOhqB,EAEhC,IAAMiqB,EAAS,IAAMC,KAAIF,GAErBG,EAA4C,GAEhD,IAAK,IAAMp8B,KAAUiS,EAAQ,CACzB,IAAIoqB,EAAYv0B,OAAAyM,EAAA,EAAAzM,CAAA,GAAQmK,EAAOjS,IAC/B,IAAK,IAAMC,KAAWo8B,EAAc,CAChC,IAAI36B,EAASoG,OAAAyM,EAAA,EAAAzM,CAAA,GAAQu0B,EAAap8B,IAClC,GAAuB,UAAnByB,EAAUnG,KAAkB,CAC5B,IAAIsJ,EAAMnD,EAAUmD,KAAO,GACvBA,EAAIy3B,SAASJ,GACbr3B,EAAMA,EAAIwN,QAAQ6pB,EAAQ,IAE1Bx6B,EAAU0b,QAAS,EAGvB1b,EAAUmD,IAAMA,EAAIwN,QAAQ,mBAAoB,IAEpDgqB,EAAap8B,GAAWyB,EAE5B06B,EAAep8B,GAAUq8B,EAG7B,OAAOD,GA5Bf1wB,EA+BI6wB,iBAAmB,WAAM,IAAAxT,EAC+Drd,EAAKub,MAAjFzpB,EADaurB,EACbvrB,MAAOC,EADMsrB,EACNtrB,OAAQmC,EADFmpB,EACEnpB,WAAY4O,EADdua,EACcva,YAAa8O,EAD3ByL,EAC2BzL,UAAWrL,EADtC8W,EACsC9W,OAAQiC,EAD9C6U,EAC8C7U,aAI7DpW,EAAO,CACTN,QACAC,SACAmC,aACA4O,cACA8O,YACArL,OARmBvG,EAAKswB,kBAAkB/pB,GAS1CiC,gBAGAsoB,EAAOtzB,KAAKC,UAAUrL,EAAM,KAAM,GAClCoR,EAAO,IAAIutB,KAAK,CAACD,GAAO,CAAEjhC,KAAM,iBAEpCkK,GADUiB,OAAOC,IAAIgJ,gBAAgBT,GACnB,iBAjD1BxD,EAoDIgxB,gBAAkB,WAAM,IAAAzT,EACqCvd,EAAKub,MAAtDzY,EADYya,EACZza,YAAa8O,EADD2L,EACC3L,UAAWrL,EADZgX,EACYhX,OAAQiC,EADpB+U,EACoB/U,aAElCyoB,EAAiBjxB,EAAKswB,kBAAkB/pB,GAE1C2qB,EAAiC,GACjCC,EAAS,CAAC,UAAW,cACrBC,EAAwC,GAPxBjpB,GAAA,EAAAC,GAAA,EAAAC,OAAA5G,EAAA,IAQpB,QAAA6G,EAAAC,EAAmBC,EAAnBvC,OAAAC,cAAAiC,GAAAG,EAAAC,EAAA3E,QAAAuC,MAAAgC,GAAA,EAAiC,KAAtByI,EAAsBtI,EAAAlC,MACvBV,EAAYa,EAAOzD,EAAY,IAAI8N,GACnC7d,EAAO2S,EAAU3S,MAAQ2S,EAAU3V,GACnCgD,KAAQq+B,IACVD,EAAOjxB,KAAKnN,GACW,UAAnB2S,EAAU7V,MACVshC,EAAOjxB,KAAP,GAAAxH,OAAe3F,EAAf,YAEJq+B,EAAUr+B,IAAQ,IAhBN,MAAA4V,GAAAP,GAAA,EAAAC,EAAAM,EAAA,YAAAR,GAAA,MAAAI,EAAAxB,QAAAwB,EAAAxB,SAAA,WAAAqB,EAAA,MAAAC,GAmBpB6oB,EAAQhxB,KAAKixB,GAnBO,IAAArd,GAAA,EAAAC,GAAA,EAAAC,OAAAvS,EAAA,IAqBpB,QAAAyS,EAAAD,EAAqBnR,EAArBmD,OAAAC,cAAA4N,GAAAI,EAAAD,EAAArQ,QAAAuC,MAAA2N,GAAA,EAAkC,KAAvBxf,EAAuB4f,EAAA9N,MAG1BirB,EAA+B,CAAC/8B,EAFzBsd,EAAUtd,GAE4B3B,OAE7C2+B,EAAOl1B,OAAAyM,EAAA,EAAAzM,CAAA,GAAQg1B,GALWjsB,GAAA,EAAAC,GAAA,EAAAC,OAAA5D,EAAA,IAM9B,QAAA8D,EAAAD,EAAsBkD,EAAtBvC,OAAAC,cAAAf,GAAAI,EAAAD,EAAA1B,QAAAuC,MAAAhB,GAAA,EAAoC,KAAzB5Q,EAAyBgR,EAAAa,MAC1BmrB,EAAYhrB,EAAOjS,GAAQC,GAC3BxB,EAAOw+B,EAAUx+B,MAAQw+B,EAAUxhC,GAEzC,IAAKuhC,EAAQv+B,GAAO,CAChB,IAAI2S,EAAYurB,EAAe38B,GAAQC,GAChB,SAAnBmR,EAAU7V,KACVwhC,EAAQnxB,KAAKwF,EAAUU,OACG,UAAnBV,EAAU7V,OACjBwhC,EAAQnxB,KAAKwF,EAAUvM,KAAO,IAC9Bk4B,EAAQnxB,KAAKwF,EAAUgM,OAAS,IAAM,MAE1C4f,EAAQv+B,IAAQ,IAlBM,MAAA4V,GAAAvD,GAAA,EAAAC,EAAAsD,EAAA,YAAAxD,GAAA,MAAAG,EAAAyB,QAAAzB,EAAAyB,SAAA,WAAA3B,EAAA,MAAAC,GAqB9B6rB,EAAQhxB,KAAKmxB,IA1CG,MAAA1oB,GAAAoL,GAAA,EAAAC,EAAArL,EAAA,YAAAmL,GAAA,MAAAG,EAAAlN,QAAAkN,EAAAlN,SAAA,WAAAgN,EAAA,MAAAC,GA6CpB,IAAIwd,EAAMC,KAAKC,QAAQR,GACnB1tB,EAAO,IAAIutB,KAAK,CAACS,GAAM,CAAE3hC,KAAM,iBAEnCkK,GADUiB,OAAOC,IAAIgJ,gBAAgBT,GACnB,gBApG1BxD,EAuGI2xB,cAAgB,SAACC,EAAmBj7B,EAAYiO,EAA0ChO,GAAyB,IAAAgnB,EAChC5d,EAAKub,MAA5E8H,EADuGzF,EACvGyF,SAAUkN,EAD6F3S,EAC7F2S,WAAYhqB,EADiFqX,EACjFrX,OAAQiC,EADyEoV,EACzEpV,aAAcoJ,EAD2DgM,EAC3DhM,UAAW9O,EADgD8a,EAChD9a,YAC/D,GAAmB,OAAfytB,EAAJ,CAEA,IAAIsB,EAAS,IAAIC,WACjBD,EAAOE,WAAWp7B,EAAM,SACxBk7B,EAAOpzB,OAAS,SAASJ,GACrB,GAAiB,OAAbA,EAAEyqB,OAAN,CAEA,IAAI12B,EAAO,KACLo+B,EAAS,IAAMC,KAAIF,GAEzB,GAAkB,qBAAd55B,EAAK9G,KAIL,IAAK,IAAMyE,KAFXlC,EAAOoL,KAAKoF,MAAOvE,EAAEyqB,OAAekJ,SAEVzrB,OAAQ,CAC9B,IAAMd,EAAkCrT,EAAKmU,OAAOjS,GACpD,IAAK,IAAMC,KAAWkR,EAAY,CAC9B,IAAIC,EAAYD,EAAWlR,GAC3B,GAAuB,UAAnBmR,EAAU7V,KAAkB,CAC5B,IAAIoiC,EAAWvsB,EAAUgM,SAAU,EAEnChM,EAAUvM,IAAV,mBAAAT,OAAmCgN,EAAUvM,KAA7CT,OAAmDu5B,EAAW,GAAKzB,UAC5D9qB,EAAUgM,cAI1B,GAAkB,aAAd/a,EAAK9G,KAAqB,CAEjC,IAAMqhC,EAAUO,KAAK7uB,MAAOvE,EAAEyqB,OAAekJ,OAAQ,CAAEb,QAAQ,IAE3De,EAA2B,GAC3BC,EAAgC,GAChCxb,EAAuC,GANV7F,GAAA,EAAAC,GAAA,EAAAC,OAAAvP,EAAA,IAQjC,QAAAyP,EAAAD,EAAkBigB,EAAQ9+B,KAA1B6T,OAAAC,cAAA4K,GAAAI,EAAAD,EAAArN,QAAAuC,MAAA2K,GAAA,EAAgC,KAArBshB,EAAqBlhB,EAAA9K,MAC5B,GAAgC,IAA5BhK,OAAOkK,KAAK8rB,GAAKrxB,OAArB,CAGA,IAAM3Y,EAAiB,CACnB2H,GAAIqiC,EAAG,SAAeniC,IAAQC,WAC9ByC,MAAOy/B,EAAG,YAAkB,GAGhCzb,EAAUvuB,EAAK2H,IAAfqM,OAAAyM,EAAA,EAAAzM,CAAA,GACOmK,EAAOne,EAAK2H,MAAM6hB,EAAYxpB,EAAK2H,GAAK+S,EAAY,KAG3DovB,EAAehyB,KAAK9X,EAAK2H,IACzBoiC,EAAa/pC,EAAK2H,IAAM3H,EAdI,IAAAwvB,GAAA,EAAAC,GAAA,EAAAC,OAAArW,EAAA,IAgB5B,QAAAsW,EAAAC,EAAsBxP,EAAtBvC,OAAAC,cAAA0R,GAAAG,EAAAC,EAAApU,QAAAuC,MAAAyR,GAAA,EAAoC,KAAzBrjB,EAAyBwjB,EAAA3R,MAC1BV,EAAYiR,EAAUvuB,EAAK2H,IAAIwE,GAC/BxB,EAAO2S,EAAU3S,MAAQ2S,EAAU3V,GAEzC,GAAIqiC,EAAIr/B,GACJ,GAAuB,UAAnB2S,EAAU7V,KAAkB,CAC5B,IAAMoiC,EAAqC,MAA1BG,EAAG,GAAA15B,OAAI3F,EAAJ,YACdoG,EAAMi5B,EAAIr/B,GAEhB4jB,EAAUvuB,EAAK2H,IAAIwE,GAAnB6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,EADP,CAEIvM,IAAG,mBAAAT,OAAqBS,GAArBT,OAA2Bu5B,EAAW,GAAKzB,SAExB,SAAnB9qB,EAAU7V,OACjB8mB,EAAUvuB,EAAK2H,IAAIwE,GAAnB6H,OAAAyM,EAAA,EAAAzM,CAAA,GACOsJ,EADP,CAEIU,MAAOgsB,EAAIr/B,OAhCC,MAAA4V,GAAAkP,GAAA,EAAAC,EAAAnP,EAAA,YAAAiP,GAAA,MAAAI,EAAAjR,QAAAiR,EAAAjR,SAAA,WAAA8Q,EAAA,MAAAC,MARC,MAAAnP,GAAAoI,GAAA,EAAAC,EAAArI,EAAA,YAAAmI,GAAA,MAAAG,EAAAlK,QAAAkK,EAAAlK,SAAA,WAAAgK,EAAA,MAAAC,GA+CjC5e,EAAO,CACH0Q,YAAaovB,EACbtgB,UAAWugB,EACX5rB,OAAQoQ,EACRP,kBAAc3U,EACdkS,mBAAelS,GAIV,OAATrP,GACAixB,EAASlxB,GAAkBC,MAGnCy/B,EAAOnzB,QAAU,WACb2kB,EAASzzB,GAAe,QAAS,4BAGrCgH,EAAKD,EAAK5D,QAnMlBiN,EAsMIqyB,aAAe,SAACC,EAAsB17B,GAClCA,KAvMRoJ,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAi0B,EAAA5E,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAi0B,EAAA,EAAA1G,IAAA,SAAAvjB,MAAA,WA0Ma,IACGmmB,EAAYjwB,KAAKif,MAAjBgR,QAER,OACInR,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,OAAS,SAC7DnR,EAAAhgB,EAAAf,cAAA,yLAIA+gB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKu0B,kBAClBzV,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,kBADJ,aAGAtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK00B,iBAClB5V,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,kBADJ,YAIAtH,EAAAhgB,EAAAf,cAAA,gEAEA+gB,EAAAhgB,EAAAf,cAACk4B,GAAA,SAAD,CACIC,OAAQ,CACJC,QAASn2B,KAAKq1B,cACde,OAAQp2B,KAAK+1B,cAEjBM,kBAAmB,CAAC,WAAY,2BAjOpDtC,EAAA,CAAyChV,aAqP1B4H,eAbS,SAAC3lB,GACrB,MAAO,CACHizB,WAAYjzB,EAAMwR,MAAMxmB,OACxBwJ,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9BmC,WAAYoJ,EAAMmW,QAAQC,QAAQxf,WAClC4O,YAAaxF,EAAMmW,QAAQC,QAAQ5Q,YACnC8O,UAAWtU,EAAMmW,QAAQC,QAAQ9B,UACjCpJ,aAAclL,EAAMmW,QAAQC,QAAQlL,aACpCjC,OAAQjJ,EAAMmW,QAAQC,QAAQnN,SAIvB0c,CAA4EoN,yBC7P9EuC,GAAb,SAAAnH,GAAA,SAAAmH,IAAA,IAAAlH,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAs2B,GAAA,QAAAjH,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAw2B,IAAAnnB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACIiH,gBAAkB,WAAM,IAAAxV,EAC0Crd,EAAKub,MAA3DnF,EADYiH,EACZjH,aAAc0c,EADFzV,EACEyV,YAAatqB,EADf6U,EACe7U,aAAc6a,EAD7BhG,EAC6BgG,SACjD,GAA4B,IAAxB7a,EAAazH,QAAiC,OAAjBqV,EAAjC,CAEA,IAAI2c,EAAYvqB,EAAaA,EAAazH,OAAS,GACnD,QAAoBU,IAAhBqxB,EAA2B,CAC3B,IAAIE,EAAMxqB,EAAa3B,QAAQisB,EAAY/iC,IACvCijC,EAAM,IAAGD,EAAYvqB,EAAawqB,EAAM,IAGhD3P,EAASltB,GAA0BigB,EAAe0c,GAAeA,EAAYzb,WAAa,EAAO0b,MAXzG/yB,EAcIizB,gBAAkB,WAAM,IAAA1V,EAC0Cvd,EAAKub,MAA3DnF,EADYmH,EACZnH,aAAc0c,EADFvV,EACEuV,YAAatqB,EADf+U,EACe/U,aAAc6a,EAD7B9F,EAC6B8F,SACjD,GAA4B,IAAxB7a,EAAazH,QAAiC,OAAjBqV,EAAjC,CAEA,IAAI8c,EAAY1qB,EAAa,GAC7B,QAAoB/G,IAAhBqxB,EAA2B,CAC3B,IAAIE,EAAMxqB,EAAa3B,QAAQisB,EAAY/iC,KAC9B,IAATijC,GAAcA,IAAQxqB,EAAazH,OAAS,IAAGmyB,EAAY1qB,EAAawqB,EAAM,IAGtF3P,EAASltB,GAA0BigB,EAAe0c,GAAeA,EAAYzb,WAAa,EAAO6b,MAxBzGlzB,EA2BIovB,YAAc,SAACjxB,GAA4B,IAAAyf,EACL5d,EAAKub,MAA/BuX,EAD+BlV,EAC/BkV,YAAazP,EADkBzF,EAClByF,cACD5hB,IAAhBqxB,IACI30B,EAAMgf,QACNkG,EAASnwB,MAETmwB,EAASpwB,QAjCzB+M,EAsCIqvB,YAAc,SAAClxB,GAA4B,IAAAogB,EACLve,EAAKub,MAA/BuX,EAD+BvU,EAC/BuU,YAAazP,EADkB9E,EAClB8E,cACD5hB,IAAhBqxB,IACI30B,EAAMgf,QACNkG,EAASjwB,MAETiwB,EAASlwB,QA5CzB6M,EAiDIsvB,gBAAkB,WAAM,IAAA5Q,EACc1e,EAAKub,MAA/BuX,EADYpU,EACZoU,YAAazP,EADD3E,EACC2E,cACD5hB,IAAhBqxB,GACAzP,EAAShwB,OApDrB2M,EAwDIuvB,kBAAoB,WAAM,IAAAnQ,EACYpf,EAAKub,MAA/BuX,EADc1T,EACd0T,YAAazP,EADCjE,EACDiE,cACD5hB,IAAhBqxB,GACAzP,EAAS/vB,OA3DrB0M,EA+DI+uB,iBAAmB,SAAC5wB,GAA+C,IAAAkiB,EAC7BrgB,EAAKub,MAA/BuX,EADuDzS,EACvDyS,YAAazP,EAD0ChD,EAC1CgD,SACftwB,EAAOoL,EAAM2qB,OAAO1iB,MAAM4oB,YACZvtB,IAAhBqxB,GACAzP,EAASvwB,GAA6BC,KAnElDiN,EAuEImzB,kBAAoB,SAACh1B,GAA+C,IAAAwiB,EAC9B3gB,EAAKub,MAA/BuX,EADwDnS,EACxDmS,YAAazP,EAD2C1C,EAC3C0C,SACfvxB,EAAQo7B,WAAW/uB,EAAM2qB,OAAO1iB,YAClB3E,IAAhBqxB,GACAzP,EAASruB,QAAuByM,EAAWqxB,EAAY/iC,GAAI+B,EAAOghC,EAAY/gC,OAAQ9B,IAAQC,cA3E1G8P,EA+EIozB,mBAAqB,SAACj1B,GAA+C,IAAAgjB,EAC/BnhB,EAAKub,MAA/BuX,EADyD3R,EACzD2R,YAAazP,EAD4ClC,EAC5CkC,SACftxB,EAASm7B,WAAW/uB,EAAM2qB,OAAO1iB,YACnB3E,IAAhBqxB,GACAzP,EAASruB,QAAuByM,EAAWqxB,EAAY/iC,GAAI+iC,EAAYhhC,MAAOC,EAAQ9B,IAAQC,cAnF1G8P,EAuFIqzB,cAAgB,SAACl1B,GAA+C,IAAA0jB,EAC1B7hB,EAAKub,MAA/BuX,EADoDjR,EACpDiR,YAAazP,EADuCxB,EACvCwB,SACf7uB,EAAI04B,WAAW/uB,EAAM2qB,OAAO1iB,YACd3E,IAAhBqxB,GACAzP,EAAShvB,QAA2BoN,EAAWqxB,EAAY/iC,GAAIyE,EAAGs+B,EAAYr+B,EAAGxE,IAAQC,cA3FrG8P,EA+FIszB,cAAgB,SAACn1B,GAA+C,IAAAikB,EAC1BpiB,EAAKub,MAA/BuX,EADoD1Q,EACpD0Q,YAAazP,EADuCjB,EACvCiB,SACf5uB,EAAIy4B,WAAW/uB,EAAM2qB,OAAO1iB,YACd3E,IAAhBqxB,GACAzP,EAAShvB,QAA2BoN,EAAWqxB,EAAY/iC,GAAI+iC,EAAYt+B,EAAGC,EAAGxE,IAAQC,cAnGrG8P,EAuGIuzB,kBAAoB,SAACp1B,GAA+C,IAAAq1B,EAC9BxzB,EAAKub,MAA/BuX,EADwDU,EACxDV,YAAazP,EAD2CmQ,EAC3CnQ,SACfnuB,EAASg4B,WAAW/uB,EAAM2qB,OAAO1iB,OAAS9K,KAAKyb,GAAM,SACvCtV,IAAhBqxB,GACAzP,EAASpuB,QAAwBwM,EAAWqxB,EAAY/iC,GAAImF,EAAOjF,IAAQC,cA3GvF8P,EA+GIyzB,wBAA0B,SAACt1B,GAA+C,IAAAu1B,EACpC1zB,EAAKub,MAA/BuX,EAD8DY,EAC9DZ,YAAazP,EADiDqQ,EACjDrQ,cACD5hB,IAAhBqxB,GACAzP,EAAS1vB,GAAuCwK,EAAM2qB,OAAO2E,WAlHzEztB,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAw2B,EAAAnH,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAw2B,EAAA,EAAAjJ,IAAA,SAAAvjB,MAAA,WAsHa,IAAAutB,EAC0Cr3B,KAAKif,MAA5CnF,EADHud,EACGvd,aAAc0c,EADjBa,EACiBb,YAAavG,EAD9BoH,EAC8BpH,QAEnC,OACInR,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,UAAY,cAC9C9qB,IAAjB2U,GACGgF,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKu2B,gBAAiBxqC,MAAM,kBACzC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,eAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK22B,gBAAiB5qC,MAAM,cACzC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,wBAKKjhB,IAAhBqxB,GACG1X,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK8yB,YAAa/mC,MAAM,yCACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,iBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+yB,YAAahnC,MAAM,4CACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,yBAKKjhB,IAAhBqxB,IAA8BA,EAAYpb,QACvC0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKgzB,gBACdjnC,MAAM,4EAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,mBAISjhB,IAAhBqxB,GAA6BA,EAAYpb,QACtC0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKizB,kBACdlnC,MAAM,8EAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,cAISjhB,IAAhBqxB,GACG1X,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,kCACuB,IACnB+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU7tB,KAAKm3B,wBACf/Q,UAAU,eACV+K,UAASqF,EAAYl/B,qBAMpB6N,IAAhBqxB,GACG1X,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,2BAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,OACLuW,MAAO0sB,EAAY//B,MAAQ,GAC3B8d,YAAaiiB,EAAY/iC,GACzBo6B,SAAU7tB,KAAKyyB,iBACf1mC,MAAM,2BAId+yB,EAAAhgB,EAAAf,cAAA,sBAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLi9B,KAAK,MACL1mB,MAAO0sB,EAAYhhC,MACnB+e,YAAY,QACZsZ,SAAU7tB,KAAK62B,kBACf9qC,MAAM,4BAId+yB,EAAAhgB,EAAAf,cAAA,uBAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLi9B,KAAK,MACL1mB,MAAO0sB,EAAY/gC,OACnB8e,YAAY,SACZsZ,SAAU7tB,KAAK82B,mBACf/qC,MAAM,4BAId+yB,EAAAhgB,EAAAf,cAAA,kBAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLi9B,KAAK,MACL1mB,MAAO0sB,EAAYt+B,EACnBqc,YAAY,QACZsZ,SAAU7tB,KAAK+2B,cACfhrC,MAAM,mCAId+yB,EAAAhgB,EAAAf,cAAA,kBAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLi9B,KAAK,MACL1mB,MAAO0sB,EAAYr+B,EACnBoc,YAAY,SACZsZ,SAAU7tB,KAAKg3B,cACfjrC,MAAM,mCAId+yB,EAAAhgB,EAAAf,cAAA,sBAEI+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLi9B,KAAK,MACL1mB,MAA4B,IAApB0sB,EAAY59B,MAAeoG,KAAKyb,GACxClG,YAAY,QACZsZ,SAAU7tB,KAAKi3B,kBACflrC,MAAM,2CAtPtCuqC,EAAA,CAAyCvX,aA8Q1B4H,eAdS,SAAC3lB,GAMrB,MAAO,CACHw1B,iBALuCrxB,IAAvCnE,EAAMmW,QAAQC,QAAQ0C,mBAAsE3U,IAAxCnE,EAAMmW,QAAQC,QAAQC,cACpErW,EAAMmW,QAAQC,QAAQnN,OAAOjJ,EAAMmW,QAAQC,QAAQ0C,cAAc9Y,EAAMmW,QAAQC,QAAQC,oBACvFlS,EAIN2U,aAAc9Y,EAAMmW,QAAQC,QAAQ0C,aACpC7P,OAAQjJ,EAAMmW,QAAQC,QAAQnN,OAC9BiC,aAAclL,EAAMmW,QAAQC,QAAQlL,eAI7Bya,CAA4E2P,yBChR9EgB,GAAb,SAAAnI,GAAA,SAAAmI,IAAA,IAAAlI,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAs3B,GAAA,QAAAjI,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAw3B,IAAAnoB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAoB,CAChBxJ,qBAAqB,EACrBC,eAAe,GAHvBiM,EAMImzB,kBAAoB,SAACh1B,GAA+C,IACxDklB,EAAarjB,EAAKub,MAAlB8H,SADwDtB,EAEjB/hB,EAAK1C,MAA5CxJ,EAFwDiuB,EAExDjuB,oBAAqBC,EAFmCguB,EAEnChuB,cAC7BsvB,EAASxvB,GAAmBq5B,WAAW/uB,EAAM2qB,OAAO1iB,OAAQtS,EAAqBC,KATzFiM,EAYIozB,mBAAqB,SAACj1B,GAA+C,IACzDklB,EAAarjB,EAAKub,MAAlB8H,SADyDwQ,EAElB7zB,EAAK1C,MAA5CxJ,EAFyD+/B,EAEzD//B,oBAAqBC,EAFoC8/B,EAEpC9/B,cAC7BsvB,EAASrvB,GAAoBk5B,WAAW/uB,EAAM2qB,OAAO1iB,OAAQtS,EAAqBC,KAf1FiM,EAkBI8zB,uBAAyB,SAAC31B,IAEtBklB,EADqBrjB,EAAKub,MAAlB8H,UACCpvB,GAAwBkK,EAAM2qB,OAAO2E,WApBtDztB,EAuBIujB,WAAa,SAACplB,IAEVklB,EADqBrjB,EAAKub,MAAlB8H,UACC5sB,GAAey2B,WAAW/uB,EAAM2qB,OAAO1iB,UAzBxDpG,EA4BI+zB,uBAAyB,SAAC51B,IAEtBklB,EADqBrjB,EAAKub,MAAlB8H,UACClvB,GAA8B+4B,WAAW/uB,EAAM2qB,OAAO1iB,UA9BvEpG,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAw3B,EAAAnI,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAw3B,EAAA,EAAAjK,IAAA,SAAAvjB,MAAA,WAiCa,IAAA4iB,EAAA1sB,KAAA+gB,EACkE/gB,KAAKif,MAApEzpB,EADHurB,EACGvrB,MAAOC,EADVsrB,EACUtrB,OAAQmC,EADlBmpB,EACkBnpB,WAAYE,EAD9BipB,EAC8BjpB,iBAAkBm4B,EADhDlP,EACgDkP,QAASx3B,EADzDsoB,EACyDtoB,KADzDi/B,EAE0C13B,KAAKgB,MAA5CxJ,EAFHkgC,EAEGlgC,oBAAqBC,EAFxBigC,EAEwBjgC,cAE7B,OACIqnB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,UAAY,SAChEnR,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,cAAf,oBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,aACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,MACL3C,SAAU7tB,KAAK62B,kBACfzQ,UAAU,eACV7R,YAAY,QACZzK,MAAOtU,IAEXspB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,eAAf,qBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,cACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,MACL3C,SAAU7tB,KAAK82B,mBACf1Q,UAAU,eACV7R,YAAY,SACZzK,MAAOrU,IAEXqpB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,sCAC2B,IACvB+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU,WACNnB,EAAKnM,SAAS,CAAE/oB,qBAAsBA,KAE1C4uB,UAAU,eACV+K,QAAS35B,MAKrBsnB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,+BACoB,IAChB+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU,WACNnB,EAAKnM,SAAS,CAAE9oB,eAAgBA,KAEpC2uB,UAAU,eACV+K,QAAS15B,MAKrBqnB,EAAAhgB,EAAAf,cAAA,qCAC0B,IACtB+gB,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU7tB,KAAKw3B,uBACfpR,UAAU,eACV+K,QAASv5B,KAGjBknB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,QAAf,oDACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,OACHF,KAAK,SACL2oB,IAAI,MACJsU,KAAK,MACL3C,SAAU7tB,KAAKinB,WACfb,UAAU,eACV7R,YAAY,OACZzK,MAAOrR,KAGfqmB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,QAAf,0CACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,OACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,MACL3C,SAAU7tB,KAAKy3B,uBACfrR,UAAU,eACV7R,YAAY,oBACZzK,MAAOhS,UAzH/Bw/B,EAAA,CAAqCvY,aA2ItB4H,eAVS,SAAC3lB,GACrB,MAAO,CACHxL,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9BmC,WAAYoJ,EAAMmW,QAAQC,QAAQxf,WAClCE,iBAAkBkJ,EAAMmW,QAAQC,QAAQtf,iBACxCW,KAAMuI,EAAMmW,QAAQC,QAAQ3e,OAIrBkuB,CAA4E2Q,uDC1IrFK,GAAsB,SAAC1Y,GAEzB,IAAInV,EAAQmV,EAAMnV,MAClB,OAAQmV,EAAM2Y,YAAc9tB,EACxBgV,EAAAhgB,EAAAf,cAAC85B,GAAA,EAAWC,OAAW7Y,EACnBH,EAAAhgB,EAAAf,cAAA,OAAKsE,IAAG,0BAAAjG,OAA6B27B,GAA0CjuB,IAAU0c,IAAK1c,KAElG,MAGFkuB,GAAwBl4B,OAAOkK,KAAKiuB,IACrCC,OACAt3B,IAAI,SAAAu3B,GAAE,MAAK,CAAEruB,MAAOquB,EAAIC,MAAOD,KAe9BE,iNACFC,qBAAuB,SAACC,EAAgBC,GACpC,IAAIC,EAAgBF,EAIpB,MAHgB,YAAZC,IACAC,GAAiB,IAAMD,GAEpBC,KAGX7K,aAAe,SAAC8K,GACZ,GAAKA,EAAL,CAEA,IAAMnsC,EAAcmsC,EAA8B5uB,MAE9Ctd,EAAckX,EAAKub,MAAM0Z,kBACvBC,EAAmBX,GACnBzrC,KAAeosC,EAAGrsC,KACpBC,EAAcsT,OAAOkK,KAAK4uB,EAAGrsC,IAAa2rC,OAAO,IAGrD5rB,KAAQhS,KAAK,CACToS,OAAQ,CACJC,SAAU,CAACjJ,EAAK40B,qBAAqB/rC,EAAYC,KAErDR,OAAQ,YAEJ+6B,EADqBrjB,EAAKub,MAAlB8H,UACC7tB,GAAiD3M,EAAYC,WAKlFqsC,wBAA0B,SAACH,GACvB,GAAKA,EAAL,CAEA,IAAM5uB,EAAS4uB,EAA8B5uB,MAC7CwC,KAAQhS,KAAK,CACToS,OAAQ,CACJC,SAAU,CAACjJ,EAAK40B,qBAAqB50B,EAAKub,MAAM6Z,WAAYhvB,KAEhE9d,OAAQ,YAEJ+6B,EADqBrjB,EAAKub,MAAlB8H,UACC9tB,GAAwC6Q,WAK7DivB,qBAAuB,SAACl3B,IAEpBklB,EADqBrjB,EAAKub,MAAlB8H,UACC5tB,GAAqCy3B,WAAW/uB,EAAM2qB,OAAO1iB,YAG1EkvB,uBAAyB,SAACn3B,IAEtBklB,EADqBrjB,EAAKub,MAAlB8H,UACC1tB,GAAuCu3B,WAAW/uB,EAAM2qB,OAAO1iB,oFAGnE,IAAA4iB,EAAA1sB,KACCi5B,EAAqBjB,GAAQxZ,KAAK,SAAA0a,GAAC,OAAIA,EAAEpvB,QAAU4iB,EAAKzN,MAAM6Z,aAE9DK,EAAmCr5B,OAAOkK,KAAMiuB,GAA0Bj4B,KAAKif,MAAM6Z,aACtFZ,OACAt3B,IAAI,SAAAw4B,GAAE,MAAK,CAAEtvB,MAAOsvB,EAAIhB,MAAOgB,KAE9BC,EAAsBF,EAAmB3a,KAAK,SAAA0a,GAAC,OAAIA,EAAEpvB,QAAU4iB,EAAKzN,MAAM0Z,oBAEhF,OACI7Z,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLuW,MAAO9J,KAAKif,MAAMqa,eAClBzL,SAAU7tB,KAAK+4B,qBACfhtC,MAAM,cAEV+yB,EAAAhgB,EAAAf,cAAC85B,GAAA,EAAD,CACIzR,UAAWpoB,KAAMzR,WACjBud,MAAOmvB,EACPpL,SAAU7tB,KAAK4tB,aACfoK,QAASA,GACTuB,WAAY,CACRzB,OAAQH,MAGhB7Y,EAAAhgB,EAAAf,cAAC85B,GAAA,EAAD,CACIzR,UAAWpoB,KAAMxR,YACjBsd,MAAOuvB,EACPxL,SAAU7tB,KAAK64B,wBACfb,QAASmB,IAEbra,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,SACLuW,MAAO9J,KAAKif,MAAMua,iBAClB3L,SAAU7tB,KAAKg5B,uBACfjtC,MAAM,cACNykC,KAAK,iBA7FEzR,aAkHZ4H,eAdS,SAAC3lB,GAMrB,MAAO,CACH83B,WANa93B,EAAMmW,QAAQC,QAAQ2C,aAAaxtB,WAOhDosC,kBANoB33B,EAAMmW,QAAQC,QAAQ2C,aAAavtB,YAOvD8sC,eANiBt4B,EAAMmW,QAAQC,QAAQ2C,aAAa3gB,SAOpDogC,iBANmBx4B,EAAMmW,QAAQC,QAAQ2C,aAAazgB,YAAcjM,IAU7Ds5B,CAA+D0R,yBC9IjEoB,GAAb,SAAAtK,GAAA,SAAAsK,IAAA,IAAArK,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAy5B,GAAA,QAAApK,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAA25B,IAAAtqB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACIoK,mBAAqB,YAEjB3S,EADqBrjB,EAAKub,MAAlB8H,UACCzwB,OAHjBoN,EAMIi2B,uBAAyB,WACrB,IAAMzP,EAAYxrB,OAAOyrB,eACnBL,EAAQI,EAAU0P,WAAW,GACN,IAAzB1P,EAAU2P,YAAoB/P,EAAMgQ,WAEpC/S,EADqBrjB,EAAKub,MAAlB8H,UACCluB,GAAkC,SAE3CiF,SAASktB,YAAY,gBAbjCtnB,EAiBIq2B,yBAA2B,WACvB,IAAM7P,EAAYxrB,OAAOyrB,eACnBL,EAAQI,EAAU0P,WAAW,GACN,IAAzB1P,EAAU2P,YAAoB/P,EAAMgQ,WAEpC/S,EADqBrjB,EAAKub,MAAlB8H,UACCluB,GAAkC,WAE3CiF,SAASktB,YAAY,kBAxBjCtnB,EA4BIs2B,wBAA0B,WACtB,IAAM9P,EAAYxrB,OAAOyrB,eACnBL,EAAQI,EAAU0P,WAAW,GACN,IAAzB1P,EAAU2P,YAAoB/P,EAAMgQ,WAEpC/S,EADqBrjB,EAAKub,MAAlB8H,UACCluB,GAAkC,UAE3CiF,SAASktB,YAAY,iBAnCjCtnB,EAuCIu2B,kBAAoB,WAChBn8B,SAASktB,YAAY,SAxC7BtnB,EA2CIw2B,oBAAsB,WAClBp8B,SAASktB,YAAY,WA5C7BtnB,EA+CI8uB,kBAAoB,WAAM,IAAAzR,EACYrd,EAAKub,MAA/BuX,EADczV,EACdyV,YAAazP,EADChG,EACDgG,cACD5hB,IAAhBqxB,GACAzP,EAASrwB,OAlDrBgN,EAsDIovB,YAAc,SAACjxB,GAA4B,IAAAof,EACLvd,EAAKub,MAA/BuX,EAD+BvV,EAC/BuV,YAAazP,EADkB9F,EAClB8F,cACD5hB,IAAhBqxB,IACI30B,EAAMgf,QACNkG,EAASnwB,MAETmwB,EAASpwB,QA5DzB+M,EAiEIqvB,YAAc,SAAClxB,GAA4B,IAAAyf,EACL5d,EAAKub,MAA/BuX,EAD+BlV,EAC/BkV,YAAazP,EADkBzF,EAClByF,cACD5hB,IAAhBqxB,IACI30B,EAAMgf,QACNkG,EAASjwB,MAETiwB,EAASlwB,QAvEzB6M,EA4EIsvB,gBAAkB,WAAM,IAAA/Q,EACcve,EAAKub,MAA/BuX,EADYvU,EACZuU,YAAazP,EADD9E,EACC8E,cACD5hB,IAAhBqxB,GACAzP,EAAShwB,OA/ErB2M,EAmFIuvB,kBAAoB,WAAM,IAAA7Q,EACY1e,EAAKub,MAA/BuX,EADcpU,EACdoU,YAAazP,EADC3E,EACD2E,cACD5hB,IAAhBqxB,GACAzP,EAAS/vB,OAtFrB0M,EA0FI+uB,iBAAmB,SAAC5wB,GAA+C,IAAAihB,EAC7Bpf,EAAKub,MAA/BuX,EADuD1T,EACvD0T,YAAazP,EAD0CjE,EAC1CiE,SACftwB,EAAOoL,EAAM2qB,OAAO1iB,MAAM4oB,YACZvtB,IAAhBqxB,GACAzP,EAASvwB,GAA6BC,KA9FlDiN,EAkGI0vB,kBAAoB,SAACp6B,GACjB,IAAMkxB,EAAYxrB,OAAOyrB,eACnBL,EAAQI,EAAU0P,WAAW,GACN,IAAzB1P,EAAU2P,YAAoB/P,EAAMgQ,WAEpC/S,EADqBrjB,EAAKub,MAAlB8H,UACChuB,GAAkCC,EAAMq6B,MAEjDv1B,SAASktB,YAAY,aAAa,EAAOhyB,EAAMq6B,MAzG3D3vB,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAA25B,EAAAtK,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA25B,EAAA,EAAApM,IAAA,SAAAvjB,MAAA,WA6Ga,IAAAia,EAC4B/jB,KAAKif,MAA9BuX,EADHzS,EACGyS,YAAavG,EADhBlM,EACgBkM,QAEjBj3B,EAAQ,UAKZ,OAJIw9B,GAAoC,SAArBA,EAAYjjC,MAAmBijC,EAAYx9B,QAC1DA,EAAQw9B,EAAYx9B,OAIpB8lB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAM9R,KAAM8R,MAAO,CAAEC,QAASgyB,EAAU,UAAY,SAChEnR,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK05B,mBAAoB3tC,MAAM,kBAC5C+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,qBAEajhB,IAAhBqxB,GACG1X,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK8yB,YAAa/mC,MAAM,yCACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,iBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+yB,YAAahnC,MAAM,4CACrC+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,yBAKKjhB,IAAhBqxB,IAA8BA,EAAYpb,QACvC0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKgzB,gBACdjnC,MAAM,iFAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,mBAISjhB,IAAhBqxB,GAA6BA,EAAYpb,QACtC0D,EAAAhgB,EAAAf,cAAA,UACIgwB,QAAS/tB,KAAKizB,kBACdlnC,MAAM,wFAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,SAIRtH,EAAAhgB,EAAAf,cAAA,UACIqoB,eAA2BjhB,IAAhBqxB,GAA6BA,EAAYpb,OAASpd,KAAM/R,SAAW,GAC9E8hC,QAAS/tB,KAAKwyB,kBACdzmC,MAAM,gBAEN+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,gBAGajhB,IAAhBqxB,GACG1X,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,OACLuW,MAAO0sB,EAAY//B,MAAQ,GAC3B8d,YAAaiiB,EAAY/iC,GACzBo6B,SAAU7tB,KAAKyyB,iBACf1mC,MAAM,+BAId+yB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK25B,uBAAwB5tC,MAAM,mBAChD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,sBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+5B,yBAA0BhuC,MAAM,qBAClD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,wBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKg6B,wBAAyBjuC,MAAM,oBACjD+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,uBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKi6B,kBAAmBluC,MAAM,4BAC3C+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,gBAEJtH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKk6B,oBAAqBnuC,MAAM,8BAC7C+yB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,kBAEJtH,EAAAhgB,EAAAf,cAAC01B,GAAD,CAAaz6B,MAAOA,EAAO60B,SAAU7tB,KAAKozB,oBAC1CtU,EAAAhgB,EAAAf,cAACo8B,GAAD,YA1LpBV,EAAA,CAAiC1a,aA4MlB4H,eAXS,SAAC3lB,GAMrB,MAAO,CACHw1B,iBALuCrxB,IAAvCnE,EAAMmW,QAAQC,QAAQ0C,mBAAsE3U,IAAxCnE,EAAMmW,QAAQC,QAAQC,cACpErW,EAAMmW,QAAQC,QAAQnN,OAAOjJ,EAAMmW,QAAQC,QAAQ0C,cAAc9Y,EAAMmW,QAAQC,QAAQC,oBACvFlS,IAOCwhB,CAA4E8S,uDCjN3F5F,0BAAeuG,MACfvG,0BAAeC,MAQR,IAAMuG,GAAb,SAAAlL,GAAA,SAAAkL,IAAA,IAAAjL,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAq6B,GAAA,QAAAhL,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAu6B,IAAAlrB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACI+F,cAAgB,SACZC,EACAj7B,EACAiO,EACAhO,EACAC,EACAC,EACAC,GACC,IAAAsmB,EACgCrd,EAAKub,MAA9B8H,EADPhG,EACOgG,SAAUkN,EADjBlT,EACiBkT,WAElB,GAAmB,OAAfA,EAAJ,CAKA,IAAI1rB,EAAS7M,KAAM4+B,YAAY/xB,SAI/B,OAFAwe,EAAS3sB,GAAmB65B,EAAY55B,EAAMC,EAAMC,EAAOC,EAAUC,EAAO8N,EAAOhM,QAE5E,CAAE9B,MAAO8N,EAAOgyB,QARnB9/B,KAbZiJ,EAwBIqyB,aAAe,SAACC,EAAsB17B,EAA4BC,IAE9DwsB,EADqBrjB,EAAKub,MAAlB8H,UACCpsB,GAAmBq7B,EAAc17B,EAAMC,KA1BxDmJ,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAu6B,EAAAlL,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAu6B,EAAA,EAAAhN,IAAA,SAAAvjB,MAAA,WA6Ba,IACGmmB,EAAYjwB,KAAKif,MAAjBgR,QAER,OACInR,EAAAhgB,EAAAf,cAAA,OACIqoB,UAAWpoB,KAAM9R,KACjB8R,MAAO,CAAEC,QAAS,OAAQu8B,WAAYvK,EAAU,UAAY,SAAUx6B,OAAQw6B,EAAU,OAAS,IAEjGnR,EAAAhgB,EAAAf,cAAA,+GAGA+gB,EAAAhgB,EAAAf,cAACk4B,GAAA,SAAD,CACIwE,eAAe,EACfvE,OAAQ,CACJC,QAASn2B,KAAKq1B,cACde,OAAQp2B,KAAK+1B,cAEjBM,kBAAmB,CACf,YACA,aACA,gBACA,aACA,aACA,aAEJqE,yBAAyB,EACzBC,YAAY,eAvDhCN,EAAA,CAAmCtb,aAoEpB4H,eANS,SAAC3lB,GACrB,MAAO,CACHizB,WAAYjzB,EAAMwR,MAAMxmB,SAIjB26B,CAA4E0T,wBCvErFO,GAA0B,CAC5B,CACI55B,MAAO9T,EAAa2tC,SACpB9uC,MAAO,WACP+uC,KAAM,WACNC,UAAWzD,IAEf,CACIt2B,MAAO9T,EAAa6wB,QACpBhyB,MAAO,UACP+uC,KAAM,UACNC,UAAW7L,IAEf,CACIluB,MAAO9T,EAAa4wB,aACpB/xB,MAAO,eACP+uC,KAAM,gBACNC,UAAWzE,IAEf,CACIt1B,MAAO9T,EAAagV,MACpBnW,MAAO,SACP+uC,KAAM,QACNC,UAAW5I,IAEf,CACInxB,MAAO9T,EAAa8wB,KACpBjyB,MAAO,QACP+uC,KAAM,cACNC,UAAWtB,IAEf,CACIz4B,MAAO9T,EAAa8tC,OACpBjvC,MAAO,SACP+uC,KAAM,eACNC,UAAWV,IAEf,CACIr5B,MAAO9T,EAAa+tC,aACpBlvC,MAAO,gBACP+uC,KAAM,gBACNC,UAAWhH,IAEf,CACI/yB,MAAO9T,EAAaguC,IACpBnvC,MAAO,kBACP+uC,KAAM,gBACNC,UAAW7K,IAEf,CACIlvB,MAAO9T,EAAaiuC,IACpBpvC,MAAO,kBACP+uC,KAAM,iBACNC,UAAWpJ,KAINyJ,GAAb,SAAAjM,GAAA,SAAAiM,IAAA,IAAAhM,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAo7B,GAAA,QAAA/L,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAs7B,IAAAjsB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACI+L,cAAgB,SAACr6B,GAAwB,IAAA+f,EACDrd,EAAKub,MAAjCjF,EAD6B+G,EAC7B/G,cAAe+M,EADchG,EACdgG,SAEnBA,EAAS9sB,GADT+f,IAAkBhZ,EACc,KAEAA,KAN5C0C,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAs7B,EAAAjM,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAs7B,EAAA,EAAA/N,IAAA,SAAAvjB,MAAA,WAUa,IAAA4iB,EAAA1sB,KACGga,EAAkBha,KAAKif,MAAvBjF,cACR,OACI8E,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMs9B,SAClBxc,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMu9B,UACjBX,GAASh6B,IAAI,SAAA46B,GAAE,OACZ1c,EAAAhgB,EAAAf,cAAA,KACIsvB,IAAKmO,EAAGx6B,MACRjV,MAAOyvC,EAAGzvC,MACVq6B,UAAS,kBAAAhqB,OAAoB4d,IAAkBwhB,EAAGx6B,MAAQhD,KAAMhS,OAAS,IACzE+hC,QAAS,kBAAMrB,EAAK2O,cAAcG,EAAGx6B,SAEpCw6B,EAAGV,SAIhBhc,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAS,GAAAhqB,OAAK4B,KAAM9R,KAAX,KAAAkQ,OAAqC,OAAlB4d,EAAyBhc,KAAMy9B,OAAS,KACpEb,GAASh6B,IAAI,SAAA46B,GAAE,OACZ1c,EAAAhgB,EAAAf,cAACy9B,EAAGT,UAAJ,CAAc1N,IAAKmO,EAAGx6B,MAAOivB,QAASjW,IAAkBwhB,EAAGx6B,gBA5BnFo6B,EAAA,CAA6Brc,aA0Cd4H,eANS,SAAC3lB,GACrB,MAAO,CACHgZ,cAAehZ,EAAMmW,QAAQC,QAAQ4C,gBAI9B2M,CAA+DyU,wBClFjEM,GAAb,SAAAvM,GAAA,SAAAuM,IAAA,IAAAtM,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAA07B,GAAA,QAAArM,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAA47B,IAAAvsB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAQ,CACJxM,UAAW,IACXC,WAAY,IACZC,gBAAiB,GACjBC,gBAAiB,GALzB+O,EAgBIi4B,QAAU,SAAC95B,GAAyB,IACxBklB,EAAarjB,EAAKub,MAAlB8H,SAER,OAAQllB,EAAMwrB,KACV,IAAK,IACL,IAAK,IACGxrB,EAAMgf,SAAWhf,EAAM+5B,SACvB7U,EAASjsB,MACF+G,EAAMgf,SACbkG,EAASlsB,MAEb,MAEJ,IAAK,IACL,IAAK,IACGgH,EAAMgf,SACNkG,EAASjsB,QAhC7B4I,EAwCIm4B,sBAAwB,WAAM,IAClB9U,EAAarjB,EAAKub,MAAlB8H,SAEF/L,EAAoB,CAAEvnB,GAAIE,IAAQC,WAAYyC,MAAO,GAE3D0wB,EAAShxB,GAAkBilB,KA7CnCtX,EAgDIo4B,yBAA2B,YAEvB/U,EADqBrjB,EAAKub,MAAlB8H,UACCltB,QAA0BsL,GAAW,OAAOA,KAlD7DzB,EAqDIq4B,wBAA0B,SAAC7nC,GAAoB,IAAA6sB,EACPrd,EAAKub,MAAjC8H,EADmChG,EACnCgG,SAAUiV,EADyBjb,EACzBib,cACI,OAAlBA,GACAjV,EAASnxB,GAAqBomC,EAAcvoC,GAAIS,KAxD5DwP,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAA47B,EAAAvM,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA47B,EAAA,EAAArO,IAAA,oBAAAvjB,MAAA,WASQpL,OAAOkD,iBAAiB,UAAW5B,KAAK27B,WAThD,CAAAtO,IAAA,uBAAAvjB,MAAA,WAaQpL,OAAO0Z,oBAAoB,UAAWpY,KAAK27B,WAbnD,CAAAtO,IAAA,SAAAvjB,MAAA,WA4Da,IAAAmX,EAWDjhB,KAAKif,MATL3F,EAFC2H,EAED3H,gBACA9S,EAHCya,EAGDza,YACA8O,EAJC2L,EAID3L,UACA9f,EALCyrB,EAKDzrB,MACAC,EANCwrB,EAMDxrB,OACAmC,EAPCqpB,EAODrpB,WACA+hB,EARCsH,EAQDtH,SACAlhB,EATCwoB,EASDxoB,KACAujC,EAVC/a,EAUD+a,cAGEnP,EAAkBr3B,EAAsB,EAAdlI,EAC1Bw/B,EAAmBr3B,EAAuB,EAAdnI,EAElC,OACIgsB,GACIwF,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAChC3P,EAAAhgB,EAAAf,cAAA,6CAGe,OAAlBi+B,GACGld,EAAAhgB,EAAAf,cAACk+B,GAAD,CAAelwC,MAAOiwC,EAAcvlC,KAAMo3B,SAAU7tB,KAAK+7B,0BAG7Djd,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMk+B,aAClBpd,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMs9B,SAClBxc,EAAAhgB,EAAAf,cAACo+B,GAAD,OAEJrd,EAAAhgB,EAAAf,cAAA,OAAKoqB,YAAanoB,KAAK87B,yBAA0B1T,aAAcpoB,KAAK87B,2BAC9DniB,EAAWX,MAAwBA,IAAsB8F,EAAAhgB,EAAAf,cAACq+B,GAAD,MAC3Dtd,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMmZ,SAClB2H,EAAAhgB,EAAAf,cAAA,MACIC,MAAO,CACHq+B,oBAAmB,4BAAAjgC,OAA8BywB,EAC7Cp0B,EADe,eAItB+N,GACGA,EAAY5F,IAAI,SAAA5I,GAAM,MAAI,CACtB8mB,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAKr1B,GACL8mB,EAAAhgB,EAAAf,cAACu+B,GAAD,CAAMxwC,KAAMwpB,EAAUtd,GAAS+L,QAAQ,KAE3CnM,GACIknB,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAG,GAAAjxB,OAAKpE,EAAL,SACH8mB,EAAAhgB,EAAAf,cAACu+B,GAAD,CAAMxwC,KAAMwpB,EAAUtd,GAAS+L,QAAQ,QAIvD+a,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAI,WACJvO,EAAAhgB,EAAAf,cAAA,OACItK,GAAG,UACH2yB,UAAWpoB,KAAMu+B,WACjBv+B,MAAO,CACHxI,MAAK,GAAA4G,OAAKywB,EAAkBp0B,EAAvB,MACLhD,OAAM,GAAA2G,OAAK0wB,EAAmBr0B,EAAxB,MACN4tB,SAAU,WACV6B,SAAU,UAEd6F,QAAS/tB,KAAK67B,uBAEd/c,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,OACAtH,EAAAhgB,EAAAf,cAAA,mCA7HhD29B,EAAA,CAA6B3c,aA4Jd4H,eAjBS,SAAC3lB,GACrB,MAAO,CACH2Y,SAAU3Y,EAAMmW,QAAQC,QAAQuC,SAChCnkB,MAAOwL,EAAMmW,QAAQC,QAAQ5hB,MAC7BC,OAAQuL,EAAMmW,QAAQC,QAAQ3hB,OAC9BmC,WAAYoJ,EAAMmW,QAAQC,QAAQxf,WAClCa,KAAMuI,EAAMmW,QAAQC,QAAQ3e,KAC5B6gB,gBAAiBtY,EAAM0d,KAAKpF,gBAC5B9S,YAAaxF,EAAMmW,QAAQC,QAAQ5Q,YACnC8O,UAAWtU,EAAMmW,QAAQC,QAAQ9B,UACjC0mB,cACIh7B,EAAMrU,SAASX,QAAUgV,EAAMrU,SAAS2lB,KAAKtR,EAAMrU,SAASX,QACtDgV,EAAMrU,SAAS2lB,KAAKtR,EAAMrU,SAASX,QACnC,OAIH26B,CAA+D+U,IC7LjEc,GAAb,SAAArN,GAAA,SAAAqN,IAAA,OAAA18B,OAAAC,GAAA,EAAAD,CAAAE,KAAAw8B,GAAA18B,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA08B,GAAAr8B,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAA08B,EAAArN,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA08B,EAAA,EAAAnP,IAAA,oBAAAvjB,MAAA,WACwB,IlCgzBarW,EkChzBbstB,EACY/gB,KAAKif,MAAzB8H,EADQhG,EACRgG,SAAU0V,EADF1b,EACE0b,MAClB1V,GlC8yB6BtzB,EkC9yBCgpC,EAAMC,OAAOjpC,GlC+yBxC,CACHF,KAAMvD,GACNyD,UkCpzBR,CAAA45B,IAAA,SAAAvjB,MAAA,WAMa,IACGwP,EAAoBtZ,KAAKif,MAAzB3F,gBACR,OAAIA,EACOwF,EAAAhgB,EAAAf,cAAC4+B,GAAD,OACoB,IAApBrjB,EACAwF,EAAAhgB,EAAAf,cAAC6+B,GAAA,EAAD,CAAUC,GAAG,WAEb,SAbnBL,EAAA,CAAiCzd,aAoBlB4H,eAFS,SAAC3lB,GAAD,MAAmB,CAAEsY,gBAAiBtY,EAAM0d,KAAKpF,kBAE1DqN,CAAyB6V,IChCnBM,yLAEb,OACIhe,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,sFACA+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,mCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,+BAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,+BAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,qEACA+gB,EAAAhgB,EAAAf,cAAA,yBAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,gCACA+gB,EAAAhgB,EAAAf,cAAA,8BACA+gB,EAAAhgB,EAAAf,cAAA,2CACA+gB,EAAAhgB,EAAAf,cAAA,qEACA+gB,EAAAhgB,EAAAf,cAAA,sGAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,+CACA+gB,EAAAhgB,EAAAf,cAAA,oEAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,oEAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,+BAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,gEACA+gB,EAAAhgB,EAAAf,cAAA,0DACA+gB,EAAAhgB,EAAAf,cAAA,iCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,0DACA+gB,EAAAhgB,EAAAf,cAAA,kEACA+gB,EAAAhgB,EAAAf,cAAA,qDAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,mCACA+gB,EAAAhgB,EAAAf,cAAA,qEACA+gB,EAAAhgB,EAAAf,cAAA,2CAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,mDAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,6GACqG,IACjG+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,mCAAR,oBAFJ,IAEoE,IAChE4gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,wBAAR,sBAHJ,yBAMJ4gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,kEACA+gB,EAAAhgB,EAAAf,cAAA,sDACA+gB,EAAAhgB,EAAAf,cAAA,gJAIA+gB,EAAAhgB,EAAAf,cAAA,yCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,4EACA+gB,EAAAhgB,EAAAf,cAAA,oDACA+gB,EAAAhgB,EAAAf,cAAA,6JAIA+gB,EAAAhgB,EAAAf,cAAA,oDACA+gB,EAAAhgB,EAAAf,cAAA,iCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,8BACA+gB,EAAAhgB,EAAAf,cAAA,8CACA+gB,EAAAhgB,EAAAf,cAAA,+CACA+gB,EAAAhgB,EAAAf,cAAA,+FACA+gB,EAAAhgB,EAAAf,cAAA,oCACA+gB,EAAAhgB,EAAAf,cAAA,wCACA+gB,EAAAhgB,EAAAf,cAAA,uCACA+gB,EAAAhgB,EAAAf,cAAA,iCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,yDACA+gB,EAAAhgB,EAAAf,cAAA,+KAMJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,qEACA+gB,EAAAhgB,EAAAf,cAAA,8GAGA+gB,EAAAhgB,EAAAf,cAAA,kEAGJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,iEACA+gB,EAAAhgB,EAAAf,cAAA,oFAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,wEACA+gB,EAAAhgB,EAAAf,cAAA,4CACA+gB,EAAAhgB,EAAAf,cAAA,qCAEJ+gB,EAAAhgB,EAAAf,cAAA,wBACA+gB,EAAAhgB,EAAAf,cAAA,4CAvI2BghB,aCG3CrgB,OAAOkD,iBAAiB,QAAS,SAASm7B,GAEtCx8B,GADYw8B,EAAIxiC,SAIpBmE,OAAOkD,iBAAiB,qBAAsB,SAAUC,GACpDtB,GAAY,IAAInF,MAAMyG,EAAMm7B,eAWXC,eACjB,SAAAA,EAAYhe,GAAc,IAAAvb,EAAA,OAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAi9B,IACtBv5B,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAm9B,GAAA9tB,KAAAnP,KAAMif,KACDje,MAAQ,CAAEk8B,UAAU,GAFHx5B,mFAKRnJ,GACdyF,KAAKugB,SAAS,CAAE2c,UAAU,IACZ,OAAV3iC,GACAgG,GAAYhG,oCAKhB,OAAIyF,KAAKgB,MAAMk8B,SAEPpe,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU+P,QAASR,KAAK,MAAlD,4JAEyD,IACrDrP,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,yBAAR,kBAHJ,KAOD8B,KAAKif,MAAMpI,gBAvBiBkI,4CCdtBoe,iNACjBn8B,MAAQ,CACJo8B,eAAe,KAGnBC,aAAe,WACX35B,EAAK6c,SAAS,CAAE6c,eAAgB15B,EAAK1C,MAAMo8B,mBAG/CE,UAAY,WACR55B,EAAK6c,SAAS,CAAE6c,eAAe,IAC/B15B,EAAKub,MAAMse,cAGfC,SAAW,WACP95B,EAAK6c,SAAS,CAAE6c,eAAe,+EAG1B,IACGA,EAAkBp9B,KAAKgB,MAAvBo8B,cACAK,EAAaz9B,KAAKif,MAAlBwe,SAER,OACI3e,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,KAAGhS,MAAM,SAASq6B,UAAS,kBAAAhqB,OAAoB4B,KAAM5R,QAAU2hC,QAAS/tB,KAAKq9B,cAA7E,yBAEK,IACJD,GACGte,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACK2P,EAAU,IACX3e,EAAAhgB,EAAAf,cAAA,QAAMqoB,UAAWpoB,KAAM3R,OAAQ0hC,QAAS/tB,KAAKs9B,WAA7C,OAEQ,IAJZ,IAKM,IACFxe,EAAAhgB,EAAAf,cAAA,QAAMqoB,UAAWpoB,KAAM3R,OAAQ0hC,QAAS/tB,KAAKw9B,UAA7C,eAlCqBze,kCC8BhC2e,GAAb,SAAAvO,GAAA,SAAAuO,IAAA,IAAAtO,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAA09B,GAAA,QAAArO,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAA49B,IAAAvuB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAoB,CAChB28B,YAAa,GACbnoC,MAAO,KACPC,OAAQ,KACRL,IAAK,KALbsO,EAQIk6B,qBAAuB,SAAC1pC,GAAoB,IAAA6sB,EACPrd,EAAKub,MAA9B8H,EADgChG,EAChCgG,SAAUkN,EADsBlT,EACtBkT,WACC,OAAfA,GACAlN,EAAS9yB,GAAkBggC,EAAWxgC,GAAIS,KAXtDwP,EAeIkqB,aAAe,SAAC/rB,GACZ6B,EAAK6c,SAAS,CAAEod,YAAa97B,EAAM2qB,OAAO1iB,SAhBlDpG,EAmBImzB,kBAAoB,SAACh1B,GACjB6B,EAAK6c,SAAS,CAAE/qB,MAAOo7B,WAAW/uB,EAAM2qB,OAAO1iB,UApBvDpG,EAuBIozB,mBAAqB,SAACj1B,GAClB6B,EAAK6c,SAAS,CAAE9qB,OAAQm7B,WAAW/uB,EAAM2qB,OAAO1iB,UAxBxDpG,EA2BIm6B,yBAA2B,WAAM,IAAA5c,EACIvd,EAAKub,MAA9B8H,EADqB9F,EACrB8F,SAAUkN,EADWhT,EACXgT,WAElB,GAAmB,OAAfA,EAAJ,CAIA,IAAM0J,EAAcj6B,EAAK1C,MAAM28B,YAAYjL,OAGvC3L,EADA4W,EACSroC,GAAqBqoC,EAAaj6B,EAAK1C,MAAMxL,MAAOkO,EAAK1C,MAAMvL,OAAQw+B,EAAWxgC,IAElFH,GAAe,QAAS,yCAvC7CoQ,EA2CIo6B,oBAAsB,SAACnoC,IAEnBoxB,EADqBrjB,EAAKub,MAAlB8H,UACCrxB,GAAqBC,KA7CtC+N,EAgDIysB,gBAAkB,SAACtuB,GACf6B,EAAK6c,SAAS,CAAEnrB,IAAKg2B,SAASvpB,EAAM2qB,OAAO1iB,UAjDnDpG,EAoDI0sB,eAAiB,WAAM,IAAA9O,EACc5d,EAAKub,MAA9B8H,EADWzF,EACXyF,SAAUkN,EADC3S,EACD2S,WACV7+B,EAAQsO,EAAK1C,MAAb5L,IAEW,OAAf6+B,GACAlN,EAAS5xB,GAAqBC,EAAK,QAAS6+B,EAAWxgC,MAzDnEiQ,EA6DIq6B,sBAAwB,WAAM,IAAA9b,EACOve,EAAKub,MAA9B8H,EADkB9E,EAClB8E,SAEW,OAHO9E,EACRgS,YAGdlN,EAAS1xB,OAjErBqO,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAA49B,EAAAvO,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA49B,EAAA,EAAArQ,IAAA,SAAAvjB,MAAA,WAqEa,IAAA4iB,EAAA1sB,KAAAoiB,EAC8EpiB,KAAKif,MAAhF3F,EADH8I,EACG9I,gBAAiB2a,EADpB7R,EACoB6R,WAAY5hB,EADhC+P,EACgC/P,OAAQC,EADxC8P,EACwC9P,KAAMge,EAD9ClO,EAC8CkO,cAAe1nB,EAD7DwZ,EAC6DxZ,aAC1DxT,EAAQ4K,KAAKgB,MAAb5L,IAEJzI,EAAW0lB,EAAOzR,IAAI,SAAAyF,GAAS,OAAIiM,EAAKjM,KAC5C1Z,EAASurC,KAAK,SAACp5B,EAAGk/B,GAAJ,OAAWl/B,EAAErI,KAAOunC,EAAEvnC,MAAQ,EAAI,IAEhD,IAAMwnC,EAAetxC,EAASiU,IAAI,SAAAuW,GAAO,OACrC2H,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAKlW,EAAQ1jB,IACbqrB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAE,YAAAzgC,OAAc+a,EAAQ1jB,KAAO0jB,EAAQ1gB,MAAa,IAC1DqoB,EAAAhgB,EAAAf,cAACogC,GAAD,CACIV,SAAS,8CACTF,SAAU,kBAAM7Q,EAAKoR,oBAAoB3mB,EAAQ1jB,UAK7D,OACI6lB,GACe,OAAf2a,GACInV,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMrR,UAClBmyB,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAApC,wIAKA3P,EAAAhgB,EAAAf,cAACk+B,GAAD,CAAelwC,MAAOkoC,EAAWx9B,KAAMo3B,SAAU7tB,KAAK49B,uBAEtD9e,EAAAhgB,EAAAf,cAAA,UAAKkgC,GAELnf,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QACXtH,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,gBAAf,kBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,eACHF,KAAK,OACLs6B,SAAU7tB,KAAK4tB,aACfxH,UAAU,eACV7R,YAAY,kBAEhBuK,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,cAAf,eACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,aACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,MACL3C,SAAU7tB,KAAK62B,kBACfzQ,UAAU,eACV7R,YAAY,aACZzK,MAAO9J,KAAKgB,MAAMxL,QAEtBspB,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,eAAf,gBACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,cACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,MACL3C,SAAU7tB,KAAK82B,mBACf1Q,UAAU,eACV7R,YAAY,cACZzK,MAAO9J,KAAKgB,MAAMvL,SAEtBqpB,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK69B,0BAAtB,oBAGJ/e,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,MAAON,KAAK,WAAhD,iHAKArP,EAAAhgB,EAAAf,cAAC8zB,GAAD,CAAct+B,KAAK,QAAQE,GAAIwgC,EAAWxgC,GAAIg+B,UAAU,IAExD3S,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QAAf,kDAEItH,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,OAAf,QACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,MACHF,KAAK,SACL2oB,IAAI,IACJsU,KAAK,IACL3C,SAAU7tB,KAAKmwB,gBACf/J,UAAU,eACV7R,YAAY,MACZzK,MAAO1U,IAEX0pB,EAAAhgB,EAAAf,cAAA,UAAQ9R,SAAUqkC,EAAevC,QAAS/tB,KAAKowB,gBAA/C,uBAKJtR,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QAAf,6GAGItH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAK+9B,uBAAtB,oBACCn1B,GAAgBA,EAAanE,OAAS,GACnCqa,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,6BAEIhP,EAAAhgB,EAAAf,cAAA,UACK6K,EAAahI,IAAI,SAAA4H,GAAW,OACzBsW,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAK7kB,GAAcA,aAvK/Dk1B,EAAA,CAA8B3e,aA+Lf4H,eAZS,SAAC3lB,GACrB,MAAO,CACHsY,gBAAiBtY,EAAM0d,KAAKpF,gBAC5B2a,WACIjzB,EAAMwR,MAAMxmB,QAAUgV,EAAMwR,MAAMF,KAAKtR,EAAMwR,MAAMxmB,QAAUgV,EAAMwR,MAAMF,KAAKtR,EAAMwR,MAAMxmB,QAAU,KACxGqmB,OAAQrR,EAAMrU,SAAS0lB,OACvBC,KAAMtR,EAAMrU,SAAS2lB,KACrBge,eAAgBtvB,EAAMwR,MAAMmH,SAAWT,MAA2BA,GAClEtQ,aAAc5H,EAAMwR,MAAM5J,eAInB+d,CAAyB+W,ICvN3BU,GAAb,SAAAjP,GAAA,SAAAiP,IAAA,OAAAt+B,OAAAC,GAAA,EAAAD,CAAAE,KAAAo+B,GAAAt+B,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAs+B,GAAAj+B,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAAs+B,EAAAjP,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAs+B,EAAA,EAAA/Q,IAAA,oBAAAvjB,MAAA,WACwB,IAAAiX,EACY/gB,KAAKif,MAAzB8H,EADQhG,EACRgG,SAAU0V,EADF1b,EACE0b,MAClB1V,EAAS5yB,GAAkBsoC,EAAMC,OAAOjpC,IAAI,MAHpD,CAAA45B,IAAA,SAAAvjB,MAAA,WAMa,IACGwP,EAAoBtZ,KAAKif,MAAzB3F,gBACR,OAAIA,EACOwF,EAAAhgB,EAAAf,cAACsgC,GAAD,OACoB,IAApB/kB,EACAwF,EAAAhgB,EAAAf,cAAC6+B,GAAA,EAAD,CAAUC,GAAG,WAEb,SAbnBuB,EAAA,CAA8Brf,aAoBf4H,eAFS,SAAC3lB,GAAD,MAAmB,CAAEsY,gBAAiBtY,EAAM0d,KAAKpF,kBAE1DqN,CAAyByX,IChCnBvf,yLAEb,OACIC,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,kBACA+gB,EAAAhgB,EAAAf,cAAA,gEACA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,oDAAR,kCAEJ4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,oDAAR,8BAEJ4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,oDAAR,sBAEJ4gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,oDAAR,4BAGR4gB,EAAAhgB,EAAAf,cAAA,2FACoF,IAChF+gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,yBAAR,kBAFJ,OAE2D,IACvD4gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,gCAAR,WAHJ,MAG0D,IACtD4gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,yCAAR,UAJJ,aApBuB6gB,aCUlBuf,iNACjBt9B,MAAQ,CACJmK,SAAU,GACVozB,SAAU,MAGdC,qBAAuB,SAAC38B,GACpB6B,EAAK6c,SAAS,CAAEpV,SAAUtJ,EAAM2qB,OAAO1iB,WAG3C20B,qBAAuB,SAAC58B,GACpB6B,EAAK6c,SAAS,CAAEge,SAAU18B,EAAM2qB,OAAO1iB,WAG3C40B,aAAe,SAAC78B,GACZ,IAAMsJ,EAAWzH,EAAK1C,MAAMmK,SAASunB,OAC/B6L,EAAW76B,EAAK1C,MAAMu9B,SAAS7L,OACrC,GAAIvnB,GAAYozB,EAAU,CACtB,IAAM9iC,EAAQ,CAAE0P,WAAUozB,YAC1B76B,EAAKub,MAAM0f,QAAQljC,QAEnBiI,EAAKub,MAAM2f,eAAe,qCAE9B/8B,EAAMoW,4FAIN,OACI6G,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,QAAMqoB,UAAU,OAAOyY,SAAU7+B,KAAK0+B,cAClC5f,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,OACLs6B,SAAU7tB,KAAKw+B,qBACfpY,UAAU,eACV7R,YAAY,aAEhBuK,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU7tB,KAAKy+B,qBACfrY,UAAU,eACV7R,YAAY,aAEhBuK,EAAAhgB,EAAAf,cAAA,SAAOxK,KAAK,SAASuW,MAAM,mBA1CZiV,aCEtB+f,GAAb,SAAA3P,GAAA,SAAA2P,IAAA,OAAAh/B,OAAAC,GAAA,EAAAD,CAAAE,KAAA8+B,GAAAh/B,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAg/B,GAAA3+B,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAAg/B,EAAA3P,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAg/B,EAAA,EAAAzR,IAAA,SAAAvjB,MAAA,WACa,IAAAiX,EACiC/gB,KAAKif,MAAnC8H,EADHhG,EACGgG,SAAUzN,EADbyH,EACazH,gBAElB,OACIwF,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QACT9M,GACEwF,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAApC,uGAEc3P,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,WAAR,WAFd,KAKA4gB,EAAAhgB,EAAAf,cAACghC,GAAD,CACIJ,QAAS,SAAAljC,GAAK,OAAIsrB,E1CkpBlB,SAACtrB,GACzB,MAAO,CACHlI,KAAM7F,EACN+N,MAAOA,G0CrpBwCujC,CAAavjC,KACxCmjC,eAAgB,SAAAK,GAAG,OAAIlY,EAASzzB,GAAe,QAAS2rC,QAInE3lB,GAAmBwF,EAAAhgB,EAAAf,cAAC6+B,GAAA,EAAD,CAAUC,GAAG,WAnBjDiC,EAAA,CAA+B/f,aA2BhB4H,eAFS,SAAC3lB,GAAD,MAAmB,CAAEsY,gBAAiBtY,EAAM0d,KAAKpF,kBAE1DqN,CAAyBmY,8CCpCnBI,yLAEb,OACIpgB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAWpoB,KAAMpR,UAClBkyB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,OAAKsE,IAAK88B,KAAY3Y,IAAI,gBAFlC,wGAKI1H,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,oCADJ,gEAGA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,0CADJ,6BAGA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,yBADJ,sBAGA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,qCADJ,kHAIA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,uCADJ,yIAIA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,oCADJ,kCAGA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,gCADJ,yEAIA+gB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAAA,gCADJ,qFAKJ+gB,EAAAhgB,EAAAf,cAAA,sBACc+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,SAAT,QADd,8BAtCyB9d,aCiB5BqgB,GAAb,SAAAjQ,GAAA,SAAAiQ,IAAA,IAAAhQ,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAo/B,GAAA,QAAA/P,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAs/B,IAAAjwB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAoB,CAChBq+B,SAAU,IAFlB37B,EAKIkqB,aAAe,SAAC/rB,GACZ6B,EAAK6c,SAAS,CAAE8e,SAAUx9B,EAAM2qB,OAAO1iB,SAN/CpG,EASI47B,sBAAwB,WAAM,IAClBvY,EAAarjB,EAAKub,MAAlB8H,SAEFjzB,EAAW4P,EAAK1C,MAAMq+B,SAAS3M,OAEjC3L,EADAjzB,EACSD,GAAkBC,GAElBR,GAAe,QAAS,oCAhB7CoQ,EAoBI67B,iBAAmB,SAACvrC,IAEhB+yB,EADqBrjB,EAAKub,MAAlB8H,UACChzB,GAAkBC,KAtBnC0P,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAs/B,EAAAjQ,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAs/B,EAAA,EAAA/R,IAAA,SAAAvjB,MAAA,WAyBa,IAAA4iB,EAAA1sB,KAAA+gB,EACqC/gB,KAAKif,MAAvC3F,EADHyH,EACGzH,gBAAiBjH,EADpB0O,EACoB1O,OAAQC,EAD5ByO,EAC4BzO,KAE3BE,EAAQH,EAAOzR,IAAI,SAAA5M,GAAM,OAAIse,EAAKte,KACxCwe,EAAM0lB,KAAK,SAACp5B,EAAGk/B,GAAJ,OAAWl/B,EAAErI,KAAOunC,EAAEvnC,MAAQ,EAAI,IAE7C,IAAM+oC,EAAYhtB,EAAM5R,IAAI,SAAA2X,GAAI,OAC5BuG,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAK9U,EAAK9kB,IACVqrB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAE,SAAAzgC,OAAWmc,EAAK9kB,KAAO8kB,EAAK9hB,MAAa,IACjDqoB,EAAAhgB,EAAAf,cAACogC,GAAD,CACIV,SAAS,0CACTF,SAAU,kBAAM7Q,EAAK6S,iBAAiBhnB,EAAK9kB,UAKvD,OACI6lB,GACIwF,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAChC3P,EAAAhgB,EAAAf,cAAC0hC,GAAD,MACmB,IAAlBptB,EAAO5N,QACJqa,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,uFAEHzb,EAAO5N,OAAS,GACbqa,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,mFAIRhP,EAAAhgB,EAAAf,cAAA,UAAKyhC,GACL1gB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QACXtH,EAAAhgB,EAAAf,cAAA,SAAOwyB,QAAQ,aAAf,cACAzR,EAAAhgB,EAAAf,cAAA,SACItK,GAAG,YACHF,KAAK,OACLs6B,SAAU7tB,KAAK4tB,aACfxH,UAAU,eACV7R,YAAY,cAEhBuK,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS/tB,KAAKs/B,uBAAtB,qBAhExBF,EAAA,CAA2BrgB,aAgFZ4H,eARS,SAAC3lB,GACrB,MAAO,CACHsY,gBAAiBtY,EAAM0d,KAAKpF,gBAC5BjH,OAAQrR,EAAMwR,MAAMH,OACpBC,KAAMtR,EAAMwR,MAAMF,OAIXqU,CAAyByY,IC1F3BM,GAAb,SAAAvQ,GAAA,SAAAuQ,IAAA,OAAA5/B,OAAAC,GAAA,EAAAD,CAAAE,KAAA0/B,GAAA5/B,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA4/B,GAAAv/B,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAA4/B,EAAAvQ,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA4/B,EAAA,EAAArS,IAAA,SAAAvjB,MAAA,WAEQ,OAAI9J,KAAKif,MAAM3F,gBACJwF,EAAAhgB,EAAAf,cAAC4hC,GAAD,MAGH7gB,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAChC3P,EAAAhgB,EAAAf,cAAC0hC,GAAD,MADJ,0DAE2D3gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,UAAR,SAF3D,MAEyF,IACrF4gB,EAAAhgB,EAAAf,cAAA,KAAGG,KAAK,WAAR,WAHJ,eANhBwhC,EAAA,CAA0B3gB,aAsBX4H,eANS,SAAC3lB,GACrB,MAAO,CACHsY,gBAAiBtY,EAAM0d,KAAKpF,kBAIrBqN,CAAyB+Y,IChC3BE,GAAgB,SAAC5+B,GAAD,OAAmBA,EAAMwR,MAAMxmB,OAASgV,EAAMwR,MAAMF,KAAKtR,EAAMwR,MAAMxmB,QAAU,MAE/F6zC,GAAmB,SAAC7+B,GAAD,OAC5BA,EAAMrU,SAASX,OAASgV,EAAMrU,SAAS2lB,KAAKtR,EAAMrU,SAASX,QAAU,MCS1D8zC,OARf,SAAgB7gB,GACZ,OACIH,EAAAhgB,EAAAf,cAAA,UAAQgwB,QAAS,kBAAM9O,EAAM8gB,YAAY3Z,UAAU,mBAAnD,+BCoBK4Z,GAAb,SAAA7Q,GAAA,SAAA6Q,IAAA,OAAAlgC,OAAAC,GAAA,EAAAD,CAAAE,KAAAggC,GAAAlgC,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAAkgC,GAAA7/B,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAAkgC,EAAA7Q,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAkgC,EAAA,EAAA3S,IAAA,SAAAvjB,MAAA,WACa,IAAAiX,EACsE/gB,KAAKif,MAAxE8H,EADHhG,EACGgG,SAAUzN,EADbyH,EACazH,gBAAiBF,EAD9B2H,EAC8B3H,SAAU6a,EADxClT,EACwCkT,WAAY+H,EADpDjb,EACoDib,cAEzD,OACIld,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,OAAKtK,GAAG,WAAW2yB,UAAWpoB,KAAMob,UAChC0F,EAAAhgB,EAAAf,cAAA,UACKqb,EAASxY,IAAI,SAAA6d,GAAC,OACXK,EAAAhgB,EAAAf,cAAA,MAAIsvB,IAAK5O,EAAEhrB,GAAI2yB,UAAsB,UAAX3H,EAAElrB,KAAmByK,KAAMzD,MAAQyD,KAAMgX,MACnD,UAAXyJ,EAAElrB,MACCurB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,SADJ,IAC6C3H,EAAEjrB,MAGvC,SAAXirB,EAAElrB,MACCurB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,KAAGqoB,UAAU,kBAAb,QADJ,IAC4C3H,EAAEjrB,MAGtC,aAAXirB,EAAElrB,MACCurB,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAACq+B,GAAD,CAAQrN,OAAO,IADnB,IAC6BtQ,EAAEjrB,WAOnDsrB,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,MAAIqoB,UAAWpoB,KAAM62B,QACjB/V,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,KAAT,eAEJ/d,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,MAAIqoB,UAAWpoB,KAAMiiC,MACjBnhB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,KAAT,SAEHvjB,GACGwF,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACKmG,GACGnV,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAE,SAAAzgC,OAAW63B,EAAWxgC,KAA9B,SAA2CwgC,EAAWx9B,KAAtD,MAGPulC,GACGld,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAE,YAAAzgC,OAAc4/B,EAAcvoC,KAApC,aACeuoC,EAAcvlC,KAD7B,OAOhBqoB,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,cAAT,cAEJ/d,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,SAAT,SAEJ/d,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,UAAT,UAEHvjB,GACGwF,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmiC,GAAD,CAAQH,SAAU,kBAAMhZ,EhDylBjD,CACHxzB,KAAM1F,SgDvlBgByrB,GACEwF,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,UAAT,UAEJ/d,EAAAhgB,EAAAf,cAAA,UACI+gB,EAAAhgB,EAAAf,cAACmgC,GAAA,EAAD,CAAMrB,GAAG,WAAT,qBA1ExCmD,EAAA,CAA4BjhB,aA+Fb4H,eATS,SAAC3lB,GACrB,MAAO,CACHsY,gBAAiBtY,EAAM0d,KAAKpF,gBAC5BF,SAAUpY,EAAMtN,QAAQ0lB,SACxB6a,WAAY2L,GAAc5+B,GAC1Bg7B,cAAe6D,GAAiB7+B,KAIzB2lB,CAAqEqZ,ICvH/DG,yLAEb,OACIrhB,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU+P,QAASR,KAAK,OAAlD,iCAH8BpP,aCO7BqhB,GAAb,SAAAjR,GAAA,SAAAiR,IAAA,IAAAhR,EAAA1rB,EAAA5D,OAAAC,GAAA,EAAAD,CAAAE,KAAAogC,GAAA,QAAA/Q,EAAAjvB,UAAAqE,OAAA6qB,EAAA,IAAA3kB,MAAA0kB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnvB,UAAAmvB,GAAA,OAAA7rB,EAAA5D,OAAAG,GAAA,EAAAH,CAAAE,MAAAovB,EAAAtvB,OAAAI,GAAA,EAAAJ,CAAAsgC,IAAAjxB,KAAAhP,MAAAivB,EAAA,CAAApvB,MAAA5D,OAAAkzB,MACItuB,MAAQ,CACJmK,SAAU,GACVozB,SAAU,GACV8B,eAAgB,IAJxB38B,EAuBI86B,qBAAuB,SAAC38B,GACpB6B,EAAK6c,SAAS,CAAEpV,SAAUtJ,EAAM2qB,OAAO1iB,SAxB/CpG,EA2BI+6B,qBAAuB,SAAC58B,GACpB6B,EAAK6c,SAAS,CAAEge,SAAU18B,EAAM2qB,OAAO1iB,SA5B/CpG,EA+BI48B,2BAA6B,SAACz+B,GAC1B6B,EAAK6c,SAAS,CAAE8f,eAAgBx+B,EAAM2qB,OAAO1iB,SAhCrDpG,EAAA,OAAA5D,OAAAO,GAAA,EAAAP,CAAAsgC,EAAAjR,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAAsgC,EAAA,EAAA/S,IAAA,eAAAvjB,MAAA,SAOiBjI,GAAwB,IAAAkf,EACF/gB,KAAKif,MAA5B8H,EADyBhG,EACzBgG,SAAUwZ,EADexf,EACfwf,SAEdvgC,KAAKgB,MAAMu9B,WAAav+B,KAAKgB,MAAMq/B,eACnCtZ,EAASzzB,GAAe,QAAS,4BAMjCitC,EAJc,CACVp1B,SAAUnL,KAAKgB,MAAMmK,SAASunB,OAC9B6L,SAAUv+B,KAAKgB,MAAMu9B,SAAS7L,SAKtC7wB,EAAMoW,mBApBd,CAAAoV,IAAA,SAAAvjB,MAAA,WAmCa,IAAA4iB,EAAA1sB,KACL,OACI8e,EAAAhgB,EAAAf,cAAA,WACI+gB,EAAAhgB,EAAAf,cAAA,QAAMqoB,UAAU,OAAOyY,SAAU,SAAAh9B,GAAK,OAAI6qB,EAAKgS,aAAa78B,KACxDid,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,OACLs6B,SAAU7tB,KAAKw+B,qBACfpY,UAAU,eACV7R,YAAY,aAEhBuK,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU7tB,KAAKy+B,qBACfrY,UAAU,eACV7R,YAAY,aAEhBuK,EAAAhgB,EAAAf,cAAA,SACIxK,KAAK,WACLs6B,SAAU7tB,KAAKsgC,2BACfla,UAAU,eACV7R,YAAY,yBAEhBuK,EAAAhgB,EAAAf,cAAA,SAAOxK,KAAK,SAASuW,MAAM,kBAzD/Cs2B,EAAA,CAA4BrhB,aA+Db4H,iBAAUyZ,IC5DZI,GAAb,SAAArR,GAAA,SAAAqR,IAAA,OAAA1gC,OAAAC,GAAA,EAAAD,CAAAE,KAAAwgC,GAAA1gC,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA0gC,GAAArgC,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAA0gC,EAAArR,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA0gC,EAAA,EAAAnT,IAAA,SAAAvjB,MAAA,WACa,IAAAiX,EACiC/gB,KAAKif,MAAnC8H,EADHhG,EACGgG,SAAUzN,EADbyH,EACazH,gBAElB,OACIwF,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,QACT9M,GACEwF,EAAAhgB,EAAAf,cAAA+gB,EAAAhgB,EAAAgvB,SAAA,KACIhP,EAAAhgB,EAAAf,cAAC2zB,GAAD,CAAexD,UAAWtP,GAAU6P,OAApC,gSAOA3P,EAAAhgB,EAAAf,cAAC0iC,GAAD,CAAQF,SAAU,SAAA9kC,GAAK,OAAIsrB,EnD8pBtB,SAACtrB,GAC1B,MAAO,CACHlI,KAAMvF,EACNyN,MAAOA,GmDjqB6CilC,CAAcjlC,QAGzD6d,GAAmBwF,EAAAhgB,EAAAf,cAAC6+B,GAAA,EAAD,CAAUC,GAAG,WAlBjD2D,EAAA,CAAgCzhB,aA0BjB4H,eAFS,SAAC3lB,GAAD,MAAmB,CAAEsY,gBAAiBtY,EAAM0d,KAAKpF,kBAE1DqN,CAAyB6Z,ICd3BG,GAAb,SAAAxR,GAAA,SAAAwR,IAAA,OAAA7gC,OAAAC,GAAA,EAAAD,CAAAE,KAAA2gC,GAAA7gC,OAAAG,GAAA,EAAAH,CAAAE,KAAAF,OAAAI,GAAA,EAAAJ,CAAA6gC,GAAAxgC,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,GAAA,EAAAP,CAAA6gC,EAAAxR,GAAArvB,OAAAkwB,GAAA,EAAAlwB,CAAA6gC,EAAA,EAAAtT,IAAA,oBAAAvjB,MAAA,WAEQ9J,KAAKif,MAAM8H,SpD+oBR,CAAExzB,KAAMhG,MoDjpBnB,CAAA8/B,IAAA,SAAAvjB,MAAA,WAMQ,GAAI82B,QAAM,OAAO9hB,EAAAhgB,EAAAf,cAAA,mEADZ,IAEGub,EAAoBtZ,KAAKif,MAAzB3F,gBACR,OACIwF,EAAAhgB,EAAAf,cAAC8iC,GAAA,EAAD,KACI/hB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,OACXtH,EAAAhgB,EAAAf,cAAC+iC,GAAD,KACIhiB,EAAAhgB,EAAAf,cAACgjC,GAAD,CAAQznB,gBAAiBA,IACzBwF,EAAAhgB,EAAAf,cAACijC,GAAA,EAAD,KACIliB,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIpG,UAAW2E,KACjC5gB,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASpG,UAAW+D,KACtChgB,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,UAAUpG,UAAWyF,KACvC1hB,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,YAAYpG,UAAWqD,KACzCtf,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,eAAepG,UAAWyB,KAC5C1d,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAapG,UAAW+B,KAC1Che,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,QAAQpG,UAAWqG,KACrCtiB,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASpG,UAAWlc,KACtCC,EAAAhgB,EAAAf,cAACkjC,GAAA,EAAD,CAAOlG,UAAWoF,MAEtBrhB,EAAAhgB,EAAAf,cAAA,OAAKqoB,UAAU,cAAf,6BAAwD,IAAIpW,MAAOqxB,sBAxB3FV,EAAA,CAAyB5hB,aAyCV4H,eATS,SAAC3lB,GAIrB,MAAO,CACHsY,gBAJatY,EAAT0d,KACApF,kBAOGqN,CAAyBga,ICvDpBW,QACa,cAA7B5iC,OAAOzD,SAASsmC,UAEiB,UAA7B7iC,OAAOzD,SAASsmC,UAEhB7iC,OAAOzD,SAASsmC,SAAS9E,MAAM,2DCPvC,IAAMx7B,G5CFC,WACH,IAAMugC,EAAiBC,cAavB,OAZAxgC,GAAQygC,YACJpjB,GAEA5f,OAAOijC,6BACDC,YACIC,YAAgBL,GAEhB9iC,OAAOijC,gCAEXE,YAAgBL,IAE1BA,EAAeM,IAAI7yB,IACZhO,G4CZG8gC,GAEdC,IAASC,OACLnjB,EAAAhgB,EAAAf,cAACmkC,EAAA,EAAD,CAAUjhC,MAAOA,IACb6d,EAAAhgB,EAAAf,cAACokC,GAAD,OAEJrkC,SAASskC,eAAe,SD+GpB,kBAAmBC,WACnBA,UAAUC,cAAcC,MAAM3mC,KAAK,SAAA4mC,GAC/BA,EAAaC,mCEhIzB/2C,EAAAC,QAAA,CAAkB2vC,QAAA,yBAAAC,SAAA,0BAAAvvC,OAAA,wBAAAE,KAAA,sBAAAuvC,OAAA,6CCAlB/vC,EAAAC,QAAA,CAAkBkpC,OAAA,uBAAAoL,KAAA,qBAAA7mB,SAAA,yBAAA7e,MAAA,sBAAAya,KAAA,0CCAlBtpB,EAAAC,QAAA,CAAkBmjC,MAAA,sBAAAG,SAAA,yBAAAD,OAAA,uBAAAD,MAAA,sBAAA2T,eAAA,kDCAlBh3C,EAAAC,QAAA,CAAkBO,KAAA,6BAAAD,SAAA,sDCAlBP,EAAAC,QAAA,CAAkBwrB,QAAA,yBAAA+kB,YAAA,6BAAAZ,QAAA,yBAAAiB,WAAA,iDCDlB7wC,EAAAC,QAAiBC,EAAAC,EAAuB,oDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,qDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.6edd791c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rotate.4a37bc7b.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__1Ltkv\",\"title\":\"Card_title__1KiIj\",\"active\":\"Card_active__XOmoJ\",\"disabled\":\"Card_disabled__2Ob5l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarImage_view__2LKQM\",\"disabled\":\"SidebarImage_disabled__1tNhN\",\"images\":\"SidebarImage_images__3zDK2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ConfirmedDelete_button__1o8h4\",\"answer\":\"ConfirmedDelete_answer__1OsVc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"EditableTitle_input__2Y_6m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fontFamily\":\"FontSelector_fontFamily__zlBcJ\",\"fontVariant\":\"FontSelector_fontVariant__2pA4n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarText_view__3s9r0\",\"disabled\":\"SidebarText_disabled__3efIG\"};","module.exports = __webpack_public_path__ + \"static/media/image.60f0926c.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"over\":\"ImageField_over__3Q9AT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ContentEditable_content__1p7up\"};","module.exports = __webpack_public_path__ + \"static/media/text.f7f9443c.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarGeneratePng_view__1_3fy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarGeneratePdf_view__10OR4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarMeasurements_view__3BCmn\",\"disabled\":\"SidebarMeasurements_disabled__2Rrd2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarSettings_view__DwnQN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarUpload_view__k69sP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardsets\":\"CardSets_cardsets__mQSav\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"features\":\"FeatureList_features__3xjD3\"};","module.exports = __webpack_public_path__ + \"static/media/screenshot.ec7615c5.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldcontroller\":\"FieldController_fieldcontroller__3ifWc\",\"fieldcontrolleractivefield\":\"FieldController_fieldcontrolleractivefield__9anIa\",\"fieldcontrolleractive\":\"FieldController_fieldcontrolleractive__3fSLl\",\"controller\":\"FieldController_controller__VCesw\",\"touchactivated\":\"FieldController_touchactivated__16s2w\"};","import { CancelToken } from 'axios';\nimport { Dispatch as ReduxDispatch } from 'redux';\nimport shortid from 'shortid';\n\nimport {\n    CardSetsCollection,\n    CardType,\n    CardsCollection,\n    Credentials,\n    GamesCollection,\n    IdsArray,\n    ImageArray,\n    ImageInfo,\n    MessageType,\n    PlaceholdersCollection,\n    PlaceholdersImageInfoByCardCollection,\n    PlaceholdersTextInfoByCardCollection,\n    TextInfo,\n    FieldInfoByCardCollection,\n} from './types';\n\nexport const INIT_REQUEST = 'INIT_REQUEST';\nexport const MESSAGE_DISPLAY = 'MESSAGE_DISPLAY';\nexport const MESSAGE_HIDE = 'MESSAGE_HIDE';\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\nexport const LOGOUT_FAILURE = 'LOGOUT_FAILURE';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const SIGNUP_REQUEST = 'SIGNUP_REQUEST';\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\nexport const SIGNUP_FAILURE = 'SIGNUP_FAILURE';\nexport const GAME_CREATE_REQUEST = 'GAME_CREATE_REQUEST';\nexport const GAME_CREATE_SUCCESS = 'GAME_CREATE_SUCCESS';\nexport const GAME_DELETE_REQUEST = 'GAME_DELETE_REQUEST';\nexport const GAME_RENAME_REQUEST = 'GAME_RENAME_REQUEST';\nexport const GAME_LIST_SUCCESS = 'GAME_LIST_SUCCESS';\nexport const GAME_LIST_REQUEST = 'GAME_LIST_REQUEST';\nexport const GAME_LIST_FAILURE = 'GAME_LIST_FAILURE';\nexport const GAME_LIST_RESET = 'GAME_LIST_RESET';\nexport const GAME_SELECT_REQUEST = 'GAME_SELECT_REQUEST';\nexport const GAME_SELECT_SUCCESS = 'GAME_SELECT_SUCCESS';\nexport const GAME_SELECT_FAILURE = 'GAME_SELECT_FAILURE';\nexport const GAME_CREATE_PDF_REQUEST = 'GAME_CREATE_PDF_REQUEST';\nexport const GAME_CREATE_PDF_SUCCESS = 'GAME_CREATE_PDF_SUCCESS';\nexport const GAME_CREATE_PDF_FAILURE = 'GAME_CREATE_PDF_FAILURE';\nexport const GAME_CREATE_PNG_REQUEST = 'GAME_CREATE_PNG_REQUEST';\nexport const GAME_CREATE_PNG_SUCCESS = 'GAME_CREATE_PNG_SUCCESS';\nexport const GAME_CREATE_PNG_FAILURE = 'GAME_CREATE_PNG_FAILURE';\nexport const GAME_GET_ATTRIBUTIONS_REQUEST = 'GAME_GET_ATTRIBUTIONS_REQUEST';\nexport const GAME_GET_ATTRIBUTIONS_SUCCESS = 'GAME_GET_ATTRIBUTIONS_SUCCESS';\nexport const GAME_GET_ATTRIBUTIONS_FAILURE = 'GAME_GET_ATTRIBUTIONS_FAILURE';\nexport const CARDSETS_SELECT_SUCCESS = 'CARDSETS_SELECT_SUCCESS';\nexport const CARDSET_CREATE_REQUEST = 'CARDSET_CREATE_REQUEST';\nexport const CARDSET_CREATE_SUCCESS = 'CARDSET_CREATE_SUCCESS';\nexport const CARDSET_CREATE_FAILURE = 'CARDSET_CREATE_FAILURE';\nexport const CARDSET_DELETE_REQUEST = 'CARDSET_DELETE_REQUEST';\nexport const CARDSET_RENAME_REQUEST = 'CARDSET_RENAME_REQUEST';\nexport const CARDSET_IMPORT_DATA = 'CARDSET_IMPORT_DATA';\nexport const CARDSET_LIST_SUCCESS = 'CARDSET_LIST_SUCCESS';\nexport const CARDSET_LIST_REQUEST = 'CARDSET_LIST_REQUEST';\nexport const CARDSET_LIST_FAILURE = 'CARDSET_LIST_FAILURE';\nexport const CARDSET_LIST_RESET = 'CARDSET_LIST_RESET';\nexport const CARDSET_SELECT_REQUEST = 'CARDSET_SELECT_REQUEST';\nexport const CARDSET_SELECT_SUCCESS = 'CARDSET_SELECT_SUCCESS';\nexport const CARDSET_CREATE_CARD = 'CARDSET_CREATE_CARD';\nexport const CARDSET_ROTATE_CARDS_RIGHT = 'CARDSET_ROTATE_CARDS_RIGHT';\nexport const CARDSET_ROTATE_CARDS_LEFT = 'CARDSET_ROTATE_CARDS_LEFT';\nexport const CARDSET_CLONE_CARD = 'CARDSET_CLONE_CARD';\nexport const CARDSET_REMOVE_CARD = 'CARDSET_REMOVE_CARD';\nexport const CARDSET_UPDATE_CARD_COUNT = 'CARDSET_UPDATE_CARD_COUNT';\nexport const CARDSET_ADD_TEXT_FIELD = 'CARDSET_ADD_TEXT_FIELD';\nexport const CARDSET_ADD_IMAGE_FIELD = 'CARDSET_ADD_IMAGE_FIELD';\nexport const CARDSET_CHANGE_ACTIVE_FIELD_NAME = 'CARDSET_CHANGE_ACTIVE_FIELD_NAME';\nexport const CARDSET_REMOVE_ACTIVE_FIELD = 'CARDSET_REMOVE_ACTIVE_FIELD';\nexport const CARDSET_RAISE_ACTIVE_FIELD = 'CARDSET_RAISE_ACTIVE_FIELD';\nexport const CARDSET_RAISE_ACTIVE_FIELD_TO_TOP = 'CARDSET_RAISE_ACTIVE_FIELD_TO_TOP';\nexport const CARDSET_LOWER_ACTIVE_FIELD = 'CARDSET_LOWER_ACTIVE';\nexport const CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM = 'CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM';\nexport const CARDSET_LOCK_ACTIVE_FIELD = 'CARDSET_LOCK_ACTIVE_FIELD';\nexport const CARDSET_UNLOCK_ACTIVE_FIELD = 'CARDSET_UNLOCK_ACTIVE_FIELD';\nexport const CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD = 'CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD';\nexport const CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD = 'CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD';\nexport const CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD = 'CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD';\nexport const CARDSET_CHANGE_WIDTH = 'CARDSET_CHANGE_WIDTH';\nexport const CARDSET_CHANGE_HEIGHT = 'CARDSET_CHANGE_HEIGHT';\nexport const CARDSET_CHANGE_IS_TWO_SIDED = 'CARDSET_CHANGE_IS_TWO_SIDED';\nexport const CARDSET_CHANGE_SNAPPING_DISTANCE = 'CARDSET_CHANGE_SNAPPING_DISTANCE';\nexport const CARDSET_CHANGE_FIELD_POSITION = 'CARDSET_CHANGE_FIELD_POSITION';\nexport const CARDSET_CHANGE_FIELD_PAN = 'CARDSET_CHANGE_FIELD_PAN';\nexport const CARDSET_CHANGE_FIELD_ZOOM = 'CARDSET_CHANGE_FIELD_ZOOM';\nexport const CARDSET_CHANGE_FIELD_SIZE = 'CARDSET_CHANGE_FIELD_SIZE';\nexport const CARDSET_CHANGE_FIELD_ANGLE = 'CARDSET_CHANGE_FIELD_ANGLE';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT =\n    'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT = 'CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT';\nexport const CARDSET_CHANGE_TEXT = 'CARDSET_CHANGE_TEXT';\nexport const CARDSET_CHANGE_IMAGE = 'CARDSET_CHANGE_IMAGE';\nexport const CARDSET_CHANGE_IMAGE_BASE64 = 'CARDSET_CHANGE_IMAGE_BASE64';\nexport const CARDSET_SET_ACTIVE_CARD_AND_FIELD = 'CARDSET_SET_ACTIVE_CARD_AND_FIELD';\nexport const CARDSET_CHANGE_APPLY_TO_ALLCARDS = 'CARDSET_CHANGE_APPLY_TO_ALLCARDS';\nexport const CARDSET_SELECT_FAILURE = 'CARDSET_SELECT_FAILURE';\nexport const CARDSET_SET_SIDEBAR_STATE = 'CARDSET_SET_SIDEBAR_STATE';\nexport const CARDSET_SET_ZOOM = 'CARDSET_SET_ZOOM';\nexport const CARDSET_UPLOAD_IMAGE = 'CARDSET_UPLOAD_IMAGE';\nexport const CARDSET_UPLOAD_IMAGE_SUCCESS = 'CARDSET_UPLOAD_IMAGE_SUCCESS';\nexport const CARDSET_UPLOAD_IMAGE_FAILURE = 'CARDSET_UPLOAD_IMAGE_FAILURE';\nexport const CARDSET_DELETE_IMAGE = 'CARDSET_DELETE_IMAGE';\nexport const CARDSET_UNDO = 'CARDSET_UNDO';\nexport const CARDSET_REDO = 'CARDSET_REDO';\nexport const IMAGE_LIST_REQUEST = 'IMAGE_LIST_REQUEST';\nexport const IMAGE_LIST_SUCCESS = 'IMAGE_LIST_SUCCESS';\nexport const IMAGE_LIST_FAILURE = 'IMAGE_LIST_FAILURE';\n\n// Actions\n\nexport interface InitAction {\n    type: typeof INIT_REQUEST;\n}\n\nexport interface MessageDisplay {\n    type: typeof MESSAGE_DISPLAY;\n    message: MessageType;\n}\nexport type MessageAction = MessageDisplay | { type: typeof MESSAGE_HIDE; messageId: string };\n\nexport interface LoginRequest {\n    type: typeof LOGIN_REQUEST;\n    creds: Credentials;\n}\nexport type LoginAction =\n    | LoginRequest\n    | { type: typeof LOGIN_SUCCESS; username: string }\n    | { type: typeof LOGIN_FAILURE; message: string }\n    | { type: typeof LOGOUT_REQUEST }\n    | { type: typeof LOGOUT_FAILURE }\n    | { type: typeof LOGOUT_SUCCESS };\n\nexport interface SignUpRequest {\n    type: typeof SIGNUP_REQUEST;\n    creds: Credentials;\n}\nexport type SignUpAction = SignUpRequest | { type: typeof SIGNUP_SUCCESS } | { type: typeof SIGNUP_FAILURE };\n\nexport interface GameCreateRequest {\n    type: typeof GAME_CREATE_REQUEST;\n    gamename: string;\n}\nexport type GameCreateAction = GameCreateRequest | { type: typeof GAME_CREATE_SUCCESS };\n\nexport interface GameDeleteRequest {\n    type: typeof GAME_DELETE_REQUEST;\n    gameId: string;\n}\n\nexport type GameDeleteAction = GameDeleteRequest;\n\nexport interface GameRenameRequest {\n    type: typeof GAME_RENAME_REQUEST;\n    gameId: string;\n    newName: string;\n}\n\nexport type GameRenameAction = GameRenameRequest;\n\nexport interface GameListSuccess {\n    type: typeof GAME_LIST_SUCCESS;\n    byId: GamesCollection;\n    allIds: IdsArray;\n}\nexport type GameListAction =\n    | { type: typeof GAME_LIST_REQUEST }\n    | GameListSuccess\n    | { type: typeof GAME_LIST_FAILURE }\n    | { type: typeof GAME_LIST_RESET };\n\nexport interface GameSelectRequest {\n    type: typeof GAME_SELECT_REQUEST;\n    id: string;\n    updateCardSets: boolean;\n}\nexport type GameSelectAction =\n    | GameSelectRequest\n    | { type: typeof GAME_SELECT_SUCCESS; id: string }\n    | { type: typeof GAME_SELECT_FAILURE };\n\nexport interface GameCreatePdfRequest {\n    type: typeof GAME_CREATE_PDF_REQUEST;\n    collectionType: string;\n    collectionId: string;\n    pageWidth: number;\n    pageHeight: number;\n    topBottomMargin: number;\n    leftRightMargin: number;\n    verticalSpace: number;\n    horizontalSpace: number;\n    includeBleedingArea: boolean;\n    cutMarksForScissors: boolean;\n    cutMarksForGuillotine: boolean;\n    cutMarksInMarginArea: boolean;\n    cutMarksOnFrontSideOnly: boolean;\n}\n\nexport type GameCreatePdfAction =\n    | GameCreatePdfRequest\n    | { type: typeof GAME_CREATE_PDF_SUCCESS }\n    | { type: typeof GAME_CREATE_PDF_FAILURE };\n\nexport interface GameCreatePngRequest {\n    type: typeof GAME_CREATE_PNG_REQUEST;\n    dpi: number;\n    collectionType: string;\n    collectionId: string;\n}\n\nexport type GameCreatePngAction =\n    | GameCreatePngRequest\n    | { type: typeof GAME_CREATE_PNG_SUCCESS }\n    | { type: typeof GAME_CREATE_PNG_FAILURE };\n\nexport interface GameGetAttributionsRequest {\n    type: typeof GAME_GET_ATTRIBUTIONS_REQUEST;\n}\n\nexport type GameGetAttributionsAction =\n    | GameGetAttributionsRequest\n    | { type: typeof GAME_GET_ATTRIBUTIONS_SUCCESS; attributions: string[] }\n    | { type: typeof GAME_GET_ATTRIBUTIONS_FAILURE };\n\nexport type GameAction =\n    | GameCreateAction\n    | GameDeleteAction\n    | GameRenameAction\n    | GameListAction\n    | GameSelectAction\n    | GameCreatePdfAction\n    | GameCreatePngAction\n    | GameGetAttributionsAction;\n\nexport interface CardSetCreateRequest {\n    type: typeof CARDSET_CREATE_REQUEST;\n    cardsetname: string;\n    width: number;\n    height: number;\n    gameId: string;\n}\nexport type CardSetCreateAction =\n    | CardSetCreateRequest\n    | { type: typeof CARDSET_CREATE_SUCCESS }\n    | { type: typeof CARDSET_CREATE_FAILURE };\n\nexport interface CardSetDeleteRequest {\n    type: typeof CARDSET_DELETE_REQUEST;\n    cardSetId: string;\n}\n\nexport interface CardSetRenameRequest {\n    type: typeof CARDSET_RENAME_REQUEST;\n    cardSetId: string;\n    newName: string;\n}\n\nexport interface CardSetsSelectSuccess {\n    type: typeof CARDSETS_SELECT_SUCCESS;\n    id: string;\n    name: string;\n}\n\nexport type CardSetsAction =\n    | CardSetsSelectSuccess\n    | CardSetCreateAction\n    | CardSetDeleteRequest\n    | CardSetRenameRequest\n    | CardSetListAction;\n\nexport interface CardSetImportData {\n    type: typeof CARDSET_IMPORT_DATA;\n    data: object;\n}\n\nexport interface CardSetListSuccess {\n    type: typeof CARDSET_LIST_SUCCESS;\n    byId: CardSetsCollection;\n    allIds: IdsArray;\n}\nexport type CardSetListAction =\n    | { type: typeof CARDSET_LIST_REQUEST }\n    | CardSetListSuccess\n    | { type: typeof CARDSET_LIST_FAILURE }\n    | { type: typeof CARDSET_LIST_RESET };\n\nexport interface CardSetSelectRequest {\n    type: typeof CARDSET_SELECT_REQUEST;\n    id: string;\n}\n\nexport interface CardSetSelectSuccessDataBase {\n    version: string;\n}\n\nexport interface CardSetSelectSuccessDataV2 {\n    version: 2;\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    snappingDistance: number;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    placeholders: PlaceholdersCollection;\n    placeholdersAllIds: IdsArray;\n    texts: PlaceholdersTextInfoByCardCollection;\n    images: PlaceholdersImageInfoByCardCollection;\n    zoom: number;\n}\n\nexport interface CardSetSelectSuccessDataV3 {\n    version: 3;\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    snappingDistance: number;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    fields: FieldInfoByCardCollection;\n    fieldsAllIds: IdsArray;\n    zoom: number;\n}\n\nexport type CardSetSelectSuccessData = CardSetSelectSuccessDataV2 | CardSetSelectSuccessDataV3;\n\nexport interface CardSetSelectSuccess {\n    type: typeof CARDSET_SELECT_SUCCESS;\n    id: string;\n    name: string;\n    data: CardSetSelectSuccessDataV3;\n    gameId: string;\n}\nexport interface CardSetCreateCard {\n    type: typeof CARDSET_CREATE_CARD;\n    card: CardType;\n}\nexport interface CardSetRotateCardsRight {\n    type: typeof CARDSET_ROTATE_CARDS_RIGHT;\n}\nexport interface CardSetRotateCardsLeft {\n    type: typeof CARDSET_ROTATE_CARDS_LEFT;\n}\nexport interface CardSetCloneCard {\n    type: typeof CARDSET_CLONE_CARD;\n    card: CardType;\n}\nexport interface CardSetRemoveCard {\n    type: typeof CARDSET_REMOVE_CARD;\n    card: CardType;\n}\nexport interface CardSetUpdateCardCount {\n    type: typeof CARDSET_UPDATE_CARD_COUNT;\n    card: CardType;\n    count: number;\n}\nexport interface CardSetAddTextField {\n    type: typeof CARDSET_ADD_TEXT_FIELD;\n}\nexport interface CardSetAddImageField {\n    type: typeof CARDSET_ADD_IMAGE_FIELD;\n}\nexport interface CardSetChangeActiveFieldName {\n    type: typeof CARDSET_CHANGE_ACTIVE_FIELD_NAME;\n    name: string;\n}\nexport interface CardSetRemoveActiveField {\n    type: typeof CARDSET_REMOVE_ACTIVE_FIELD;\n}\nexport interface CardSetRaiseActiveField {\n    type: typeof CARDSET_RAISE_ACTIVE_FIELD;\n}\nexport interface CardSetRaiseActiveFieldToTop {\n    type: typeof CARDSET_RAISE_ACTIVE_FIELD_TO_TOP;\n}\nexport interface CardSetLowerActiveField {\n    type: typeof CARDSET_LOWER_ACTIVE_FIELD;\n}\nexport interface CardSetLowerActiveFieldToBottom {\n    type: typeof CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM;\n}\nexport interface CardSetLockActiveField {\n    type: typeof CARDSET_LOCK_ACTIVE_FIELD;\n}\nexport interface CardSetUnlockActiveField {\n    type: typeof CARDSET_UNLOCK_ACTIVE_FIELD;\n}\nexport interface CardSetChangeFitForActiveField {\n    type: typeof CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD;\n    fit: string;\n}\nexport interface CardSetChangeCropForActiveField {\n    type: typeof CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD;\n    crop: boolean;\n}\n\nexport interface CardSetChangeUnclickableForActiveField {\n    type: typeof CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD;\n    unclickable: boolean;\n}\n\nexport interface CardSetChangeWidth {\n    type: typeof CARDSET_CHANGE_WIDTH;\n    width: number;\n    maintainAspectRatio: boolean;\n    resizeContent: boolean;\n}\n\nexport interface CardSetChangeHeight {\n    type: typeof CARDSET_CHANGE_HEIGHT;\n    height: number;\n    maintainAspectRatio: boolean;\n    resizeContent: boolean;\n}\n\nexport interface CardSetChangeIsTwoSided {\n    type: typeof CARDSET_CHANGE_IS_TWO_SIDED;\n    isTwoSided: boolean;\n}\n\nexport interface CardSetChangeSnappingDistance {\n    type: typeof CARDSET_CHANGE_SNAPPING_DISTANCE;\n    snappingDistance: number;\n}\n\nexport interface CardSetChangeFieldPosition {\n    type: typeof CARDSET_CHANGE_FIELD_POSITION;\n    cardId?: string;\n    fieldId: string;\n    x: number;\n    y: number;\n    group: string;\n}\n\nexport interface CardSetChangeFieldPan {\n    type: typeof CARDSET_CHANGE_FIELD_PAN;\n    cardId?: string;\n    fieldId: string;\n    cx: number;\n    cy: number;\n    group: string;\n}\n\nexport interface CardSetChangeFieldZoom {\n    type: typeof CARDSET_CHANGE_FIELD_ZOOM;\n    cardId?: string;\n    fieldId: string;\n    zoom: number;\n    group: string;\n}\n\nexport interface CardSetChangeFieldSize {\n    type: typeof CARDSET_CHANGE_FIELD_SIZE;\n    cardId?: string;\n    fieldId: string;\n    width: number;\n    height: number;\n    group: string;\n}\nexport interface CardSetChangeFieldAngle {\n    type: typeof CARDSET_CHANGE_FIELD_ANGLE;\n    cardId?: string;\n    fieldId: string;\n    angle: number;\n    group: string;\n}\nexport interface CardSetChangeActiveTextFieldAlign {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN;\n    align: string;\n}\nexport interface CardSetChangeActiveTextFieldColor {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR;\n    color: string;\n}\nexport interface CardSetChangeActiveTextFieldFontFamily {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY;\n    fontFamily: string;\n}\nexport interface CardSetChangeActiveTextFieldFontVariant {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT;\n    fontVariant: string;\n}\nexport interface CardSetChangeActiveTextFieldFontFamilyAndVariant {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT;\n    fontFamily: string;\n    fontVariant: string;\n}\nexport interface CardSetChangeActiveTextFieldFontSize {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE;\n    fontSize: number;\n}\nexport interface CardSetChangeActiveTextFieldLineHeight {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT;\n    lineHeight: number;\n}\nexport interface CardSetChangeText {\n    type: typeof CARDSET_CHANGE_TEXT;\n    cardId: string;\n    fieldId: string;\n    textInfo: TextInfo;\n}\nexport interface CardSetChangeImage {\n    type: typeof CARDSET_CHANGE_IMAGE;\n    cardId: string | undefined;\n    fieldId: string;\n    imageInfo: ImageInfo;\n}\nexport interface CardSetChangeImageBase64 {\n    type: typeof CARDSET_CHANGE_IMAGE_BASE64;\n    cardId: string;\n    fieldId: string;\n    base64?: string;\n}\nexport interface CardSetSetActiveCardAndField {\n    type: typeof CARDSET_SET_ACTIVE_CARD_AND_FIELD;\n    cardId?: string;\n    isBackActive: boolean;\n    fieldId?: string;\n}\nexport interface CardSetChangeApplyToAllCards {\n    type: typeof CARDSET_CHANGE_APPLY_TO_ALLCARDS;\n    applyToAllCards: boolean;\n}\n\nexport enum SidebarState {\n    Settings,\n    Details,\n    Measurements,\n    Image,\n    Text,\n    Upload,\n    ImportExport,\n    Png,\n    Pdf,\n}\nexport interface CardSetSetSidebarState {\n    type: typeof CARDSET_SET_SIDEBAR_STATE;\n    sidebarState: SidebarState | null;\n}\nexport interface CardSetSetZoom {\n    type: typeof CARDSET_SET_ZOOM;\n    zoom: number;\n}\n\nexport type FPLoadCallback = (id: string) => void;\nexport type FPErrorCallback = (error: string) => void;\nexport type FPProgressCallback = (computable: boolean, loaded: number, total: number) => void;\nexport type FPAbortCallback = () => void;\nexport type FPRevertLoadCallback = () => void;\n\nexport interface CardSetUploadImage {\n    type: typeof CARDSET_UPLOAD_IMAGE;\n    gameId: string;\n    file: File;\n    load: FPLoadCallback;\n    error: FPErrorCallback;\n    progress: FPProgressCallback;\n    abort: FPAbortCallback;\n    cancelToken: CancelToken;\n}\n\nexport interface CardSetDeleteImage {\n    type: typeof CARDSET_DELETE_IMAGE;\n    imageId: string;\n    load: FPRevertLoadCallback;\n    error: FPErrorCallback;\n}\n\nexport interface CardSetUndo {\n    type: typeof CARDSET_UNDO;\n}\n\nexport interface CardSetRedo {\n    type: typeof CARDSET_REDO;\n}\n\nexport interface CardSetUploadImageSuccess {\n    type: typeof CARDSET_UPLOAD_IMAGE_SUCCESS;\n}\n\nexport interface CardSetUploadImageFailure {\n    type: typeof CARDSET_UPLOAD_IMAGE_FAILURE;\n}\n\nexport type CardSetSelectAction = CardSetSelectRequest | CardSetSelectSuccess | { type: typeof CARDSET_SELECT_FAILURE };\n\nexport type CardSetModifyAction =\n    | CardSetCreateCard\n    | CardSetRotateCardsRight\n    | CardSetRotateCardsLeft\n    | CardSetCloneCard\n    | CardSetRemoveCard\n    | CardSetUpdateCardCount\n    | CardSetAddTextField\n    | CardSetAddImageField\n    | CardSetChangeActiveFieldName\n    | CardSetRemoveActiveField\n    | CardSetRaiseActiveField\n    | CardSetRaiseActiveFieldToTop\n    | CardSetLowerActiveField\n    | CardSetLowerActiveFieldToBottom\n    | CardSetLockActiveField\n    | CardSetUnlockActiveField\n    | CardSetChangeFitForActiveField\n    | CardSetChangeCropForActiveField\n    | CardSetChangeUnclickableForActiveField\n    | CardSetChangeWidth\n    | CardSetChangeHeight\n    | CardSetChangeIsTwoSided\n    | CardSetChangeSnappingDistance\n    | CardSetChangeFieldPosition\n    | CardSetChangeFieldPan\n    | CardSetChangeFieldZoom\n    | CardSetChangeFieldSize\n    | CardSetChangeFieldAngle\n    | CardSetChangeActiveTextFieldAlign\n    | CardSetChangeActiveTextFieldColor\n    | CardSetChangeActiveTextFieldFontFamily\n    | CardSetChangeActiveTextFieldFontVariant\n    | CardSetChangeActiveTextFieldFontFamilyAndVariant\n    | CardSetChangeActiveTextFieldFontSize\n    | CardSetChangeActiveTextFieldLineHeight\n    | CardSetChangeText\n    | CardSetChangeImage\n    | CardSetChangeImageBase64\n    | CardSetSetActiveCardAndField\n    | CardSetChangeApplyToAllCards\n    | CardSetSetSidebarState\n    | CardSetSetZoom\n    | CardSetUploadImage\n    | CardSetDeleteImage\n    | CardSetUndo\n    | CardSetRedo\n    | CardSetUploadImageSuccess\n    | CardSetUploadImageFailure;\n\nexport type CardSetAction = CardSetImportData | CardSetSelectAction | CardSetModifyAction;\n\nexport interface ImageListRequest {\n    type: typeof IMAGE_LIST_REQUEST;\n    filter: string;\n    location: string;\n}\nexport interface ImageListSuccess {\n    type: typeof IMAGE_LIST_SUCCESS;\n    images: ImageArray;\n}\nexport type ImageListAction = ImageListRequest | ImageListSuccess | { type: typeof IMAGE_LIST_FAILURE };\n\nexport type Action =\n    | InitAction\n    | LoginAction\n    | SignUpAction\n    | GameAction\n    | CardSetsAction\n    | CardSetAction\n    | ImageListAction\n    | MessageAction;\n\nexport type Dispatch = ReduxDispatch<Action>;\n\nexport const messageDisplay = (type: string, text: string, id?: string): MessageDisplay => {\n    return {\n        type: MESSAGE_DISPLAY,\n        message: {\n            id: id || shortid.generate(),\n            type: type,\n            text: text,\n        },\n    };\n};\n\nexport const initRequest = (): InitAction => {\n    return { type: INIT_REQUEST };\n};\n\nexport const loginRequest = (creds: Credentials): LoginAction => {\n    return {\n        type: LOGIN_REQUEST,\n        creds: creds,\n    };\n};\n\nexport const logoutRequest = (): LoginAction => {\n    return {\n        type: LOGOUT_REQUEST,\n    };\n};\n\nexport const signupRequest = (creds: Credentials): SignUpAction => {\n    return {\n        type: SIGNUP_REQUEST,\n        creds: creds,\n    };\n};\n\nexport const gameCreateRequest = (gamename: string): GameAction => {\n    return {\n        type: GAME_CREATE_REQUEST,\n        gamename: gamename,\n    };\n};\n\nexport const gameDeleteRequest = (gameId: string): GameAction => {\n    return {\n        type: GAME_DELETE_REQUEST,\n        gameId,\n    };\n};\n\nexport const gameRenameRequest = (gameId: string, newName: string): GameAction => {\n    return {\n        type: GAME_RENAME_REQUEST,\n        gameId,\n        newName,\n    };\n};\n\nexport const gameListRequest = (): GameAction => {\n    return {\n        type: GAME_LIST_REQUEST,\n    };\n};\n\nexport const gameSelectRequest = (id: string, updateCardSets: boolean): GameAction => {\n    return {\n        type: GAME_SELECT_REQUEST,\n        id,\n        updateCardSets,\n    };\n};\n\nexport const gameCreatePdfRequest = (\n    collectionType: string,\n    collectionId: string,\n    pageWidth: number,\n    pageHeight: number,\n    topBottomMargin: number,\n    leftRightMargin: number,\n    verticalSpace: number,\n    horizontalSpace: number,\n    includeBleedingArea: boolean,\n    cutMarksForScissors: boolean,\n    cutMarksForGuillotine: boolean,\n    cutMarksInMarginArea: boolean,\n    cutMarksOnFrontSideOnly: boolean,\n): GameCreatePdfRequest => {\n    return {\n        type: GAME_CREATE_PDF_REQUEST,\n        collectionType,\n        collectionId,\n        pageWidth,\n        pageHeight,\n        topBottomMargin,\n        leftRightMargin,\n        verticalSpace,\n        horizontalSpace,\n        includeBleedingArea,\n        cutMarksForScissors,\n        cutMarksForGuillotine,\n        cutMarksInMarginArea,\n        cutMarksOnFrontSideOnly,\n    };\n};\n\nexport const gameCreatePngRequest = (\n    dpi: number,\n    collectionType: string,\n    collectionId: string,\n): GameCreatePngRequest => {\n    return {\n        type: GAME_CREATE_PNG_REQUEST,\n        dpi,\n        collectionType,\n        collectionId,\n    };\n};\n\nexport const gameGetAttributionsRequest = (): GameGetAttributionsRequest => {\n    return {\n        type: GAME_GET_ATTRIBUTIONS_REQUEST,\n    };\n};\n\nexport const cardSetCreateRequest = (\n    cardsetname: string,\n    width: number,\n    height: number,\n    gameId: string,\n): CardSetsAction => {\n    return {\n        type: CARDSET_CREATE_REQUEST,\n        cardsetname: cardsetname,\n        width,\n        height,\n        gameId,\n    };\n};\n\nexport const cardSetDeleteRequest = (cardSetId: string): CardSetsAction => {\n    return {\n        type: CARDSET_DELETE_REQUEST,\n        cardSetId,\n    };\n};\n\nexport const cardSetRenameRequest = (cardSetId: string, newName: string): CardSetsAction => {\n    return {\n        type: CARDSET_RENAME_REQUEST,\n        cardSetId,\n        newName,\n    };\n};\n\nexport const cardSetImportData = (data: object): CardSetImportData => {\n    return {\n        type: CARDSET_IMPORT_DATA,\n        data,\n    };\n};\n\nexport const cardSetSelectRequest = (id: string): CardSetSelectRequest => {\n    return {\n        type: CARDSET_SELECT_REQUEST,\n        id,\n    };\n};\n\nexport const cardSetCreateCard = (card: CardType): CardSetCreateCard => {\n    return {\n        type: CARDSET_CREATE_CARD,\n        card,\n    };\n};\n\nexport const cardSetRotateCardsRight = (): CardSetRotateCardsRight => {\n    return {\n        type: CARDSET_ROTATE_CARDS_RIGHT,\n    };\n};\n\nexport const cardSetRotateCardsLeft = (): CardSetRotateCardsLeft => {\n    return {\n        type: CARDSET_ROTATE_CARDS_LEFT,\n    };\n};\n\nexport const cardSetCloneCard = (card: CardType): CardSetCloneCard => {\n    return {\n        type: CARDSET_CLONE_CARD,\n        card,\n    };\n};\n\nexport const cardSetRemoveCard = (card: CardType): CardSetRemoveCard => {\n    return {\n        type: CARDSET_REMOVE_CARD,\n        card,\n    };\n};\n\nexport const cardSetUpdateCardCount = (card: CardType, count: number): CardSetUpdateCardCount => {\n    return {\n        type: CARDSET_UPDATE_CARD_COUNT,\n        card,\n        count,\n    };\n};\n\nexport const cardSetAddTextField = (): CardSetAddTextField => {\n    return {\n        type: CARDSET_ADD_TEXT_FIELD,\n    };\n};\n\nexport const cardSetAddImageField = (): CardSetAddImageField => {\n    return {\n        type: CARDSET_ADD_IMAGE_FIELD,\n    };\n};\n\nexport const cardSetChangeActiveFieldName = (name: string): CardSetChangeActiveFieldName => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_FIELD_NAME,\n        name,\n    };\n};\n\nexport const cardSetRemoveActiveField = (): CardSetRemoveActiveField => {\n    return {\n        type: CARDSET_REMOVE_ACTIVE_FIELD,\n    };\n};\n\nexport const cardSetRaiseActiveField = (): CardSetRaiseActiveField => {\n    return {\n        type: CARDSET_RAISE_ACTIVE_FIELD,\n    };\n};\n\nexport const cardSetRaiseActiveFieldToTop = (): CardSetRaiseActiveFieldToTop => {\n    return {\n        type: CARDSET_RAISE_ACTIVE_FIELD_TO_TOP,\n    };\n};\n\nexport const cardSetLowerActiveField = (): CardSetLowerActiveField => {\n    return {\n        type: CARDSET_LOWER_ACTIVE_FIELD,\n    };\n};\n\nexport const cardSetLowerActiveFieldToBottom = (): CardSetLowerActiveFieldToBottom => {\n    return {\n        type: CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM,\n    };\n};\n\nexport const cardSetLockActiveField = (): CardSetLockActiveField => {\n    return {\n        type: CARDSET_LOCK_ACTIVE_FIELD,\n    };\n};\n\nexport const cardSetUnlockActiveField = (): CardSetUnlockActiveField => {\n    return {\n        type: CARDSET_UNLOCK_ACTIVE_FIELD,\n    };\n};\n\nexport const cardSetChangeFitForActiveField = (fit: string): CardSetChangeFitForActiveField => {\n    return {\n        type: CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD,\n        fit,\n    };\n};\n\nexport const cardSetChangeCropForActiveField = (crop: boolean): CardSetChangeCropForActiveField => {\n    return {\n        type: CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD,\n        crop,\n    };\n};\n\nexport const cardSetChangeUnclickableForActiveField = (\n    unclickable: boolean,\n): CardSetChangeUnclickableForActiveField => {\n    return {\n        type: CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD,\n        unclickable,\n    };\n};\n\nexport const cardSetChangeWidth = (\n    width: number,\n    maintainAspectRatio: boolean,\n    resizeContent: boolean,\n): CardSetChangeWidth => {\n    return {\n        type: CARDSET_CHANGE_WIDTH,\n        width,\n        maintainAspectRatio,\n        resizeContent,\n    };\n};\n\nexport const cardSetChangeHeight = (\n    height: number,\n    maintainAspectRatio: boolean,\n    resizeContent: boolean,\n): CardSetChangeHeight => {\n    return {\n        type: CARDSET_CHANGE_HEIGHT,\n        height,\n        maintainAspectRatio,\n        resizeContent,\n    };\n};\n\nexport const cardSetChangeIsTwoSided = (isTwoSided: boolean): CardSetChangeIsTwoSided => {\n    return {\n        type: CARDSET_CHANGE_IS_TWO_SIDED,\n        isTwoSided,\n    };\n};\n\nexport const cardSetChangeSnappingDistance = (snappingDistance: number): CardSetChangeSnappingDistance => {\n    return {\n        type: CARDSET_CHANGE_SNAPPING_DISTANCE,\n        snappingDistance,\n    };\n};\n\nexport const cardSetChangeFieldPosition = (\n    cardId: string | undefined,\n    fieldId: string,\n    x: number,\n    y: number,\n    group: string,\n): CardSetChangeFieldPosition => {\n    return {\n        type: CARDSET_CHANGE_FIELD_POSITION,\n        cardId,\n        fieldId,\n        x,\n        y,\n        group,\n    };\n};\n\nexport const cardSetChangeFieldPan = (\n    cardId: string | undefined,\n    fieldId: string,\n    cx: number,\n    cy: number,\n    group: string,\n): CardSetChangeFieldPan => {\n    return {\n        type: CARDSET_CHANGE_FIELD_PAN,\n        cardId,\n        fieldId,\n        cx,\n        cy,\n        group,\n    };\n};\n\nexport const cardSetChangeFieldZoom = (\n    cardId: string | undefined,\n    fieldId: string,\n    zoom: number,\n    group: string,\n): CardSetChangeFieldZoom => {\n    return {\n        type: CARDSET_CHANGE_FIELD_ZOOM,\n        cardId,\n        fieldId,\n        zoom,\n        group,\n    };\n};\n\nexport const cardSetChangeFieldSize = (\n    cardId: string | undefined,\n    fieldId: string,\n    width: number,\n    height: number,\n    group: string,\n): CardSetChangeFieldSize => {\n    return {\n        type: CARDSET_CHANGE_FIELD_SIZE,\n        cardId,\n        fieldId,\n        width,\n        height,\n        group,\n    };\n};\n\nexport const cardSetChangeFieldAngle = (\n    cardId: string | undefined,\n    fieldId: string,\n    angle: number,\n    group: string,\n): CardSetChangeFieldAngle => {\n    return {\n        type: CARDSET_CHANGE_FIELD_ANGLE,\n        cardId,\n        fieldId,\n        angle,\n        group,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldAlign = (align: string): CardSetChangeActiveTextFieldAlign => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN,\n        align,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldColor = (color: string): CardSetChangeActiveTextFieldColor => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR,\n        color,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldFontFamily = (fontFamily: string): CardSetChangeActiveTextFieldFontFamily => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY,\n        fontFamily,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldFontVariant = (\n    fontVariant: string,\n): CardSetChangeActiveTextFieldFontVariant => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT,\n        fontVariant,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldFontFamilyAndVariant = (\n    fontFamily: string,\n    fontVariant: string,\n): CardSetChangeActiveTextFieldFontFamilyAndVariant => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT,\n        fontFamily,\n        fontVariant,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldFontSize = (fontSize: number): CardSetChangeActiveTextFieldFontSize => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE,\n        fontSize,\n    };\n};\n\nexport const cardSetChangeActiveTextFieldLineHeight = (lineHeight: number): CardSetChangeActiveTextFieldLineHeight => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT,\n        lineHeight,\n    };\n};\n\nexport const cardSetChangeText = (cardId: string, fieldId: string, textInfo: TextInfo): CardSetChangeText => {\n    return {\n        type: CARDSET_CHANGE_TEXT,\n        cardId,\n        fieldId,\n        textInfo,\n    };\n};\n\nexport const cardSetChangeImage = (\n    cardId: string | undefined,\n    fieldId: string,\n    imageInfo: ImageInfo,\n): CardSetChangeImage => {\n    return {\n        type: CARDSET_CHANGE_IMAGE,\n        cardId,\n        fieldId,\n        imageInfo,\n    };\n};\n\nexport const cardSetChangeImageBase64 = (\n    cardId: string,\n    fieldId: string,\n    base64?: string,\n): CardSetChangeImageBase64 => {\n    return {\n        type: CARDSET_CHANGE_IMAGE_BASE64,\n        cardId,\n        fieldId,\n        base64,\n    };\n};\n\nexport const cardSetActiveCardAndField = (\n    cardId: string | undefined,\n    isBackActive: boolean,\n    fieldId: string | undefined,\n): CardSetSetActiveCardAndField => {\n    return {\n        type: CARDSET_SET_ACTIVE_CARD_AND_FIELD,\n        cardId,\n        isBackActive,\n        fieldId,\n    };\n};\n\nexport const cardSetChangeApplyToAllCards = (applyToAllCards: boolean): CardSetChangeApplyToAllCards => {\n    return {\n        type: CARDSET_CHANGE_APPLY_TO_ALLCARDS,\n        applyToAllCards,\n    };\n};\n\nexport const cardSetSetSidebarState = (sidebarState: SidebarState | null): CardSetSetSidebarState => {\n    return {\n        type: CARDSET_SET_SIDEBAR_STATE,\n        sidebarState,\n    };\n};\n\nexport const cardSetSetZoom = (zoom: number): CardSetSetZoom => {\n    return {\n        type: CARDSET_SET_ZOOM,\n        zoom,\n    };\n};\n\nexport const cardSetUploadImage = (\n    gameId: string,\n    file: File,\n    load: FPLoadCallback,\n    error: FPErrorCallback,\n    progress: FPProgressCallback,\n    abort: FPAbortCallback,\n    cancelToken: CancelToken,\n): CardSetUploadImage => {\n    return {\n        type: CARDSET_UPLOAD_IMAGE,\n        gameId,\n        file,\n        load,\n        error,\n        progress,\n        abort,\n        cancelToken,\n    };\n};\n\nexport const cardSetDeleteImage = (\n    imageId: string,\n    load: FPRevertLoadCallback,\n    error: FPErrorCallback,\n): CardSetDeleteImage => {\n    return {\n        type: CARDSET_DELETE_IMAGE,\n        imageId,\n        load,\n        error,\n    };\n};\n\nexport const cardSetUndo = (): CardSetUndo => {\n    return {\n        type: CARDSET_UNDO,\n    };\n};\n\nexport const cardSetRedo = (): CardSetRedo => {\n    return {\n        type: CARDSET_REDO,\n    };\n};\n\nexport const imageListRequest = (filter: string, location: string): ImageListAction => {\n    return {\n        type: IMAGE_LIST_REQUEST,\n        filter,\n        location,\n    };\n};\n","export const CURRENT_CARDSET_VERSION = 3;\nexport const DEFAULT_FONT = 'Roboto';\nexport const DEFAULT_FONT_VARIANT = 'regular';\nexport const DEFAULT_FONT_SIZE = 8;\nexport const DEFAULT_LINE_HEIGHT = 1.27;\n\nexport const BLEED_WIDTH = 25.4 / 8; // 1/8th of inch in mm\n","import axios, { AxiosError, CancelToken } from 'axios';\n\nimport { Credentials } from './types';\n\nexport function handleAxiosError(error: AxiosError) {\n    if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        // error.response.status);\n        throw new Error(error.response.data.message);\n    } else if (error.request) {\n        console.log(error.request);\n        throw new Error(error.request);\n    } else {\n        throw new Error('Unknown error :(');\n    }\n}\n\nexport function getTokens(creds: Credentials) {\n    return axios\n        .post('/api/tokens', creds)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function refreshToken(refreshTokenValue: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${refreshTokenValue}` },\n    };\n    return axios\n        .post('/api/access_tokens', {}, config)\n        .then(resp => {\n            return resp.data.accessToken;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteAccessToken(token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete('/api/access_tokens', config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (error.response.status === 401) return {};\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteRefreshToken(token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete('/api/refresh_tokens', config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (error.response.status === 401) return {};\n            handleAxiosError(error);\n        });\n}\n\nexport function registerUser(creds: Credentials) {\n    return axios\n        .post('/api/users', creds)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function getRequest(url: string, token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .get(url, config)\n        .then(resp => {\n            return resp;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function postRequest(url: string, token: string, data: object) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .post(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function postRequestFormDataCancelable(\n    url: string,\n    token: string,\n    data: FormData,\n    progressCallback: (event: ProgressEvent) => void,\n    cancelToken: CancelToken,\n    cancelCallback: () => void,\n) {\n    let config = {\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data',\n        },\n        cancelToken,\n        onUploadProgress: progressCallback,\n    };\n\n    return axios\n        .post(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (axios.isCancel(error)) {\n                cancelCallback();\n            } else {\n                handleAxiosError(error);\n            }\n        });\n}\n\nexport function putRequest(url: string, token: string, data: object) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .put(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteRequest(url: string, token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete(url, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n","import axios from 'axios';\nimport StackTrace from 'stacktrace-js';\n\nimport { ImageFieldInfo, ImageToDraw } from './types';\nimport { store } from './store';\n\nexport function downloadBlob(blobURL: string, filename: string, resolve?: () => void) {\n    const tempLink = document.createElement('a');\n    tempLink.style.display = 'none';\n    tempLink.href = blobURL;\n    tempLink.setAttribute('download', filename);\n    if (typeof tempLink.download === 'undefined') {\n        tempLink.setAttribute('target', '_blank');\n    }\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    setTimeout(() => {\n        window.URL.revokeObjectURL(blobURL);\n        if (resolve) resolve();\n    }, 100);\n}\n\nexport function rotateVec(x: number, y: number, a: number) {\n    const sinA = Math.sin(a);\n    const cosA = Math.cos(a);\n    const rx = cosA * x - sinA * y;\n    const ry = sinA * x + cosA * y;\n\n    return { rx, ry };\n}\n\nexport function calculateImageDimensions(imageFieldInfo: ImageFieldInfo | ImageToDraw) {\n    let calculatedImageWidth, calculatedImageHeight;\n    let imageWidth = imageFieldInfo.imageWidth || 1;\n    let imageHeight = imageFieldInfo.imageHeight || 1;\n\n    if (!imageFieldInfo.fit || imageFieldInfo.fit === 'width') {\n        calculatedImageWidth = imageFieldInfo.width;\n        calculatedImageHeight = (imageFieldInfo.width * imageHeight) / imageWidth;\n    } else if (imageFieldInfo.fit === 'height') {\n        calculatedImageWidth = (imageFieldInfo.height * imageWidth) / imageHeight;\n        calculatedImageHeight = imageFieldInfo.height;\n    } else {\n        // strech\n        calculatedImageWidth = imageFieldInfo.width;\n        calculatedImageHeight = imageFieldInfo.height;\n    }\n\n    calculatedImageWidth *= imageFieldInfo.zoom || 1;\n    calculatedImageHeight *= imageFieldInfo.zoom || 1;\n\n    return { width: calculatedImageWidth, height: calculatedImageHeight };\n}\n\nexport class UserError extends Error {}\n\nexport function reportError(error: Error) {\n    if (error instanceof UserError) {\n        return;\n    }\n\n    StackTrace.fromError(error).then(stackframes => {\n        var stringifiedStack = stackframes\n            .map(function(sf) {\n                return sf.toString();\n            })\n            .join('\\n');\n\n        if (process.env.NODE_ENV === 'production') {\n            let state = '';\n            if (store) {\n                state = JSON.stringify(store.getState());\n            }\n            axios.post('/api/reports', { message: error.message, stack: stringifiedStack, state });\n        } else {\n            console.log(stringifiedStack);\n        }\n    });\n}\n","import { Dispatch } from './actions';\n\nexport interface SidebarOwnProps {\n    visible: boolean;\n}\n\nexport interface DispatchProps {\n    dispatch: Dispatch;\n}\n\nexport type IdsArray = string[];\n\nexport interface MessageType {\n    id: string;\n    type: string;\n    text: string;\n}\n\nexport interface GameType {\n    id: string;\n    name: string;\n}\n\nexport interface GamesCollection {\n    [propName: string]: GameType;\n}\n\nexport interface PlaceholderBase {\n    id: string;\n    type: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    locked?: boolean;\n    name?: string;\n    isOnBack?: boolean;\n}\n\nexport interface TextPlaceholderType extends PlaceholderBase {\n    type: 'text';\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n    lineHeight?: number;\n}\n\nexport interface ImagePlaceholderType extends PlaceholderBase {\n    id: string;\n    type: 'image';\n    fit?: string;\n    zoom?: number;\n    cx?: number;\n    cy?: number;\n    crop?: boolean;\n}\n\nexport type PlaceholderType = TextPlaceholderType | ImagePlaceholderType;\n\nexport interface PlaceholdersCollection {\n    [propName: string]: PlaceholderType;\n}\n\nexport interface TextInfo {\n    value: string;\n}\n\nexport interface PlaceholdersTextInfoCollection {\n    [propName: string]: TextInfo;\n}\n\nexport interface PlaceholdersTextInfoByCardCollection {\n    [propName: string]: PlaceholdersTextInfoCollection;\n}\n\nexport interface ImageInfo {\n    url?: string;\n    global?: boolean;\n    base64?: string;\n    color?: string;\n    width?: number;\n    height?: number;\n}\n\nexport interface PlaceholdersImageInfoCollection {\n    [propName: string]: ImageInfo;\n}\n\nexport interface PlaceholdersImageInfoByCardCollection {\n    [propName: string]: PlaceholdersImageInfoCollection;\n}\n\nexport interface FieldBaseInfo {\n    id: string;\n    type: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    locked?: boolean;\n    name?: string;\n    isOnBack?: boolean;\n    unclickable?: boolean;\n}\n\nexport interface TextFieldInfo extends FieldBaseInfo {\n    type: 'text';\n    value: string;\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n    lineHeight?: number;\n}\n\nexport interface ImageFieldInfo extends FieldBaseInfo {\n    type: 'image';\n    url?: string;\n    global?: boolean;\n    base64?: string;\n    color?: string;\n    imageWidth?: number;\n    imageHeight?: number;\n    fit?: string;\n    zoom?: number;\n    cx?: number;\n    cy?: number;\n    crop?: boolean;\n}\n\nexport type FieldInfo = TextFieldInfo | ImageFieldInfo;\n\nexport interface FieldInfoCollection {\n    [propName: string]: FieldInfo;\n}\n\nexport interface FieldInfoByCardCollection {\n    [propName: string]: FieldInfoCollection;\n}\n\nexport interface CardType {\n    id: string;\n    count: number;\n}\n\nexport interface CardsCollection {\n    [propName: string]: CardType;\n}\n\nexport interface CardSetType {\n    id: string;\n    name: string;\n}\n\nexport interface CardSetsCollection {\n    [propName: string]: CardSetType;\n}\n\nexport interface Credentials {\n    username: string;\n    password: string;\n}\n\nexport interface Image {\n    id: number;\n    name: string;\n    width: number;\n    height: number;\n}\n\nexport type ImageArray = Image[];\n\nexport interface CardSetData {\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    cardsAllIds: string[];\n    cardsById: CardsCollection;\n    fieldsAllIds: string[];\n    fields: FieldInfoByCardCollection;\n}\n\nexport enum ImageType {\n    SVG,\n    SVG_PATH,\n    IMAGE,\n    BLOCK_START,\n    BLOCK_END,\n}\n\nexport interface ImageToDraw {\n    type: ImageType;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    fit?: string;\n    data: string;\n    color?: string;\n    scale?: number;\n    imageWidth?: number;\n    imageHeight?: number;\n    zoom?: number;\n    cx?: number;\n    cy?: number;\n    crop?: boolean;\n}\n","import axios from 'axios';\nimport { downloadBlob, calculateImageDimensions } from './utils';\nimport { delay } from 'redux-saga';\nimport { XmlDocument } from 'xmldoc';\nimport JSZip from 'jszip';\nimport { getRequest } from './requests';\nimport { CardSetData, ImageToDraw, ImageType } from './types';\n\nconst SVG_B64_START = 'data:image/svg+xml;base64,';\n\nexport const generatePdfUsingWorker = (\n    accessToken: string,\n    collectionType: string,\n    collectionId: string,\n    pageWidth: number,\n    pageHeight: number,\n    topBottomMargin: number,\n    leftRightMargin: number,\n    verticalSpace: number,\n    horizontalSpace: number,\n    includeBleedingArea: boolean,\n    cutMarksForScissors: boolean,\n    cutMarksForGuillotine: boolean,\n    cutMarksInMarginArea: boolean,\n    cutMarksOnFrontSideOnly: boolean,\n) => {\n    // @ts-ignore\n    if (!window.Worker) {\n        throw new Error('We can not generate PDF because of browser you use. Try using different browser');\n    }\n\n    return new Promise((resolve, reject) => {\n        try {\n            const worker = new Worker('/js/worker.js');\n            worker.addEventListener('message', event => {\n                if (event.data.type === 'generatePdf') {\n                    const blobURL = event.data.url;\n                    downloadBlob(blobURL, 'card.pdf', resolve);\n                } else if (event.data.type === 'generateError') {\n                    const error = event.data.error;\n                    reject({ message: 'PDF generation failed: ' + event.data.message, stack: error.stack });\n                }\n            });\n\n            worker.postMessage({\n                type: 'generatePdf',\n                accessToken,\n                collectionType,\n                collectionId,\n                pageWidth,\n                pageHeight,\n                topBottomMargin,\n                leftRightMargin,\n                verticalSpace,\n                horizontalSpace,\n                includeBleedingArea,\n                cutMarksForScissors,\n                cutMarksForGuillotine,\n                cutMarksInMarginArea,\n                cutMarksOnFrontSideOnly,\n            });\n        } catch (e) {\n            reject(e);\n        }\n    });\n};\n\nfunction loadImage(url: string): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = () => reject();\n\n        img.src = url;\n    });\n}\n\nfunction prepareImageToDrawSpace(context: CanvasRenderingContext2D, imageToDraw: ImageToDraw, ptpmm: number) {\n    context.save();\n    let x = (imageToDraw.x + imageToDraw.width / 2) * ptpmm;\n    let y = (imageToDraw.y + imageToDraw.height / 2) * ptpmm;\n    context.translate(x, y);\n    context.rotate(imageToDraw.angle);\n    let ax = (-imageToDraw.width / 2) * ptpmm;\n    let ay = (-imageToDraw.height / 2) * ptpmm;\n    context.translate(ax, ay);\n    if (imageToDraw.crop) {\n        context.rect(0, 0, imageToDraw.width * ptpmm, imageToDraw.height * ptpmm);\n        context.clip();\n    }\n}\n\nfunction fixWidthAndHeightInSvg(data: string) {\n    const doc = new XmlDocument(data);\n    if (!('width' in doc.attr) || !('height' in doc.attr)) {\n        const viewBox = doc.attr['viewBox'].split(' ');\n        doc.attr['width'] = viewBox[2];\n        doc.attr['height'] = viewBox[3];\n    }\n\n    return btoa(doc.toString({ compressed: true }));\n}\n\nclass PNGGenerator {\n    tasksQueue: {\n        type: string;\n        subType: string;\n        imageToDraw?: ImageToDraw;\n        error?: { message: string; stack: string };\n    }[] = [];\n    worker: Worker;\n\n    constructor() {\n        // @ts-ignore\n        if (!window.Worker) {\n            throw new Error('We can not generate PNG because of browser you use. Try using different browser');\n        }\n\n        this.worker = new Worker('/js/worker.js');\n        this.worker.addEventListener('message', event => {\n            if (event.data.type === 'generateCard' || event.data.type === 'generateError') {\n                this.tasksQueue.push(event.data);\n            }\n        });\n    }\n\n    async generateCard(\n        cardSetData: CardSetData,\n        cardId: string,\n        cardIdx: number,\n        dpi: number,\n        isBack: boolean,\n        cardsetFolder: JSZip,\n    ) {\n        this.worker.postMessage({\n            type: 'generateCard',\n            cardSetData,\n            cardId,\n            isBack,\n        });\n\n        let offscreenCanvas = document.createElement('canvas');\n\n        const calculatedWidth = Math.round(dpi * (cardSetData.width / 25.4 + 1 / 4));\n        const calculatedHeight = Math.round(dpi * (cardSetData.height / 25.4 + 1 / 4));\n\n        offscreenCanvas.width = calculatedWidth;\n        offscreenCanvas.height = calculatedHeight;\n        var context = offscreenCanvas.getContext('2d');\n        if (context === null) {\n            throw new Error('We cannot generate PNG because of unknown reason. Try different browser.');\n        }\n        context.fillStyle = 'white';\n        context.fillRect(0, 0, calculatedWidth, calculatedHeight);\n\n        let stopped = false;\n\n        const ptpmm = dpi / 25.4;\n\n        while (!stopped) {\n            while (this.tasksQueue.length > 0) {\n                let task = this.tasksQueue.shift();\n\n                if (task && task.imageToDraw) {\n                    const imageToDraw = task.imageToDraw;\n\n                    if (imageToDraw.type === ImageType.SVG_PATH) {\n                        prepareImageToDrawSpace(context, imageToDraw, ptpmm);\n                        if (imageToDraw.scale && imageToDraw.color) {\n                            context.fillStyle = imageToDraw.color;\n                            context.scale(imageToDraw.scale * ptpmm, imageToDraw.scale * ptpmm);\n                            var p = new Path2D(imageToDraw.data);\n                            context.fill(p);\n                        }\n                        context.restore();\n                    } else if (imageToDraw.type === ImageType.IMAGE || imageToDraw.type === ImageType.SVG) {\n                        prepareImageToDrawSpace(context, imageToDraw, ptpmm);\n\n                        if (imageToDraw.cx !== undefined && imageToDraw.cy !== undefined) {\n                            context.translate(imageToDraw.cx * ptpmm, imageToDraw.cy * ptpmm);\n                        }\n                        let dim = calculateImageDimensions(imageToDraw);\n\n                        let image;\n                        if (imageToDraw.type === ImageType.SVG) {\n                            let svgData = fixWidthAndHeightInSvg(atob(imageToDraw.data));\n                            image = await loadImage(SVG_B64_START + svgData);\n                        } else {\n                            let resp = await axios.get(imageToDraw.data);\n                            if (resp.headers['content-type'] === 'image/svg+xml') {\n                                let svgData = fixWidthAndHeightInSvg(resp.data);\n                                image = await loadImage(SVG_B64_START + svgData);\n                            } else {\n                                image = await loadImage(imageToDraw.data);\n                            }\n                        }\n\n                        context.drawImage(image, 0, 0, dim.width * ptpmm, dim.height * ptpmm);\n\n                        context.restore();\n                    } else if (imageToDraw.type === ImageType.BLOCK_START) {\n                        prepareImageToDrawSpace(context, imageToDraw, ptpmm);\n                    } else if (imageToDraw.type === ImageType.BLOCK_END) {\n                        context.restore();\n                    }\n                }\n\n                if (task && task.subType === 'stop') {\n                    stopped = true;\n                }\n\n                if (task && task.type === 'generateError' && task.error) {\n                    let error = Error('Failed to generate PNG: ' + task.error.message);\n                    error.stack = task.error.stack;\n                    throw error;\n                }\n            }\n            if (!stopped) {\n                await delay(100);\n            }\n        }\n\n        let dataUrl = offscreenCanvas.toDataURL();\n        dataUrl = dataUrl.slice('data:image/png;base64,'.length);\n        cardsetFolder.file(\n            `${cardIdx.toString().padStart(4, '0')}_${cardId}_${isBack ? 'back' : 'front'}.png`,\n            dataUrl,\n            { base64: true },\n        );\n    }\n\n    async generateGame(accessToken: string, gameId: string, dpi: number, zip: JSZip) {\n        let resp = await getRequest('/api/games/' + gameId, accessToken);\n        if (!resp) return;\n\n        const cardsetsList = resp.data.cardsets;\n        for (const cardsetInfo of cardsetsList) {\n            await this.generateCardset(accessToken, cardsetInfo.id, dpi, zip);\n        }\n    }\n\n    async generateCardset(accessToken: string, cardsetId: string, dpi: number, zip: JSZip) {\n        const resp = await getRequest('/api/cardsets/' + cardsetId, accessToken);\n        if (!resp) return;\n\n        let cardSetData: CardSetData = JSON.parse(resp.data.data);\n\n        let cardsetFolder = zip.folder(resp.data.name);\n\n        if (cardSetData.cardsAllIds) {\n            for (const [cardIdx, cardId] of cardSetData.cardsAllIds.entries()) {\n                await this.generateCard(cardSetData, cardId, cardIdx, dpi, false, cardsetFolder);\n                if (cardSetData.isTwoSided) {\n                    await this.generateCard(cardSetData, cardId, cardIdx, dpi, true, cardsetFolder);\n                }\n            }\n        }\n    }\n}\n\nexport const generatePngUsingWorker = async (\n    accessToken: string,\n    collectionType: string,\n    collectionId: string,\n    dpi: number,\n) => {\n    const pngGenerator = new PNGGenerator();\n\n    let zip = new JSZip();\n\n    if (collectionType === 'games') {\n        await pngGenerator.generateGame(accessToken, collectionId, dpi, zip);\n    } else if (collectionType === 'cardsets') {\n        await pngGenerator.generateCardset(accessToken, collectionId, dpi, zip);\n    }\n\n    let blob = await zip.generateAsync({ type: 'blob' });\n    let url = window.URL.createObjectURL(blob);\n    downloadBlob(url, 'cards.zip');\n};\n\nasync function getImageAttribution(name: string, accessToken: string) {\n    const resp = await getRequest('/api/images/' + name, accessToken);\n    if (!resp) {\n        return undefined;\n    }\n\n    if (resp.data.metadata) {\n        let meta = JSON.parse(resp.data.metadata);\n        if (meta.source === 'noto-emoji') {\n            return 'Google Noto Emoji';\n        } else if (meta.source === 'twemoji') {\n            return 'Twitter Emoji';\n        } else if (meta.source === 'game-icons' && meta.attribution) {\n            return meta.attribution;\n        }\n    }\n\n    return undefined;\n}\n\nexport const retrieveGameAttributions = async (accessToken: string, gameId: string): Promise<string[]> => {\n    let resp = await getRequest('/api/games/' + gameId, accessToken);\n    if (!resp) return [];\n\n    let attributions = new Set();\n\n    const cardsetsList = resp.data.cardsets;\n    for (const cardsetInfo of cardsetsList) {\n        const resp = await getRequest('/api/cardsets/' + cardsetInfo.id, accessToken);\n        if (!resp) {\n            continue;\n        }\n\n        const cardSetData: CardSetData = JSON.parse(resp.data.data);\n        for (const cardId in cardSetData.fields) {\n            const cardFields = cardSetData.fields[cardId];\n            for (const fieldId in cardFields) {\n                const fieldInfo = cardFields[fieldId];\n                if (fieldInfo.type === 'image' && fieldInfo.url !== undefined) {\n                    let name = fieldInfo.url.replace('/api/imagefiles/', '');\n                    let attribution = await getImageAttribution(name, accessToken);\n                    if (attribution) {\n                        attributions.add(attribution);\n                    }\n                } else if (fieldInfo.type === 'text') {\n                    let start = fieldInfo.value.indexOf('/api/imagefiles/');\n                    while (start !== -1) {\n                        let end = fieldInfo.value.indexOf('\"', start);\n                        let name = fieldInfo.value.slice(start, end).replace('/api/imagefiles/', '');\n\n                        console.log(name);\n\n                        let attribution = await getImageAttribution(name, accessToken);\n                        if (attribution) {\n                            attributions.add(attribution);\n                        }\n\n                        start = fieldInfo.value.indexOf('/api/imagefiles/', end);\n                    }\n                }\n            }\n        }\n    }\n\n    return Array.from(attributions);\n};\n","export function saveTokens(data: { accessToken: string; refreshToken: string }) {\n    localStorage.setItem('accessToken', data.accessToken);\n    localStorage.setItem('refreshToken', data.refreshToken);\n}\n\nexport function saveUsername(username: string) {\n    localStorage.setItem('username', username);\n}\n\nexport function saveAccessToken(accessToken: string) {\n    localStorage.setItem('accessToken', accessToken);\n}\n\nexport function cleanTokens() {\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n}\n\nexport function cleanUsername() {\n    localStorage.removeItem('username');\n}\n\nexport function getTokenFromStorage() {\n    let token = localStorage.getItem('accessToken') || null;\n    return token;\n}\n\nexport function getRefreshTokenFromStorage() {\n    let token = localStorage.getItem('refreshToken') || null;\n    return token;\n}\n\nexport function getUsernameFromStorage() {\n    let username = localStorage.getItem('username') || null;\n    return username;\n}\n","import WebFont from 'webfontloader';\n\nimport { DEFAULT_FONT } from './constants';\nimport { CardSetSelectSuccessDataV3 } from './actions';\n\nconst webFontsLoadPromise = (config: WebFont.Config) =>\n    new Promise((resolve, reject) => {\n        WebFont.load({ ...config, active: resolve, inactive: reject });\n    });\n\nexport const loadFontsUsedInPlaceholders = (data: CardSetSelectSuccessDataV3) => {\n    if (!('fieldsAllIds' in data)) {\n        return;\n    }\n\n    let fontsToLoad: Set<string> = new Set();\n    fontsToLoad.add(DEFAULT_FONT);\n    for (const fieldId of data.fieldsAllIds) {\n        const field = data.fields[data.cardsAllIds[0]][fieldId];\n        if (field && field.type === 'text' && field.fontFamily) {\n            let fontToLoad = field.fontFamily;\n            if (field.fontVariant && field.fontVariant !== 'regular') {\n                fontToLoad += ':' + field.fontVariant;\n            }\n\n            fontsToLoad.add(fontToLoad);\n        }\n    }\n\n    const config: WebFont.Config = {\n        google: {\n            families: [...Array.from(fontsToLoad)],\n        },\n    };\n\n    return webFontsLoadPromise(config);\n};\n","import { CancelToken } from 'axios';\nimport { XmlDocument, XmlNode } from 'xmldoc';\nimport { all, call, put, select, takeEvery, takeLatest } from 'redux-saga/effects';\nimport { delay, SagaIterator } from 'redux-saga';\nimport jwtDecode from 'jwt-decode';\nimport { ActionCreators } from 'redux-undo';\n\nimport { BLEED_WIDTH, CURRENT_CARDSET_VERSION } from './constants';\nimport {\n    CARDSET_ADD_IMAGE_FIELD,\n    CARDSET_ADD_TEXT_FIELD,\n    CARDSET_CHANGE_ACTIVE_FIELD_NAME,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT,\n    CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD,\n    CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD,\n    CARDSET_CHANGE_HEIGHT,\n    CARDSET_CHANGE_IMAGE,\n    CARDSET_CHANGE_IS_TWO_SIDED,\n    CARDSET_CHANGE_FIELD_ANGLE,\n    CARDSET_CHANGE_FIELD_SIZE,\n    CARDSET_CHANGE_SNAPPING_DISTANCE,\n    CARDSET_CHANGE_TEXT,\n    CARDSET_CHANGE_WIDTH,\n    CARDSET_CLONE_CARD,\n    CARDSET_CREATE_CARD,\n    CARDSET_CREATE_FAILURE,\n    CARDSET_CREATE_REQUEST,\n    CARDSET_CREATE_SUCCESS,\n    CARDSET_DELETE_IMAGE,\n    CARDSET_DELETE_REQUEST,\n    CARDSET_IMPORT_DATA,\n    CARDSET_LIST_RESET,\n    CARDSET_LIST_SUCCESS,\n    CARDSET_LOCK_ACTIVE_FIELD,\n    CARDSET_LOWER_ACTIVE_FIELD,\n    CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM,\n    CARDSET_RAISE_ACTIVE_FIELD,\n    CARDSET_RAISE_ACTIVE_FIELD_TO_TOP,\n    CARDSET_REMOVE_ACTIVE_FIELD,\n    CARDSET_REMOVE_CARD,\n    CARDSET_RENAME_REQUEST,\n    CARDSET_SELECT_FAILURE,\n    CARDSET_SELECT_REQUEST,\n    CARDSET_SELECT_SUCCESS,\n    CARDSET_SET_ZOOM,\n    CARDSET_UNLOCK_ACTIVE_FIELD,\n    CARDSET_UPDATE_CARD_COUNT,\n    CARDSET_UPLOAD_IMAGE,\n    CARDSET_UPLOAD_IMAGE_FAILURE,\n    CARDSET_UPLOAD_IMAGE_SUCCESS,\n    CardSetChangeFitForActiveField,\n    CardSetChangeImage,\n    CardSetCreateRequest,\n    CardSetDeleteImage,\n    CardSetDeleteRequest,\n    CardSetRenameRequest,\n    CardSetSelectRequest,\n    CardSetUploadImage,\n    GAME_CREATE_PDF_FAILURE,\n    GAME_CREATE_PDF_REQUEST,\n    GAME_CREATE_PDF_SUCCESS,\n    GAME_CREATE_PNG_FAILURE,\n    GAME_CREATE_PNG_REQUEST,\n    GAME_GET_ATTRIBUTIONS_REQUEST,\n    GAME_CREATE_PNG_SUCCESS,\n    GAME_CREATE_REQUEST,\n    GAME_CREATE_SUCCESS,\n    GAME_DELETE_REQUEST,\n    GAME_LIST_FAILURE,\n    GAME_LIST_REQUEST,\n    GAME_LIST_RESET,\n    GAME_LIST_SUCCESS,\n    GAME_RENAME_REQUEST,\n    GAME_SELECT_FAILURE,\n    GAME_SELECT_REQUEST,\n    GAME_SELECT_SUCCESS,\n    GameCreatePdfRequest,\n    GameCreatePngRequest,\n    GameCreateRequest,\n    GameDeleteRequest,\n    GameRenameRequest,\n    GameSelectRequest,\n    IMAGE_LIST_FAILURE,\n    IMAGE_LIST_REQUEST,\n    IMAGE_LIST_SUCCESS,\n    INIT_REQUEST,\n    ImageListRequest,\n    LOGIN_FAILURE,\n    LOGIN_REQUEST,\n    LOGIN_SUCCESS,\n    LOGOUT_FAILURE,\n    LOGOUT_REQUEST,\n    LOGOUT_SUCCESS,\n    LoginRequest,\n    MESSAGE_DISPLAY,\n    MESSAGE_HIDE,\n    MessageDisplay,\n    SIGNUP_FAILURE,\n    SIGNUP_REQUEST,\n    SIGNUP_SUCCESS,\n    SignUpRequest,\n    cardSetChangeImageBase64,\n    gameSelectRequest,\n    messageDisplay,\n    CARDSET_CHANGE_FIELD_PAN,\n    CARDSET_CHANGE_FIELD_ZOOM,\n    CARDSETS_SELECT_SUCCESS,\n    CARDSET_CHANGE_FIELD_POSITION,\n    CardSetSelectSuccessData,\n    CardSetSelectSuccessDataV2,\n    CardSetSelectSuccessDataV3,\n    CARDSET_UNDO,\n    CARDSET_REDO,\n    CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD,\n    CARDSET_ROTATE_CARDS_RIGHT,\n    CARDSET_ROTATE_CARDS_LEFT,\n    GAME_GET_ATTRIBUTIONS_SUCCESS,\n    GAME_GET_ATTRIBUTIONS_FAILURE,\n} from './actions';\nimport { CardSetType, CardSetsCollection, GameType, GamesCollection, FieldInfoByCardCollection } from './types';\nimport { State } from './reducers';\nimport {\n    deleteAccessToken,\n    deleteRefreshToken,\n    deleteRequest,\n    getRequest,\n    getTokens,\n    postRequest,\n    postRequestFormDataCancelable,\n    putRequest,\n    refreshToken,\n    registerUser,\n} from './requests';\nimport { generatePdfUsingWorker, generatePngUsingWorker, retrieveGameAttributions } from './workerController';\nimport {\n    getTokenFromStorage,\n    getRefreshTokenFromStorage,\n    saveAccessToken,\n    saveTokens,\n    cleanTokens,\n    saveUsername,\n    getUsernameFromStorage,\n} from './storage';\nimport { loadFontsUsedInPlaceholders } from './fontLoader';\nimport { reportError, UserError } from './utils';\n\n// Messages\nexport function* putError(e: Error): SagaIterator {\n    yield put(messageDisplay('error', e.message));\n    yield call(reportError, e);\n}\n\nexport function* putInfo(message: string): SagaIterator {\n    yield put(messageDisplay('info', message));\n}\n\nexport function* putProgress(text: string): SagaIterator {\n    const message = messageDisplay('progress', text, text);\n    yield put(message);\n    return message.message.id;\n}\n\nexport function* hideProgress(messageId: string): SagaIterator {\n    yield put({ type: MESSAGE_HIDE, messageId });\n}\n\nexport function* handleMessageDisplay(action: MessageDisplay): SagaIterator {\n    if (action.message.type === 'progress') return;\n\n    yield call(delay, 5000);\n    yield put({ type: MESSAGE_HIDE, messageId: action.message.id });\n}\n\n// Login & Signup\n// Token handling\n\nexport function validateToken(token: string): boolean {\n    try {\n        const decoded = jwtDecode<{ exp: number }>(token);\n        const valid = decoded.exp - new Date().getTime() / 1000 > 5;\n        return valid;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport function* getToken(withErrorIfMissing: boolean, getFreshToken = false): SagaIterator {\n    const token = yield call(getTokenFromStorage);\n    if (token && !getFreshToken) {\n        const tokenValid = yield call(validateToken, token);\n        if (tokenValid) return token;\n    }\n\n    const refreshTokenValue = yield call(getRefreshTokenFromStorage);\n    if (!refreshTokenValue) {\n        yield put({ type: LOGOUT_REQUEST });\n        if (withErrorIfMissing) {\n            throw new UserError('User not logged in.');\n        }\n        return null;\n    }\n\n    const refreshTokenValid = yield call(validateToken, refreshTokenValue);\n    if (!refreshTokenValid) {\n        yield put({ type: LOGOUT_REQUEST });\n        if (withErrorIfMissing) {\n            throw new UserError('User not logged in.');\n        }\n        return null;\n    }\n\n    const newToken = yield call(refreshToken, refreshTokenValue);\n    yield call(saveAccessToken, newToken);\n    return newToken;\n}\n\n// Login\n\nexport function* handleLoginRequest(action: LoginRequest): SagaIterator {\n    try {\n        const data = yield call(getTokens, action.creds);\n        yield call(saveTokens, data);\n        yield call(saveUsername, action.creds.username);\n        yield put({ type: LOGIN_SUCCESS, username: action.creds.username });\n    } catch (e) {\n        yield put({ type: LOGIN_FAILURE });\n        yield call(putError, e);\n    }\n}\n\nexport function* handleLoginSuccess(): SagaIterator {\n    yield put({ type: GAME_LIST_REQUEST });\n}\n\n// Logout\n\nexport function* logoutToken(): SagaIterator {\n    const token = yield call(getTokenFromStorage);\n    if (token) {\n        const tokenValid = yield call(validateToken, token);\n        if (tokenValid) {\n            yield call(deleteAccessToken, token);\n        }\n    }\n}\n\nexport function* logoutRefreshToken(): SagaIterator {\n    const refreshTokenValue = yield call(getRefreshTokenFromStorage);\n    if (refreshTokenValue) {\n        const refreshTokenValid = yield call(validateToken, refreshTokenValue);\n        if (refreshTokenValid) {\n            yield call(deleteRefreshToken, refreshTokenValue);\n        }\n    }\n}\n\nexport function* handleLogoutRequest(): SagaIterator {\n    try {\n        yield call(logoutToken);\n        yield call(logoutRefreshToken);\n        yield call(cleanTokens);\n\n        yield put({ type: CARDSET_LIST_RESET });\n        yield put({ type: GAME_LIST_RESET });\n        yield put({ type: LOGOUT_SUCCESS });\n    } catch (e) {\n        yield put({ type: LOGOUT_FAILURE });\n        yield call(putError, e);\n    }\n}\n\n// Sign-up\n\nexport function* handleSignupRequest(action: SignUpRequest): SagaIterator {\n    try {\n        const data = yield call(registerUser, action.creds);\n        yield call(saveTokens, data);\n        yield call(saveUsername, action.creds.username);\n        yield put({ type: SIGNUP_SUCCESS });\n        yield put({ type: LOGIN_SUCCESS, username: action.creds.username });\n    } catch (e) {\n        yield put({ type: SIGNUP_FAILURE });\n        yield call(putError, e);\n    }\n}\n\n// Init\nexport function* handleInitRequest(): SagaIterator {\n    try {\n        let token = yield call(getToken, false);\n        if (token) {\n            const username = yield call(getUsernameFromStorage);\n            yield put({ type: LOGIN_SUCCESS, username });\n        }\n    } catch (e) {}\n}\n\n// Authorized Requests\nexport function* authorizedGetRequest(url: string): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(getRequest, url, token);\n}\n\nexport function* authorizedPostRequest(url: string, data: object): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(postRequest, url, token, data);\n}\n\nexport function* authorizedDeleteRequest(url: string): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(deleteRequest, url, token);\n}\n\nexport function* authorizedPostFormDataRequest(\n    url: string,\n    data: FormData,\n    progressCallback: (event: ProgressEvent) => void,\n    cancelToken: CancelToken,\n    cancelCallback: () => void,\n): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(postRequestFormDataCancelable, url, token, data, progressCallback, cancelToken, cancelCallback);\n}\n\nexport function* authorizedPutRequest(url: string, data: object): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(putRequest, url, token, data);\n}\n\n// Game\nexport function* handleGameCreateRequest(action: GameCreateRequest): SagaIterator {\n    try {\n        yield call(authorizedPostRequest, '/api/games', { name: action.gamename });\n        yield put({\n            type: GAME_CREATE_SUCCESS,\n        });\n        yield put({ type: GAME_LIST_REQUEST });\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameDeleteRequest(action: GameDeleteRequest): SagaIterator {\n    try {\n        yield call(authorizedDeleteRequest, '/api/games/' + action.gameId);\n        yield put({ type: GAME_LIST_REQUEST });\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameRenameRequest(action: GameRenameRequest): SagaIterator {\n    try {\n        yield call(delay, 500);\n        yield call(authorizedPutRequest, '/api/games/' + action.gameId, { name: action.newName });\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameListRequest(): SagaIterator {\n    try {\n        const resp = yield call(authorizedGetRequest, '/api/games');\n        const allIds = resp.data.games.map((g: GameType) => g.id);\n        const byId = resp.data.games.reduce((obj: GamesCollection, g: GameType) => {\n            obj[g.id] = g;\n            return obj;\n        }, {});\n        yield put({\n            type: GAME_LIST_SUCCESS,\n            allIds,\n            byId,\n        });\n    } catch (e) {\n        yield put({ type: GAME_LIST_FAILURE });\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameSelectRequest(action: GameSelectRequest): SagaIterator {\n    try {\n        const resp = yield call(authorizedGetRequest, '/api/games/' + action.id);\n        yield put({\n            type: GAME_SELECT_SUCCESS,\n            id: action.id,\n        });\n\n        if (action.updateCardSets) {\n            const allIds = resp.data.cardsets.map((g: CardSetType) => g.id);\n            const byId = resp.data.cardsets.reduce((obj: CardSetsCollection, g: CardSetType) => {\n                obj[g.id] = g;\n                return obj;\n            }, {});\n            yield put({\n                type: CARDSET_LIST_SUCCESS,\n                allIds,\n                byId,\n            });\n        }\n    } catch (e) {\n        yield put({ type: GAME_SELECT_FAILURE });\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameCreatePdfRequest(action: GameCreatePdfRequest): SagaIterator {\n    let progressId = null;\n    try {\n        progressId = yield call(putProgress, 'Generating PDF');\n\n        const token = yield call(getToken, true, true);\n\n        yield call(\n            generatePdfUsingWorker,\n            token,\n            action.collectionType,\n            action.collectionId,\n            action.pageWidth,\n            action.pageHeight,\n            action.topBottomMargin,\n            action.leftRightMargin,\n            action.verticalSpace,\n            action.horizontalSpace,\n            action.includeBleedingArea,\n            action.cutMarksForScissors,\n            action.cutMarksForGuillotine,\n            action.cutMarksInMarginArea,\n            action.cutMarksOnFrontSideOnly,\n        );\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'PDF generated.');\n        yield put({\n            type: GAME_CREATE_PDF_SUCCESS,\n        });\n    } catch (e) {\n        yield put({ type: GAME_CREATE_PDF_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameCreatePngRequest(action: GameCreatePngRequest): SagaIterator {\n    let progressId = null;\n    try {\n        progressId = yield call(putProgress, 'Generating PNG');\n\n        const token = yield call(getToken, true, true);\n\n        yield call(generatePngUsingWorker, token, action.collectionType, action.collectionId, action.dpi);\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'PNG generated.');\n        yield put({\n            type: GAME_CREATE_PNG_SUCCESS,\n        });\n    } catch (e) {\n        yield put({ type: GAME_CREATE_PNG_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e);\n    }\n}\n\nexport function* handleGameGetAttributionsRequest(): SagaIterator {\n    let progressId = null;\n    try {\n        progressId = yield call(putProgress, 'Retrieving attributions');\n\n        const token = yield call(getToken, true, true);\n        const state: State = yield select();\n\n        let attributions = [];\n        if (state.games.active !== null) {\n            attributions = yield call(retrieveGameAttributions, token, state.games.active);\n        }\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'Attributions retrieved.');\n        yield put({\n            type: GAME_GET_ATTRIBUTIONS_SUCCESS,\n            attributions,\n        });\n    } catch (e) {\n        yield put({ type: GAME_GET_ATTRIBUTIONS_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e);\n    }\n}\n\n// Card Set\n\nexport function* handleCardSetCreateRequest(action: CardSetCreateRequest): SagaIterator {\n    try {\n        yield call(authorizedPostRequest, '/api/cardsets', {\n            name: action.cardsetname,\n            gameId: action.gameId,\n            data: JSON.stringify({ width: action.width, height: action.height, version: CURRENT_CARDSET_VERSION }),\n        });\n        yield put({\n            type: CARDSET_CREATE_SUCCESS,\n        });\n        yield put(gameSelectRequest(action.gameId, true));\n    } catch (e) {\n        yield put({ type: CARDSET_CREATE_FAILURE });\n        yield call(putError, e);\n    }\n}\n\nexport function* handleCardSetDeleteRequest(action: CardSetDeleteRequest): SagaIterator {\n    try {\n        yield call(authorizedDeleteRequest, '/api/cardsets/' + action.cardSetId);\n        yield put({ type: GAME_LIST_REQUEST });\n\n        const state = yield select();\n        yield put(gameSelectRequest(state.games.active, true));\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nexport function* handleCardSetRenameRequest(action: CardSetRenameRequest): SagaIterator {\n    try {\n        yield call(delay, 500);\n        yield call(authorizedPutRequest, '/api/cardsets/' + action.cardSetId, { name: action.newName });\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nfunction loadImageInfo(url: string): Promise<{ width: number; height: number }> {\n    return new Promise((resolve, reject) => {\n        try {\n            let img = new Image();\n\n            img.addEventListener('load', function() {\n                resolve({\n                    width: this.naturalWidth,\n                    height: this.naturalHeight,\n                });\n            });\n            img.addEventListener('error', function(err) {\n                reject(err);\n            });\n            img.src = url;\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\n\nexport async function processData(data: CardSetSelectSuccessData): Promise<CardSetSelectSuccessDataV3> {\n    let processedData = data;\n\n    if (!('version' in processedData)) {\n        if (!('placeholdersAllIds' in processedData) && 'placeholders' in processedData) {\n            (processedData as CardSetSelectSuccessDataV2).placeholdersAllIds = Object.keys(\n                (processedData as CardSetSelectSuccessDataV2).placeholders,\n            );\n        }\n\n        (processedData as CardSetSelectSuccessDataV2).version = 2;\n        for (const plId in (processedData as CardSetSelectSuccessDataV2).placeholders) {\n            const placeholder = (processedData as CardSetSelectSuccessDataV2).placeholders[plId];\n            placeholder.x += BLEED_WIDTH;\n            placeholder.y += BLEED_WIDTH;\n        }\n    }\n\n    if (processedData.version === 2) {\n        let fieldsAllIds = processedData.placeholdersAllIds;\n        let fields: FieldInfoByCardCollection = {};\n\n        for (const cardId of processedData.cardsAllIds) {\n            fields[cardId] = {};\n\n            for (const fieldId of fieldsAllIds) {\n                let placeholder = processedData.placeholders[fieldId];\n                if (placeholder.type === 'image') {\n                    if (cardId in processedData.images && fieldId in processedData.images[cardId]) {\n                        let imageInfo = processedData.images[cardId][fieldId];\n                        fields[cardId][fieldId] = {\n                            type: 'image',\n                            ...placeholder,\n                            url: imageInfo && imageInfo.url,\n                            global: imageInfo && imageInfo.global,\n                            base64: imageInfo && imageInfo.base64,\n                            color: imageInfo && imageInfo.color,\n                            imageWidth: imageInfo && imageInfo.width,\n                            imageHeight: imageInfo && imageInfo.height,\n                        };\n                    } else {\n                        fields[cardId][fieldId] = {\n                            type: 'image',\n                            ...placeholder,\n                        };\n                    }\n                } else if (placeholder.type === 'text') {\n                    if (cardId in processedData.texts && fieldId in processedData.texts[cardId]) {\n                        fields[cardId][fieldId] = {\n                            type: 'text',\n                            ...placeholder,\n                            ...processedData.texts[cardId][fieldId],\n                        };\n                    } else {\n                        fields[cardId][fieldId] = {\n                            type: 'text',\n                            ...placeholder,\n                            value: '',\n                        };\n                    }\n                }\n            }\n        }\n\n        processedData = {\n            version: 3,\n            width: processedData.width,\n            height: processedData.height,\n            isTwoSided: processedData.isTwoSided,\n            snappingDistance: processedData.snappingDistance,\n            cardsAllIds: processedData.cardsAllIds,\n            cardsById: processedData.cardsById,\n            fields,\n            fieldsAllIds,\n            zoom: processedData.zoom,\n        };\n    }\n\n    // We must load image data on each new load because user can upload new images\n    // that have different dimensions.\n    for (const cardId in processedData.fields) {\n        for (const fieldId in processedData.fields[cardId]) {\n            const fieldInfo = processedData.fields[cardId][fieldId];\n            if (fieldInfo.type === 'image' && fieldInfo.url) {\n                try {\n                    let info = await loadImageInfo(fieldInfo.url);\n                    if (info.width !== fieldInfo.imageWidth || info.height !== fieldInfo.imageHeight) {\n                        fieldInfo.imageWidth = info.width;\n                        fieldInfo.imageHeight = info.height;\n                        fieldInfo.cx = 0;\n                        fieldInfo.cy = 0;\n                        fieldInfo.zoom = 1;\n                    }\n                } catch {}\n            }\n        }\n    }\n\n    return processedData;\n}\n\nexport function* handleCardSetSelectRequest(action: CardSetSelectRequest): SagaIterator {\n    try {\n        const resp = yield call(authorizedGetRequest, '/api/cardsets/' + action.id);\n        let parsedData = JSON.parse(resp.data.data);\n        let processedData: CardSetSelectSuccessDataV3 = yield call(processData, parsedData);\n\n        yield call(loadFontsUsedInPlaceholders, processedData);\n        yield put({\n            type: CARDSETS_SELECT_SUCCESS,\n            id: resp.data.id,\n            name: resp.data.name,\n        });\n        yield put({\n            type: CARDSET_SELECT_SUCCESS,\n            data: processedData,\n        });\n        yield put(gameSelectRequest(resp.data.gameId, false));\n        yield put(ActionCreators.clearHistory());\n    } catch (e) {\n        yield put({ type: CARDSET_SELECT_FAILURE });\n        yield call(putError, e);\n    }\n}\n\nexport function* handleCardSetUploadImage(action: CardSetUploadImage): SagaIterator {\n    let progressId = null;\n    try {\n        progressId = yield call(putProgress, `Uploading ${action.file.name}`);\n        const formData = new FormData();\n        formData.set('gameId', action.gameId);\n        formData.append('image', action.file, action.file.name);\n\n        const data = yield call(\n            authorizedPostFormDataRequest,\n            '/api/images',\n            formData,\n            (event: ProgressEvent) => action.progress(event.lengthComputable, event.loaded, event.total),\n            action.cancelToken,\n            () => {\n                action.abort();\n            },\n        );\n        if (data !== undefined) {\n            // not cancelled\n            action.load(data.imageId.toString());\n            yield put({ type: CARDSET_UPLOAD_IMAGE_SUCCESS });\n            yield call(putInfo, `${action.file.name} uploaded`);\n        }\n        yield call(hideProgress, progressId);\n    } catch (e) {\n        yield put({ type: CARDSET_UPLOAD_IMAGE_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e);\n        action.error(e.message);\n    }\n}\n\nexport function* handleCardSetDeleteImage(action: CardSetDeleteImage): SagaIterator {\n    try {\n        yield call(authorizedDeleteRequest, '/api/images/' + action.imageId);\n        action.load();\n    } catch (e) {\n        action.error(e.message);\n    }\n}\n\nfunction walkChildren(node: XmlNode, color: string) {\n    if (node.type === 'element') {\n        for (let child of node.children) {\n            if (child.type === 'element')\n                if (child.name === 'path') {\n                    child.attr['fill'] = color;\n                }\n            walkChildren(child, color);\n        }\n    }\n}\n\nfunction adjustSvg(data: string, preserveAspectRatio: boolean, color?: string): string {\n    const doc = new XmlDocument(data);\n    if (!preserveAspectRatio) {\n        doc.attr['preserveAspectRatio'] = 'none';\n    }\n\n    if (color) {\n        walkChildren(doc, color);\n    }\n\n    return btoa(doc.toString({ compressed: true }));\n}\n\nexport function* handleCardSetFitChange(action: CardSetChangeFitForActiveField): SagaIterator {\n    try {\n        yield call(delay, 100);\n        const state: State = yield select();\n\n        if (state.cardset.present.activeFieldId === undefined) {\n            return;\n        }\n\n        for (const cardId in state.cardset.present.cardsById) {\n            const fieldInfo = state.cardset.present.fields[cardId][state.cardset.present.activeFieldId];\n            if (fieldInfo.type === 'image' && fieldInfo.url) {\n                const imageResp = yield call(authorizedGetRequest, fieldInfo.url);\n                if (imageResp.headers['content-type'] === 'image/svg+xml') {\n                    if (action.fit === 'stretch') {\n                        const svg = adjustSvg(imageResp.data, false, fieldInfo.color);\n                        yield put(cardSetChangeImageBase64(cardId, state.cardset.present.activeFieldId, svg));\n                    } else if (fieldInfo.color) {\n                        const svg = adjustSvg(imageResp.data, true, fieldInfo.color);\n                        yield put(cardSetChangeImageBase64(cardId, state.cardset.present.activeFieldId, svg));\n                    } else {\n                        yield put(cardSetChangeImageBase64(cardId, state.cardset.present.activeFieldId, undefined));\n                    }\n                }\n            }\n        }\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nexport function* handleCardSetChangeImage(action: CardSetChangeImage): SagaIterator {\n    try {\n        yield call(delay, 100);\n        const state: State = yield select();\n\n        let cardsToFix =\n            state.cardset.present.applyToAllCards || action.cardId === undefined\n                ? state.cardset.present.cardsAllIds\n                : [action.cardId];\n\n        for (const cardId of cardsToFix) {\n            const cardFields = state.cardset.present.fields[cardId];\n            const imageInfo = cardFields[action.fieldId];\n            if (imageInfo.type === 'image' && imageInfo.url) {\n                const imageResp = yield call(authorizedGetRequest, imageInfo.url);\n\n                if (imageResp.headers['content-type'] === 'image/svg+xml') {\n                    const name = imageInfo.name || imageInfo.id;\n\n                    for (const fieldId in cardFields) {\n                        const fieldInfo = cardFields[fieldId];\n\n                        if ((fieldInfo.name === name || fieldInfo.id === name) && fieldInfo.type === 'image') {\n                            if (fieldInfo.fit === 'stretch') {\n                                const svg = adjustSvg(imageResp.data, false, imageInfo.color);\n                                yield put(cardSetChangeImageBase64(cardId, fieldId, svg));\n                            } else if (imageInfo.color) {\n                                const svg = adjustSvg(imageResp.data, true, imageInfo.color);\n                                yield put(cardSetChangeImageBase64(cardId, fieldId, svg));\n                            } else {\n                                yield put(cardSetChangeImageBase64(cardId, fieldId, undefined));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    } catch (e) {\n        yield call(putError, e);\n    }\n}\n\nfunction closeHandler(e: Event) {\n    e.preventDefault();\n    e.returnValue = true;\n}\n\nfunction preventWindowClose() {\n    window.addEventListener('beforeunload', closeHandler);\n}\n\nfunction allowWindowClose() {\n    window.removeEventListener('beforeunload', closeHandler);\n}\n\nexport function* handleCardSetChange(): SagaIterator {\n    let progressId = null;\n\n    try {\n        preventWindowClose();\n        progressId = yield call(putProgress, 'Saving Card Set');\n\n        yield call(delay, 1000);\n        const state: State = yield select();\n\n        const cardsetId = state.cardsets.active;\n        if (cardsetId === null) throw Error('Save failed.');\n        const data = {\n            width: state.cardset.present.width,\n            height: state.cardset.present.height,\n            isTwoSided: state.cardset.present.isTwoSided,\n            snappingDistance: state.cardset.present.snappingDistance,\n            version: state.cardset.present.version,\n            cardsAllIds: state.cardset.present.cardsAllIds,\n            cardsById: state.cardset.present.cardsById,\n            fieldsAllIds: state.cardset.present.fieldsAllIds,\n            fields: state.cardset.present.fields,\n            zoom: state.cardset.present.zoom,\n        };\n\n        yield call(authorizedPutRequest, '/api/cardsets/' + cardsetId, {\n            name: state.cardsets.byId[cardsetId].name,\n            data: JSON.stringify(data),\n        });\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'Card Set saved');\n        allowWindowClose();\n    } catch (e) {\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e);\n        allowWindowClose();\n    }\n}\n\n// Images\nexport function* handleImageListRequest(action: ImageListRequest): SagaIterator {\n    try {\n        yield call(delay, 200);\n        const state = yield select();\n\n        const filter = encodeURIComponent(action.filter);\n        const location = encodeURIComponent(action.location);\n        const game = encodeURIComponent(state.games.active);\n        const resp = yield call(authorizedGetRequest, `/api/images?name=${filter}&location=${location}&game=${game}`);\n        const images = resp.data.images;\n        yield put({\n            type: IMAGE_LIST_SUCCESS,\n            images,\n        });\n    } catch (e) {\n        yield put({ type: IMAGE_LIST_FAILURE });\n        yield call(putError, e);\n    }\n}\n\n// All\nexport function* rootSaga(): SagaIterator {\n    yield all([\n        takeEvery(MESSAGE_DISPLAY, handleMessageDisplay),\n        takeLatest(LOGIN_REQUEST, handleLoginRequest),\n        takeLatest(LOGIN_SUCCESS, handleLoginSuccess),\n        takeLatest(LOGOUT_REQUEST, handleLogoutRequest),\n        takeLatest(SIGNUP_REQUEST, handleSignupRequest),\n        takeLatest(GAME_CREATE_REQUEST, handleGameCreateRequest),\n        takeLatest(GAME_DELETE_REQUEST, handleGameDeleteRequest),\n        takeLatest(GAME_RENAME_REQUEST, handleGameRenameRequest),\n        takeLatest(GAME_LIST_REQUEST, handleGameListRequest),\n        takeLatest(GAME_SELECT_REQUEST, handleGameSelectRequest),\n        takeLatest(GAME_CREATE_PDF_REQUEST, handleGameCreatePdfRequest),\n        takeLatest(GAME_CREATE_PNG_REQUEST, handleGameCreatePngRequest),\n        takeLatest(GAME_GET_ATTRIBUTIONS_REQUEST, handleGameGetAttributionsRequest),\n        takeLatest(CARDSET_CREATE_REQUEST, handleCardSetCreateRequest),\n        takeLatest(CARDSET_DELETE_REQUEST, handleCardSetDeleteRequest),\n        takeLatest(CARDSET_RENAME_REQUEST, handleCardSetRenameRequest),\n        takeLatest(CARDSET_SELECT_REQUEST, handleCardSetSelectRequest),\n        takeEvery(CARDSET_UPLOAD_IMAGE, handleCardSetUploadImage),\n        takeEvery(CARDSET_DELETE_IMAGE, handleCardSetDeleteImage),\n        takeEvery(CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD, handleCardSetFitChange),\n        takeEvery(CARDSET_CHANGE_IMAGE, handleCardSetChangeImage),\n\n        takeLatest(CARDSET_CREATE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_ROTATE_CARDS_RIGHT, handleCardSetChange),\n        takeLatest(CARDSET_ROTATE_CARDS_LEFT, handleCardSetChange),\n        takeLatest(CARDSET_CLONE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_REMOVE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_UPDATE_CARD_COUNT, handleCardSetChange),\n        takeLatest(CARDSET_ADD_TEXT_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_ADD_IMAGE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_FIELD_NAME, handleCardSetChange),\n        takeLatest(CARDSET_REMOVE_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_RAISE_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_RAISE_ACTIVE_FIELD_TO_TOP, handleCardSetChange),\n        takeLatest(CARDSET_LOWER_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM, handleCardSetChange),\n        takeLatest(CARDSET_LOCK_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_UNLOCK_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_WIDTH, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_HEIGHT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_IS_TWO_SIDED, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_SNAPPING_DISTANCE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIELD_POSITION, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIELD_PAN, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIELD_ZOOM, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIELD_SIZE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_FIELD_ANGLE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_TEXT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_IMAGE, handleCardSetChange),\n        takeLatest(CARDSET_SET_ZOOM, handleCardSetChange),\n        takeLatest(CARDSET_IMPORT_DATA, handleCardSetChange),\n        takeLatest(CARDSET_UNDO, handleCardSetChange),\n        takeLatest(CARDSET_REDO, handleCardSetChange),\n\n        takeLatest(IMAGE_LIST_REQUEST, handleImageListRequest),\n\n        takeLatest(INIT_REQUEST, handleInitRequest),\n    ]);\n}\n","import { combineReducers } from 'redux';\nimport shortid from 'shortid';\nimport undoable from 'redux-undo';\n\nimport {\n    CARDSET_ADD_IMAGE_FIELD,\n    CARDSET_ADD_TEXT_FIELD,\n    CARDSET_CHANGE_ACTIVE_FIELD_NAME,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT,\n    CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD,\n    CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD,\n    CARDSET_CHANGE_HEIGHT,\n    CARDSET_CHANGE_IMAGE,\n    CARDSET_CHANGE_IMAGE_BASE64,\n    CARDSET_CHANGE_IS_TWO_SIDED,\n    CARDSET_CHANGE_FIELD_ANGLE,\n    CARDSET_CHANGE_FIELD_SIZE,\n    CARDSET_CHANGE_SNAPPING_DISTANCE,\n    CARDSET_CHANGE_TEXT,\n    CARDSET_CHANGE_WIDTH,\n    CARDSET_CLONE_CARD,\n    CARDSET_CREATE_CARD,\n    CARDSET_IMPORT_DATA,\n    CARDSET_LIST_RESET,\n    CARDSET_LIST_SUCCESS,\n    CARDSET_LOCK_ACTIVE_FIELD,\n    CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM,\n    CARDSET_RAISE_ACTIVE_FIELD_TO_TOP,\n    CARDSET_REMOVE_ACTIVE_FIELD,\n    CARDSET_REMOVE_CARD,\n    CARDSET_RENAME_REQUEST,\n    CARDSET_SELECT_FAILURE,\n    CARDSET_SELECT_REQUEST,\n    CARDSET_SELECT_SUCCESS,\n    CARDSET_SET_ACTIVE_CARD_AND_FIELD,\n    CARDSET_SET_SIDEBAR_STATE,\n    CARDSET_SET_ZOOM,\n    CARDSET_UNLOCK_ACTIVE_FIELD,\n    CARDSET_UPDATE_CARD_COUNT,\n    CardSetAction,\n    GAME_CREATE_PDF_FAILURE,\n    GAME_CREATE_PDF_REQUEST,\n    GAME_CREATE_PDF_SUCCESS,\n    GAME_CREATE_PNG_FAILURE,\n    GAME_CREATE_PNG_REQUEST,\n    GAME_CREATE_PNG_SUCCESS,\n    GAME_LIST_RESET,\n    GAME_LIST_SUCCESS,\n    GAME_RENAME_REQUEST,\n    GAME_SELECT_FAILURE,\n    GAME_SELECT_REQUEST,\n    GAME_SELECT_SUCCESS,\n    GameAction,\n    IMAGE_LIST_REQUEST,\n    IMAGE_LIST_SUCCESS,\n    ImageListAction,\n    LOGIN_FAILURE,\n    LOGIN_REQUEST,\n    LOGIN_SUCCESS,\n    LOGOUT_SUCCESS,\n    LoginAction,\n    MESSAGE_DISPLAY,\n    MESSAGE_HIDE,\n    MessageAction,\n    SIGNUP_FAILURE,\n    SIGNUP_REQUEST,\n    SIGNUP_SUCCESS,\n    SidebarState,\n    SignUpAction,\n    CARDSET_CHANGE_FIELD_ZOOM,\n    CARDSET_CHANGE_FIELD_PAN,\n    CardSetsAction,\n    CARDSETS_SELECT_SUCCESS,\n    CARDSET_CHANGE_FIELD_POSITION,\n    CARDSET_UNDO,\n    CARDSET_REDO,\n    Action,\n    CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD,\n    CARDSET_CHANGE_APPLY_TO_ALLCARDS,\n    CARDSET_RAISE_ACTIVE_FIELD,\n    CARDSET_LOWER_ACTIVE_FIELD,\n    CARDSET_ROTATE_CARDS_RIGHT,\n    CARDSET_ROTATE_CARDS_LEFT,\n    GAME_GET_ATTRIBUTIONS_SUCCESS,\n    GAME_GET_ATTRIBUTIONS_FAILURE,\n} from './actions';\nimport {\n    CURRENT_CARDSET_VERSION,\n    DEFAULT_FONT,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_VARIANT,\n    DEFAULT_LINE_HEIGHT,\n    BLEED_WIDTH,\n} from './constants';\nimport {\n    CardSetsCollection,\n    CardsCollection,\n    GamesCollection,\n    IdsArray,\n    ImageArray,\n    MessageType,\n    FieldInfoByCardCollection,\n    FieldInfoCollection,\n    FieldInfo,\n} from './types';\nimport { rotateVec } from './utils';\n\nexport const ACTIVITY_SELECTING = 0x1;\nexport const ACTIVITY_CREATING_PDF = 0x2;\nexport const ACTIVITY_CREATING_PNG = 0x4;\n\nexport interface MessageState {\n    messages: MessageType[];\n}\n\nexport const DefaultMessageState: MessageState = {\n    messages: [],\n};\n\nexport interface AuthState {\n    isAuthenticated?: boolean;\n    user: string;\n}\n\nexport const DefaultAuthState: AuthState = {\n    isAuthenticated: undefined,\n    user: '', // XXX: user can manipulate this information by changing local storage. Do not trust this info.\n};\n\nexport interface SignUpState {\n    signingup: boolean;\n}\n\nexport const DefaultSignUpState: SignUpState = {\n    signingup: false,\n};\n\nexport interface GameState {\n    byId: GamesCollection;\n    allIds: IdsArray;\n    activity: number;\n    active: string | null;\n    attributions: string[];\n}\n\nexport const DefaultGameState: GameState = {\n    byId: {},\n    allIds: [],\n    activity: 0,\n    active: null,\n    attributions: [],\n};\n\nexport interface TextSettings {\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n    lineHeight?: number;\n}\n\nexport interface CardSetsState {\n    byId: CardSetsCollection;\n    allIds: IdsArray;\n    active: string | null;\n}\n\nexport const DefaultCardSetsState: CardSetsState = {\n    byId: {},\n    allIds: [],\n    active: null,\n};\n\nexport interface CardSetState {\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    snappingDistance: number;\n    version: number;\n    activity: number;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    activeCardId?: string;\n    isBackActive: boolean;\n    activeFieldId?: string;\n    fieldsAllIds: IdsArray;\n    fields: FieldInfoByCardCollection;\n    textSettings: TextSettings;\n    activeSidebar: SidebarState | null;\n    zoom: number;\n    applyToAllCards: boolean;\n}\n\nexport const DefaultCardSetState: CardSetState = {\n    width: 63.5,\n    height: 88.9,\n    isTwoSided: false,\n    snappingDistance: 1,\n    version: CURRENT_CARDSET_VERSION,\n    activity: 0,\n    cardsById: {},\n    cardsAllIds: [],\n    activeCardId: undefined,\n    isBackActive: false,\n    activeFieldId: undefined,\n    fieldsAllIds: [],\n    fields: {},\n    textSettings: {\n        align: 'left',\n        color: '#000000',\n        fontFamily: DEFAULT_FONT,\n        fontVariant: DEFAULT_FONT_VARIANT,\n        fontSize: DEFAULT_FONT_SIZE,\n        lineHeight: DEFAULT_LINE_HEIGHT,\n    },\n    activeSidebar: null,\n    zoom: 1,\n    applyToAllCards: false,\n};\n\nexport interface ImageState {\n    activity: number;\n    filter: string;\n    images: ImageArray;\n}\n\nexport const DefaultImageState: ImageState = {\n    activity: 0,\n    filter: '',\n    images: [],\n};\n\nexport interface State {\n    message: MessageState;\n    auth: AuthState;\n    signup: SignUpState;\n    games: GameState;\n    cardsets: CardSetsState;\n    cardset: {\n        present: CardSetState;\n    };\n    images: ImageState;\n}\n\nexport const DefaultState: State = {\n    message: DefaultMessageState,\n    auth: DefaultAuthState,\n    signup: DefaultSignUpState,\n    games: DefaultGameState,\n    cardsets: DefaultCardSetsState,\n    cardset: {\n        present: DefaultCardSetState,\n    },\n    images: DefaultImageState,\n};\n\nexport function message(state: MessageState = DefaultMessageState, action: MessageAction): MessageState {\n    switch (action.type) {\n        case MESSAGE_DISPLAY:\n            const found = state.messages.find(m => m.id === action.message.id);\n            if (found) return state;\n\n            return {\n                ...state,\n                messages: state.messages.concat(action.message),\n            };\n        case MESSAGE_HIDE:\n            return Object.assign({}, state, {\n                messages: state.messages.filter(m => m.id !== action.messageId),\n            });\n        default:\n            return state;\n    }\n}\n\nexport function auth(state: AuthState = DefaultAuthState, action: LoginAction): AuthState {\n    switch (action.type) {\n        case LOGIN_REQUEST:\n            return Object.assign({}, state, {\n                isAuthenticated: undefined,\n                user: '',\n            });\n        case LOGIN_SUCCESS:\n            return Object.assign({}, state, {\n                isAuthenticated: true,\n                user: action.username,\n            });\n        case LOGIN_FAILURE:\n            return Object.assign({}, state, {\n                isAuthenticated: false,\n            });\n        case LOGOUT_SUCCESS:\n            return Object.assign({}, state, {\n                isAuthenticated: false,\n                user: '',\n            });\n        default:\n            return state;\n    }\n}\n\nexport function signup(state: SignUpState = DefaultSignUpState, action: SignUpAction): SignUpState {\n    switch (action.type) {\n        case SIGNUP_REQUEST:\n            return Object.assign({}, state, {\n                signingup: true,\n            });\n        case SIGNUP_SUCCESS:\n            return Object.assign({}, state, {\n                signingup: false,\n            });\n        case SIGNUP_FAILURE:\n            return Object.assign({}, state, {\n                signingup: false,\n            });\n        default:\n            return state;\n    }\n}\n\nexport function games(state: GameState = DefaultGameState, action: GameAction): GameState {\n    switch (action.type) {\n        case GAME_RENAME_REQUEST:\n            const game = state.byId[action.gameId];\n\n            return {\n                ...state,\n                byId: {\n                    ...state.byId,\n                    [game.id]: {\n                        ...game,\n                        name: action.newName,\n                    },\n                },\n            };\n        case GAME_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                byId: action.byId,\n                allIds: action.allIds,\n            });\n        case GAME_LIST_RESET:\n            return Object.assign({}, state, {\n                activity: 0,\n                byId: {},\n                allIds: [],\n            });\n        case GAME_SELECT_REQUEST:\n            return Object.assign({}, state, {\n                activity: ACTIVITY_SELECTING,\n            });\n        case GAME_SELECT_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n                active: action.id,\n                attributions: [],\n            });\n        case GAME_SELECT_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n                attributions: [],\n            });\n        case GAME_CREATE_PDF_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_CREATING_PDF,\n            });\n        case GAME_CREATE_PDF_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PDF,\n            });\n        case GAME_CREATE_PDF_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PDF,\n            });\n        case GAME_CREATE_PNG_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_CREATING_PNG,\n            });\n        case GAME_CREATE_PNG_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PNG,\n            });\n        case GAME_CREATE_PNG_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PNG,\n            });\n        case GAME_GET_ATTRIBUTIONS_SUCCESS:\n            return {\n                ...state,\n                attributions: action.attributions,\n            };\n        case GAME_GET_ATTRIBUTIONS_FAILURE:\n            return {\n                ...state,\n                attributions: [],\n            };\n        default:\n            return state;\n    }\n}\n\nexport function cardsets(state: CardSetsState = DefaultCardSetsState, action: CardSetsAction): CardSetsState {\n    switch (action.type) {\n        case CARDSETS_SELECT_SUCCESS:\n            return {\n                ...state,\n                active: action.id,\n                byId: Object.assign({}, state.byId, {\n                    [action.id]: {\n                        id: action.id,\n                        name: action.name,\n                    },\n                }),\n            };\n        case CARDSET_RENAME_REQUEST:\n            const cardset = state.byId[action.cardSetId];\n\n            return {\n                ...state,\n                byId: {\n                    ...state.byId,\n                    [cardset.id]: {\n                        ...cardset,\n                        name: action.newName,\n                    },\n                },\n            };\n        case CARDSET_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                byId: action.byId,\n                allIds: action.allIds,\n            });\n        case CARDSET_LIST_RESET:\n            return Object.assign({}, state, {\n                byId: {},\n                allIds: [],\n            });\n        default:\n            return state;\n    }\n}\n\nfunction resizeFields(fields: FieldInfoByCardCollection, widthRatio: number, heightRatio: number) {\n    let newFields = { ...fields };\n    for (const cardId in newFields) {\n        let cardFields = { ...fields[cardId] };\n        for (const fieldId in cardFields) {\n            let fieldInfo = { ...cardFields[fieldId] };\n            fieldInfo.x = (fieldInfo.x - BLEED_WIDTH) * widthRatio + BLEED_WIDTH;\n            fieldInfo.y = (fieldInfo.y - BLEED_WIDTH) * heightRatio + BLEED_WIDTH;\n            fieldInfo.width *= widthRatio;\n            fieldInfo.height *= heightRatio;\n            if (fieldInfo.type === 'image') {\n                if (fieldInfo.cx) {\n                    fieldInfo.cx *= widthRatio;\n                }\n                if (fieldInfo.cy) {\n                    fieldInfo.cy *= heightRatio;\n                }\n            } else if (fieldInfo.type === 'text') {\n                fieldInfo.fontSize *= heightRatio;\n            }\n            cardFields[fieldId] = fieldInfo;\n        }\n        newFields[cardId] = cardFields;\n    }\n    return newFields;\n}\n\nfunction rotateRight(fieldInfo: FieldInfo, width: number) {\n    let cx = fieldInfo.x + fieldInfo.width / 2 - BLEED_WIDTH;\n    let cy = fieldInfo.y + fieldInfo.height / 2 - BLEED_WIDTH;\n\n    let newCx = width - cy;\n    let newCy = cx;\n\n    fieldInfo.x = newCx - fieldInfo.width / 2 + BLEED_WIDTH;\n    fieldInfo.y = newCy - fieldInfo.height / 2 + BLEED_WIDTH;\n    fieldInfo.angle += Math.PI / 2;\n}\n\nfunction rotateLeft(fieldInfo: FieldInfo, height: number) {\n    let cx = fieldInfo.x + fieldInfo.width / 2 - BLEED_WIDTH;\n    let cy = fieldInfo.y + fieldInfo.height / 2 - BLEED_WIDTH;\n\n    let newCx = cy;\n    let newCy = height - cx;\n\n    fieldInfo.x = newCx - fieldInfo.width / 2 + BLEED_WIDTH;\n    fieldInfo.y = newCy - fieldInfo.height / 2 + BLEED_WIDTH;\n    fieldInfo.angle -= Math.PI / 2;\n}\n\nexport function cardset(state: CardSetState = DefaultCardSetState, action: CardSetAction): CardSetState {\n    switch (action.type) {\n        case CARDSET_SELECT_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_SELECTING,\n                isTwoSided: false,\n                cardsAllIds: [],\n                cardsById: {},\n                fields: {},\n                fieldsAllIds: [],\n                activeCardId: undefined,\n                activeFieldId: undefined,\n                isBackActive: false,\n            });\n        case CARDSET_SELECT_SUCCESS: {\n            return {\n                ...state,\n                activity: state.activity & ~ACTIVITY_SELECTING,\n                width: action.data.width || 63.5,\n                height: action.data.height || 88.9,\n                isTwoSided: action.data.isTwoSided || false,\n                snappingDistance: action.data.snappingDistance || 1,\n                version: action.data.version,\n                cardsAllIds: action.data.cardsAllIds || [],\n                cardsById: action.data.cardsById || {},\n                fields: action.data.fields || {},\n                fieldsAllIds: action.data.fieldsAllIds || [],\n                activeCardId: undefined,\n                activeFieldId: undefined,\n                isBackActive: false,\n                zoom: action.data.zoom || 1,\n            };\n        }\n        case CARDSET_SELECT_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n            });\n        case CARDSET_CREATE_CARD: {\n            let cardFields: FieldInfoCollection = {};\n            if (state.cardsAllIds.length > 0) {\n                cardFields = {\n                    ...state.fields[state.cardsAllIds[0]],\n                };\n\n                for (const fieldId of state.fieldsAllIds) {\n                    let fieldInfo = { ...cardFields[fieldId] };\n                    if (fieldInfo.type === 'text') {\n                        fieldInfo.value = '';\n                    } else if (fieldInfo.type === 'image') {\n                        delete fieldInfo.url;\n                        delete fieldInfo.base64;\n                    }\n                    cardFields[fieldId] = fieldInfo;\n                }\n            }\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [action.card.id]: action.card,\n                },\n                cardsAllIds: state.cardsAllIds ? state.cardsAllIds.concat(action.card.id) : [action.card.id],\n                fields: {\n                    ...state.fields,\n                    [action.card.id]: cardFields,\n                },\n            };\n        }\n        case CARDSET_ROTATE_CARDS_RIGHT: {\n            let fields = { ...state.fields };\n            let width = state.height;\n            let height = state.width;\n\n            for (const cardId in fields) {\n                let cardFields = { ...fields[cardId] };\n                for (const fieldId in cardFields) {\n                    let fieldInfo = { ...cardFields[fieldId] };\n                    if (fieldInfo.isOnBack) {\n                        rotateLeft(fieldInfo, height);\n                    } else {\n                        rotateRight(fieldInfo, width);\n                    }\n\n                    cardFields[fieldId] = fieldInfo;\n                }\n\n                fields[cardId] = cardFields;\n            }\n            return {\n                ...state,\n                width,\n                height,\n                fields,\n            };\n        }\n        case CARDSET_ROTATE_CARDS_LEFT: {\n            let fields = { ...state.fields };\n            let width = state.height;\n            let height = state.width;\n\n            for (const cardId in fields) {\n                let cardFields = { ...fields[cardId] };\n                for (const fieldId in cardFields) {\n                    let fieldInfo = { ...cardFields[fieldId] };\n                    if (fieldInfo.isOnBack) {\n                        rotateRight(fieldInfo, width);\n                    } else {\n                        rotateLeft(fieldInfo, height);\n                    }\n\n                    cardFields[fieldId] = fieldInfo;\n                }\n\n                fields[cardId] = cardFields;\n            }\n            return {\n                ...state,\n                width,\n                height,\n                fields,\n            };\n        }\n        case CARDSET_CLONE_CARD: {\n            let newCard = { ...action.card, id: shortid.generate() };\n\n            const index = state.cardsAllIds.indexOf(action.card.id) + 1;\n            const cardsAllIds = [...state.cardsAllIds.slice(0, index), newCard.id, ...state.cardsAllIds.slice(index)];\n\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [newCard.id]: newCard,\n                },\n                cardsAllIds,\n                fields: {\n                    ...state.fields,\n                    [newCard.id]: {\n                        ...state.fields[action.card.id],\n                    },\n                },\n            };\n        }\n        case CARDSET_REMOVE_CARD: {\n            const cardId = action.card.id;\n            let cardsById = { ...state.cardsById };\n            delete cardsById[cardId];\n\n            let fields = { ...state.fields };\n            if (cardId in fields) {\n                delete fields[cardId];\n            }\n\n            let activeCardId = state.activeCardId === cardId ? undefined : state.activeCardId;\n\n            const cardsAllIds = state.cardsAllIds.filter(id => id !== cardId);\n\n            let fieldsAllIds = state.fieldsAllIds;\n            if (cardsAllIds.length === 0) {\n                fieldsAllIds = [];\n            }\n\n            return {\n                ...state,\n                cardsById,\n                cardsAllIds,\n                fieldsAllIds,\n                fields,\n                activeCardId,\n            };\n        }\n        case CARDSET_UPDATE_CARD_COUNT: {\n            const cardId = action.card.id;\n            let card = { ...state.cardsById[cardId] };\n            card.count = action.count;\n\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [cardId]: card,\n                },\n            };\n        }\n        case CARDSET_ADD_TEXT_FIELD: {\n            if (state.cardsAllIds.length === 0) {\n                return state;\n            }\n\n            let textSettings = { ...state.textSettings };\n            const id = shortid.generate();\n            let fields: FieldInfoByCardCollection = {};\n            for (const cardId of state.cardsAllIds) {\n                fields[cardId] = {\n                    ...state.fields[cardId],\n                    [id]: {\n                        type: 'text',\n                        id,\n                        x: 5,\n                        y: 5,\n                        width: 20,\n                        height: 10,\n                        angle: 0,\n                        isOnBack: state.isBackActive,\n                        value: '',\n                        align: textSettings.align,\n                        color: textSettings.color,\n                        fontFamily: textSettings.fontFamily,\n                        fontVariant: textSettings.fontVariant,\n                        fontSize: textSettings.fontSize,\n                        lineHeight: textSettings.lineHeight || DEFAULT_LINE_HEIGHT,\n                    },\n                };\n            }\n\n            return {\n                ...state,\n                fieldsAllIds: [...state.fieldsAllIds, id],\n                fields,\n            };\n        }\n        case CARDSET_ADD_IMAGE_FIELD: {\n            if (state.cardsAllIds.length === 0) {\n                return state;\n            }\n\n            const id = shortid.generate();\n            let fields: FieldInfoByCardCollection = {};\n            for (const cardId of state.cardsAllIds) {\n                fields[cardId] = {\n                    ...state.fields[cardId],\n                    [id]: {\n                        type: 'image',\n                        id,\n                        x: 5,\n                        y: 5,\n                        width: 20,\n                        height: 20,\n                        angle: 0,\n                        isOnBack: state.isBackActive,\n                        crop: true,\n                    },\n                };\n            }\n\n            return {\n                ...state,\n                fieldsAllIds: [...state.fieldsAllIds, id],\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_ACTIVE_FIELD_NAME: {\n            if (state.activeFieldId !== undefined) {\n                let fields: FieldInfoByCardCollection = {};\n                let id = state.activeFieldId;\n\n                for (const cardId of state.cardsAllIds) {\n                    fields[cardId] = {\n                        ...state.fields[cardId],\n                        [id]: {\n                            ...state.fields[cardId][id],\n                            name: action.name,\n                        },\n                    };\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n\n        case CARDSET_REMOVE_ACTIVE_FIELD: {\n            const fieldId = state.activeFieldId;\n            if (fieldId !== undefined) {\n                let fieldsAllIds = [...state.fieldsAllIds];\n                let fieldIndex = fieldsAllIds.indexOf(fieldId);\n                if (fieldIndex !== -1) {\n                    fieldsAllIds.splice(fieldIndex, 1);\n                }\n\n                let fields = { ...state.fields };\n                for (const cardId in fields) {\n                    if (fieldId in fields[cardId] && !fields[cardId][fieldId].locked) {\n                        let cardFields = { ...fields[cardId] };\n                        delete cardFields[fieldId];\n                        fields[cardId] = cardFields;\n                    }\n                }\n\n                return {\n                    ...state,\n                    fieldsAllIds,\n                    fields,\n                    activeFieldId: undefined,\n                };\n            }\n            return state;\n        }\n        case CARDSET_RAISE_ACTIVE_FIELD: {\n            let fieldsAllIds = [...state.fieldsAllIds];\n\n            if (state.activeFieldId !== undefined) {\n                let index = fieldsAllIds.indexOf(state.activeFieldId);\n                if (index !== -1 && index < fieldsAllIds.length - 1) {\n                    fieldsAllIds.splice(index + 1, 0, fieldsAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                fieldsAllIds,\n            };\n        }\n        case CARDSET_RAISE_ACTIVE_FIELD_TO_TOP: {\n            let fieldsAllIds = [...state.fieldsAllIds];\n\n            if (state.activeFieldId !== undefined) {\n                let index = fieldsAllIds.indexOf(state.activeFieldId);\n                if (index !== -1) {\n                    fieldsAllIds.push(fieldsAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                fieldsAllIds,\n            };\n        }\n        case CARDSET_LOWER_ACTIVE_FIELD: {\n            let fieldsAllIds = [...state.fieldsAllIds];\n\n            if (state.activeFieldId !== undefined) {\n                let index = fieldsAllIds.indexOf(state.activeFieldId);\n                if (index > 0) {\n                    fieldsAllIds.splice(index - 1, 0, fieldsAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                fieldsAllIds,\n            };\n        }\n        case CARDSET_LOWER_ACTIVE_FIELD_TO_BOTTOM: {\n            let fieldsAllIds = [...state.fieldsAllIds];\n\n            if (state.activeFieldId !== undefined) {\n                let index = fieldsAllIds.indexOf(state.activeFieldId);\n                if (index !== -1) {\n                    fieldsAllIds.unshift(fieldsAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                fieldsAllIds,\n            };\n        }\n        case CARDSET_LOCK_ACTIVE_FIELD: {\n            if (state.activeFieldId) {\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        cardFields[fieldId] = {\n                            ...cardFields[fieldId],\n                            locked: true,\n                        };\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_UNLOCK_ACTIVE_FIELD: {\n            if (state.activeFieldId) {\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        cardFields[fieldId] = {\n                            ...cardFields[fieldId],\n                            locked: false,\n                        };\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_CHANGE_FIT_FOR_ACTIVE_FIELD: {\n            if (state.activeFieldId) {\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = { ...cardFields[fieldId] };\n                        if (fieldInfo.type === 'image') {\n                            fieldInfo.fit = action.fit;\n                        }\n                        cardFields[fieldId] = fieldInfo;\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_CHANGE_CROP_FOR_ACTIVE_FIELD: {\n            if (state.activeFieldId) {\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = { ...cardFields[fieldId] };\n                        if (fieldInfo.type === 'image') {\n                            fieldInfo.crop = action.crop;\n                        }\n                        cardFields[fieldId] = fieldInfo;\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_CHANGE_UNCLICKABLE_FOR_ACTIVE_FIELD: {\n            if (state.activeFieldId) {\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = { ...cardFields[fieldId] };\n                        fieldInfo.unclickable = action.unclickable;\n                        cardFields[fieldId] = fieldInfo;\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_CHANGE_WIDTH: {\n            if (!action.width || action.width <= 0) {\n                return state;\n            }\n\n            let height = state.height;\n            if (action.maintainAspectRatio) {\n                height = action.width * (state.height / state.width);\n            }\n\n            let fields = state.fields;\n            if (action.resizeContent) {\n                fields = resizeFields(fields, action.width / state.width, height / state.height);\n            }\n\n            return {\n                ...state,\n                width: action.width,\n                height,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_HEIGHT: {\n            if (!action.height || action.height <= 0) {\n                return state;\n            }\n\n            let width = state.width;\n            if (action.maintainAspectRatio) {\n                width = action.height * (state.width / state.height);\n            }\n\n            let fields = state.fields;\n            if (action.resizeContent) {\n                fields = resizeFields(fields, width / state.width, action.height / state.height);\n            }\n\n            return {\n                ...state,\n                height: action.height,\n                width,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_IS_TWO_SIDED: {\n            return {\n                ...state,\n                isTwoSided: action.isTwoSided,\n            };\n        }\n        case CARDSET_CHANGE_SNAPPING_DISTANCE: {\n            return {\n                ...state,\n                snappingDistance: action.snappingDistance,\n            };\n        }\n        case CARDSET_CHANGE_FIELD_POSITION: {\n            let x = action.x;\n            let y = action.y;\n            let snappingDistance = state.snappingDistance;\n\n            if (snappingDistance !== 0) {\n                x = Math.round(x / snappingDistance) * snappingDistance;\n                y = Math.round(y / snappingDistance) * snappingDistance;\n            }\n\n            let fields = { ...state.fields };\n            let fieldId = action.fieldId;\n            let cardsToFix = action.cardId ? [action.cardId] : state.cardsAllIds;\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...fields[cardId] };\n                if (fieldId in cardFields) {\n                    cardFields[fieldId] = {\n                        ...cardFields[fieldId],\n                        x,\n                        y,\n                    };\n                }\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_FIELD_PAN: {\n            let { cx, cy } = action;\n\n            let fields = { ...state.fields };\n            let fieldId = action.fieldId;\n            let cardsToFix = state.applyToAllCards || action.cardId === undefined ? state.cardsAllIds : [action.cardId];\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...fields[cardId] };\n                if (fieldId in cardFields) {\n                    let fieldInfo = cardFields[fieldId];\n                    if (fieldInfo.type === 'image') {\n                        let { width, height, zoom, fit, imageWidth, imageHeight } = fieldInfo;\n                        zoom = zoom || 1;\n                        imageHeight = imageHeight || 1;\n                        imageWidth = imageWidth || 1;\n\n                        let fitImageWidth = width;\n                        let fitImageHeight = height;\n                        if (fit === 'width' || fit === undefined) {\n                            fitImageHeight = width * (imageHeight / imageWidth);\n                        } else if (fit === 'height') {\n                            fitImageWidth = height * (imageWidth / imageHeight);\n                        }\n                        cx = Math.min(Math.max(width - zoom * fitImageWidth, cx), 0);\n                        cy = Math.min(Math.max(height - zoom * fitImageHeight, cy), 0);\n\n                        cardFields[fieldId] = {\n                            ...fieldInfo,\n                            cx,\n                            cy,\n                        };\n                    }\n                }\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_FIELD_ZOOM: {\n            let zoom = action.zoom;\n\n            let fields = { ...state.fields };\n            let fieldId = action.fieldId;\n\n            let cardsToFix = state.applyToAllCards || action.cardId === undefined ? state.cardsAllIds : [action.cardId];\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...fields[cardId] };\n                if (fieldId in cardFields) {\n                    let fieldInfo = cardFields[fieldId];\n                    if (fieldInfo.type === 'image') {\n                        let { fit, width, height, imageWidth, imageHeight } = fieldInfo;\n\n                        imageHeight = imageHeight || 1;\n                        imageWidth = imageWidth || 1;\n\n                        let fitImageWidth = width;\n                        let fitImageHeight = height;\n                        if (fit === 'width' || fit === undefined) {\n                            fitImageHeight = width * (imageHeight / imageWidth);\n                        } else if (fit === 'height') {\n                            fitImageWidth = height * (imageWidth / imageHeight);\n                        }\n\n                        let cx = fieldInfo.cx || 0;\n                        let cy = fieldInfo.cy || 0;\n                        let oldZoom = fieldInfo.zoom || 1;\n                        cx = cx + ((oldZoom - zoom) * fitImageWidth) / 2;\n                        cy = cy + ((oldZoom - zoom) * fitImageHeight) / 2;\n\n                        cx = Math.min(Math.max(width - zoom * fitImageWidth, cx), 0);\n                        cy = Math.min(Math.max(height - zoom * fitImageHeight, cy), 0);\n\n                        cardFields[fieldId] = {\n                            ...fieldInfo,\n                            zoom,\n                            cx,\n                            cy,\n                        };\n                    }\n                }\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_FIELD_SIZE: {\n            let width = action.width;\n            let height = action.height;\n            let snappingDistance = state.snappingDistance;\n\n            if (snappingDistance !== 0) {\n                width = Math.round(width / snappingDistance) * snappingDistance;\n                height = Math.round(height / snappingDistance) * snappingDistance;\n            }\n\n            let fields = { ...state.fields };\n            let fieldId = action.fieldId;\n            let cardsToFix = action.cardId ? [action.cardId] : state.cardsAllIds;\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...fields[cardId] };\n                if (fieldId in cardFields) {\n                    let fieldInfo = { ...cardFields[fieldId] };\n\n                    let nx = fieldInfo.x + fieldInfo.width / 2;\n                    let ny = fieldInfo.y + fieldInfo.height / 2;\n                    let { rx, ry } = rotateVec(\n                        (width - fieldInfo.width) / 2,\n                        (height - fieldInfo.height) / 2,\n                        fieldInfo.angle,\n                    );\n\n                    nx = nx + rx - width / 2;\n                    ny = ny + ry - height / 2;\n\n                    if (fieldInfo.type === 'image' && fieldInfo.cx && fieldInfo.cy) {\n                        if (fieldInfo.fit === 'width' || fieldInfo.fit === undefined) {\n                            let ratio = width / fieldInfo.width;\n                            fieldInfo.cx *= ratio;\n                            fieldInfo.cy *= ratio;\n                        } else if (fieldInfo.fit === 'height') {\n                            let ratio = height / fieldInfo.height;\n                            fieldInfo.cx *= ratio;\n                            fieldInfo.cy *= ratio;\n                        } else {\n                            fieldInfo.cx *= width / fieldInfo.width;\n                            fieldInfo.cy *= height / fieldInfo.height;\n                        }\n                    }\n\n                    fieldInfo.x = nx;\n                    fieldInfo.y = ny;\n                    fieldInfo.width = width;\n                    fieldInfo.height = height;\n                    cardFields[fieldId] = fieldInfo;\n                }\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_FIELD_ANGLE: {\n            let angle = action.angle;\n\n            let fields = { ...state.fields };\n            let fieldId = action.fieldId;\n\n            let cardsToFix = action.cardId ? [action.cardId] : state.cardsAllIds;\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...fields[cardId] };\n                if (fieldId in cardFields) {\n                    cardFields[fieldId] = {\n                        ...cardFields[fieldId],\n                        angle,\n                    };\n                }\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_ALIGN: {\n            let textSettings = {\n                ...state.textSettings,\n                align: action.align,\n            };\n\n            if (state.activeFieldId) {\n                let align = action.align;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                align,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_COLOR: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.color,\n            };\n\n            if (state.activeFieldId) {\n                let color = action.color;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                color,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.fontFamily,\n            };\n\n            if (state.activeFieldId) {\n                let fontFamily = action.fontFamily;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                fontFamily,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_VARIANT: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.fontVariant,\n            };\n\n            if (state.activeFieldId) {\n                let fontVariant = action.fontVariant;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                fontVariant,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_FAMILY_AND_VARIANT: {\n            let textSettings = {\n                ...state.textSettings,\n                fontFamily: action.fontFamily,\n                fontVariant: action.fontVariant,\n            };\n\n            if (state.activeFieldId) {\n                let fontFamily = action.fontFamily;\n                let fontVariant = action.fontVariant;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                fontFamily,\n                                fontVariant,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_FONT_SIZE: {\n            let textSettings = {\n                ...state.textSettings,\n                fontSize: action.fontSize,\n            };\n\n            if (state.activeFieldId) {\n                let fontSize = action.fontSize;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                fontSize,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_FIELD_LINE_HEIGHT: {\n            let textSettings = {\n                ...state.textSettings,\n                lineHeight: action.lineHeight,\n            };\n\n            if (state.activeFieldId) {\n                let lineHeight = action.lineHeight;\n\n                let fields = { ...state.fields };\n                let fieldId = state.activeFieldId;\n                for (const cardId in fields) {\n                    let cardFields = { ...fields[cardId] };\n                    if (fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'text') {\n                            cardFields[fieldId] = {\n                                ...fieldInfo,\n                                lineHeight,\n                            };\n                        }\n                    }\n                    fields[cardId] = cardFields;\n                }\n\n                return {\n                    ...state,\n                    fields,\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_TEXT: {\n            let cardFields = { ...state.fields[action.cardId] };\n\n            const fieldInfo = cardFields[action.fieldId];\n            const name = fieldInfo.name || fieldInfo.id;\n\n            for (const fieldId in cardFields) {\n                const testFieldInfo = cardFields[fieldId];\n\n                if ((testFieldInfo.name === name || testFieldInfo.id === name) && testFieldInfo.type === 'text') {\n                    cardFields[fieldId] = {\n                        ...testFieldInfo,\n                        value: action.textInfo.value,\n                    };\n                }\n            }\n\n            return {\n                ...state,\n                fields: {\n                    ...state.fields,\n                    [action.cardId]: cardFields,\n                },\n            };\n        }\n        case CARDSET_CHANGE_IMAGE: {\n            let cardsToFix = state.applyToAllCards || action.cardId === undefined ? state.cardsAllIds : [action.cardId];\n\n            let fields = { ...state.fields };\n\n            for (const cardId of cardsToFix) {\n                let cardFields = { ...state.fields[cardId] };\n\n                const fieldInfo = cardFields[action.fieldId];\n                const name = fieldInfo.name || fieldInfo.id;\n\n                for (const fieldId in cardFields) {\n                    const testFieldInfo = cardFields[fieldId];\n\n                    if ((testFieldInfo.name === name || testFieldInfo.id === name) && testFieldInfo.type === 'image') {\n                        cardFields[fieldId] = {\n                            ...testFieldInfo,\n                            url: 'url' in action.imageInfo ? action.imageInfo.url : testFieldInfo.url,\n                            base64: 'base64' in action.imageInfo ? action.imageInfo.base64 : testFieldInfo.base64,\n                            color: 'color' in action.imageInfo ? action.imageInfo.color : testFieldInfo.color,\n                            imageWidth: 'width' in action.imageInfo ? action.imageInfo.width : testFieldInfo.imageWidth,\n                            imageHeight:\n                                'height' in action.imageInfo ? action.imageInfo.height : testFieldInfo.imageHeight,\n                            cx: 0,\n                            cy: 0,\n                            zoom: 0,\n                        };\n                    }\n                }\n\n                fields[cardId] = cardFields;\n            }\n\n            return {\n                ...state,\n                fields,\n            };\n        }\n        case CARDSET_CHANGE_IMAGE_BASE64: {\n            let cardFields = { ...state.fields[action.cardId] };\n\n            const fieldInfo = cardFields[action.fieldId];\n            const name = fieldInfo.name || fieldInfo.id;\n\n            for (const fieldId in cardFields) {\n                const testFieldInfo = cardFields[fieldId];\n\n                if ((testFieldInfo.name === name || testFieldInfo.id === name) && testFieldInfo.type === 'image') {\n                    cardFields[fieldId] = {\n                        ...testFieldInfo,\n                        base64: action.base64,\n                        cx: 0,\n                        cy: 0,\n                        zoom: 0,\n                    };\n                }\n            }\n\n            return {\n                ...state,\n                fields: {\n                    ...state.fields,\n                    [action.cardId]: cardFields,\n                },\n            };\n        }\n        case CARDSET_SET_ACTIVE_CARD_AND_FIELD: {\n            let textSettings = { ...state.textSettings };\n            let activeSidebar = state.activeSidebar;\n\n            if (activeSidebar !== SidebarState.Measurements && action.cardId !== undefined) {\n                activeSidebar = SidebarState.Details;\n            }\n\n            if (action.cardId !== undefined && action.fieldId !== undefined) {\n                const fieldInfo = state.fields[action.cardId][action.fieldId];\n\n                if (fieldInfo.type === 'text') {\n                    textSettings.align = fieldInfo.align;\n                    textSettings.color = fieldInfo.color;\n                    textSettings.fontFamily = fieldInfo.fontFamily;\n                    textSettings.fontVariant = fieldInfo.fontVariant;\n                    textSettings.fontSize = fieldInfo.fontSize;\n                    textSettings.lineHeight = fieldInfo.lineHeight;\n\n                    if (activeSidebar !== SidebarState.Measurements) {\n                        activeSidebar = SidebarState.Text;\n                    }\n                } else {\n                    if (activeSidebar !== SidebarState.Measurements) {\n                        activeSidebar = SidebarState.Image;\n                    }\n                }\n            }\n\n            return {\n                ...state,\n                activeCardId: action.cardId,\n                isBackActive: action.isBackActive,\n                activeFieldId: action.fieldId,\n                textSettings,\n                activeSidebar,\n            };\n        }\n\n        case CARDSET_CHANGE_APPLY_TO_ALLCARDS: {\n            return {\n                ...state,\n                applyToAllCards: action.applyToAllCards,\n            };\n        }\n\n        case CARDSET_SET_SIDEBAR_STATE: {\n            return {\n                ...state,\n                activeSidebar: action.sidebarState,\n            };\n        }\n        case CARDSET_SET_ZOOM: {\n            return {\n                ...state,\n                zoom: action.zoom,\n            };\n        }\n        case CARDSET_IMPORT_DATA: {\n            return {\n                ...state,\n                ...action.data,\n            };\n        }\n        default:\n            return state;\n    }\n}\n\nexport function images(state: ImageState = DefaultImageState, action: ImageListAction): ImageState {\n    switch (action.type) {\n        case IMAGE_LIST_REQUEST:\n            return Object.assign({}, state, {\n                filter: action.filter,\n            });\n        case IMAGE_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                images: action.images,\n            });\n        default:\n            return state;\n    }\n}\n\nconst undoableCardset = undoable(cardset, {\n    ignoreInitialState: true,\n    undoType: CARDSET_UNDO,\n    redoType: CARDSET_REDO,\n    groupBy: (action: Action) => {\n        if (\n            action.type === 'CARDSET_CHANGE_FIELD_SIZE' ||\n            action.type === 'CARDSET_CHANGE_FIELD_POSITION' ||\n            action.type === 'CARDSET_CHANGE_FIELD_ANGLE' ||\n            action.type === 'CARDSET_CHANGE_FIELD_ZOOM' ||\n            action.type === 'CARDSET_CHANGE_FIELD_PAN'\n        ) {\n            return action.group;\n        }\n        return null;\n    },\n    filter: (action: Action) => {\n        if (!action.type.startsWith('CARDSET_')) {\n            return false;\n        }\n\n        if (\n            action.type === CARDSET_SELECT_REQUEST ||\n            action.type === CARDSET_SET_ACTIVE_CARD_AND_FIELD ||\n            action.type === CARDSET_SET_SIDEBAR_STATE\n        ) {\n            return false;\n        }\n        return true;\n    },\n});\n\nconst reducers = combineReducers({\n    message,\n    auth,\n    signup,\n    games,\n    cardsets,\n    cardset: undoableCardset,\n    images,\n});\n\nexport default reducers;\n","import { applyMiddleware, compose, createStore, Store } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport { rootSaga } from './sagas';\nimport reducers from './reducers';\n\nexport let store: Store | undefined;\n\nexport function createAppStore() {\n    const sagaMiddleware = createSagaMiddleware();\n    store = createStore(\n        reducers,\n        // @ts-ignore: __REDUX_DEVTOOLS_EXTENSION__ does not exists on window\n        window.__REDUX_DEVTOOLS_EXTENSION__\n            ? compose(\n                  applyMiddleware(sagaMiddleware),\n                  // @ts-ignore: __REDUX_DEVTOOLS_EXTENSION__ does not exists on window\n                  window.__REDUX_DEVTOOLS_EXTENSION__(),\n              )\n            : applyMiddleware(sagaMiddleware),\n    );\n    sagaMiddleware.run(rootSaga);\n    return store;\n}\n","import { Ghost, Browser } from 'react-kawaii';\nimport React, { Component } from 'react';\n\nexport enum Character {\n    Ghost,\n    Browser,\n}\ninterface Props {\n    character: Character;\n    mood?: string;\n}\n\nexport default class KawaiiMessage extends Component<Props> {\n    render() {\n        const { character, mood } = this.props;\n\n        return (\n            <div\n                style={{\n                    marginTop: '1em',\n                    marginBottom: '1em',\n                    padding: '1em',\n                    borderRadius: '1em',\n                    backgroundColor: 'var(--color-2)',\n                    display: 'grid',\n                    grid: 'auto-flow / minmax(120px, auto) 1fr',\n                }}\n            >\n                {character === Character.Ghost && <Ghost size={120} mood={mood || 'blissful'} color=\"#faebef\" />}\n                {character === Character.Browser && <Browser size={120} mood={mood || 'blissful'} color=\"#faebef\" />}\n                <div style={{ marginLeft: '1em' }}>{this.props.children}</div>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nexport default class AboutPage extends Component {\n    render() {\n        return (\n            <div>\n                <h2>About</h2>\n                <p>\n                    \"Card-a-mon\" is card game development tool. At the moment it is project of single person (me) with a\n                    vision. My aim is to create affordable and practical tool to develop card games from A (prototyping)\n                    to Z (printing). If you have ideas, suggestions, proposals, comments and etc. then you can contact\n                    me by e-mail <a href=\"mailto:dalius@ffff.lt\">dalius@ffff.lt</a>.\n                </p>\n                <h2>Credits</h2>\n                This project is available because of number amazing open source projects. Some of them:\n                <ul>\n                    <li>\n                        <a href=\"https://reactjs.org/\">React</a> and all the ecosystem around it.\n                    </li>\n                    <li>\n                        <a href=\"https://fonts.google.com/\">Google Fonts</a>\n                    </li>\n                    <li>\n                        <a href=\"https://github.com/game-icons/icons\">Game icons</a>\n                    </li>\n                    <li>\n                        <a href=\"http://pdfkit.org/\">PDFKit</a>\n                    </li>\n                </ul>\n                <p>... and many more.</p>\n            </div>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React from 'react';\nimport shortid from 'shortid';\n\nimport { Dispatch } from '../actions';\nimport { State } from '../reducers';\nimport panIcon from './pan.svg';\nimport zoomIcon from './zoom.svg';\nimport resizeIcon from './resize.svg';\nimport rotateIcon from './rotate.svg';\nimport style from './FieldController.module.css';\nimport { rotateVec } from '../utils';\n\ninterface OwnProps {\n    cardId: string;\n    fieldId: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    zoom?: number;\n    cx?: number;\n    cy?: number;\n    children: React.ReactNode;\n    onDrag: (x: number, y: number, cardOnly: boolean, group: string) => void;\n    onResize: (width: number, height: number, cardOnly: boolean, group: string) => void;\n    onRotate: (angle: number, cardOnly: boolean, group: string) => void;\n    onZoom?: (zoom: number, cardOnly: boolean, group: string) => void;\n    onPan?: (cx: number, cy: number, cardOnly: boolean, group: string) => void;\n    cardWidth: number;\n    cardHeight: number;\n    ppmm: number;\n}\n\ninterface StateProps {\n    isActive: boolean;\n    isActiveField: boolean;\n    isLocked: boolean;\n    isUnclickable: boolean;\n    snappingDistance: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nexport interface LocalState {\n    startX: number;\n    startY: number;\n    originalAngle: number;\n    activatedUsingTouch: boolean;\n    group: string;\n}\n\nclass FieldController extends React.Component<Props, LocalState> {\n    cDiv: React.RefObject<HTMLDivElement>;\n    panDiv: React.RefObject<HTMLImageElement>;\n    zoomDiv: React.RefObject<HTMLImageElement>;\n    resizeDiv: React.RefObject<HTMLImageElement>;\n    rotateDiv: React.RefObject<HTMLImageElement>;\n    originalBodyCursor: string | null;\n\n    constructor(props: Props) {\n        super(props);\n        this.cDiv = React.createRef();\n        this.panDiv = React.createRef();\n        this.zoomDiv = React.createRef();\n        this.resizeDiv = React.createRef();\n        this.rotateDiv = React.createRef();\n        this.originalBodyCursor = null;\n        this.state = {\n            activatedUsingTouch: false,\n            startX: 0,\n            startY: 0,\n            originalAngle: 0,\n            group: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.cDiv.current === null) return;\n        if (this.panDiv.current === null) return;\n        if (this.zoomDiv.current === null) return;\n        if (this.resizeDiv.current === null) return;\n        if (this.rotateDiv.current === null) return;\n\n        this.originalBodyCursor = document.body.style.cursor;\n\n        this.cDiv.current.addEventListener('mousedown', this.handleMouseDown);\n        this.cDiv.current.addEventListener('touchstart', this.handleTouchStart);\n        this.panDiv.current.addEventListener('mousedown', this.handlePanMouseDown);\n        this.panDiv.current.addEventListener('touchstart', this.handlePanTouchStart);\n        this.zoomDiv.current.addEventListener('mousedown', this.handleZoomMouseDown);\n        this.zoomDiv.current.addEventListener('touchstart', this.handleZoomTouchStart);\n        this.resizeDiv.current.addEventListener('mousedown', this.handleResizeMouseDown);\n        this.resizeDiv.current.addEventListener('touchstart', this.handleResizeTouchStart);\n        this.rotateDiv.current.addEventListener('mousedown', this.handleRotateMouseDown);\n        this.rotateDiv.current.addEventListener('touchstart', this.handleRotateTouchStart);\n    }\n\n    handleBrowserDragStart = (event: React.DragEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    // Dragging handling\n\n    handleMouseDown = (event: MouseEvent) => {\n        this.handleDragStart(event);\n\n        document.addEventListener('mousemove', this.handleMouseMove);\n        document.addEventListener('mouseup', this.handleMouseUp);\n    };\n\n    handleTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleDragStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n    };\n\n    handleDragStart = (co: MouseEvent | Touch) => {\n        if (this.cDiv.current === null) return;\n\n        this.cDiv.current.style.cursor = 'grabbing';\n\n        this.setState({ startX: co.clientX, startY: co.clientY, group: shortid.generate() });\n    };\n\n    handleMouseMove = (event: MouseEvent) => {\n        this.handleDragMove(event, event.ctrlKey);\n    };\n\n    handleTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        event.preventDefault();\n        this.handleDragMove(event.changedTouches[0], event.ctrlKey);\n    };\n\n    handleDragMove = (co: MouseEvent | Touch, disableSnapping: boolean) => {\n        const { isLocked, x, y } = this.props;\n\n        if (isLocked) return;\n\n        const { ppmm, snappingDistance } = this.props;\n\n        let nx = x + co.clientX - this.state.startX;\n        let ny = y + co.clientY - this.state.startY;\n\n        if (!disableSnapping && snappingDistance !== 0) {\n            nx = Math.round(nx / ppmm / snappingDistance) * snappingDistance * ppmm;\n            ny = Math.round(ny / ppmm / snappingDistance) * snappingDistance * ppmm;\n        }\n\n        this.setState({ startX: co.clientX, startY: co.clientY });\n        this.props.onDrag(nx, ny, true, this.state.group);\n    };\n\n    handleMouseUp = (event: MouseEvent) => {\n        this.handleComplete(event, false);\n\n        document.removeEventListener('mousemove', this.handleMouseMove);\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    handleTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleComplete(event, true);\n\n        document.removeEventListener('touchmove', this.handleTouchMove);\n        document.removeEventListener('touchend', this.handleTouchEnd);\n    };\n\n    handleComplete = (event: MouseEvent | TouchEvent, isTouchEvent: boolean) => {\n        const { isLocked, x, y } = this.props;\n\n        if (this.cDiv.current === null) return;\n\n        if (!isLocked) {\n            this.props.onDrag(x, y, false, this.state.group);\n        }\n        this.setState({ activatedUsingTouch: isTouchEvent });\n\n        this.cDiv.current.style.cursor = 'grab';\n    };\n\n    // Pan handling\n\n    handlePanMouseDown = (event: MouseEvent) => {\n        this.handlePanStart(event);\n\n        document.addEventListener('mousemove', this.handlePanMouseMove);\n        document.addEventListener('mouseup', this.handlePanMouseUp);\n        event.stopPropagation();\n    };\n\n    handlePanTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handlePanStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handlePanTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handlePanTouchEnd, { passive: false });\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handlePanStart = (co: MouseEvent | Touch) => {\n        document.body.style.cursor = `url(${panIcon}), auto`;\n\n        this.setState({ startX: co.clientX, startY: co.clientY, group: shortid.generate() });\n    };\n\n    handlePanMouseMove = (event: MouseEvent) => {\n        this.handlePanMove(event);\n        event.preventDefault();\n    };\n\n    handlePanTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handlePanMove(event.changedTouches[0]);\n        event.preventDefault();\n    };\n\n    handlePanMove = (co: MouseEvent | Touch) => {\n        const { cx, cy, angle, onPan } = this.props;\n        if (!onPan || cx === undefined || cy === undefined) return;\n\n        let dx = co.clientX - this.state.startX;\n        let dy = co.clientY - this.state.startY;\n        const { rx, ry } = rotateVec(dx, dy, -angle);\n\n        const newCx = cx + rx;\n        const newCy = cy + ry;\n\n        this.setState({ startX: co.clientX, startY: co.clientY });\n\n        onPan(newCx, newCy, true, this.state.group);\n    };\n\n    handlePanMouseUp = (event: MouseEvent) => {\n        this.handlePanComplete(event);\n\n        document.removeEventListener('mousemove', this.handlePanMouseMove);\n        document.removeEventListener('mouseup', this.handlePanMouseUp);\n    };\n\n    handlePanTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handlePanComplete(event);\n\n        document.removeEventListener('touchmove', this.handlePanTouchMove);\n        document.removeEventListener('touchend', this.handlePanTouchEnd);\n    };\n\n    handlePanComplete = (event: MouseEvent | TouchEvent) => {\n        const { cx, cy, onPan } = this.props;\n        if (onPan && cx !== undefined && cy !== undefined) {\n            onPan(cx, cy, true, this.state.group);\n        }\n\n        document.body.style.cursor = this.originalBodyCursor;\n        event.preventDefault();\n    };\n\n    // Zoom handling\n\n    handleZoomMouseDown = (event: MouseEvent) => {\n        this.handleZoomStart(event);\n\n        document.addEventListener('mousemove', this.handleZoomMouseMove);\n        document.addEventListener('mouseup', this.handleZoomMouseUp);\n        event.stopPropagation();\n    };\n\n    handleZoomTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleZoomStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleZoomTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleZoomTouchEnd, { passive: false });\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handleZoomStart = (co: { clientX: number; clientY: number }) => {\n        document.body.style.cursor = `url(${zoomIcon}), auto`;\n\n        this.setState({ startX: co.clientX, startY: co.clientY, group: shortid.generate() });\n    };\n\n    handleZoomMouseMove = (event: MouseEvent) => {\n        this.handleZoomMove(event);\n        event.preventDefault();\n    };\n\n    handleZoomTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleZoomMove(event.changedTouches[0]);\n        event.preventDefault();\n    };\n\n    handleZoomMove = (co: MouseEvent | Touch) => {\n        const { zoom, onZoom } = this.props;\n        if (!onZoom || zoom === undefined) return;\n\n        const dx = co.clientX - this.state.startX;\n        const dy = co.clientY - this.state.startY;\n\n        let z = Math.abs(dx) > Math.abs(dy) ? dx : dy;\n\n        let newZoom = Math.max(zoom + z / 30, 1);\n        this.setState({ startX: co.clientX, startY: co.clientY });\n\n        onZoom(newZoom, true, this.state.group);\n    };\n\n    handleZoomMouseUp = (event: MouseEvent) => {\n        this.handleZoomComplete(event);\n\n        document.removeEventListener('mousemove', this.handleZoomMouseMove);\n        document.removeEventListener('mouseup', this.handleZoomMouseUp);\n    };\n\n    handleZoomTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleZoomComplete(event);\n\n        document.removeEventListener('touchmove', this.handleZoomTouchMove);\n        document.removeEventListener('touchend', this.handleZoomTouchEnd);\n    };\n\n    handleZoomComplete = (event: Event) => {\n        document.body.style.cursor = this.originalBodyCursor;\n        event.preventDefault();\n    };\n\n    // Resize handling\n\n    handleResizeMouseDown = (event: MouseEvent) => {\n        this.handleResizeStart(event);\n\n        document.addEventListener('mousemove', this.handleResizeMouseMove);\n        document.addEventListener('mouseup', this.handleResizeMouseUp);\n        event.stopPropagation();\n    };\n\n    handleResizeTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleResizeStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleResizeTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleResizeTouchEnd, { passive: false });\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handleResizeStart = (co: MouseEvent | Touch) => {\n        const { isLocked } = this.props;\n\n        if (isLocked) return;\n\n        document.body.style.cursor = `url(${resizeIcon}), auto`;\n\n        this.setState({ startX: co.clientX, startY: co.clientY, group: shortid.generate() });\n    };\n\n    handleResizeMouseMove = (event: MouseEvent) => {\n        this.handleResizeMove(event, event.ctrlKey);\n        event.preventDefault();\n    };\n\n    handleResizeTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleResizeMove(event.changedTouches[0], event.ctrlKey);\n        event.preventDefault();\n    };\n\n    handleResizeMove = (co: { clientX: number; clientY: number }, disableSnapping: boolean) => {\n        const { isLocked, ppmm, width, height, angle, snappingDistance, onResize } = this.props;\n\n        if (isLocked) return;\n\n        const dx = co.clientX - this.state.startX;\n        const dy = co.clientY - this.state.startY;\n\n        const { rx, ry } = rotateVec(dx, dy, -angle);\n\n        let newWidth = width + rx;\n        let newHeight = height + ry;\n\n        if (!disableSnapping && snappingDistance !== 0) {\n            newWidth = Math.round(newWidth / ppmm / snappingDistance) * snappingDistance * ppmm;\n            newHeight = Math.round(newHeight / ppmm / snappingDistance) * snappingDistance * ppmm;\n        }\n\n        this.setState({ startX: co.clientX, startY: co.clientY });\n\n        onResize(newWidth, newHeight, true, this.state.group);\n    };\n\n    handleResizeMouseUp = (event: MouseEvent) => {\n        this.handleResizeComplete(event);\n\n        document.removeEventListener('mousemove', this.handleResizeMouseMove);\n        document.removeEventListener('mouseup', this.handleResizeMouseUp);\n    };\n\n    handleResizeTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleResizeComplete(event);\n\n        document.removeEventListener('touchmove', this.handleResizeTouchMove);\n        document.removeEventListener('touchend', this.handleResizeTouchEnd);\n    };\n\n    handleResizeComplete = (event: Event) => {\n        const { isLocked } = this.props;\n\n        if (!isLocked) {\n            const { width, height, onResize } = this.props;\n            onResize(width, height, false, this.state.group);\n        }\n\n        document.body.style.cursor = this.originalBodyCursor;\n\n        event.preventDefault();\n    };\n\n    // Rotation handling\n\n    handleRotateMouseDown = (event: MouseEvent) => {\n        this.handleRotateStart(event);\n\n        document.addEventListener('mousemove', this.handleRotateMouseMove);\n        document.addEventListener('mouseup', this.handleRotateMouseUp);\n        event.stopPropagation();\n    };\n\n    handleRotateTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleRotateStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleRotateTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleRotateTouchEnd, { passive: false });\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handleRotateStart = (co: { clientX: number; clientY: number }) => {\n        const { isLocked, angle } = this.props;\n\n        if (isLocked || this.cDiv.current === null) return;\n\n        document.body.style.cursor = `url(${rotateIcon}), auto`;\n\n        const rect = this.cDiv.current.getBoundingClientRect();\n        let startX = rect.left + this.cDiv.current.clientWidth / 2;\n        let startY = rect.top + this.cDiv.current.clientHeight / 2;\n\n        let originalAngle = angle + Math.atan2(startX - co.clientX, startY - co.clientY);\n\n        this.setState({ startX, startY, originalAngle, group: shortid.generate() });\n    };\n\n    handleRotateMouseMove = (event: MouseEvent) => {\n        this.handleRotateMove(event, event.ctrlKey);\n        event.preventDefault();\n    };\n\n    handleRotateTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleRotateMove(event.changedTouches[0], event.ctrlKey);\n        event.preventDefault();\n    };\n\n    handleRotateMove = (co: MouseEvent | Touch, disableSnapping: boolean) => {\n        const { isLocked, onRotate } = this.props;\n\n        if (isLocked) return;\n\n        const { originalAngle, startX, startY } = this.state;\n\n        let curAngle = Math.atan2(startX - co.clientX, startY - co.clientY);\n        let newAngle = originalAngle - curAngle;\n\n        if (!disableSnapping) {\n            newAngle = ((Math.round(((newAngle / Math.PI) * 180) / 5) * 5) / 180) * Math.PI;\n        }\n\n        onRotate(newAngle, true, this.state.group);\n    };\n\n    handleRotateMouseUp = (event: MouseEvent) => {\n        this.handleRotateComplete(event);\n\n        document.removeEventListener('mousemove', this.handleRotateMouseMove);\n        document.removeEventListener('mouseup', this.handleRotateMouseUp);\n    };\n\n    handleRotateTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleRotateComplete(event);\n\n        document.removeEventListener('touchmove', this.handleRotateTouchMove);\n        document.removeEventListener('touchend', this.handleRotateTouchEnd);\n    };\n\n    handleRotateComplete = (event: Event) => {\n        const { isLocked } = this.props;\n\n        if (!isLocked) {\n            const { angle } = this.props;\n            this.props.onRotate(angle, false, this.state.group);\n        }\n\n        document.body.style.cursor = this.originalBodyCursor;\n\n        event.preventDefault();\n    };\n\n    // Rendering\n\n    render() {\n        const {\n            x,\n            y,\n            width,\n            height,\n            angle,\n            zoom,\n            cx,\n            children,\n            isActive,\n            isActiveField,\n            isLocked,\n            isUnclickable,\n        } = this.props;\n\n        return (\n            <div\n                ref={this.cDiv}\n                onDragStart={this.handleBrowserDragStart}\n                className={`${style.fieldcontroller} ${isActiveField ? style.fieldcontrolleractivefield : ''} ${\n                    isActive ? style.fieldcontrolleractive : ''\n                } ${isActive && this.state.activatedUsingTouch ? style.touchactivated : ''} `}\n                style={{\n                    position: 'absolute',\n                    left: x,\n                    top: y,\n                    width: width,\n                    height: height,\n                    cursor: 'grab',\n                    transform: `rotate(${angle}rad)`,\n                    pointerEvents: isUnclickable ? 'none' : 'initial',\n                }}\n            >\n                {children}\n                <img\n                    src={panIcon}\n                    alt=\"pan\"\n                    ref={this.panDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        left: 0,\n                        top: 0,\n                        cursor: `url(${panIcon}), auto`,\n                        display: cx !== undefined && zoom !== undefined ? 'initial' : 'none',\n                    }}\n                />\n\n                <img\n                    src={zoomIcon}\n                    alt=\"zoom\"\n                    ref={this.zoomDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        right: 0,\n                        top: 0,\n                        cursor: `url(${zoomIcon}), auto`,\n                        display: zoom !== undefined ? 'initial' : 'none',\n                    }}\n                />\n\n                <img\n                    src={resizeIcon}\n                    alt=\"resize\"\n                    ref={this.resizeDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        right: 0,\n                        bottom: 0,\n                        cursor: `url(${resizeIcon}), auto`,\n                        display: isLocked ? 'none' : 'initial',\n                    }}\n                />\n                <img\n                    src={rotateIcon}\n                    alt=\"rotate\"\n                    ref={this.rotateDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        left: 0,\n                        bottom: 0,\n                        cursor: `url(${rotateIcon}), auto`,\n                        display: isLocked ? 'none' : 'initial',\n                    }}\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    const isActiveField = props.fieldId === state.cardset.present.activeFieldId;\n    const isActive =\n        props.cardId === state.cardset.present.activeCardId && props.fieldId === state.cardset.present.activeFieldId;\n    const fieldInfo = state.cardset.present.fields[props.cardId][props.fieldId];\n    const isLocked = fieldInfo.locked === true;\n    const isUnclickable = fieldInfo.unclickable === true;\n\n    return {\n        isActive,\n        isActiveField,\n        isLocked,\n        isUnclickable,\n        snappingDistance: state.cardset.present.snappingDistance,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(FieldController);\n","import { connect } from 'react-redux';\nimport React, { PureComponent } from 'react';\n\nimport {\n    Dispatch,\n    cardSetActiveCardAndField,\n    cardSetChangeImage,\n    cardSetChangeFieldPosition,\n    cardSetChangeFieldAngle,\n    cardSetChangeFieldPan,\n    cardSetChangeFieldZoom,\n    cardSetChangeFieldSize,\n} from '../actions';\nimport { ImageInfo, ImageFieldInfo } from '../types';\nimport { State } from '../reducers';\nimport FieldController from './FieldController';\nimport emptyImageImage from './image.svg';\nimport style from './ImageField.module.css';\nimport { calculateImageDimensions } from '../utils';\n\ninterface OwnProps {\n    cardId: string;\n    isOnBack: boolean;\n    ppmm: number;\n    imageFieldInfo: ImageFieldInfo;\n    cardWidth: number;\n    cardHeight: number;\n}\n\ninterface StateProps {\n    imageUrl?: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface LocalState {\n    dragIsOver: boolean;\n    wasMoved: boolean;\n    x: number;\n    y: number;\n}\n\nclass ImageField extends PureComponent<Props, LocalState> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            dragIsOver: false,\n            wasMoved: false,\n            x: 0,\n            y: 0,\n        };\n    }\n\n    handleDrag = (x: number, y: number, cardOnly: boolean, group: string) => {\n        const { dispatch, cardId, imageFieldInfo, ppmm } = this.props;\n        dispatch(\n            cardSetChangeFieldPosition(cardOnly ? cardId : undefined, imageFieldInfo.id, x / ppmm, y / ppmm, group),\n        );\n    };\n\n    handlePan = (cx: number, cy: number, cardOnly: boolean, group: string) => {\n        const { dispatch, cardId, imageFieldInfo, ppmm } = this.props;\n        dispatch(cardSetChangeFieldPan(cardOnly ? cardId : undefined, imageFieldInfo.id, cx / ppmm, cy / ppmm, group));\n    };\n\n    handleZoom = (zoom: number, cardOnly: boolean, group: string) => {\n        const { dispatch, cardId, imageFieldInfo } = this.props;\n        dispatch(cardSetChangeFieldZoom(cardOnly ? cardId : undefined, imageFieldInfo.id, zoom, group));\n    };\n\n    handleResize = (width: number, height: number, cardOnly: boolean, group: string) => {\n        const { dispatch, imageFieldInfo, cardId, ppmm } = this.props;\n        dispatch(\n            cardSetChangeFieldSize(\n                cardOnly ? cardId : undefined,\n                imageFieldInfo.id,\n                width / ppmm,\n                height / ppmm,\n                group,\n            ),\n        );\n    };\n\n    handleRotate = (angle: number, cardOnly: boolean, group: string) => {\n        const { dispatch, cardId, imageFieldInfo } = this.props;\n        dispatch(cardSetChangeFieldAngle(cardOnly ? cardId : undefined, imageFieldInfo.id, angle, group));\n    };\n\n    handleMouseDown = () => {\n        this.setState({ wasMoved: false });\n    };\n\n    handleTouchStart = (event: React.TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.setState({ wasMoved: false, x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY });\n    };\n\n    handleMouseMove = () => {\n        this.setState({ wasMoved: true });\n    };\n\n    handleTouchMove = (event: React.TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        const { x, y } = this.state;\n        if (Math.abs(event.changedTouches[0].clientX - x) > 3 || Math.abs(event.changedTouches[0].clientY - y) > 3) {\n            this.setState({ wasMoved: true });\n        }\n    };\n\n    handleMouseUp = () => {\n        this.handleComplete();\n    };\n\n    handleTouchEnd = (event: React.TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleComplete();\n    };\n\n    handleComplete = () => {\n        const { dispatch, cardId, isOnBack, imageFieldInfo } = this.props;\n        if (!this.state.wasMoved) {\n            dispatch(cardSetActiveCardAndField(cardId, isOnBack, imageFieldInfo.id));\n        }\n    };\n\n    handleDragOver = (event: React.DragEvent<HTMLDivElement>) => {\n        this.setState({ dragIsOver: true });\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDragLeave = (event: React.DragEvent<HTMLDivElement>) => {\n        this.setState({ dragIsOver: false });\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\n        this.setState({ dragIsOver: false });\n        event.preventDefault();\n        event.stopPropagation();\n\n        const url = event.dataTransfer.getData('URL');\n        const imagefilesPos = url.indexOf('/api/imagefiles/');\n\n        if (imagefilesPos !== -1) {\n            const { cardId, imageFieldInfo, dispatch } = this.props;\n            let img = new Image();\n\n            img.addEventListener('load', function() {\n                const ii: ImageInfo = {\n                    url: url.substr(imagefilesPos),\n                    width: this.naturalWidth,\n                    height: this.naturalHeight,\n                };\n                dispatch(cardSetChangeImage(cardId, imageFieldInfo.id, ii));\n            });\n            img.src = url;\n        }\n    };\n\n    render() {\n        const { imageFieldInfo, imageUrl, ppmm, cardWidth, cardHeight } = this.props;\n\n        let dim = calculateImageDimensions(imageFieldInfo);\n        let calculatedImageWidth = dim.width * ppmm;\n        let calculatedImageHeight = dim.height * ppmm;\n\n        return (\n            <FieldController\n                cardId={this.props.cardId}\n                fieldId={imageFieldInfo.id}\n                x={imageFieldInfo.x * ppmm}\n                y={imageFieldInfo.y * ppmm}\n                width={imageFieldInfo.width * ppmm}\n                height={imageFieldInfo.height * ppmm}\n                cx={(imageFieldInfo.cx || 0) * ppmm}\n                cy={(imageFieldInfo.cy || 0) * ppmm}\n                zoom={imageFieldInfo.zoom || 1}\n                angle={imageFieldInfo.angle}\n                onDrag={this.handleDrag}\n                onPan={this.handlePan}\n                onZoom={this.handleZoom}\n                onResize={this.handleResize}\n                onRotate={this.handleRotate}\n                cardWidth={cardWidth}\n                cardHeight={cardHeight}\n                ppmm={ppmm}\n            >\n                <div\n                    style={{\n                        width: '100%',\n                        height: '100%',\n                        position: 'relative',\n                        overflow: imageFieldInfo.crop ? 'hidden' : 'visible',\n                    }}\n                    className={this.state.dragIsOver ? style.over : ''}\n                    onMouseDown={this.handleMouseDown}\n                    onTouchStart={this.handleTouchStart}\n                    onMouseMove={this.handleMouseMove}\n                    onTouchMove={this.handleTouchMove}\n                    onMouseUp={this.handleMouseUp}\n                    onTouchEnd={this.handleTouchEnd}\n                    onDragOver={this.handleDragOver}\n                    onDragLeave={this.handleDragLeave}\n                    onDrop={this.handleDrop}\n                >\n                    <img\n                        style={{\n                            position: 'absolute',\n                            opacity: imageUrl && imageUrl.length > 0 ? 1 : 0.5,\n                            left: (imageFieldInfo.cx || 0) * ppmm,\n                            top: (imageFieldInfo.cy || 0) * ppmm,\n                            width: calculatedImageWidth,\n                            height: calculatedImageHeight,\n                        }}\n                        src={imageUrl || emptyImageImage}\n                        alt=\"\"\n                    />\n                </div>\n            </FieldController>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    let imageUrl: string | undefined = '';\n    if (props.imageFieldInfo && props.imageFieldInfo.type === 'image') {\n        if (props.imageFieldInfo.base64) {\n            imageUrl = 'data:image/svg+xml;base64,' + props.imageFieldInfo.base64;\n        } else {\n            imageUrl = props.imageFieldInfo && props.imageFieldInfo.url;\n        }\n    }\n\n    return {\n        imageUrl,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(ImageField);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE, DEFAULT_LINE_HEIGHT } from '../constants';\nimport { Dispatch, cardSetActiveCardAndField, cardSetChangeText } from '../actions';\nimport { State } from '../reducers';\nimport { TextInfo } from '../types';\nimport style from './ContentEditable.module.css';\n\ninterface OwnProps {\n    cardId: string;\n    isOnBack: boolean;\n    fieldId: string;\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n    lineHeight: number;\n}\n\ninterface StateProps {\n    isActive: boolean;\n    textValue: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass ContentEditable extends Component<Props> {\n    editDiv: React.RefObject<HTMLDivElement>;\n    currentText: string;\n    currentAlign: string;\n    currentColor: string;\n    currentFontFamily: string;\n    currentFontVariant: string;\n    currentFontSize: number;\n    currentLineHeight: number;\n    timeout: NodeJS.Timeout | null;\n    wasMoved: boolean;\n    x: number;\n    y: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.editDiv = React.createRef();\n        this.currentText = '';\n        this.currentAlign = '';\n        this.currentColor = '';\n        this.currentFontFamily = '';\n        this.currentFontVariant = '';\n        this.currentFontSize = DEFAULT_FONT_SIZE;\n        this.currentLineHeight = DEFAULT_LINE_HEIGHT;\n        this.timeout = null;\n        this.wasMoved = false;\n        this.x = 0;\n        this.y = 0;\n    }\n\n    componentDidMount() {\n        const { isActive } = this.props;\n\n        if (!this.editDiv.current) return;\n\n        this.editDiv.current.addEventListener('mousedown', this.handleMouseDown);\n        this.editDiv.current.addEventListener('touchstart', this.handleTouchStart);\n        this.editDiv.current.addEventListener('mousemove', this.handleMouseMove);\n        this.editDiv.current.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        this.editDiv.current.addEventListener('mouseup', this.handleMouseUp);\n        this.editDiv.current.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n\n        if (isActive) {\n            this.editDiv.current.focus();\n        }\n    }\n\n    shouldComponentUpdate(nextProps: Props) {\n        const shouldUpdate =\n            nextProps.textValue !== this.currentText ||\n            nextProps.align !== this.currentAlign ||\n            nextProps.color !== this.currentColor ||\n            nextProps.fontFamily !== this.currentFontFamily ||\n            nextProps.fontVariant !== this.currentFontVariant ||\n            nextProps.fontSize !== this.currentFontSize ||\n            nextProps.lineHeight !== this.currentLineHeight ||\n            this.props.isActive !== nextProps.isActive;\n\n        return shouldUpdate;\n    }\n\n    componentDidUpdate() {\n        const { textValue, align, color, fontFamily, fontVariant, fontSize, lineHeight } = this.props;\n        this.currentText = textValue;\n        this.currentAlign = align;\n        this.currentColor = color;\n        this.currentFontFamily = fontFamily;\n        this.currentFontVariant = fontVariant;\n        this.currentFontSize = fontSize;\n        this.currentLineHeight = lineHeight;\n    }\n\n    handleMouseDown = (event: MouseEvent) => {\n        this.handleStart(event);\n    };\n\n    handleTouchStart = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.x = event.changedTouches[0].clientX;\n        this.y = event.changedTouches[0].clientY;\n        this.handleStart(event);\n    };\n\n    handleStart = (event: Event) => {\n        const { isActive } = this.props;\n        if (isActive) {\n            event.stopPropagation();\n        } else {\n            this.wasMoved = false;\n            event.preventDefault();\n        }\n    };\n\n    handleMouseMove = (event: MouseEvent) => {\n        this.handleMove(event);\n    };\n\n    handleTouchMove = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        if (\n            Math.abs(event.changedTouches[0].clientX - this.x) > 3 ||\n            Math.abs(event.changedTouches[0].clientY - this.y) > 3\n        ) {\n            this.handleMove(event);\n        }\n    };\n\n    handleMove = (event: Event) => {\n        const { isActive } = this.props;\n        if (!isActive) {\n            this.wasMoved = true;\n            event.preventDefault();\n        }\n    };\n\n    handleMouseUp = (event: MouseEvent) => {\n        this.handleComplete(event);\n    };\n\n    handleTouchEnd = (event: TouchEvent) => {\n        if (event.touches.length > 1) {\n            return; // Let's ignore zooms\n        }\n\n        this.handleComplete(event);\n    };\n\n    handleComplete = (event: Event) => {\n        const { dispatch, cardId, isOnBack, fieldId, isActive } = this.props;\n        if (!isActive && !this.wasMoved) {\n            event.preventDefault();\n            dispatch(cardSetActiveCardAndField(cardId, isOnBack, fieldId));\n\n            if (!this.editDiv.current) return;\n            this.editDiv.current.focus();\n        }\n    };\n\n    onFocus = () => {\n        if (!this.editDiv.current) return;\n\n        const { textValue, align, color, fontFamily, fontVariant, fontSize } = this.props;\n        this.currentText = textValue;\n        this.currentAlign = align;\n        this.currentColor = color;\n        this.currentFontFamily = fontFamily;\n        this.currentFontVariant = fontVariant;\n        this.currentFontSize = fontSize;\n\n        const range = document.createRange();\n        range.selectNodeContents(this.editDiv.current);\n        range.collapse(false);\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n\n    updateContent = (timeoutInMiliseconds: number) => {\n        if (!this.editDiv.current) return;\n        let value = this.editDiv.current.innerHTML;\n\n        let imgUrlIdx = -1;\n        while ((imgUrlIdx = value.indexOf('<img src=\"http')) !== -1) {\n            value = value.slice(0, imgUrlIdx + 10) + value.slice(value.indexOf('/', imgUrlIdx + 18));\n        }\n\n        if (value !== this.currentText) {\n            this.currentText = value;\n\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            }\n\n            this.timeout = setTimeout(() => {\n                const { dispatch, cardId, fieldId } = this.props;\n                const textInfo: TextInfo = { value };\n\n                dispatch(cardSetChangeText(cardId, fieldId, textInfo));\n            }, timeoutInMiliseconds);\n        }\n    };\n\n    handleBlur = () => {\n        this.updateContent(0);\n    };\n\n    handleInput = () => {\n        this.updateContent(500);\n    };\n\n    handlePaste = (event: React.ClipboardEvent) => {\n        function escapeHtml(unsafe: string) {\n            return unsafe\n                .replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#039;');\n        }\n\n        event.preventDefault();\n\n        let text = '';\n        text = event.clipboardData.getData('text/plain');\n\n        text = text\n            .split('\\n')\n            .map((s: string) => `<div>${escapeHtml(s)}</div>`)\n            .join('');\n        document.execCommand('insertHTML', false, text);\n    };\n\n    render() {\n        const { color, align, fontFamily, fontVariant, fontSize, lineHeight } = this.props;\n        const isItalic = fontVariant && fontVariant.indexOf('italic') !== -1;\n        const fontWeight = isItalic\n            ? fontVariant === 'italic'\n                ? 400\n                : parseInt(fontVariant.slice(0, 3))\n            : fontVariant === 'regular'\n            ? 400\n            : parseInt(fontVariant);\n\n        return (\n            <div\n                ref={this.editDiv}\n                className={style.content}\n                contentEditable={true}\n                onFocus={this.onFocus}\n                onBlur={this.handleBlur}\n                onInput={this.handleInput}\n                onPaste={this.handlePaste}\n                style={{\n                    width: '100%',\n                    height: '100%',\n                    textAlign: align === 'left' ? 'left' : align === 'right' ? 'right' : 'center',\n                    color: color,\n                    fontFamily: `'${fontFamily}'` || DEFAULT_FONT,\n                    fontStyle: isItalic ? 'italic' : 'normal',\n                    fontWeight,\n                    fontSize: `${fontSize}px`,\n                    outline: 'none',\n                    overflowWrap: 'break-word',\n                    lineHeight,\n                }}\n                dangerouslySetInnerHTML={{ __html: this.props.textValue }}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    let fieldInfo = state.cardset.present.fields[props.cardId][props.fieldId];\n    const textValue = fieldInfo.type === 'text' ? fieldInfo.value : '';\n    return {\n        textValue,\n        isActive:\n            props.cardId === state.cardset.present.activeCardId &&\n            props.fieldId === state.cardset.present.activeFieldId,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(ContentEditable);\n","import { connect } from 'react-redux';\nimport React, { PureComponent } from 'react';\n\nimport { DEFAULT_LINE_HEIGHT } from '../constants';\nimport { Dispatch, cardSetChangeFieldAngle, cardSetChangeFieldPosition, cardSetChangeFieldSize } from '../actions';\nimport { State } from '../reducers';\nimport { TextFieldInfo } from '../types';\nimport ContentEditable from './ContentEditable';\nimport FieldController from './FieldController';\nimport emptyTextImage from './text.svg';\n\ninterface OwnProps {\n    cardId: string;\n    isOnBack: boolean;\n    ppmm: number;\n    textFieldInfo: TextFieldInfo;\n    cardWidth: number;\n    cardHeight: number;\n}\n\ninterface StateProps {\n    text: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass TextField extends PureComponent<Props> {\n    handleDrag = (x: number, y: number, cardOnly: boolean, group: string) => {\n        const { dispatch, cardId, textFieldInfo, ppmm } = this.props;\n        dispatch(\n            cardSetChangeFieldPosition(cardOnly ? cardId : undefined, textFieldInfo.id, x / ppmm, y / ppmm, group),\n        );\n    };\n\n    handleResize = (width: number, height: number, cardOnly: boolean, group: string) => {\n        const { dispatch, textFieldInfo, cardId, ppmm } = this.props;\n        dispatch(\n            cardSetChangeFieldSize(cardOnly ? cardId : undefined, textFieldInfo.id, width / ppmm, height / ppmm, group),\n        );\n    };\n\n    handleRotate = (angle: number, cardOnly: boolean, group: string) => {\n        const { dispatch, textFieldInfo, cardId } = this.props;\n        dispatch(cardSetChangeFieldAngle(cardOnly ? cardId : undefined, textFieldInfo.id, angle, group));\n    };\n\n    render() {\n        const { textFieldInfo, text, ppmm, cardWidth, cardHeight } = this.props;\n\n        return (\n            <FieldController\n                cardId={this.props.cardId}\n                fieldId={textFieldInfo.id}\n                x={textFieldInfo.x * ppmm}\n                y={textFieldInfo.y * ppmm}\n                width={textFieldInfo.width * ppmm}\n                height={textFieldInfo.height * ppmm}\n                angle={textFieldInfo.angle}\n                onDrag={this.handleDrag}\n                onResize={this.handleResize}\n                onRotate={this.handleRotate}\n                cardWidth={cardWidth}\n                cardHeight={cardHeight}\n                ppmm={ppmm}\n            >\n                {text === '' && (\n                    <div\n                        style={{\n                            width: '100%',\n                            height: '100%',\n                            position: 'fixed',\n                            left: 0,\n                            top: 0,\n                            zIndex: -1,\n                            textAlign:\n                                textFieldInfo.align === 'left'\n                                    ? 'left'\n                                    : textFieldInfo.align === 'right'\n                                    ? 'right'\n                                    : 'center',\n                        }}\n                    >\n                        <img style={{ opacity: 0.5, width: 'auto', height: '100%' }} src={emptyTextImage} alt=\"\" />\n                    </div>\n                )}\n\n                <ContentEditable\n                    cardId={this.props.cardId}\n                    isOnBack={this.props.isOnBack}\n                    fieldId={textFieldInfo.id}\n                    align={textFieldInfo.align}\n                    color={textFieldInfo.color}\n                    fontFamily={textFieldInfo.fontFamily}\n                    fontVariant={textFieldInfo.fontVariant}\n                    fontSize={textFieldInfo.fontSize * ppmm}\n                    lineHeight={textFieldInfo.lineHeight || DEFAULT_LINE_HEIGHT}\n                />\n            </FieldController>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    let fieldInfo = state.cardset.present.fields[props.cardId][props.textFieldInfo.id];\n    let text = fieldInfo.type === 'text' ? fieldInfo.value : '';\n    return {\n        text,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(TextField);\n","import { connect } from 'react-redux';\nimport Measure from 'react-measure';\nimport React, { Component } from 'react';\n\nimport { BLEED_WIDTH } from '../constants';\nimport { CardType, IdsArray, FieldInfoCollection } from '../types';\nimport { Dispatch, cardSetActiveCardAndField } from '../actions';\nimport { State } from '../reducers';\nimport ImageField from './ImageField';\nimport TextField from './TextField';\nimport style from './Card.module.css';\n\ninterface OwnProps {\n    card: CardType;\n    isBack: boolean;\n}\n\ninterface StateProps {\n    cardFields: FieldInfoCollection;\n    fieldsIds: IdsArray;\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    isActiveCard: boolean;\n    zoom: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface LocalState {\n    dimensions: {\n        width: number;\n        height: number;\n    };\n}\n\nclass Card extends Component<Props, LocalState> {\n    state = {\n        dimensions: {\n            width: -1,\n            height: -1,\n        },\n    };\n\n    handleFieldDeselect = (event: React.MouseEvent | React.TouchEvent) => {\n        const { dispatch, card, isBack } = this.props;\n        const el = event.target as HTMLElement;\n        if (el.getAttribute('id') === `card_${card.id}`) {\n            dispatch(cardSetActiveCardAndField(card.id, isBack, undefined));\n            event.stopPropagation();\n        }\n    };\n\n    render() {\n        const { cardFields, fieldsIds, card, isBack, width, height, isActiveCard, zoom, isTwoSided } = this.props;\n        const widthWithBleeds = width + BLEED_WIDTH * 2;\n        const heightWithBleeds = height + BLEED_WIDTH * 2;\n\n        const ppmm = this.state.dimensions.width / widthWithBleeds;\n\n        return (\n            <div>\n                <Measure\n                    client\n                    onResize={contentRect => {\n                        if (!contentRect.client) {\n                            return;\n                        }\n                        this.setState({ dimensions: contentRect.client });\n                    }}\n                >\n                    {({ measureRef }) => (\n                        <div\n                            className={`${style.card} ${isActiveCard ? style.active : ''}`}\n                            id={`card_${card.id}`}\n                            ref={measureRef}\n                            style={{\n                                width: `${widthWithBleeds * zoom}mm`,\n                                height: `${heightWithBleeds * zoom}mm`,\n                                position: 'relative',\n                                overflow: 'hidden',\n                            }}\n                            onMouseDown={this.handleFieldDeselect}\n                            onTouchStart={this.handleFieldDeselect}\n                        >\n                            {fieldsIds.map(id => {\n                                if (!(id in cardFields)) {\n                                    return null;\n                                }\n                                const p = cardFields[id];\n                                if (p.type === 'image') {\n                                    return (\n                                        <ImageField\n                                            key={p.id}\n                                            cardId={card.id}\n                                            isOnBack={isBack}\n                                            imageFieldInfo={p}\n                                            ppmm={ppmm}\n                                            cardWidth={this.state.dimensions.width}\n                                            cardHeight={this.state.dimensions.height}\n                                        />\n                                    );\n                                } else if (p.type === 'text') {\n                                    return (\n                                        <TextField\n                                            key={p.id}\n                                            cardId={card.id}\n                                            isOnBack={isBack}\n                                            textFieldInfo={p}\n                                            ppmm={ppmm}\n                                            cardWidth={this.state.dimensions.width}\n                                            cardHeight={this.state.dimensions.height}\n                                        />\n                                    );\n                                }\n                                return null;\n                            })}\n\n                            <div\n                                style={{\n                                    position: 'absolute',\n                                    width: `${width * zoom}mm`,\n                                    height: `${height * zoom}mm`,\n                                    left: `${BLEED_WIDTH * zoom}mm`,\n                                    top: `${BLEED_WIDTH * zoom}mm`,\n                                    border: '1px dashed black',\n                                    borderRadius: '5mm',\n                                    pointerEvents: 'none',\n                                }}\n                            />\n\n                            <div\n                                style={{\n                                    position: 'absolute',\n                                    width: `${(width - BLEED_WIDTH * 2) * zoom}mm`,\n                                    height: `${(height - BLEED_WIDTH * 2) * zoom}mm`,\n                                    left: `${BLEED_WIDTH * 2 * zoom}mm`,\n                                    top: `${BLEED_WIDTH * 2 * zoom}mm`,\n                                    border: '1px dashed red',\n                                    borderRadius: '5mm',\n                                    pointerEvents: 'none',\n                                }}\n                            />\n                        </div>\n                    )}\n                </Measure>\n                {isTwoSided && (\n                    <div\n                        className={style.title}\n                        style={{\n                            width: `${widthWithBleeds * zoom}mm`,\n                            position: 'relative',\n                        }}\n                    >\n                        {isBack ? 'Back' : 'Front'}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    let cardFields = state.cardset.present.fields[props.card.id] || {};\n\n    return {\n        cardFields,\n        fieldsIds: state.cardset.present.fieldsAllIds.filter(\n            id => ((id in cardFields && cardFields[id].isOnBack) || false) === props.isBack,\n        ),\n        width: state.cardset.present.width,\n        height: state.cardset.present.height,\n        isTwoSided: state.cardset.present.isTwoSided,\n        isActiveCard:\n            state.cardset.present.activeCardId === props.card.id && state.cardset.present.isBackActive === props.isBack,\n        zoom: state.cardset.present.zoom,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(Card);\n","import React, { Component } from 'react';\nimport style from './EditableTitle.module.css';\n\ninterface Props {\n    title: string;\n    onChange: (newName: string) => void;\n}\n\nexport default class EditableTitle extends Component<Props> {\n    state = {\n        titleIsEdited: false,\n    };\n\n    handleClick = () => {\n        this.setState({ titleIsEdited: true });\n    };\n\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.props.onChange(event.target.value);\n    };\n\n    handleBlur = () => {\n        this.setState({ titleIsEdited: false });\n    };\n\n    render() {\n        const { titleIsEdited } = this.state;\n        const { title } = this.props;\n\n        return (\n            <>\n                {!titleIsEdited && (\n                    <h1 className={style.input} onClick={this.handleClick}>\n                        {title}\n                    </h1>\n                )}\n                {titleIsEdited && (\n                    <input\n                        autoFocus\n                        type=\"text\"\n                        className={style.input}\n                        value={title}\n                        onChange={this.handleChange}\n                        onBlur={this.handleBlur}\n                    />\n                )}\n            </>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nimport style from './Loader.module.css';\n\ninterface Props {\n    fixed?: boolean;\n    small?: boolean;\n}\n\nexport default class Loader extends Component<Props> {\n    render() {\n        const { fixed, small } = this.props;\n\n        return (\n            <div className={`${style.loader} ${fixed ? style.fixed : style.relative} ${small ? style.small : ''}`}>\n                <div />\n                <div />\n            </div>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardType, DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport {\n    cardSetCloneCard,\n    cardSetRemoveCard,\n    cardSetUpdateCardCount,\n    cardSetRotateCardsRight,\n    cardSetRotateCardsLeft,\n    cardSetRedo,\n    cardSetUndo,\n} from '../actions';\nimport style from './SidebarDetails.module.css';\n\ninterface StateProps {\n    activeCard: CardType | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarDetails extends Component<Props> {\n    handleRotateRightClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetRotateCardsRight());\n    };\n\n    handleRotateLeftClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetRotateCardsLeft());\n    };\n\n    handleCloneCardClick = () => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetCloneCard(activeCard));\n        }\n    };\n\n    handleRemoveCardClick = () => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetRemoveCard(activeCard));\n        }\n    };\n\n    handleCountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetUpdateCardCount(activeCard, parseInt(event.target.value)));\n        }\n    };\n\n    handleUndoClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetUndo());\n    };\n\n    handleRedoClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetRedo());\n    };\n\n    render() {\n        const { activeCard, visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                <div>\n                    <button\n                        onClick={this.handleCloneCardClick}\n                        title=\"Clone card\"\n                        className={activeCard === null ? style.disabled : ''}\n                    >\n                        <i className=\"material-icons\">file_copy</i>\n                    </button>\n\n                    <input\n                        type=\"number\"\n                        value={activeCard !== null ? activeCard.count.toString() : 0}\n                        onChange={this.handleCountChange}\n                        title=\"Number of card's copies\"\n                        className={activeCard === null ? style.disabled : ''}\n                    />\n                    <button\n                        onClick={this.handleRemoveCardClick}\n                        title=\"Remove card\"\n                        className={activeCard === null ? style.disabled : ''}\n                    >\n                        <i className=\"material-icons\">delete</i>\n                    </button>\n                </div>\n\n                <div>\n                    <button onClick={this.handleUndoClick} title=\"Undo (Ctrl+Z)\">\n                        <i className=\"material-icons\">undo</i>\n                    </button>\n\n                    <button onClick={this.handleRedoClick} title=\"Redo (Ctrl+Shift+Z or Ctrl+Y)\">\n                        <i className=\"material-icons\">redo</i>\n                    </button>\n                </div>\n\n                <div>\n                    <button onClick={this.handleRotateRightClick} title=\"Rotate cards right\">\n                        <i className=\"material-icons\">rotate_right</i>\n                    </button>\n\n                    <button onClick={this.handleRotateLeftClick} title=\"Rotate cards left\">\n                        <i className=\"material-icons\">rotate_left</i>\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeCard:\n            state.cardset.present.activeCardId !== undefined\n                ? state.cardset.present.cardsById[state.cardset.present.activeCardId]\n                : null,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarDetails);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { ACTIVITY_CREATING_PNG, State } from '../reducers';\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { gameCreatePngRequest } from '../actions';\nimport style from './SidebarGeneratePng.module.css';\n\ninterface StateProps {\n    width: number;\n    height: number;\n    isCreatingPng: boolean;\n    activeCardset: string | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\ninterface LocalState {\n    dpi: number;\n}\n\nexport class SidebarGeneratePng extends Component<Props, LocalState> {\n    state: LocalState = {\n        dpi: 300,\n    };\n\n    handleDpiChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ dpi: parseInt(event.target.value) });\n    };\n\n    handleGenerate = () => {\n        const { dispatch, activeCardset } = this.props;\n        const { dpi } = this.state;\n\n        if (activeCardset !== null) {\n            dispatch(gameCreatePngRequest(dpi, 'cardsets', activeCardset));\n        }\n    };\n\n    render() {\n        const { visible, width, height, isCreatingPng } = this.props;\n        const { dpi } = this.state;\n\n        const calculatedWidth = Math.round(dpi * (width / 25.4 + 1 / 4));\n        const calculatedHeight = Math.round(dpi * (height / 25.4 + 1 / 4));\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>Here you can generate your cards as PNG images.</div>\n                <label htmlFor=\"dpi\">DPI:</label>\n                <input\n                    id=\"dpi\"\n                    type=\"number\"\n                    min=\"1\"\n                    step=\"1\"\n                    onChange={this.handleDpiChange}\n                    className=\"form-control\"\n                    placeholder=\"DPI\"\n                    value={dpi}\n                />\n\n                <div>Width in pixels: {calculatedWidth}</div>\n                <div>Height in pixels: {calculatedHeight}</div>\n\n                <button disabled={isCreatingPng} onClick={this.handleGenerate}>\n                    Generate\n                </button>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        width: state.cardset.present.width,\n        height: state.cardset.present.height,\n        isCreatingPng: (state.games.activity & ACTIVITY_CREATING_PNG) === ACTIVITY_CREATING_PNG,\n        activeCardset: state.cardsets.active,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarGeneratePng);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { ACTIVITY_CREATING_PDF, State } from '../reducers';\nimport { Dispatch, gameCreatePdfRequest } from '../actions';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\n\ninterface OwnProps {\n    type: string;\n    id: string;\n    withHelp?: boolean;\n}\n\ninterface StateProps {\n    isCreatingPdf: boolean;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps;\n\ninterface LocalState {\n    pageWidth: number;\n    pageHeight: number;\n    topBottomMargin: number;\n    leftRightMargin: number;\n    verticalSpace: number;\n    horizontalSpace: number;\n    includeBleedingArea: boolean;\n    cutMarksForScissors: boolean;\n    cutMarksForGuillotine: boolean;\n    cutMarksInMarginArea: boolean;\n    cutMarksOnFrontSideOnly: boolean;\n}\n\nexport class PDFGenerator extends Component<Props, LocalState> {\n    state = {\n        pageWidth: 210,\n        pageHeight: 297,\n        topBottomMargin: 15,\n        leftRightMargin: 9,\n        verticalSpace: 0,\n        horizontalSpace: 0,\n        includeBleedingArea: false,\n        cutMarksForScissors: true,\n        cutMarksForGuillotine: false,\n        cutMarksInMarginArea: false,\n        cutMarksOnFrontSideOnly: false,\n    };\n\n    handleGeneratePdfClick = () => {\n        const { dispatch } = this.props;\n        const {\n            pageWidth,\n            pageHeight,\n            topBottomMargin,\n            leftRightMargin,\n            verticalSpace,\n            horizontalSpace,\n            includeBleedingArea,\n            cutMarksForScissors,\n            cutMarksForGuillotine,\n            cutMarksInMarginArea,\n            cutMarksOnFrontSideOnly,\n        } = this.state;\n\n        dispatch(\n            gameCreatePdfRequest(\n                this.props.type,\n                this.props.id,\n                pageWidth,\n                pageHeight,\n                topBottomMargin,\n                leftRightMargin,\n                verticalSpace,\n                horizontalSpace,\n                includeBleedingArea,\n                cutMarksForScissors,\n                cutMarksForGuillotine,\n                cutMarksInMarginArea,\n                cutMarksOnFrontSideOnly,\n            ),\n        );\n    };\n\n    handlePageWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ pageWidth: parseFloat(event.target.value) });\n    };\n\n    handlePageHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ pageHeight: parseFloat(event.target.value) });\n    };\n\n    handleTopBottomMarginChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ topBottomMargin: parseFloat(event.target.value) });\n    };\n\n    handleLeftRightMarginChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ leftRightMargin: parseFloat(event.target.value) });\n    };\n\n    handleVerticalSpaceChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ verticalSpace: parseFloat(event.target.value) });\n    };\n\n    handleHorizontalSpaceChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ horizontalSpace: parseFloat(event.target.value) });\n    };\n\n    handleIncludeBleedingAreaChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ includeBleedingArea: event.target.checked });\n    };\n\n    handleCutMarksForScissors = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cutMarksForScissors: event.target.checked });\n    };\n\n    handleCutMarksForGuillotine = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cutMarksForGuillotine: event.target.checked });\n    };\n\n    handleCutMarksInMarginArea = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cutMarksInMarginArea: event.target.checked });\n    };\n\n    handleCutMarksOnFrontSideOnly = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cutMarksOnFrontSideOnly: event.target.checked });\n    };\n\n    render() {\n        const { isCreatingPdf, withHelp } = this.props;\n\n        return (\n            <>\n                {withHelp && (\n                    <KawaiiMessage character={Character.Ghost} mood=\"excited\">\n                        <p>Here you can generate PDF.</p>\n                        <p>Hint 1: A4 page size is 210 mm x 297 mm. Letter page size is 215.9 x 279.4 mm.</p>\n                        <p>Hint 2: 1 inch is equal to 25.4 mm.</p>\n                    </KawaiiMessage>\n                )}\n\n                <div className=\"form\">\n                    <label htmlFor=\"page_width\">Page width (mm):</label>\n                    <input\n                        id=\"page_width\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handlePageWidthChange}\n                        placeholder=\"Page width\"\n                        value={this.state.pageWidth}\n                    />\n                    <label htmlFor=\"page_height\">Page height (mm):</label>\n                    <input\n                        id=\"page_height\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handlePageHeightChange}\n                        placeholder=\"Page Height\"\n                        value={this.state.pageHeight}\n                    />\n                    <label htmlFor=\"page_topbottom_margin\">Margin from top/bottom (mm):</label>\n                    <input\n                        id=\"page_topbottom_margin\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handleTopBottomMarginChange}\n                        placeholder=\"Top/Bottom margin\"\n                        value={this.state.topBottomMargin}\n                    />\n                    <label htmlFor=\"page_leftright_margin\">Margin from left/right (mm):</label>\n                    <input\n                        id=\"page_leftright_margin\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handleLeftRightMarginChange}\n                        placeholder=\"Left/Right margin\"\n                        value={this.state.leftRightMargin}\n                    />\n\n                    <label htmlFor=\"card_vertical_space\">Vertical space between cards (mm):</label>\n                    <input\n                        id=\"card_vertical_space\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handleVerticalSpaceChange}\n                        placeholder=\"Vertical space\"\n                        value={this.state.verticalSpace}\n                    />\n\n                    <label htmlFor=\"card_horizontal_space\">Horizontal space between cards (mm):</label>\n                    <input\n                        id=\"card_horizontal_space\"\n                        type=\"number\"\n                        step=\"0.1\"\n                        onChange={this.handleHorizontalSpaceChange}\n                        placeholder=\"Horizontal space\"\n                        value={this.state.horizontalSpace}\n                    />\n\n                    <label\n                        title=\"You might need this for Cardmogrifier or professional printing. Do\n                        not check this if all you are interested in is card (area inside black dashed rectangle).\"\n                    >\n                        <input\n                            type=\"checkbox\"\n                            checked={this.state.includeBleedingArea}\n                            onChange={this.handleIncludeBleedingAreaChange}\n                        />\n                        Generate with bleeding area.\n                    </label>\n\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={this.state.cutMarksForScissors}\n                            onChange={this.handleCutMarksForScissors}\n                        />\n                        Generate with cut marks for paper scissors.\n                    </label>\n\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={this.state.cutMarksForGuillotine}\n                            onChange={this.handleCutMarksForGuillotine}\n                        />\n                        Generate with cut marks for paper guillotine.\n                    </label>\n\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={this.state.cutMarksInMarginArea}\n                            onChange={this.handleCutMarksInMarginArea}\n                        />\n                        Generate with cut marks for paper guillotine in margin area.\n                    </label>\n\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={this.state.cutMarksOnFrontSideOnly}\n                            onChange={this.handleCutMarksOnFrontSideOnly}\n                        />\n                        Generate cut marks on front side only (useful for printing on both sides).\n                    </label>\n\n                    <button disabled={isCreatingPdf} onClick={this.handleGeneratePdfClick}>\n                        Generate PDF\n                    </button>\n                </div>\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        isCreatingPdf: (state.games.activity & ACTIVITY_CREATING_PDF) === ACTIVITY_CREATING_PDF,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(PDFGenerator);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport PDFGenerator from './PDFGenerator';\nimport style from './SidebarGeneratePdf.module.css';\n\ninterface StateProps {\n    activeCardSetId: string | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarGeneratePdf extends Component<Props> {\n    render() {\n        const { activeCardSetId, visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                {activeCardSetId !== null && <PDFGenerator type=\"cardsets\" id={activeCardSetId} />}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeCardSetId: state.cardsets.active,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarGeneratePdf);\n","import { ChromePicker, ColorResult } from 'react-color';\nimport React, { Component } from 'react';\n\ninterface Props {\n    onChange: (color: ColorResult) => void;\n    color: string;\n}\n\ninterface State {\n    displayColorPicker: boolean;\n}\n\nexport default class ColorButton extends Component<Props, State> {\n    state = {\n        displayColorPicker: false,\n    };\n\n    handleClick = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker });\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false });\n    };\n\n    handleChange = (color: ColorResult) => {\n        this.props.onChange(color);\n    };\n\n    render() {\n        const popover: React.CSSProperties = {\n            position: 'absolute',\n            zIndex: 2,\n        };\n        const cover: React.CSSProperties = {\n            position: 'fixed',\n            top: '0px',\n            right: '0px',\n            bottom: '0px',\n            left: '0px',\n        };\n        return (\n            <>\n                <button onClick={this.handleClick} title=\"Change color\">\n                    <i className=\"material-icons\">color_lens</i>\n                </button>\n                {this.state.displayColorPicker ? (\n                    <div style={popover}>\n                        <div style={cover} onClick={this.handleClose} />\n                        <ChromePicker color={this.props.color} disableAlpha={true} onChange={this.handleChange} />\n                    </div>\n                ) : null}\n            </>\n        );\n    }\n}\n","import { ColorResult } from 'react-color';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, IdsArray, ImageArray, SidebarOwnProps, FieldInfo, ImageInfo } from '../types';\nimport { State } from '../reducers';\nimport {\n    cardSetAddImageField,\n    cardSetChangeActiveFieldName,\n    cardSetChangeFitForActiveField,\n    cardSetChangeCropForActiveField,\n    cardSetChangeImage,\n    cardSetLockActiveField,\n    cardSetLowerActiveFieldToBottom,\n    cardSetRaiseActiveFieldToTop,\n    cardSetRemoveActiveField,\n    cardSetUnlockActiveField,\n    imageListRequest,\n    cardSetChangeApplyToAllCards,\n    cardSetRaiseActiveField,\n    cardSetLowerActiveField,\n} from '../actions';\nimport ColorButton from './ColorButton';\nimport style from './SidebarImage.module.css';\n\ninterface StateProps {\n    activeFieldInfo?: FieldInfo;\n    crop: boolean;\n    activeCardId?: string;\n    filter: string;\n    images: ImageArray;\n    cardsAllIds: IdsArray;\n    applyToAllCards: boolean;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\ninterface LocalState {\n    location: string;\n}\n\nexport class SidebarImage extends Component<Props, LocalState> {\n    state = {\n        location: 'all',\n    };\n\n    handleAddImageClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetAddImageField());\n    };\n\n    changeImage = (ii: ImageInfo) => {\n        const { activeCardId, activeFieldInfo, dispatch } = this.props;\n\n        if (activeFieldInfo) {\n            dispatch(cardSetChangeImage(activeCardId ? activeCardId : undefined, activeFieldInfo.id, ii));\n        }\n    };\n\n    handleRemoveImageFromFieldClick = () => {\n        const ii: ImageInfo = { url: undefined, base64: undefined };\n        this.changeImage(ii);\n    };\n\n    handleRemoveClick = () => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            dispatch(cardSetRemoveActiveField());\n        }\n    };\n\n    handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeFieldInfo, dispatch } = this.props;\n        const name = event.target.value.trim();\n        if (activeFieldInfo !== undefined) {\n            dispatch(cardSetChangeActiveFieldName(name));\n        }\n    };\n\n    handleFilterChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        const { location } = this.state;\n        const filter = event.target.value;\n        dispatch(imageListRequest(filter, location));\n    };\n\n    handleImageSelect = (imageName: string, width: number, height: number) => {\n        const { activeFieldInfo } = this.props;\n\n        if (activeFieldInfo !== undefined) {\n            const color = activeFieldInfo && activeFieldInfo.color;\n\n            const ii: ImageInfo = { url: `/api/imagefiles/${imageName}`, color, width, height, base64: undefined };\n            this.changeImage(ii);\n        }\n    };\n\n    handleRaise = (event: React.MouseEvent) => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetRaiseActiveFieldToTop());\n            } else {\n                dispatch(cardSetRaiseActiveField());\n            }\n        }\n    };\n\n    handleLower = (event: React.MouseEvent) => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetLowerActiveFieldToBottom());\n            } else {\n                dispatch(cardSetLowerActiveField());\n            }\n        }\n    };\n\n    handleLockField = () => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            dispatch(cardSetLockActiveField());\n        }\n    };\n\n    handleUnlockField = () => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            dispatch(cardSetUnlockActiveField());\n        }\n    };\n\n    handleFitOptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        const fit = event.target.value;\n\n        dispatch(cardSetChangeFitForActiveField(fit));\n    };\n\n    handleOptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { filter, dispatch } = this.props;\n        const location = event.target.value;\n\n        this.setState({ location });\n        dispatch(imageListRequest(filter, location));\n    };\n\n    handleColorChange = (color: ColorResult) => {\n        const ii: ImageInfo = { color: color.hex };\n        this.changeImage(ii);\n    };\n\n    handleRemoveColorClick = () => {\n        const ii: ImageInfo = { color: undefined };\n        this.changeImage(ii);\n    };\n\n    handleApplyToAllCardChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeApplyToAllCards(event.target.checked));\n    };\n\n    handleChangeCrop = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeFieldInfo, dispatch } = this.props;\n        if (activeFieldInfo !== undefined) {\n            dispatch(cardSetChangeCropForActiveField(event.target.checked));\n        }\n    };\n\n    render() {\n        const { activeFieldInfo, crop, filter, visible, applyToAllCards } = this.props;\n        const { location } = this.state;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>\n                    <button onClick={this.handleAddImageClick} title=\"Add image field\">\n                        <i className=\"material-icons\">add_photo_alternate</i>\n                    </button>\n\n                    {activeFieldInfo !== undefined && (\n                        <>\n                            <button onClick={this.handleRaise} title=\"Raise image (with Ctrl - raise to top)\">\n                                <i className=\"material-icons\">arrow_upward</i>\n                            </button>\n                            <button onClick={this.handleLower} title=\"Lower image (with Ctrl - lower to bottom)\">\n                                <i className=\"material-icons\">arrow_downward</i>\n                            </button>\n                        </>\n                    )}\n\n                    {activeFieldInfo &&\n                        activeFieldInfo.type === 'image' &&\n                        (activeFieldInfo.url || activeFieldInfo.base64) && (\n                            <button onClick={this.handleRemoveImageFromFieldClick} title=\"Remove image from field\">\n                                <i className=\"material-icons\">remove_circle_outline</i>\n                            </button>\n                        )}\n\n                    {activeFieldInfo !== undefined && !activeFieldInfo.locked && (\n                        <button\n                            onClick={this.handleLockField}\n                            title=\"Lock image field. Locked field can't be dragged, rotated, resized and removed.\"\n                        >\n                            <i className=\"material-icons\">lock_open</i>\n                        </button>\n                    )}\n\n                    {activeFieldInfo !== undefined && activeFieldInfo.locked && (\n                        <button\n                            onClick={this.handleUnlockField}\n                            title=\"Unlock image field. Unlocked text field can be dragged, rotated, resized and removed.\"\n                        >\n                            <i className=\"material-icons\">lock</i>\n                        </button>\n                    )}\n\n                    <button\n                        className={activeFieldInfo === undefined || activeFieldInfo.locked ? style.disabled : ''}\n                        onClick={this.handleRemoveClick}\n                        title=\"Remove field\"\n                    >\n                        <i className=\"material-icons\">remove</i>\n                    </button>\n\n                    {activeFieldInfo !== undefined && (\n                        <input\n                            type=\"text\"\n                            value={activeFieldInfo.name || ''}\n                            placeholder={activeFieldInfo.id}\n                            onChange={this.handleNameChange}\n                            title=\"Change name of image field.\"\n                        />\n                    )}\n\n                    {activeFieldInfo && activeFieldInfo.type === 'image' && (\n                        <form>\n                            <div>\n                                Fit:\n                                <label>\n                                    <input\n                                        type=\"radio\"\n                                        value=\"width\"\n                                        checked={!activeFieldInfo.fit || activeFieldInfo.fit === 'width'}\n                                        onChange={this.handleFitOptionChange}\n                                    />\n                                    width\n                                </label>\n                                <label>\n                                    <input\n                                        type=\"radio\"\n                                        value=\"height\"\n                                        checked={activeFieldInfo.fit === 'height'}\n                                        onChange={this.handleFitOptionChange}\n                                    />\n                                    height\n                                </label>\n                                <label>\n                                    <input\n                                        type=\"radio\"\n                                        value=\"stretch\"\n                                        checked={activeFieldInfo.fit === 'stretch'}\n                                        onChange={this.handleFitOptionChange}\n                                    />\n                                    stretch\n                                </label>\n                            </div>\n                        </form>\n                    )}\n                </div>\n\n                {activeFieldInfo && activeFieldInfo.type === 'image' && (\n                    <>\n                        <div>\n                            <label>\n                                <input type=\"checkbox\" checked={crop} onChange={this.handleChangeCrop} />\n                                Crop\n                            </label>\n                            <ColorButton\n                                color={(activeFieldInfo && activeFieldInfo.color) || '#FFFFFF'}\n                                onChange={this.handleColorChange}\n                            />\n                            {activeFieldInfo && activeFieldInfo.color && (\n                                <button onClick={this.handleRemoveColorClick} title=\"Remove color\">\n                                    <i className=\"material-icons\">remove_circle</i>\n                                </button>\n                            )}\n                            <label>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={applyToAllCards}\n                                    onChange={this.handleApplyToAllCardChange}\n                                />\n                                Apply to all cards\n                            </label>\n                        </div>\n                    </>\n                )}\n                <div>\n                    <form>\n                        Source:\n                        <label>\n                            <input\n                                type=\"radio\"\n                                value=\"all\"\n                                checked={location === 'all'}\n                                onChange={this.handleOptionChange}\n                            />\n                            All\n                        </label>\n                        <label>\n                            <input\n                                type=\"radio\"\n                                value=\"user\"\n                                checked={location === 'user'}\n                                onChange={this.handleOptionChange}\n                            />\n                            User\n                        </label>\n                        <label>\n                            <input\n                                type=\"radio\"\n                                value=\"game\"\n                                checked={location === 'game'}\n                                onChange={this.handleOptionChange}\n                            />\n                            Game\n                        </label>\n                    </form>\n                </div>\n\n                <div>\n                    <input type=\"text\" placeholder=\"Search...\" value={filter} onChange={this.handleFilterChange} />\n                </div>\n                <div className={style.images}>\n                    {this.props.images.map(im => {\n                        return (\n                            <img\n                                key={im.id}\n                                src={`/api/imagefiles/${im.name}`}\n                                data-width={im.width}\n                                data-height={im.height}\n                                onClick={() => this.handleImageSelect(im.name, im.width, im.height)}\n                                alt={im.name}\n                            />\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    const activeFieldInfo =\n        state.cardset.present.activeCardId !== undefined && state.cardset.present.activeFieldId !== undefined\n            ? state.cardset.present.fields[state.cardset.present.activeCardId][state.cardset.present.activeFieldId]\n            : undefined;\n\n    const activeCardId = state.cardset.present.activeCardId;\n\n    return {\n        activeFieldInfo,\n        crop: activeFieldInfo && activeFieldInfo.type === 'image' ? activeFieldInfo.crop || false : false,\n        activeCardId,\n        images: state.images.images,\n        filter: state.images.filter,\n        cardsAllIds: state.cardset.present.cardsAllIds,\n        applyToAllCards: state.cardset.present.applyToAllCards,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarImage);\n","import 'filepond/dist/filepond.min.css';\n\nimport { FilePond, registerPlugin } from 'react-filepond';\nimport { connect } from 'react-redux';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport Papa from 'papaparse';\nimport React, { Component } from 'react';\nimport md5 from 'md5';\nimport shortid from 'shortid';\n\nimport {\n    CardType,\n    CardsCollection,\n    DispatchProps,\n    IdsArray,\n    SidebarOwnProps,\n    FieldInfoByCardCollection,\n    FieldInfoCollection,\n} from '../types';\nimport { FPLoadCallback, FPRevertLoadCallback, cardSetImportData, messageDisplay } from '../actions';\nimport { State } from '../reducers';\nimport { downloadBlob } from '../utils';\nimport style from './SidebarImportExport.module.css';\n\nregisterPlugin(FilePondPluginFileValidateType);\n\ninterface StateProps {\n    activeGame: string | null;\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    fieldsAllIds: IdsArray;\n    fields: FieldInfoByCardCollection;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarImportExport extends Component<Props> {\n    prepareImagePaths = (fields: FieldInfoByCardCollection) => {\n        const { activeGame } = this.props;\n        if (activeGame === null) return fields;\n\n        const ending = '_' + md5(activeGame);\n\n        let preparedImages: FieldInfoByCardCollection = {};\n\n        for (const cardId in fields) {\n            let fieldsByCard = { ...fields[cardId] };\n            for (const fieldId in fieldsByCard) {\n                let imageInfo = { ...fieldsByCard[fieldId] };\n                if (imageInfo.type === 'image') {\n                    let url = imageInfo.url || '';\n                    if (url.endsWith(ending)) {\n                        url = url.replace(ending, '');\n                    } else {\n                        imageInfo.global = true;\n                    }\n\n                    imageInfo.url = url.replace('/api/imagefiles/', '');\n                }\n                fieldsByCard[fieldId] = imageInfo;\n            }\n            preparedImages[cardId] = fieldsByCard;\n        }\n\n        return preparedImages;\n    };\n\n    handleExportJson = () => {\n        const { width, height, isTwoSided, cardsAllIds, cardsById, fields, fieldsAllIds } = this.props;\n\n        const preparedFields = this.prepareImagePaths(fields);\n\n        const data = {\n            width,\n            height,\n            isTwoSided,\n            cardsAllIds,\n            cardsById,\n            fields: preparedFields,\n            fieldsAllIds,\n        };\n\n        let json = JSON.stringify(data, null, 4);\n        let blob = new Blob([json], { type: 'octet/stream' });\n        let url = window.URL.createObjectURL(blob);\n        downloadBlob(url, 'cardset.json');\n    };\n\n    handleExportCsv = () => {\n        const { cardsAllIds, cardsById, fields, fieldsAllIds } = this.props;\n\n        const preparedFields = this.prepareImagePaths(fields);\n\n        let csvData: (string | number)[][] = [];\n        let header = ['card_id', 'card_count'];\n        let usedNames: { [key: string]: boolean } = {};\n        for (const plId of fieldsAllIds) {\n            const fieldInfo = fields[cardsAllIds[0]][plId];\n            const name = fieldInfo.name || fieldInfo.id;\n            if (!(name in usedNames)) {\n                header.push(name);\n                if (fieldInfo.type === 'image') {\n                    header.push(`${name}_global`);\n                }\n                usedNames[name] = false;\n            }\n        }\n        csvData.push(header);\n\n        for (const cardId of cardsAllIds) {\n            let card = cardsById[cardId];\n\n            let dataRow: (string | number)[] = [cardId, card.count];\n\n            let written = { ...usedNames };\n            for (const fieldId of fieldsAllIds) {\n                const fieldIndo = fields[cardId][fieldId];\n                const name = fieldIndo.name || fieldIndo.id;\n\n                if (!written[name]) {\n                    let fieldInfo = preparedFields[cardId][fieldId];\n                    if (fieldInfo.type === 'text') {\n                        dataRow.push(fieldInfo.value);\n                    } else if (fieldInfo.type === 'image') {\n                        dataRow.push(fieldInfo.url || '');\n                        dataRow.push(fieldInfo.global ? 'y' : 'n');\n                    }\n                    written[name] = true;\n                }\n            }\n            csvData.push(dataRow);\n        }\n\n        let csv = Papa.unparse(csvData);\n        let blob = new Blob([csv], { type: 'octet/stream' });\n        let url = window.URL.createObjectURL(blob);\n        downloadBlob(url, 'cardset.csv');\n    };\n\n    handleProcess = (fieldName: string, file: File, metadata: { [propName: string]: string }, load: FPLoadCallback) => {\n        const { dispatch, activeGame, fields, fieldsAllIds, cardsById, cardsAllIds } = this.props;\n        if (activeGame === null) return;\n\n        var reader = new FileReader();\n        reader.readAsText(file, 'UTF-8');\n        reader.onload = function(e) {\n            if (e.target === null) return;\n\n            let data = null;\n            const ending = '_' + md5(activeGame);\n\n            if (file.type === 'application/json') {\n                // eslint-disable-next-line\n                data = JSON.parse((e.target as any).result);\n\n                for (const cardId in data.fields) {\n                    const cardFields: FieldInfoCollection = data.fields[cardId];\n                    for (const fieldId in cardFields) {\n                        let fieldInfo = cardFields[fieldId];\n                        if (fieldInfo.type === 'image') {\n                            let isGlobal = fieldInfo.global || false;\n\n                            fieldInfo.url = `/api/imagefiles/${fieldInfo.url}${isGlobal ? '' : ending}`;\n                            delete fieldInfo.global;\n                        }\n                    }\n                }\n            } else if (file.type === 'text/csv') {\n                // eslint-disable-next-line\n                const csvData = Papa.parse((e.target as any).result, { header: true });\n\n                let newCardsAllIds: IdsArray = [];\n                let newCardsById: CardsCollection = {};\n                let newFields: FieldInfoByCardCollection = {};\n\n                for (const row of csvData.data) {\n                    if (Object.keys(row).length === 0) {\n                        continue;\n                    }\n                    const card: CardType = {\n                        id: row['card_id'] || shortid.generate(),\n                        count: row['card_count'] || 1,\n                    };\n\n                    newFields[card.id] = {\n                        ...fields[card.id in cardsById ? card.id : cardsAllIds[0]],\n                    };\n\n                    newCardsAllIds.push(card.id);\n                    newCardsById[card.id] = card;\n\n                    for (const fieldId of fieldsAllIds) {\n                        const fieldInfo = newFields[card.id][fieldId];\n                        const name = fieldInfo.name || fieldInfo.id;\n\n                        if (row[name]) {\n                            if (fieldInfo.type === 'image') {\n                                const isGlobal = row[`${name}_global`] === 'y';\n                                const url = row[name];\n\n                                newFields[card.id][fieldId] = {\n                                    ...fieldInfo,\n                                    url: `/api/imagefiles/${url}${isGlobal ? '' : ending}`,\n                                };\n                            } else if (fieldInfo.type === 'text') {\n                                newFields[card.id][fieldId] = {\n                                    ...fieldInfo,\n                                    value: row[name],\n                                };\n                            }\n                        }\n                    }\n                }\n\n                data = {\n                    cardsAllIds: newCardsAllIds,\n                    cardsById: newCardsById,\n                    fields: newFields,\n                    activeCardId: undefined,\n                    activeFieldId: undefined,\n                };\n            }\n\n            if (data !== null) {\n                dispatch(cardSetImportData(data));\n            }\n        };\n        reader.onerror = function() {\n            dispatch(messageDisplay('error', 'Problem during import.'));\n        };\n\n        load(file.name);\n    };\n\n    handleRevert = (uniqueFileId: string, load: FPRevertLoadCallback) => {\n        load();\n    };\n\n    render() {\n        const { visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>\n                    Here you can export and import your card set data. JSON file contains templates of cards, text and\n                    image data by card, CSV file contains only text and image data by card.\n                </div>\n                <button onClick={this.handleExportJson}>\n                    <i className=\"material-icons\">cloud_download</i> Get JSON\n                </button>\n                <button onClick={this.handleExportCsv}>\n                    <i className=\"material-icons\">cloud_download</i> Get CSV\n                </button>\n\n                <div>Drag & Drop or browser for JSON or CSV file here:</div>\n\n                <FilePond\n                    server={{\n                        process: this.handleProcess,\n                        revert: this.handleRevert,\n                    }}\n                    acceptedFileTypes={['text/csv', 'application/json']}\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeGame: state.games.active,\n        width: state.cardset.present.width,\n        height: state.cardset.present.height,\n        isTwoSided: state.cardset.present.isTwoSided,\n        cardsAllIds: state.cardset.present.cardsAllIds,\n        cardsById: state.cardset.present.cardsById,\n        fieldsAllIds: state.cardset.present.fieldsAllIds,\n        fields: state.cardset.present.fields,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarImportExport);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, IdsArray, SidebarOwnProps, FieldInfo, FieldInfoByCardCollection } from '../types';\nimport { State } from '../reducers';\nimport {\n    cardSetActiveCardAndField,\n    cardSetChangeActiveFieldName,\n    cardSetChangeFieldAngle,\n    cardSetChangeFieldSize,\n    cardSetLockActiveField,\n    cardSetChangeFieldPosition,\n    cardSetLowerActiveField,\n    cardSetLowerActiveFieldToBottom,\n    cardSetRaiseActiveField,\n    cardSetRaiseActiveFieldToTop,\n    cardSetUnlockActiveField,\n    cardSetChangeUnclickableForActiveField,\n} from '../actions';\nimport style from './SidebarMeasurements.module.css';\nimport shortid from 'shortid';\n\ninterface StateProps {\n    activeField?: FieldInfo;\n    activeCardId?: string;\n    fields: FieldInfoByCardCollection;\n    fieldsAllIds: IdsArray;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarMeasurements extends Component<Props> {\n    handlePrevField = () => {\n        const { activeCardId, activeField, fieldsAllIds, dispatch } = this.props;\n        if (fieldsAllIds.length === 0 || activeCardId === null) return;\n\n        let prevField = fieldsAllIds[fieldsAllIds.length - 1];\n        if (activeField !== undefined) {\n            let idx = fieldsAllIds.indexOf(activeField.id);\n            if (idx > 0) prevField = fieldsAllIds[idx - 1];\n        }\n\n        dispatch(cardSetActiveCardAndField(activeCardId, (activeField && activeField.isOnBack) || false, prevField));\n    };\n\n    handleNextField = () => {\n        const { activeCardId, activeField, fieldsAllIds, dispatch } = this.props;\n        if (fieldsAllIds.length === 0 || activeCardId === null) return;\n\n        let nextField = fieldsAllIds[0];\n        if (activeField !== undefined) {\n            let idx = fieldsAllIds.indexOf(activeField.id);\n            if (idx !== -1 && idx !== fieldsAllIds.length - 1) nextField = fieldsAllIds[idx + 1];\n        }\n\n        dispatch(cardSetActiveCardAndField(activeCardId, (activeField && activeField.isOnBack) || false, nextField));\n    };\n\n    handleRaise = (event: React.MouseEvent) => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetRaiseActiveFieldToTop());\n            } else {\n                dispatch(cardSetRaiseActiveField());\n            }\n        }\n    };\n\n    handleLower = (event: React.MouseEvent) => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetLowerActiveFieldToBottom());\n            } else {\n                dispatch(cardSetLowerActiveField());\n            }\n        }\n    };\n\n    handleLockField = () => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetLockActiveField());\n        }\n    };\n\n    handleUnlockField = () => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetUnlockActiveField());\n        }\n    };\n\n    handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const name = event.target.value.trim();\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeActiveFieldName(name));\n        }\n    };\n\n    handleWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const width = parseFloat(event.target.value);\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeFieldSize(undefined, activeField.id, width, activeField.height, shortid.generate()));\n        }\n    };\n\n    handleHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const height = parseFloat(event.target.value);\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeFieldSize(undefined, activeField.id, activeField.width, height, shortid.generate()));\n        }\n    };\n\n    handleXChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const x = parseFloat(event.target.value);\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeFieldPosition(undefined, activeField.id, x, activeField.y, shortid.generate()));\n        }\n    };\n\n    handleYChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const y = parseFloat(event.target.value);\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeFieldPosition(undefined, activeField.id, activeField.x, y, shortid.generate()));\n        }\n    };\n\n    handleAngleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const angle = (parseFloat(event.target.value) * Math.PI) / 180;\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeFieldAngle(undefined, activeField.id, angle, shortid.generate()));\n        }\n    };\n\n    handleChangeUnclickable = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeUnclickableForActiveField(event.target.checked));\n        }\n    };\n\n    render() {\n        const { activeCardId, activeField, visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                {activeCardId !== undefined && (\n                    <>\n                        <button onClick={this.handlePrevField} title=\"Previous field\">\n                            <i className=\"material-icons\">arrow_back</i>\n                        </button>\n                        <button onClick={this.handleNextField} title=\"Next field\">\n                            <i className=\"material-icons\">arrow_forward</i>\n                        </button>\n                    </>\n                )}\n\n                {activeField !== undefined && (\n                    <>\n                        <button onClick={this.handleRaise} title=\"Raise text (with Ctrl - raise to top)\">\n                            <i className=\"material-icons\">arrow_upward</i>\n                        </button>\n                        <button onClick={this.handleLower} title=\"Lower text (with Ctrl - lower to bottom)\">\n                            <i className=\"material-icons\">arrow_downward</i>\n                        </button>\n                    </>\n                )}\n\n                {activeField !== undefined && !activeField.locked && (\n                    <button\n                        onClick={this.handleLockField}\n                        title=\"Lock field. Locked field can't be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock_open</i>\n                    </button>\n                )}\n\n                {activeField !== undefined && activeField.locked && (\n                    <button\n                        onClick={this.handleUnlockField}\n                        title=\"Unlock field. Unlocked field can be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock</i>\n                    </button>\n                )}\n\n                {activeField !== undefined && (\n                    <div>\n                        <label>\n                            Unclickable field:{' '}\n                            <input\n                                type=\"checkbox\"\n                                onChange={this.handleChangeUnclickable}\n                                className=\"form-control\"\n                                checked={activeField.unclickable ? true : false}\n                            />\n                        </label>\n                    </div>\n                )}\n\n                {activeField !== undefined && (\n                    <div>\n                        <label>\n                            Field name:\n                            <input\n                                type=\"text\"\n                                value={activeField.name || ''}\n                                placeholder={activeField.id}\n                                onChange={this.handleNameChange}\n                                title=\"Change name of field.\"\n                            />\n                        </label>\n\n                        <label>\n                            Width:\n                            <input\n                                type=\"number\"\n                                step=\"any\"\n                                value={activeField.width}\n                                placeholder=\"Width\"\n                                onChange={this.handleWidthChange}\n                                title=\"Change width of field.\"\n                            />\n                        </label>\n\n                        <label>\n                            Height:\n                            <input\n                                type=\"number\"\n                                step=\"any\"\n                                value={activeField.height}\n                                placeholder=\"Height\"\n                                onChange={this.handleHeightChange}\n                                title=\"Change width of field.\"\n                            />\n                        </label>\n\n                        <label>\n                            X:\n                            <input\n                                type=\"number\"\n                                step=\"any\"\n                                value={activeField.x}\n                                placeholder=\"Width\"\n                                onChange={this.handleXChange}\n                                title=\"Change x coordinate of field.\"\n                            />\n                        </label>\n\n                        <label>\n                            Y:\n                            <input\n                                type=\"number\"\n                                step=\"any\"\n                                value={activeField.y}\n                                placeholder=\"Height\"\n                                onChange={this.handleYChange}\n                                title=\"Change y coordinate of field.\"\n                            />\n                        </label>\n\n                        <label>\n                            Angle:\n                            <input\n                                type=\"number\"\n                                step=\"any\"\n                                value={(activeField.angle * 180) / Math.PI}\n                                placeholder=\"Angle\"\n                                onChange={this.handleAngleChange}\n                                title=\"Change rotation angle of field.\"\n                            />\n                        </label>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    const activeField =\n        state.cardset.present.activeCardId !== undefined && state.cardset.present.activeFieldId !== undefined\n            ? state.cardset.present.fields[state.cardset.present.activeCardId][state.cardset.present.activeFieldId]\n            : undefined;\n\n    return {\n        activeField,\n        activeCardId: state.cardset.present.activeCardId,\n        fields: state.cardset.present.fields,\n        fieldsAllIds: state.cardset.present.fieldsAllIds,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarMeasurements);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport {\n    cardSetChangeHeight,\n    cardSetChangeIsTwoSided,\n    cardSetChangeSnappingDistance,\n    cardSetChangeWidth,\n    cardSetSetZoom,\n} from '../actions';\nimport style from './SidebarSettings.module.css';\n\ninterface StateProps {\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    snappingDistance: number;\n    zoom: number;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\ninterface LocalState {\n    maintainAspectRatio: boolean;\n    resizeContent: boolean;\n}\n\nexport class SidebarSettings extends Component<Props, LocalState> {\n    state: LocalState = {\n        maintainAspectRatio: true,\n        resizeContent: false,\n    };\n\n    handleWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        const { maintainAspectRatio, resizeContent } = this.state;\n        dispatch(cardSetChangeWidth(parseFloat(event.target.value), maintainAspectRatio, resizeContent));\n    };\n\n    handleHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        const { maintainAspectRatio, resizeContent } = this.state;\n        dispatch(cardSetChangeHeight(parseFloat(event.target.value), maintainAspectRatio, resizeContent));\n    };\n\n    handleIsTwoSidedChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeIsTwoSided(event.target.checked));\n    };\n\n    handleZoom = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetSetZoom(parseFloat(event.target.value)));\n    };\n\n    handleSnappingDistance = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeSnappingDistance(parseFloat(event.target.value)));\n    };\n\n    render() {\n        const { width, height, isTwoSided, snappingDistance, visible, zoom } = this.props;\n        const { maintainAspectRatio, resizeContent } = this.state;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                <label htmlFor=\"card_width\">Card width (mm):</label>\n                <input\n                    id=\"card_width\"\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"0.1\"\n                    onChange={this.handleWidthChange}\n                    className=\"form-control\"\n                    placeholder=\"width\"\n                    value={width}\n                />\n                <label htmlFor=\"card_height\">Card height (mm):</label>\n                <input\n                    id=\"card_height\"\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"0.1\"\n                    onChange={this.handleHeightChange}\n                    className=\"form-control\"\n                    placeholder=\"height\"\n                    value={height}\n                />\n                <div>\n                    <label>\n                        Maintain aspect ratio:{' '}\n                        <input\n                            type=\"checkbox\"\n                            onChange={() => {\n                                this.setState({ maintainAspectRatio: !maintainAspectRatio });\n                            }}\n                            className=\"form-control\"\n                            checked={maintainAspectRatio}\n                        />\n                    </label>\n                </div>\n\n                <div>\n                    <label>\n                        Resize content:{' '}\n                        <input\n                            type=\"checkbox\"\n                            onChange={() => {\n                                this.setState({ resizeContent: !resizeContent });\n                            }}\n                            className=\"form-control\"\n                            checked={resizeContent}\n                        />\n                    </label>\n                </div>\n\n                <label>\n                    Cards have two sides:{' '}\n                    <input\n                        type=\"checkbox\"\n                        onChange={this.handleIsTwoSidedChange}\n                        className=\"form-control\"\n                        checked={isTwoSided}\n                    />\n                </label>\n                <div>\n                    <label htmlFor=\"zoom\">Zoom (if you want to see details or big picture)</label>\n                    <input\n                        id=\"zoom\"\n                        type=\"number\"\n                        min=\"0.1\"\n                        step=\"0.1\"\n                        onChange={this.handleZoom}\n                        className=\"form-control\"\n                        placeholder=\"zoom\"\n                        value={zoom}\n                    />\n                </div>\n                <div>\n                    <label htmlFor=\"zoom\">Snapping distance in mm. 0 to disable.</label>\n                    <input\n                        id=\"zoom\"\n                        type=\"number\"\n                        min=\"0\"\n                        step=\"0.1\"\n                        onChange={this.handleSnappingDistance}\n                        className=\"form-control\"\n                        placeholder=\"Snapping distance\"\n                        value={snappingDistance}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        width: state.cardset.present.width,\n        height: state.cardset.present.height,\n        isTwoSided: state.cardset.present.isTwoSided,\n        snappingDistance: state.cardset.present.snappingDistance,\n        zoom: state.cardset.present.zoom,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarSettings);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport Select, { components } from 'react-select';\nimport WebFont from 'webfontloader';\n\nimport { DEFAULT_LINE_HEIGHT } from '../constants';\nimport {\n    Dispatch,\n    cardSetChangeActiveTextFieldFontFamilyAndVariant,\n    cardSetChangeActiveTextFieldFontSize,\n    cardSetChangeActiveTextFieldFontVariant,\n    cardSetChangeActiveTextFieldLineHeight,\n} from '../actions';\nimport { State } from '../reducers';\nimport style from './FontSelector.module.css';\nimport webfonts from './webfonts.json';\nimport webfontsThumbs from './webfonts_thumbs.json';\nimport { OptionProps } from 'react-select/lib/components/Option';\n\ninterface WebFontsInfo {\n    [propName: string]: {\n        [propName: string]: string;\n    };\n}\n\ninterface FontOption {\n    value: string;\n    label: string;\n}\n\nconst FontOptionComponent = (props: OptionProps<FontOption>) => {\n    // @ts-ignore\n    let value = props.value;\n    return !props.isDisabled && value ? (\n        <components.Option {...props}>\n            <img src={`data:image/png;base64, ${(webfontsThumbs as Record<string, string>)[value]}`} alt={value} />\n        </components.Option>\n    ) : null;\n};\n\nconst options: FontOption[] = Object.keys(webfonts)\n    .sort()\n    .map(fi => ({ value: fi, label: fi }));\n\ninterface StateProps {\n    activeFont: string;\n    activeFontVariant: string;\n    activeFontSize: number;\n    activeLineHeight: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass FontSelector extends Component<Props> {\n    getFontStringForLoad = (family: string, variant: string) => {\n        let stringForLoad = family;\n        if (variant !== 'regular') {\n            stringForLoad += ':' + variant;\n        }\n        return stringForLoad;\n    };\n\n    handleChange = (selectedOption?: FontOption | FontOption[] | null) => {\n        if (!selectedOption) return;\n\n        const fontFamily = (selectedOption as FontOption).value;\n\n        let fontVariant = this.props.activeFontVariant;\n        const wf: WebFontsInfo = webfonts;\n        if (!(fontVariant in wf[fontFamily])) {\n            fontVariant = Object.keys(wf[fontFamily]).sort()[0];\n        }\n\n        WebFont.load({\n            google: {\n                families: [this.getFontStringForLoad(fontFamily, fontVariant)],\n            },\n            active: () => {\n                const { dispatch } = this.props;\n                dispatch(cardSetChangeActiveTextFieldFontFamilyAndVariant(fontFamily, fontVariant));\n            },\n        });\n    };\n\n    handleFontVariantChange = (selectedOption?: FontOption | FontOption[] | null) => {\n        if (!selectedOption) return;\n\n        const value = (selectedOption as FontOption).value;\n        WebFont.load({\n            google: {\n                families: [this.getFontStringForLoad(this.props.activeFont, value)],\n            },\n            active: () => {\n                const { dispatch } = this.props;\n                dispatch(cardSetChangeActiveTextFieldFontVariant(value));\n            },\n        });\n    };\n\n    handleFontSizeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextFieldFontSize(parseFloat(event.target.value)));\n    };\n\n    handleLineHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextFieldLineHeight(parseFloat(event.target.value)));\n    };\n\n    render() {\n        const selectedFontFamily = options.find(f => f.value === this.props.activeFont);\n\n        const fontVariantOptions: FontOption[] = Object.keys((webfonts as WebFontsInfo)[this.props.activeFont])\n            .sort()\n            .map(fv => ({ value: fv, label: fv }));\n\n        const selectedFontVariant = fontVariantOptions.find(f => f.value === this.props.activeFontVariant);\n\n        return (\n            <>\n                <input\n                    type=\"number\"\n                    value={this.props.activeFontSize}\n                    onChange={this.handleFontSizeChange}\n                    title=\"Font size\"\n                />\n                <Select\n                    className={style.fontFamily}\n                    value={selectedFontFamily}\n                    onChange={this.handleChange}\n                    options={options}\n                    components={{\n                        Option: FontOptionComponent,\n                    }}\n                />\n                <Select\n                    className={style.fontVariant}\n                    value={selectedFontVariant}\n                    onChange={this.handleFontVariantChange}\n                    options={fontVariantOptions}\n                />\n                <input\n                    type=\"number\"\n                    value={this.props.activeLineHeight}\n                    onChange={this.handleLineHeightChange}\n                    title=\"Line height\"\n                    step=\"0.01\"\n                />\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    let activeFont = state.cardset.present.textSettings.fontFamily;\n    let activeFontVariant = state.cardset.present.textSettings.fontVariant;\n    let activeFontSize = state.cardset.present.textSettings.fontSize;\n    let activeLineHeight = state.cardset.present.textSettings.lineHeight || DEFAULT_LINE_HEIGHT;\n\n    return {\n        activeFont,\n        activeFontVariant,\n        activeFontSize,\n        activeLineHeight,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(FontSelector);\n","import { ColorResult } from 'react-color';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps, FieldInfo } from '../types';\nimport { State } from '../reducers';\nimport {\n    cardSetAddTextField,\n    cardSetChangeActiveFieldName,\n    cardSetChangeActiveTextFieldAlign,\n    cardSetLockActiveField,\n    cardSetLowerActiveFieldToBottom,\n    cardSetRaiseActiveFieldToTop,\n    cardSetRemoveActiveField,\n    cardSetUnlockActiveField,\n    cardSetChangeActiveTextFieldColor,\n    cardSetRaiseActiveField,\n    cardSetLowerActiveField,\n} from '../actions';\nimport ColorButton from './ColorButton';\nimport FontSelector from './FontSelector';\nimport style from './SidebarText.module.css';\n\ninterface StateProps {\n    activeField?: FieldInfo;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarText extends Component<Props> {\n    handleAddTextClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetAddTextField());\n    };\n\n    handleSetTextAlignLeft = () => {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        if (selection.rangeCount === 1 && range.collapsed) {\n            const { dispatch } = this.props;\n            dispatch(cardSetChangeActiveTextFieldAlign('left'));\n        } else {\n            document.execCommand('justifyleft');\n        }\n    };\n\n    handleSetTextAlignCenter = () => {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        if (selection.rangeCount === 1 && range.collapsed) {\n            const { dispatch } = this.props;\n            dispatch(cardSetChangeActiveTextFieldAlign('center'));\n        } else {\n            document.execCommand('justifycenter');\n        }\n    };\n\n    handleSetTextAlignRight = () => {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        if (selection.rangeCount === 1 && range.collapsed) {\n            const { dispatch } = this.props;\n            dispatch(cardSetChangeActiveTextFieldAlign('right'));\n        } else {\n            document.execCommand('justifyright');\n        }\n    };\n\n    handleSetTextBold = () => {\n        document.execCommand('bold');\n    };\n\n    handleSetTextItalic = () => {\n        document.execCommand('italic');\n    };\n\n    handleRemoveClick = () => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetRemoveActiveField());\n        }\n    };\n\n    handleRaise = (event: React.MouseEvent) => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetRaiseActiveFieldToTop());\n            } else {\n                dispatch(cardSetRaiseActiveField());\n            }\n        }\n    };\n\n    handleLower = (event: React.MouseEvent) => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            if (event.ctrlKey) {\n                dispatch(cardSetLowerActiveFieldToBottom());\n            } else {\n                dispatch(cardSetLowerActiveField());\n            }\n        }\n    };\n\n    handleLockField = () => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetLockActiveField());\n        }\n    };\n\n    handleUnlockField = () => {\n        const { activeField, dispatch } = this.props;\n        if (activeField !== undefined) {\n            dispatch(cardSetUnlockActiveField());\n        }\n    };\n\n    handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeField, dispatch } = this.props;\n        const name = event.target.value.trim();\n        if (activeField !== undefined) {\n            dispatch(cardSetChangeActiveFieldName(name));\n        }\n    };\n\n    handleColorChange = (color: ColorResult) => {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        if (selection.rangeCount === 1 && range.collapsed) {\n            const { dispatch } = this.props;\n            dispatch(cardSetChangeActiveTextFieldColor(color.hex));\n        } else {\n            document.execCommand('forecolor', false, color.hex);\n        }\n    };\n\n    render() {\n        const { activeField, visible } = this.props;\n\n        let color = '#000000';\n        if (activeField && activeField.type === 'text' && activeField.color) {\n            color = activeField.color;\n        }\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                <button onClick={this.handleAddTextClick} title=\"Add text field\">\n                    <i className=\"material-icons\">text_fields</i>\n                </button>\n                {activeField !== undefined && (\n                    <>\n                        <button onClick={this.handleRaise} title=\"Raise text (with Ctrl - raise to top)\">\n                            <i className=\"material-icons\">arrow_upward</i>\n                        </button>\n                        <button onClick={this.handleLower} title=\"Lower text (with Ctrl - lower to bottom)\">\n                            <i className=\"material-icons\">arrow_downward</i>\n                        </button>\n                    </>\n                )}\n\n                {activeField !== undefined && !activeField.locked && (\n                    <button\n                        onClick={this.handleLockField}\n                        title=\"Lock text field. Locked field can't be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock_open</i>\n                    </button>\n                )}\n\n                {activeField !== undefined && activeField.locked && (\n                    <button\n                        onClick={this.handleUnlockField}\n                        title=\"Unlock text field. Unlocked text field can be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock</i>\n                    </button>\n                )}\n\n                <button\n                    className={activeField === undefined || activeField.locked ? style.disabled : ''}\n                    onClick={this.handleRemoveClick}\n                    title=\"Remove field\"\n                >\n                    <i className=\"material-icons\">remove</i>\n                </button>\n\n                {activeField !== undefined && (\n                    <input\n                        type=\"text\"\n                        value={activeField.name || ''}\n                        placeholder={activeField.id}\n                        onChange={this.handleNameChange}\n                        title=\"Change name of text field.\"\n                    />\n                )}\n\n                <div>\n                    <button onClick={this.handleSetTextAlignLeft} title=\"Align text left\">\n                        <i className=\"material-icons\">format_align_left</i>\n                    </button>\n                    <button onClick={this.handleSetTextAlignCenter} title=\"Align text center\">\n                        <i className=\"material-icons\">format_align_center</i>\n                    </button>\n                    <button onClick={this.handleSetTextAlignRight} title=\"Align text right\">\n                        <i className=\"material-icons\">format_align_right</i>\n                    </button>\n                    <button onClick={this.handleSetTextBold} title=\"Makes selected text bold\">\n                        <i className=\"material-icons\">format_bold</i>\n                    </button>\n                    <button onClick={this.handleSetTextItalic} title=\"Makes selected text italic\">\n                        <i className=\"material-icons\">format_italic</i>\n                    </button>\n                    <ColorButton color={color} onChange={this.handleColorChange} />\n                    <FontSelector />\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    const activeField =\n        state.cardset.present.activeCardId !== undefined && state.cardset.present.activeFieldId !== undefined\n            ? state.cardset.present.fields[state.cardset.present.activeCardId][state.cardset.present.activeFieldId]\n            : undefined;\n\n    return {\n        activeField,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarText);\n","import 'filepond/dist/filepond.min.css';\n\nimport './SidebarUpload.css';\n\nimport { FilePond, registerPlugin } from 'react-filepond';\nimport { connect } from 'react-redux';\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport {\n    FPAbortCallback,\n    FPErrorCallback,\n    FPLoadCallback,\n    FPProgressCallback,\n    FPRevertLoadCallback,\n    cardSetDeleteImage,\n    cardSetUploadImage,\n} from '../actions';\nimport { State } from '../reducers';\nimport style from './SidebarUpload.module.css';\n\nregisterPlugin(FilePondPluginFileValidateSize);\nregisterPlugin(FilePondPluginFileValidateType);\n\ninterface StateProps {\n    activeGame: string | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarUpload extends Component<Props> {\n    handleProcess = (\n        fieldName: string,\n        file: File,\n        metadata: { [propName: string]: string },\n        load: FPLoadCallback,\n        error: FPErrorCallback,\n        progress: FPProgressCallback,\n        abort: FPAbortCallback,\n    ) => {\n        const { dispatch, activeGame } = this.props;\n\n        if (activeGame === null) {\n            abort();\n            return;\n        }\n\n        let source = axios.CancelToken.source();\n\n        dispatch(cardSetUploadImage(activeGame, file, load, error, progress, abort, source.token));\n\n        return { abort: source.cancel };\n    };\n\n    handleRevert = (uniqueFileId: string, load: FPRevertLoadCallback, error: FPErrorCallback) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetDeleteImage(uniqueFileId, load, error));\n    };\n\n    render() {\n        const { visible } = this.props;\n\n        return (\n            <div\n                className={style.view}\n                style={{ display: 'grid', visibility: visible ? 'visible' : 'hidden', height: visible ? 'auto' : 0 }}\n            >\n                <div>\n                    Uploaded imaged are kept for limited time. If they are deleted then simply re-upload them again.\n                </div>\n                <FilePond\n                    allowMultiple={true}\n                    server={{\n                        process: this.handleProcess,\n                        revert: this.handleRevert,\n                    }}\n                    acceptedFileTypes={[\n                        'image/png',\n                        'image/jpeg',\n                        'image/svg+xml',\n                        'image/webp',\n                        'image/tiff',\n                        'image/gif',\n                    ]}\n                    allowFileSizeValidation={true}\n                    maxFileSize=\"500KB\"\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeGame: state.games.active,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarUpload);\n","import { connect, ConnectedComponentClass } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { SidebarState, cardSetSetSidebarState } from '../actions';\nimport { State } from '../reducers';\nimport SidebarDetails from './SidebarDetails';\nimport SidebarGeneratePng from './SidebarGeneratePng';\nimport SidebarGeneratePdf from './SidebarGeneratePdf';\nimport SidebarImage from './SidebarImage';\nimport SidebarImportExport from './SidebarImportExport';\nimport SidebarMeasurements from './SidebarMeasurements';\nimport SidebarSettings from './SidebarSettings';\nimport SidebarText from './SidebarText';\nimport SidebarUpload from './SidebarUpload';\nimport style from './Sidebar.module.css';\n\ninterface StateProps {\n    activeSidebar: SidebarState | null;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface SidebarInfo {\n    state: SidebarState;\n    title: string;\n    icon: string;\n    component: ConnectedComponentClass<typeof Component, SidebarOwnProps>;\n}\n\nconst SIDEBARS: SidebarInfo[] = [\n    {\n        state: SidebarState.Settings,\n        title: 'Settings',\n        icon: 'settings',\n        component: SidebarSettings,\n    },\n    {\n        state: SidebarState.Details,\n        title: 'Details',\n        icon: 'details',\n        component: SidebarDetails,\n    },\n    {\n        state: SidebarState.Measurements,\n        title: 'Measurements',\n        icon: 'format_shapes',\n        component: SidebarMeasurements,\n    },\n    {\n        state: SidebarState.Image,\n        title: 'Images',\n        icon: 'photo',\n        component: SidebarImage,\n    },\n    {\n        state: SidebarState.Text,\n        title: 'Texts',\n        icon: 'text_fields',\n        component: SidebarText,\n    },\n    {\n        state: SidebarState.Upload,\n        title: 'Upload',\n        icon: 'cloud_upload',\n        component: SidebarUpload,\n    },\n    {\n        state: SidebarState.ImportExport,\n        title: 'Import/Export',\n        icon: 'import_export',\n        component: SidebarImportExport,\n    },\n    {\n        state: SidebarState.Png,\n        title: 'Generate as PNG',\n        icon: 'photo_library',\n        component: SidebarGeneratePng,\n    },\n    {\n        state: SidebarState.Pdf,\n        title: 'Generate as PDF',\n        icon: 'picture_as_pdf',\n        component: SidebarGeneratePdf,\n    },\n];\n\nexport class Sidebar extends Component<Props> {\n    handleSidebar = (state: SidebarState) => {\n        const { activeSidebar, dispatch } = this.props;\n        if (activeSidebar === state) {\n            dispatch(cardSetSetSidebarState(null));\n        } else {\n            dispatch(cardSetSetSidebarState(state));\n        }\n    };\n\n    render() {\n        const { activeSidebar } = this.props;\n        return (\n            <div className={style.sidebar}>\n                <div className={style.controls}>\n                    {SIDEBARS.map(sb => (\n                        <i\n                            key={sb.state}\n                            title={sb.title}\n                            className={`material-icons ${activeSidebar === sb.state ? style.active : ''}`}\n                            onClick={() => this.handleSidebar(sb.state)}\n                        >\n                            {sb.icon}\n                        </i>\n                    ))}\n                </div>\n                <div className={`${style.view} ${activeSidebar === null ? style.hidden : ''}`}>\n                    {SIDEBARS.map(sb => (\n                        <sb.component key={sb.state} visible={activeSidebar === sb.state} />\n                    ))}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeSidebar: state.cardset.present.activeSidebar,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(Sidebar);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport shortid from 'shortid';\n\nimport { ACTIVITY_SELECTING, State } from '../reducers';\nimport { BLEED_WIDTH } from '../constants';\nimport { CardSetType, CardType, CardsCollection } from '../types';\nimport {\n    Dispatch,\n    cardSetActiveCardAndField,\n    cardSetCreateCard,\n    cardSetRenameRequest,\n    cardSetUndo,\n    cardSetRedo,\n} from '../actions';\nimport Card from './Card';\nimport EditableTitle from './EditableTitle';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\nimport Loader from './Loader';\nimport Sidebar from './Sidebar';\nimport style from './CardSet.module.css';\n\ninterface StateProps {\n    width: number;\n    height: number;\n    isTwoSided: boolean;\n    isAuthenticated?: boolean;\n    cardsAllIds: string[];\n    cardsById: CardsCollection;\n    activity: number;\n    zoom: number;\n    activeCardSet: CardSetType | null;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface LocalState {\n    pageWidth: number;\n    pageHeight: number;\n    topBottomMargin: number;\n    leftRightMargin: number;\n}\n\nexport class CardSet extends Component<Props, LocalState> {\n    state = {\n        pageWidth: 210,\n        pageHeight: 297,\n        topBottomMargin: 15,\n        leftRightMargin: 9,\n    };\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.keyDown);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keydown', this.keyDown);\n    }\n\n    keyDown = (event: KeyboardEvent) => {\n        const { dispatch } = this.props;\n\n        switch (event.key) {\n            case 'z':\n            case 'Z': {\n                if (event.ctrlKey && event.shiftKey) {\n                    dispatch(cardSetRedo());\n                } else if (event.ctrlKey) {\n                    dispatch(cardSetUndo());\n                }\n                break;\n            }\n            case 'y':\n            case 'Y': {\n                if (event.ctrlKey) {\n                    dispatch(cardSetRedo());\n                }\n                break;\n            }\n            // no default\n        }\n    };\n\n    handleCreateCardClick = () => {\n        const { dispatch } = this.props;\n\n        const newCard: CardType = { id: shortid.generate(), count: 1 };\n\n        dispatch(cardSetCreateCard(newCard));\n    };\n\n    handleClickOutsideOfCard = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetActiveCardAndField(undefined, false, undefined));\n    };\n\n    handleCardSetNameChange = (newName: string) => {\n        const { dispatch, activeCardSet } = this.props;\n        if (activeCardSet !== null) {\n            dispatch(cardSetRenameRequest(activeCardSet.id, newName));\n        }\n    };\n\n    render() {\n        const {\n            isAuthenticated,\n            cardsAllIds,\n            cardsById,\n            width,\n            height,\n            isTwoSided,\n            activity,\n            zoom,\n            activeCardSet,\n        } = this.props;\n\n        const widthWithBleeds = width + BLEED_WIDTH * 2;\n        const heightWithBleeds = height + BLEED_WIDTH * 2;\n\n        return (\n            isAuthenticated && (\n                <div>\n                    <KawaiiMessage character={Character.Ghost}>\n                        <p>Here you can design your cards.</p>\n                    </KawaiiMessage>\n\n                    {activeCardSet !== null && (\n                        <EditableTitle title={activeCardSet.name} onChange={this.handleCardSetNameChange} />\n                    )}\n\n                    <div className={style.cardsetview}>\n                        <div className={style.sidebar}>\n                            <Sidebar />\n                        </div>\n                        <div onMouseDown={this.handleClickOutsideOfCard} onTouchStart={this.handleClickOutsideOfCard}>\n                            {(activity & ACTIVITY_SELECTING) === ACTIVITY_SELECTING && <Loader />}\n                            <div className={style.cardset}>\n                                <ul\n                                    style={{\n                                        gridTemplateColumns: `repeat(auto-fill, minmax(${widthWithBleeds *\n                                            zoom}mm, 1fr))`,\n                                    }}\n                                >\n                                    {cardsAllIds &&\n                                        cardsAllIds.map(cardId => [\n                                            <li key={cardId}>\n                                                <Card card={cardsById[cardId]} isBack={false} />\n                                            </li>,\n                                            isTwoSided && (\n                                                <li key={`${cardId}back`}>\n                                                    <Card card={cardsById[cardId]} isBack={true} />\n                                                </li>\n                                            ),\n                                        ])}\n                                    <li key=\"newCard\">\n                                        <div\n                                            id=\"newCard\"\n                                            className={style.createCard}\n                                            style={{\n                                                width: `${widthWithBleeds * zoom}mm`,\n                                                height: `${heightWithBleeds * zoom}mm`,\n                                                position: 'relative',\n                                                overflow: 'hidden',\n                                            }}\n                                            onClick={this.handleCreateCardClick}\n                                        >\n                                            <div>\n                                                <i className=\"material-icons\">add</i>\n                                                <div>Add Card</div>\n                                            </div>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activity: state.cardset.present.activity,\n        width: state.cardset.present.width,\n        height: state.cardset.present.height,\n        isTwoSided: state.cardset.present.isTwoSided,\n        zoom: state.cardset.present.zoom,\n        isAuthenticated: state.auth.isAuthenticated,\n        cardsAllIds: state.cardset.present.cardsAllIds,\n        cardsById: state.cardset.present.cardsById,\n        activeCardSet:\n            state.cardsets.active && state.cardsets.byId[state.cardsets.active]\n                ? state.cardsets.byId[state.cardsets.active]\n                : null,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(CardSet);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { Dispatch, cardSetSelectRequest } from './actions';\nimport { State } from './reducers';\nimport CardSet from './components/CardSet';\n\ninterface Props {\n    dispatch: Dispatch;\n    match: { params: { id: string } };\n    isAuthenticated?: boolean;\n}\n\nexport class CardSetPage extends Component<Props> {\n    componentDidMount() {\n        const { dispatch, match } = this.props;\n        dispatch(cardSetSelectRequest(match.params.id));\n    }\n\n    render() {\n        const { isAuthenticated } = this.props;\n        if (isAuthenticated) {\n            return <CardSet />;\n        } else if (isAuthenticated === false) {\n            return <Redirect to=\"/login\" />;\n        } else {\n            return null;\n        }\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(CardSetPage);\n","import React, { Component } from 'react';\n\nexport default class ChangelogPage extends Component {\n    render() {\n        return (\n            <div>\n                <p>Here you can find list of future plans and what was implemented recently.</p>\n                <h2>2019-09-28</h2>\n                <ul>\n                    <li>CSV import improved.</li>\n                </ul>\n                <h2>2019-09-10</h2>\n                <ul>\n                    <li>Bug fix release.</li>\n                </ul>\n                <h2>2019-07-01</h2>\n                <ul>\n                    <li>Bug fix release.</li>\n                </ul>\n                <h2>2019-06-28</h2>\n                <ul>\n                    <li>Show font name using itself in font selection dropdown.</li>\n                    <li>Bug fixes.</li>\n                </ul>\n                <h2>2019-06-23</h2>\n                <ul>\n                    <li>Security improved.</li>\n                    <li>Help page added.</li>\n                    <li>Option to rotate cards added.</li>\n                    <li>Possibility to get a list of game's attributions added.</li>\n                    <li>Undo/Redo exposed in UI (while I suggest using Ctrl+Z and Ctrl+Shift+Z/Ctrl+Y instead).</li>\n                </ul>\n                <h2>2019-06-22</h2>\n                <ul>\n                    <li>TIFF, WEBP and GIF support added.</li>\n                    <li>No need to keep upload sidebar open to upload images.</li>\n                </ul>\n                <h2>2019-06-20</h2>\n                <ul>\n                    <li>Bug fix release: PDF generation, import/export fixes.</li>\n                </ul>\n                <h2>2019-06-16</h2>\n                <ul>\n                    <li>Bug fix release.</li>\n                </ul>\n                <h2>2019-06-08</h2>\n                <ul>\n                    <li>\"Apply to all cards\" work on pan and zoom as well.</li>\n                    <li>UX on mobile devices (e.g. phones) improved.</li>\n                    <li>Other minor fixes.</li>\n                </ul>\n                <h2>2019-06-04</h2>\n                <ul>\n                    <li>Possibility to zoom in and pan imaged added.</li>\n                    <li>Undo/Redo using Ctrl+Z and Ctrl+Y (or Ctrl+Shift+Z).</li>\n                    <li>More small improvements and bug fixes.</li>\n                </ul>\n                <h2>2019-05-26</h2>\n                <ul>\n                    <li>Text rendering fixes.</li>\n                    <li>Card Sets and Games list are sorted alphabetically now.</li>\n                    <li>Image handling improvements.</li>\n                </ul>\n                <h2>2019-05-18</h2>\n                <ul>\n                    <li>PDF and PNG generation improvements.</li>\n                </ul>\n                <h2>2019-05-17</h2>\n                <ul>\n                    <li>\n                        PNG generation for card set or the whole game. This will benefit if you want to publish game via{' '}\n                        <a href=\"https://www.thegamecrafter.com/\">The Game Crafter</a>,{' '}\n                        <a href=\"makeplayingcards.com\">Make Playing Cards</a> or any other place.\n                    </li>\n                </ul>\n                <h2>2019-04-13</h2>\n                <ul>\n                    <li>Option to generate cutting marks on front side only.</li>\n                    <li>Guillotine cuttings marks on card edges.</li>\n                    <li>\n                        Field move limitation is removed because if drag field outside of view you can return it using\n                        custom positions and size controls.\n                    </li>\n                    <li>Drag and drop improvement.</li>\n                </ul>\n                <h2>2019-04-07</h2>\n                <ul>\n                    <li>Snapping implemented for move, rotation and resize operations.</li>\n                    <li>Image search changes and improvements.</li>\n                    <li>\n                        Drag&Drop support for images. Images can be dropped to text field as well but it is assumed that\n                        dropped images are square when generating PDF.\n                    </li>\n                    <li>Bold and Italic support in text added.</li>\n                    <li>Other minor fixes.</li>\n                </ul>\n                <h2>2019-03-22</h2>\n                <ul>\n                    <li>Two-sided cards.</li>\n                    <li>PDF generation for all the game.</li>\n                    <li>More PDF generation options added</li>\n                    <li>Change color of images (for SVG images only, e.g. try using with \"forms\" images).</li>\n                    <li>Game rename and delete</li>\n                    <li>Card Set rename and delete</li>\n                    <li>Text: line height support</li>\n                    <li>UI/UX improvements</li>\n                </ul>\n                <h2>2019-03-03</h2>\n                <ul>\n                    <li>Data import/export in JSON and CSV formats.</li>\n                    <li>\n                        Named fields. If multiple fields have the same name then by editing one you change value in all\n                        of them. As well named fields look better in data export/import.\n                    </li>\n                </ul>\n\n                <h2>2019-03-02</h2>\n                <ul>\n                    <li>You can upload your own images now. Images are limited.</li>\n                    <li>\n                        Image order support added. E.g.: now you can upload background image and lower it to the bottom.\n                    </li>\n                    <li>Progress indicators and user messages improvements.</li>\n                </ul>\n\n                <h2>2019-02-24</h2>\n                <ul>\n                    <li>Sidebar created for lighter, cleaner and faster UI.</li>\n                    <li>Zoom added to card set for more flexibility while viewing or editing.</li>\n                </ul>\n                <h2>2019-02-23</h2>\n                <ul>\n                    <li>Text rendering changed and should be working properly now.</li>\n                    <li>Crash with new card set fixed.</li>\n                    <li>Minor UI improvements.</li>\n                </ul>\n                <h2>2019-02-17</h2>\n                <p>Initial public version.</p>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport { reportError } from './utils';\n\nwindow.addEventListener('error', function(evt: ErrorEvent) {\n    let error = evt.error;\n    reportError(error);\n});\n\nwindow.addEventListener('unhandledrejection', function (event: PromiseRejectionEvent) {\n    reportError(new Error(event.reason));\n});\n\ninterface Props {\n    children: React.ReactNode;\n}\n\ninterface State {\n    hasError: boolean;\n}\n\nexport default class ErrorBoundary extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = { hasError: false };\n    }\n\n    componentDidCatch(error: Error | null) {\n        this.setState({ hasError: true });\n        if (error !== null) {\n            reportError(error);\n        }\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <KawaiiMessage character={Character.Browser} mood=\"ko\">\n                    Something unexpected has happened. Error report is sent to me by e-mail and I will review it as soon\n                    as possible. Still feel free to contact me by e-mail{' '}\n                    <a href=\"mailto:dalius@ffff.lt\">dalius@ffff.lt</a>.\n                </KawaiiMessage>\n            );\n        }\n        return this.props.children;\n    }\n}\n","import React, { Component } from 'react';\nimport style from './ConfirmedDelete.module.css';\n\ninterface Props {\n    question: string;\n    onDelete: () => void;\n}\n\nexport default class ConfirmedDelete extends Component<Props> {\n    state = {\n        deleteClicked: false,\n    };\n\n    handleRemove = () => {\n        this.setState({ deleteClicked: !this.state.deleteClicked });\n    };\n\n    handleYes = () => {\n        this.setState({ deleteClicked: false });\n        this.props.onDelete();\n    };\n\n    handleNo = () => {\n        this.setState({ deleteClicked: false });\n    };\n\n    render() {\n        const { deleteClicked } = this.state;\n        const { question } = this.props;\n\n        return (\n            <>\n                <i title=\"Remove\" className={`material-icons ${style.button}`} onClick={this.handleRemove}>\n                    remove_circle_outline\n                </i>{' '}\n                {deleteClicked && (\n                    <>\n                        {question}{' '}\n                        <span className={style.answer} onClick={this.handleYes}>\n                            Yes\n                        </span>{' '}\n                        /{' '}\n                        <span className={style.answer} onClick={this.handleNo}>\n                            No\n                        </span>\n                    </>\n                )}\n            </>\n        );\n    }\n}\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardSetsCollection, GameType, IdsArray } from '../types';\nimport {\n    Dispatch,\n    cardSetCreateRequest,\n    cardSetDeleteRequest,\n    gameRenameRequest,\n    messageDisplay,\n    gameCreatePngRequest,\n    gameGetAttributionsRequest,\n} from '../actions';\nimport { State, ACTIVITY_CREATING_PNG } from '../reducers';\nimport ConfirmedDelete from './ConfirmedDelete';\nimport EditableTitle from './EditableTitle';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\nimport PDFGenerator from './PDFGenerator';\nimport style from './CardSets.module.css';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated?: boolean;\n    activeGame: GameType | null;\n    allIds: IdsArray;\n    byId: CardSetsCollection;\n    isCreatingPng: boolean;\n    attributions: string[];\n}\n\ninterface LocalState {\n    cardSetName: string;\n    width: number;\n    height: number;\n    dpi: number;\n}\n\nexport class CardSets extends Component<Props, LocalState> {\n    state: LocalState = {\n        cardSetName: '',\n        width: 63.5,\n        height: 88.9,\n        dpi: 300,\n    };\n\n    handleGameNameChange = (newName: string) => {\n        const { dispatch, activeGame } = this.props;\n        if (activeGame !== null) {\n            dispatch(gameRenameRequest(activeGame.id, newName));\n        }\n    };\n\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cardSetName: event.target.value });\n    };\n\n    handleWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ width: parseFloat(event.target.value) });\n    };\n\n    handleHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ height: parseFloat(event.target.value) });\n    };\n\n    handleCreateCardSetClick = () => {\n        const { dispatch, activeGame } = this.props;\n\n        if (activeGame === null) {\n            return;\n        }\n\n        const cardSetName = this.state.cardSetName.trim();\n\n        if (cardSetName) {\n            dispatch(cardSetCreateRequest(cardSetName, this.state.width, this.state.height, activeGame.id));\n        } else {\n            dispatch(messageDisplay('error', 'Card Set name should be non empty.'));\n        }\n    };\n\n    handleCardSetDelete = (cardSetId: string) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetDeleteRequest(cardSetId));\n    };\n\n    handleDpiChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ dpi: parseInt(event.target.value) });\n    };\n\n    handleGenerate = () => {\n        const { dispatch, activeGame } = this.props;\n        const { dpi } = this.state;\n\n        if (activeGame !== null) {\n            dispatch(gameCreatePngRequest(dpi, 'games', activeGame.id));\n        }\n    };\n\n    handleGetAttributions = () => {\n        const { dispatch, activeGame } = this.props;\n\n        if (activeGame !== null) {\n            dispatch(gameGetAttributionsRequest());\n        }\n    };\n\n    render() {\n        const { isAuthenticated, activeGame, allIds, byId, isCreatingPng, attributions } = this.props;\n        const { dpi } = this.state;\n\n        let cardsets = allIds.map(cardsetId => byId[cardsetId]);\n        cardsets.sort((a, b) => (a.name < b.name ? -1 : 1));\n\n        const cardsetItems = cardsets.map(cardset => (\n            <li key={cardset.id}>\n                <Link to={`/cardset/${cardset.id}`}>{cardset.name}</Link>{' '}\n                <ConfirmedDelete\n                    question=\"Do you really want to delete this card set?\"\n                    onDelete={() => this.handleCardSetDelete(cardset.id)}\n                />\n            </li>\n        ));\n\n        return (\n            isAuthenticated &&\n            activeGame !== null && (\n                <div className={style.cardsets}>\n                    <KawaiiMessage character={Character.Ghost}>\n                        Each game is made from card sets. Card set is collection of cards that share the same properties\n                        but have different text and images.\n                    </KawaiiMessage>\n\n                    <EditableTitle title={activeGame.name} onChange={this.handleGameNameChange} />\n\n                    <ul>{cardsetItems}</ul>\n\n                    <div className=\"form\">\n                        <label htmlFor=\"cardset_name\">Card Set name:</label>\n                        <input\n                            id=\"cardset_name\"\n                            type=\"text\"\n                            onChange={this.handleChange}\n                            className=\"form-control\"\n                            placeholder=\"Card Set name\"\n                        />\n                        <label htmlFor=\"card_width\">Card width:</label>\n                        <input\n                            id=\"card_width\"\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onChange={this.handleWidthChange}\n                            className=\"form-control\"\n                            placeholder=\"Card width\"\n                            value={this.state.width}\n                        />\n                        <label htmlFor=\"card_height\">Card height:</label>\n                        <input\n                            id=\"card_height\"\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onChange={this.handleHeightChange}\n                            className=\"form-control\"\n                            placeholder=\"Card height\"\n                            value={this.state.height}\n                        />\n                        <button onClick={this.handleCreateCardSetClick}>Create Card Set</button>\n                    </div>\n\n                    <KawaiiMessage character={Character.Ghost} mood=\"excited\">\n                        Hint: Poker card size 63.5mm x 88.9mm. Bridge card size 57.15mm x 88.9mm. But you can have cards\n                        of any size.\n                    </KawaiiMessage>\n\n                    <PDFGenerator type=\"games\" id={activeGame.id} withHelp={true} />\n\n                    <div className=\"form\">\n                        Or you can generate PNG files for all the game:\n                        <label htmlFor=\"dpi\">DPI:</label>\n                        <input\n                            id=\"dpi\"\n                            type=\"number\"\n                            min=\"1\"\n                            step=\"1\"\n                            onChange={this.handleDpiChange}\n                            className=\"form-control\"\n                            placeholder=\"DPI\"\n                            value={dpi}\n                        />\n                        <button disabled={isCreatingPng} onClick={this.handleGenerate}>\n                            Generate PNG files\n                        </button>\n                    </div>\n\n                    <div className=\"form\">\n                        Get attributions for images you have used. You don't need to do this if you have used your own\n                        images/art.\n                        <button onClick={this.handleGetAttributions}>Get attributions</button>\n                        {attributions && attributions.length > 0 && (\n                            <>\n                                Give attributions to:\n                                <ul>\n                                    {attributions.map(attribution => (\n                                        <li key={attribution}>{attribution}</li>\n                                    ))}\n                                </ul>\n                            </>\n                        )}\n                    </div>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activeGame:\n            state.games.active && state.games.byId[state.games.active] ? state.games.byId[state.games.active] : null,\n        allIds: state.cardsets.allIds,\n        byId: state.cardsets.byId,\n        isCreatingPng: (state.games.activity & ACTIVITY_CREATING_PNG) === ACTIVITY_CREATING_PNG,\n        attributions: state.games.attributions,\n    };\n};\n\nexport default connect(mapStateToProps)(CardSets);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { Dispatch, gameSelectRequest } from './actions';\nimport { State } from './reducers';\nimport CardSets from './components/CardSets';\n\ninterface Props {\n    dispatch: Dispatch;\n    match: { params: { id: string } };\n    isAuthenticated?: boolean;\n}\n\nexport class GamePage extends Component<Props> {\n    componentDidMount() {\n        const { dispatch, match } = this.props;\n        dispatch(gameSelectRequest(match.params.id, true));\n    }\n\n    render() {\n        const { isAuthenticated } = this.props;\n        if (isAuthenticated) {\n            return <CardSets />;\n        } else if (isAuthenticated === false) {\n            return <Redirect to=\"/login\" />;\n        } else {\n            return null;\n        }\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(GamePage);\n","import React, { Component } from 'react';\n\nexport default class AboutPage extends Component {\n    render() {\n        return (\n            <div>\n                <h2>Help</h2>\n                <p>You can learn how to use Card-a-mon from tutorials:</p>\n                <ul>\n                    <li>\n                        <a href=\"https://blog.ffff.lt/posts/cardamon-tutorial-01/\">Creating first game prototype</a>\n                    </li>\n                    <li>\n                        <a href=\"https://blog.ffff.lt/posts/cardamon-tutorial-02/\">Uploading your own images</a>\n                    </li>\n                    <li>\n                        <a href=\"https://blog.ffff.lt/posts/cardamon-tutorial-03/\">Import and export</a>\n                    </li>\n                    <li>\n                        <a href=\"https://blog.ffff.lt/posts/cardamon-tutorial-04/\">PDF generation options</a>\n                    </li>\n                </ul>\n                <p>\n                    If tutorials do not answer your question then feel free to contact me by e-mail{' '}\n                    <a href=\"mailto:dalius@ffff.lt\">dalius@ffff.lt</a>, on{' '}\n                    <a href=\"https://twitter.com/DaliusD_\">twitter</a> or{' '}\n                    <a href=\"https://www.reddit.com/user/daliusd_/\">reddit</a>.\n                </p>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\ninterface Props {\n    onLogin: (creds: { username: string; password: string }) => void;\n    onLoginFailure: (message: string) => void;\n}\n\ninterface LocalState {\n    username: string;\n    password: string;\n}\n\nexport default class Login extends Component<Props, LocalState> {\n    state = {\n        username: '',\n        password: '',\n    };\n\n    handleUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ username: event.target.value });\n    };\n\n    handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ password: event.target.value });\n    };\n\n    handleSubmit = (event: React.FormEvent) => {\n        const username = this.state.username.trim();\n        const password = this.state.password.trim();\n        if (username && password) {\n            const creds = { username, password };\n            this.props.onLogin(creds);\n        } else {\n            this.props.onLoginFailure('Missing username and/or password.');\n        }\n        event.preventDefault();\n    };\n\n    render() {\n        return (\n            <div>\n                <form className=\"form\" onSubmit={this.handleSubmit}>\n                    <input\n                        type=\"text\"\n                        onChange={this.handleUsernameChange}\n                        className=\"form-control\"\n                        placeholder=\"Username\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordChange}\n                        className=\"form-control\"\n                        placeholder=\"Password\"\n                    />\n                    <input type=\"submit\" value=\"Login\" />\n                </form>\n            </div>\n        );\n    }\n}\n","import { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, loginRequest, messageDisplay } from './actions';\nimport { State } from './reducers';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport Login from './components/Login';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated?: boolean;\n}\n\nexport class LoginPage extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated } = this.props;\n\n        return (\n            <div className=\"App\">\n                {!isAuthenticated && (\n                    <>\n                        <KawaiiMessage character={Character.Ghost}>\n                            Please enter your credentials to login. If you don't have account yet then you can create\n                            one here: <a href=\"/signup\">Sign-up</a>.\n                        </KawaiiMessage>\n\n                        <Login\n                            onLogin={creds => dispatch(loginRequest(creds))}\n                            onLoginFailure={msg => dispatch(messageDisplay('error', msg))}\n                        />\n                    </>\n                )}\n                {isAuthenticated && <Redirect to=\"/\" />}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(LoginPage);\n","import { Link } from 'react-router-dom';\nimport React, { Component } from 'react';\nimport style from './FeatureList.module.css';\nimport screenshot from './screenshot.png';\n\nexport default class FeatureList extends Component {\n    render() {\n        return (\n            <div className={style.features}>\n                <div>\n                    <img src={screenshot} alt=\"screenshot\" />\n                </div>\n                Card-a-mon has a lot of required functionality to create a card game from prototype to final product:\n                <ul>\n                    <li>\n                        <strong>Multiple card sets</strong> per game. Each with its own card size and other properties.\n                    </li>\n                    <li>\n                        <strong>Works on modern browsers</strong> both desktop and mobile.\n                    </li>\n                    <li>\n                        <strong>WYSIWYG</strong> editing of cards.\n                    </li>\n                    <li>\n                        <strong>Full images control</strong> - resize, rotation, zoom and panning. Use images from\n                        built-in collection of 8000+ images or upload your own.\n                    </li>\n                    <li>\n                        <strong>Powerful text editing</strong> - hundreds of fonts, font size, alignment, variants, line\n                        height, rotation and color control, possibility to embed images into text.\n                    </li>\n                    <li>\n                        <strong>Data export/import</strong> to/from JSON and CSV formats.\n                    </li>\n                    <li>\n                        <strong>PDF generation</strong> of full game (all card sets) with cuttings marks for print and\n                        play.\n                    </li>\n                    <li>\n                        <strong>PNG generation</strong> for printing in services like The Game Crafter, Make Playings\n                        Cards and others.\n                    </li>\n                </ul>\n                <p>\n                    Check out <Link to=\"/help\">Help</Link> for more details.\n                </p>\n            </div>\n        );\n    }\n}\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, gameCreateRequest, gameDeleteRequest, messageDisplay } from '../actions';\nimport { GamesCollection, IdsArray } from '../types';\nimport { State } from '../reducers';\nimport ConfirmedDelete from './ConfirmedDelete';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\nimport FeatureList from './FeatureList';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated?: boolean;\n    allIds: IdsArray;\n    byId: GamesCollection;\n}\n\ninterface LocalState {\n    gameName: string;\n}\n\nexport class Games extends Component<Props, LocalState> {\n    state: LocalState = {\n        gameName: '',\n    };\n\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ gameName: event.target.value });\n    };\n\n    handleCreateGameClick = () => {\n        const { dispatch } = this.props;\n\n        const gamename = this.state.gameName.trim();\n        if (gamename) {\n            dispatch(gameCreateRequest(gamename));\n        } else {\n            dispatch(messageDisplay('error', 'Game name should be non empty.'));\n        }\n    };\n\n    handleGameDelete = (gameId: string) => {\n        const { dispatch } = this.props;\n        dispatch(gameDeleteRequest(gameId));\n    };\n\n    render() {\n        const { isAuthenticated, allIds, byId } = this.props;\n\n        const games = allIds.map(gameId => byId[gameId]);\n        games.sort((a, b) => (a.name < b.name ? -1 : 1));\n\n        const gameItems = games.map(game => (\n            <li key={game.id}>\n                <Link to={`/game/${game.id}`}>{game.name}</Link>{' '}\n                <ConfirmedDelete\n                    question=\"Do you really want to delete this game?\"\n                    onDelete={() => this.handleGameDelete(game.id)}\n                />\n            </li>\n        ));\n\n        return (\n            isAuthenticated && (\n                <div>\n                    <KawaiiMessage character={Character.Ghost}>\n                        <FeatureList />\n                        {allIds.length === 0 && (\n                            <>Below you can create your games and see list of your games when you have some.</>\n                        )}\n                        {allIds.length > 0 && (\n                            <>Below you can see a list of your games or you can create even more games.</>\n                        )}\n                    </KawaiiMessage>\n\n                    <ul>{gameItems}</ul>\n                    <div className=\"form\">\n                        <label htmlFor=\"game_name\">Game name:</label>\n                        <input\n                            id=\"game_name\"\n                            type=\"text\"\n                            onChange={this.handleChange}\n                            className=\"form-control\"\n                            placeholder=\"Game name\"\n                        />\n                        <button onClick={this.handleCreateGameClick}>Create Game</button>\n                    </div>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        allIds: state.games.allIds,\n        byId: state.games.byId,\n    };\n};\n\nexport default connect(mapStateToProps)(Games);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { State } from './reducers';\nimport Games from './components/Games';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport FeatureList from './components/FeatureList';\n\ninterface Props {\n    isAuthenticated?: boolean;\n}\n\nexport class Main extends Component<Props> {\n    render() {\n        if (this.props.isAuthenticated) {\n            return <Games />;\n        } else {\n            return (\n                <KawaiiMessage character={Character.Ghost}>\n                    <FeatureList />\n                    Here you can create your own card game but you need to <a href=\"/login\">Login</a> or{' '}\n                    <a href=\"/signup\">Sign-up</a> first.\n                </KawaiiMessage>\n            );\n        }\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n    };\n};\n\nexport default connect(mapStateToProps)(Main);\n","import { State } from './reducers';\n\nexport const getActiveGame = (state: State) => (state.games.active ? state.games.byId[state.games.active] : null);\n\nexport const getActiveCardSet = (state: State) =>\n    state.cardsets.active ? state.cardsets.byId[state.cardsets.active] : null;\n","import React from 'react';\n\ninterface Props {\n    onLogout: () => void;\n}\n\nfunction Logout(props: Props) {\n    return (\n        <button onClick={() => props.onLogout()} className=\"btn btn-primary\">\n            Logout\n        </button>\n    );\n}\n\nexport default Logout;\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardSetType, GameType, MessageType } from '../types';\nimport { Dispatch, logoutRequest } from '../actions';\nimport { State } from '../reducers';\nimport { getActiveCardSet, getActiveGame } from '../selectors';\nimport Loader from './Loader';\nimport Logout from './Logout';\nimport style from './Navbar.module.css';\n\ninterface OwnProps {\n    isAuthenticated?: boolean;\n}\n\ninterface StateProps {\n    messages: MessageType[];\n    activeGame: GameType | null;\n    activeCardSet: CardSetType | null;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nexport class Navbar extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated, messages, activeGame, activeCardSet } = this.props;\n\n        return (\n            <nav>\n                <div id=\"messages\" className={style.messages}>\n                    <ul>\n                        {messages.map(m => (\n                            <li key={m.id} className={m.type === 'error' ? style.error : style.info}>\n                                {m.type === 'error' && (\n                                    <>\n                                        <i className=\"material-icons\">error</i> {m.text}\n                                    </>\n                                )}\n                                {m.type === 'info' && (\n                                    <>\n                                        <i className=\"material-icons\">info</i> {m.text}\n                                    </>\n                                )}\n                                {m.type === 'progress' && (\n                                    <>\n                                        <Loader small={true} /> {m.text}\n                                    </>\n                                )}\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n                <div>\n                    <h1 className={style.header}>\n                        <Link to=\"/\">CARD-A-MON</Link>\n                    </h1>\n                    <div>\n                        <ul className={style.menu}>\n                            <li>\n                                <Link to=\"/\">Main</Link>\n                            </li>\n                            {isAuthenticated && (\n                                <>\n                                    {activeGame && (\n                                        <li>\n                                            <Link to={`/game/${activeGame.id}`}>Game \"{activeGame.name}\"</Link>\n                                        </li>\n                                    )}\n                                    {activeCardSet && (\n                                        <li>\n                                            <Link to={`/cardset/${activeCardSet.id}`}>\n                                                Card Set \"{activeCardSet.name}\"\n                                            </Link>\n                                        </li>\n                                    )}\n                                </>\n                            )}\n                            <li>\n                                <Link to=\"/changelog\">Changelog</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/help\">Help</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/about\">About</Link>\n                            </li>\n                            {isAuthenticated && (\n                                <li>\n                                    <Logout onLogout={() => dispatch(logoutRequest())} />\n                                </li>\n                            )}\n                            {!isAuthenticated && (\n                                <>\n                                    <li>\n                                        <Link to=\"/login\">Login</Link>\n                                    </li>\n                                    <li>\n                                        <Link to=\"/signup\">Sign-up</Link>\n                                    </li>\n                                </>\n                            )}\n                        </ul>\n                    </div>\n                </div>\n            </nav>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        messages: state.message.messages,\n        activeGame: getActiveGame(state),\n        activeCardSet: getActiveCardSet(state),\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(Navbar);\n","import React, { Component } from 'react';\n\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\n\nexport default class NotFoundPage extends Component {\n    render() {\n        return (\n            <KawaiiMessage character={Character.Browser} mood=\"sad\">\n                There is nothing here.\n            </KawaiiMessage>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Credentials } from '../types';\nimport { Dispatch, messageDisplay } from '../actions';\n\ninterface Props {\n    dispatch: Dispatch;\n    onSignUp: (cred: Credentials) => void;\n}\n\nexport class SignUp extends Component<Props> {\n    state = {\n        username: '',\n        password: '',\n        passwordRepeat: '',\n    };\n\n    handleSubmit(event: React.FormEvent) {\n        const { dispatch, onSignUp } = this.props;\n\n        if (this.state.password !== this.state.passwordRepeat) {\n            dispatch(messageDisplay('error', 'Passwords do not match.'));\n        } else {\n            const creds = {\n                username: this.state.username.trim(),\n                password: this.state.password.trim(),\n            };\n            onSignUp(creds);\n        }\n\n        event.preventDefault();\n    }\n\n    handleUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ username: event.target.value });\n    };\n\n    handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ password: event.target.value });\n    };\n\n    handlePasswordRepeatChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ passwordRepeat: event.target.value });\n    };\n\n    render() {\n        return (\n            <div>\n                <form className=\"form\" onSubmit={event => this.handleSubmit(event)}>\n                    <input\n                        type=\"text\"\n                        onChange={this.handleUsernameChange}\n                        className=\"form-control\"\n                        placeholder=\"Username\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordChange}\n                        className=\"form-control\"\n                        placeholder=\"Password\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordRepeatChange}\n                        className=\"form-control\"\n                        placeholder=\"Repeat password here\"\n                    />\n                    <input type=\"submit\" value=\"Sign Up\" />\n                </form>\n            </div>\n        );\n    }\n}\nexport default connect()(SignUp);\n","import { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, signupRequest } from './actions';\nimport { State } from './reducers';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport SignUp from './components/SignUp';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated?: boolean;\n}\n\nexport class SignUpPage extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated } = this.props;\n\n        return (\n            <div className=\"App\">\n                {!isAuthenticated && (\n                    <>\n                        <KawaiiMessage character={Character.Ghost}>\n                            Create your user here. Instead of user name you can use your e-mail. If you forget your\n                            password then you can send me e-mail (I will not send you any e-mails without your consent).\n                            If you use regular user name and forget your password then you will not be able to access\n                            your account.\n                        </KawaiiMessage>\n\n                        <SignUp onSignUp={creds => dispatch(signupRequest(creds))} />\n                    </>\n                )}\n                {isAuthenticated && <Redirect to=\"/\" />}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(SignUpPage);\n","import './App.css';\n\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport { isIE } from 'react-device-detect';\n\nimport { Dispatch, initRequest } from './actions';\nimport { State } from './reducers';\nimport AboutPage from './AboutPage';\nimport CardSetPage from './CardSetPage';\nimport ChangelogPage from './ChangelogPage';\nimport ErrorBoundry from './ErrorBoundry';\nimport GamePage from './GamePage';\nimport HelpPage from './HelpPage';\nimport LoginPage from './LoginPage';\nimport Main from './Main';\nimport Navbar from './components/Navbar';\nimport NotFoundPage from './NotFoundPage';\nimport SignUpPage from './SignUpPage';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated?: boolean;\n}\n\nexport class App extends Component<Props> {\n    componentDidMount() {\n        this.props.dispatch(initRequest());\n    }\n\n    render() {\n        if (isIE) return <div> IE is not supported. Download Chrome/Opera/Firefox </div>;\n        const { isAuthenticated } = this.props;\n        return (\n            <Router>\n                <div className=\"App\">\n                    <ErrorBoundry>\n                        <Navbar isAuthenticated={isAuthenticated} />\n                        <Switch>\n                            <Route exact path=\"/\" component={Main} />\n                            <Route exact path=\"/login\" component={LoginPage} />\n                            <Route exact path=\"/signup\" component={SignUpPage} />\n                            <Route exact path=\"/game/:id\" component={GamePage} />\n                            <Route exact path=\"/cardset/:id\" component={CardSetPage} />\n                            <Route exact path=\"/changelog\" component={ChangelogPage} />\n                            <Route exact path=\"/help\" component={HelpPage} />\n                            <Route exact path=\"/about\" component={AboutPage} />\n                            <Route component={NotFoundPage} />\n                        </Switch>\n                        <div className=\"App-footer\">Dalius Dobravolskas &copy; {new Date().getFullYear()}</div>\n                    </ErrorBoundry>\n                </div>\n            </Router>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    const { auth } = state;\n    const { isAuthenticated } = auth;\n\n    return {\n        isAuthenticated,\n    };\n};\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ninterface Config {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit http://bit.ly/CRA-PWA',\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import './index.css';\n\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { createAppStore } from './store';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = createAppStore();\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__3wMPS\",\"controls\":\"Sidebar_controls__3VVbM\",\"active\":\"Sidebar_active__4ldTH\",\"view\":\"Sidebar_view__-0BeZ\",\"hidden\":\"Sidebar_hidden__3xh5q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Navbar_header__FZp4U\",\"menu\":\"Navbar_menu__1JWvN\",\"messages\":\"Navbar_messages__h_dLG\",\"error\":\"Navbar_error__3urZl\",\"info\":\"Navbar_info__1h4Zc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixed\":\"Loader_fixed__3q8O9\",\"relative\":\"Loader_relative__1lapZ\",\"loader\":\"Loader_loader__1ZCGC\",\"small\":\"Loader_small__3TZen\",\"loader-small\":\"Loader_loader-small__3PPAu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarDetails_view__29V31\",\"disabled\":\"SidebarDetails_disabled__1htJF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardset\":\"CardSet_cardset__21qjI\",\"cardsetview\":\"CardSet_cardsetview__1rqd1\",\"sidebar\":\"CardSet_sidebar__3y8_T\",\"createCard\":\"CardSet_createCard__2bOiw\"};","module.exports = __webpack_public_path__ + \"static/media/pan.ff303319.svg\";","module.exports = __webpack_public_path__ + \"static/media/zoom.2d0b374b.svg\";","module.exports = __webpack_public_path__ + \"static/media/resize.c1fb8dc3.svg\";"],"sourceRoot":""}