{"version":3,"sources":["components/Card.module.css","components/FontSelector.module.css","components/SidebarText.module.css","components/image.svg","components/text.svg","components/SidebarUpload.module.css","actions.ts","requests.ts","utils.ts","workerController.ts","storage.ts","fontLoader.tsx","sagas.ts","reducers.ts","components/KawaiiMessage.tsx","AboutPage.tsx","components/FieldController.tsx","components/ImageField.tsx","components/ContentEditable.tsx","components/TextField.tsx","components/Card.tsx","components/Loader.tsx","components/SidebarDetails.tsx","components/SidebarImage.tsx","components/SidebarImportExport.tsx","components/ColorButton.tsx","components/FontSelector.tsx","components/SidebarText.tsx","components/SidebarUpload.tsx","components/Sidebar.tsx","components/CardSet.tsx","CardSetPage.tsx","ChangelogPage.tsx","ErrorBoundry.tsx","components/CardSets.tsx","GamePage.tsx","components/Login.tsx","LoginPage.tsx","components/Games.tsx","Main.tsx","selectors.ts","components/Logout.tsx","components/Navbar.tsx","NotFoundPage.tsx","components/SignUp.tsx","SignUpPage.tsx","App.tsx","serviceWorker.ts","index.tsx","store.ts","components/FieldController.module.css","components/Sidebar.module.css","components/Navbar.module.css","components/Loader.module.css","components/SidebarDetails.module.css","components/SidebarImage.module.css","components/resize.svg","components/rotate.svg","components/CardSet.module.css"],"names":["module","exports","card","active","disabled","fontFamily","fontVariant","view","__webpack_require__","p","SidebarState","INIT_REQUEST","MESSAGE_DISPLAY","MESSAGE_HIDE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_REQUEST","LOGOUT_FAILURE","LOGOUT_SUCCESS","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILURE","GAME_CREATE_REQUEST","GAME_CREATE_SUCCESS","GAME_CREATE_FAILURE","GAME_LIST_SUCCESS","GAME_LIST_REQUEST","GAME_LIST_FAILURE","GAME_LIST_RESET","GAME_SELECT_REQUEST","GAME_SELECT_SUCCESS","GAME_SELECT_FAILURE","GAME_CREATE_PDF_REQUEST","GAME_CREATE_PDF_SUCCESS","GAME_CREATE_PDF_FAILURE","CARDSET_CREATE_REQUEST","CARDSET_CREATE_SUCCESS","CARDSET_CREATE_FAILURE","CARDSET_IMPORT_DATA","CARDSET_LIST_SUCCESS","CARDSET_LIST_REQUEST","CARDSET_LIST_FAILURE","CARDSET_LIST_RESET","CARDSET_SELECT_REQUEST","CARDSET_SELECT_SUCCESS","CARDSET_CREATE_CARD","CARDSET_CLONE_CARD","CARDSET_REMOVE_CARD","CARDSET_UPDATE_CARD_COUNT","CARDSET_ADD_TEXT_PLACEHOLDER","CARDSET_ADD_IMAGE_PLACEHOLDER","CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME","CARDSET_REMOVE_ACTIVE_PLACEHOLDER","CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP","CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM","CARDSET_LOCK_ACTIVE_PLACEHOLDER","CARDSET_UNLOCK_ACTIVE_PLACEHOLDER","CARDSET_CHANGE_WIDTH","CARDSET_CHANGE_HEIGHT","CARDSET_CHANGE_PLACEHOLDER_POSITION","CARDSET_CHANGE_PLACEHOLDER_SIZE","CARDSET_CHANGE_PLACEHOLDER_ANGLE","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT","CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE","CARDSET_CHANGE_TEXT","CARDSET_CHANGE_IMAGE","CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER","CARDSET_UPDATE_DATA_REQUEST","CARDSET_UPDATE_DATA_SUCCESS","CARDSET_UPDATE_DATA_FAILURE","CARDSET_SELECT_FAILURE","CARDSET_SET_SIDEBAR_STATE","CARDSET_SET_ZOOM","CARDSET_UPLOAD_IMAGE","CARDSET_UPLOAD_IMAGE_SUCCESS","CARDSET_UPLOAD_IMAGE_FAILURE","CARDSET_DELETE_IMAGE","IMAGE_LIST_REQUEST","IMAGE_LIST_SUCCESS","IMAGE_LIST_FAILURE","messageDisplay","type","text","message","id","shortid","generate","gameCreateRequest","gamename","gameSelectRequest","updateCardSets","gameCreatePdfRequest","pageWidth","pageHeight","topBottomMargin","leftRightMargin","cardSetCreateRequest","cardsetname","width","height","gameId","cardSetImportData","data","cardSetCreateCard","cardSetCloneCard","cardSetRemoveCard","cardSetUpdateCardCount","count","cardSetAddTextPlaceholder","cardSetAddImagePlaceholder","cardSetChangeActivePlaceholderName","name","cardSetRemoveActivePlaceholder","cardSetRaiseActivePlaceholderToTop","cardSetLowerActivePlaceholderToBottom","cardSetLockActivePlaceholder","cardSetUnlockActivePlaceholder","cardSetChangeWidth","cardSetChangeHeight","cardSetChangePlaceholderPosition","placeholder","x","y","cardSetChangePlaceholderSize","cardSetChangePlaceholderAngle","angle","cardSetChangeActiveTextPlaceholderAlign","align","cardSetChangeActiveTextPlaceholderColor","color","cardSetChangeActiveTextPlaceholderFontVariant","cardSetChangeActiveTextPlaceholderFontFamilyAndVariant","cardSetChangeActiveTextPlaceholderFontSize","fontSize","cardSetChangeText","cardId","placeholderId","textInfo","cardSetChangeImage","imageInfo","cardSetActiveCardAndPlaceholder","cardSetSetSidebarState","sidebarState","cardSetSetZoom","zoom","cardSetUploadImage","file","load","error","progress","abort","cancelToken","cardSetDeleteImage","imageId","imageListRequest","filter","location","handleAxiosError","response","Error","request","console","log","getTokens","creds","axios","post","then","resp","catch","refreshToken","refreshTokenValue","config","headers","Authorization","concat","accessToken","deleteAccessToken","token","delete","status","deleteRefreshToken","registerUser","getRequest","url","get","postRequest","postRequestFormDataCancelable","progressCallback","cancelCallback","Content-Type","onUploadProgress","isCancel","putRequest","put","deleteRequest","downloadBlob","blobURL","filename","resolve","tempLink","document","createElement","style","display","href","setAttribute","download","body","appendChild","click","removeChild","setTimeout","window","URL","revokeObjectURL","generatePdfUsingWorker","cardsAllIds","cardsById","placeholders","placeholdersAllIds","texts","images","Worker","Promise","reject","worker","addEventListener","event","postMessage","e","saveTokens","localStorage","setItem","saveAccessToken","cleanTokens","removeItem","getTokenFromStorage","getItem","getRefreshTokenFromStorage","DEFAULT_FONT_SIZE","loadFontsUsedInPlaceholders","fontsToLoad","Set","plId","add","pl","fontToLoad","WebFont","Object","objectSpread","inactive","webFontsLoadPromise","google","families","toConsumableArray","Array","from","putError","putInfo","putProgress","hideProgress","handleMessageDisplay","getToken","handleLoginRequest","handleLoginSuccess","logoutToken","logoutRefreshToken","handleLogoutRequest","handleSignupRequest","handleInitRequest","authorizedGetRequest","authorizedPostRequest","authorizedDeleteRequest","authorizedPostFormDataRequest","authorizedPutRequest","handleGameCreateRequest","handleGameListRequest","handleGameSelectRequest","handleGameCreatePdfRequest","handleCardSetCreateRequest","handleCardSetSelectRequest","handleCardSetUploadImage","handleCardSetDeleteImage","handleCardSetChange","handleImageListRequest","rootSaga","regenerator_default","a","wrap","_context","prev","next","stop","_marked","_context2","_marked2","_context3","abrupt","_marked3","messageId","_context4","_marked4","action","_context5","call","delay","_marked5","validateToken","jwtDecode","exp","Date","getTime","withErrorIfMissing","newToken","_context6","sent","_marked6","_context7","t0","_marked7","_context8","_marked8","_context9","_marked9","_context10","_marked10","_context11","_marked11","_context12","_marked12","_context13","_marked13","_context14","_marked14","_context15","_marked15","_context16","_marked16","_context17","_marked17","_context18","_marked18","_context19","_marked19","allIds","byId","_context20","games","map","g","reduce","obj","_marked20","_context21","cardsets","_marked21","progressId","state","_context22","select","_marked22","_context23","JSON","stringify","_marked23","parsedData","_context24","parse","keys","_marked24","formData","_context25","FormData","set","append","lengthComputable","loaded","total","undefined","toString","_marked25","_context26","_marked26","cardsetId","_context27","_marked27","game","_context28","encodeURIComponent","_marked28","_context29","all","takeEvery","takeLatest","_marked29","ACTIVITY_CREATING","ACTIVITY_LISTING","ACTIVITY_SELECTING","ACTIVITY_CREATING_PDF","ACTIVITY_UPDATING","DefaultMessageState","messages","DefaultAuthState","isAuthenticated","user","DefaultSignUpState","signingup","DefaultGameState","activity","DefaultCardSetState","activeCard","activePlaceholder","textSettings","activeSidebar","DefaultImageState","reducers","combineReducers","arguments","length","assign","m","auth","username","signup","defineProperty","newCard","index","indexOf","slice","textPlaceholder","imagePlaceholder","locked","placeholderIndex","splice","placeholderTexts","placeholderImages","push","unshift","placeholdersByCard","Details","Text","Image","Character","AboutPage","react_default","Component","FieldController","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","moving","cDiv","resizeDiv","rotateDiv","relX","relY","startX","startY","originalW","originalH","rotatedPointX","rotatedPointY","centerX","centerY","originalAngle","currentAngle","activatedUsingTouch","originalBodyCursor","rotateVec","sinA","Math","sin","cosA","cos","rx","ry","handleBrowserDragStart","stopPropagation","preventDefault","handleMouseDown","handleDragStart","handleMouseMove","handleMouseUp","handleTouchStart","changedTouches","handleTouchMove","passive","handleTouchEnd","co","current","cursor","clientX","offsetLeft","clientY","offsetTop","handleComplete","removeEventListener","isTouchEvent","isLocked","onDrag","handleDragMove","_this$props","cardWidth","cardHeight","_this$rotateVec","dx","abs","dy","dx2","dy2","min","max","left","top","handleResizeMouseDown","handleResizeStart","handleResizeMouseMove","handleResizeMouseUp","handleResizeTouchStart","handleResizeTouchMove","handleResizeTouchEnd","resize","clientWidth","clientHeight","_this$rotateVec2","handleResizeComplete","_this$cDiv$current","onResize","handleResizeMove","vx","vy","_this$rotateVec3","w","h","rotatedV","nx","ny","handleRotateMouseDown","handleRotateStart","handleRotateMouseMove","handleRotateMouseUp","handleRotateTouchStart","handleRotateTouchMove","handleRotateTouchEnd","rotate","rect","getBoundingClientRect","atan2","handleRotateComplete","onRotate","handleRotateMove","transform","React","createRef","_this$props2","children","isActive","isActivePlaceholder","ref","className","fieldcontroller","fieldcontrolleractiveplaceholder","fieldcontrolleractive","touchactivated","position","src","alt","controller","right","bottom","connect","ImageField","imageDiv","wasMoved","handleDrag","dispatch","ppmm","handleResize","handleRotate","_this$props3","_this$props4","_this$props5","imageUrl","components_FieldController","opacity","emptyImageImage","PureComponent","ContentEditable","editDiv","currentText","currentAlign","currentColor","currentFontFamily","currentFontVariant","currentFontSize","timeout","handleStart","handleMove","focus","onFocus","textValue","range","createRange","selectNodeContents","collapse","selection","getSelection","removeAllRanges","addRange","updateContent","timeoutInMiliseconds","value","innerHTML","replace","clearTimeout","handleBlur","handleInput","nextProps","isItalic","fontWeight","parseInt","contentEditable","onBlur","onInput","textAlign","DEFAULT_FONT","fontStyle","outline","overflowWrap","lineHeight","dangerouslySetInnerHTML","__html","TextField","zIndex","emptyTextImage","components_ContentEditable","Card","dimensions","handleFieldDeselect","target","getAttribute","_this2","isActiveCard","index_esm","client","contentRect","setState","_ref","measureRef","overflow","onMouseDown","onTouchStart","components_ImageField","key","components_TextField","KawaiiMessage","character","mood","padding","borderRadius","backgroundColor","grid","Ghost","size","Browser","marginLeft","Loader","fixed","small","loader","relative","SidebarDetails","_Component","_getPrototypeOf2","_len","args","_key","apply","handleCloneCardClick","handleRemoveCardClick","handleCountChange","inherits","createClass","visible","onClick","title","onChange","SidebarImage","handleAddImageClick","handleRemoveClick","handleNameChange","trim","handleFilterChange","handleImageSelect","imageName","ii","handleRaiseToTop","handleLowerToBottom","handleLockField","_this$props6","handleUnlockField","_this$props7","handleOptionChange","_this$props8","_this$props9","Fragment","image","checked","im","registerPlugin","FilePondPluginFileValidateType","SidebarImportExport","prepareImagePaths","activeGame","ending","md5","preparedImages","imagesByCard","endsWith","global","handleExportJson","json","blob","Blob","createObjectURL","handleExportCsv","csvData","header","usedNames","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","dataRow","written","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","csv","Papa","unparse","handleProcess","fieldName","metadata","reader","FileReader","readAsText","onload","result","loadedPlaceholders","isGlobal","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","row","onerror","handleRevert","uniqueFileId","react_filepond","server","process","revert","acceptedFileTypes","ColorButton","displayColorPicker","handleClick","handleClose","handleChange","getRangeAt","rangeCount","collapsed","hex","execCommand","react_color_lib","disableAlpha","options","webfonts","sort","fi","label","FontSelector","getFontStringForLoad","family","variant","stringForLoad","selectedOption","activeFontVariant","wf","handleFontVariantChange","activeFont","handleFontSizeChange","parseFloat","selectedFontFamily","find","f","fontVariantOptions","fv","selectedFontVariant","activeFontSize","react_select_esm","SidebarText","handleAddTextClick","handleSetTextAlignLeft","handleSetTextAlignCenter","handleSetTextAlignRight","components_ColorButton","components_FontSelector","FilePondPluginFileValidateSize","SidebarUpload","source","CancelToken","cancel","allowMultiple","allowFileSizeValidation","maxFileSize","SIDEBARS","icon","component","Upload","ImportExport","Sidebar","handleSidebar","sidebar","controls","sb","hidden","CardSet","handleCreateCardClick","handleGeneratePdfClick","_this$state","handleWidthChange","handleHeightChange","handleZoom","handlePageWidthChange","handlePageHeightChange","handleTopBottomMarginChange","handleLeftRightMarginChange","handleClickOutsideOfCard","isCreatingPdf","KawaiiMessage_KawaiiMessage","cardsetview","components_Sidebar","htmlFor","step","Loader_Loader","cardset","gridTemplateColumns","components_Card","CardSetPage","match","params","components_CardSet","ChangelogPage","ErrorBoundary","hasError","CardSets","cardSetName","handleCreateCardSetClick","cardsetItems","Link","to","GamePage","components_CardSets","Login","password","handleUsernameChange","handlePasswordChange","handleSubmit","onLogin","onLoginFailure","onSubmit","LoginPage","Login_Login","loginRequest","msg","Redirect","Games","gameName","handleCreateGameClick","gameItems","Main","components_Games","getActiveGame","getActiveCardSet","Logout","onLogout","Navbar","activeCardSet","info","menu","components_Logout","NotFoundPage","SignUp","passwordRepeat","handlePasswordRepeatChange","onSignUp","SignUpPage","components_SignUp","signupRequest","App","BrowserRouter","ErrorBoundry_ErrorBoundary","components_Navbar","Switch","Route","exact","path","getFullYear","Boolean","hostname","store","sagaMiddleware","createSagaMiddleware","createStore","__REDUX_DEVTOOLS_EXTENSION__","compose","applyMiddleware","run","createAppStore","ReactDOM","render","es","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister","loader-small"],"mappings":"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","file":"static/js/main.b80d212a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__1Ltkv\",\"active\":\"Card_active__XOmoJ\",\"disabled\":\"Card_disabled__2Ob5l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fontFamily\":\"FontSelector_fontFamily__zlBcJ\",\"fontVariant\":\"FontSelector_fontVariant__2pA4n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarText_view__3s9r0\",\"disabled\":\"SidebarText_disabled__3efIG\"};","module.exports = __webpack_public_path__ + \"static/media/image.60f0926c.svg\";","module.exports = __webpack_public_path__ + \"static/media/text.f7f9443c.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarUpload_view__k69sP\"};","import shortid from 'shortid';\nimport { Dispatch as ReduxDispatch } from 'redux';\nimport { CancelToken } from 'axios';\n\nexport const INIT_REQUEST = 'INIT_REQUEST';\nexport const MESSAGE_DISPLAY = 'MESSAGE_DISPLAY';\nexport const MESSAGE_HIDE = 'MESSAGE_HIDE';\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\nexport const LOGOUT_FAILURE = 'LOGOUT_FAILURE';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const SIGNUP_REQUEST = 'SIGNUP_REQUEST';\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\nexport const SIGNUP_FAILURE = 'SIGNUP_FAILURE';\nexport const GAME_CREATE_REQUEST = 'GAME_CREATE_REQUEST';\nexport const GAME_CREATE_SUCCESS = 'GAME_CREATE_SUCCESS';\nexport const GAME_CREATE_FAILURE = 'GAME_CREATE_FAILURE';\nexport const GAME_LIST_SUCCESS = 'GAME_LIST_SUCCESS';\nexport const GAME_LIST_REQUEST = 'GAME_LIST_REQUEST';\nexport const GAME_LIST_FAILURE = 'GAME_LIST_FAILURE';\nexport const GAME_LIST_RESET = 'GAME_LIST_RESET';\nexport const GAME_SELECT_REQUEST = 'GAME_SELECT_REQUEST';\nexport const GAME_SELECT_SUCCESS = 'GAME_SELECT_SUCCESS';\nexport const GAME_SELECT_FAILURE = 'GAME_SELECT_FAILURE';\nexport const GAME_CREATE_PDF_REQUEST = 'GAME_CREATE_PDF_REQUEST';\nexport const GAME_CREATE_PDF_SUCCESS = 'GAME_CREATE_PDF_SUCCESS';\nexport const GAME_CREATE_PDF_FAILURE = 'GAME_CREATE_PDF_FAILURE';\nexport const CARDSET_CREATE_REQUEST = 'CARDSET_CREATE_REQUEST';\nexport const CARDSET_CREATE_SUCCESS = 'CARDSET_CREATE_SUCCESS';\nexport const CARDSET_CREATE_FAILURE = 'CARDSET_CREATE_FAILURE';\nexport const CARDSET_IMPORT_DATA = 'CARDSET_IMPORT_DATA';\nexport const CARDSET_LIST_SUCCESS = 'CARDSET_LIST_SUCCESS';\nexport const CARDSET_LIST_REQUEST = 'CARDSET_LIST_REQUEST';\nexport const CARDSET_LIST_FAILURE = 'CARDSET_LIST_FAILURE';\nexport const CARDSET_LIST_RESET = 'CARDSET_LIST_RESET';\nexport const CARDSET_SELECT_REQUEST = 'CARDSET_SELECT_REQUEST';\nexport const CARDSET_SELECT_SUCCESS = 'CARDSET_SELECT_SUCCESS';\nexport const CARDSET_CREATE_CARD = 'CARDSET_CREATE_CARD';\nexport const CARDSET_CLONE_CARD = 'CARDSET_CLONE_CARD';\nexport const CARDSET_REMOVE_CARD = 'CARDSET_REMOVE_CARD';\nexport const CARDSET_UPDATE_CARD_COUNT = 'CARDSET_UPDATE_CARD_COUNT';\nexport const CARDSET_ADD_TEXT_PLACEHOLDER = 'CARDSET_ADD_TEXT_PLACEHOLDER';\nexport const CARDSET_ADD_IMAGE_PLACEHOLDER = 'CARDSET_ADD_IMAGE_PLACEHOLDER';\nexport const CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME = 'CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME';\nexport const CARDSET_REMOVE_ACTIVE_PLACEHOLDER = 'CARDSET_REMOVE_ACTIVE_PLACEHOLDER';\nexport const CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP = 'CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP';\nexport const CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM = 'CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM';\nexport const CARDSET_LOCK_ACTIVE_PLACEHOLDER = 'CARDSET_LOCK_ACTIVE_PLACEHOLDER';\nexport const CARDSET_UNLOCK_ACTIVE_PLACEHOLDER = 'CARDSET_UNLOCK_ACTIVE_PLACEHOLDER';\nexport const CARDSET_CHANGE_WIDTH = 'CARDSET_CHANGE_WIDTH';\nexport const CARDSET_CHANGE_HEIGHT = 'CARDSET_CHANGE_HEIGHT';\nexport const CARDSET_CHANGE_PLACEHOLDER_POSITION = 'CARDSET_CHANGE_PLACEHOLDER_POSITION';\nexport const CARDSET_CHANGE_PLACEHOLDER_SIZE = 'CARDSET_CHANGE_PLACEHOLDER_SIZE';\nexport const CARDSET_CHANGE_PLACEHOLDER_ANGLE = 'CARDSET_CHANGE_PLACEHOLDER_ANGLE';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN = 'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR = 'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY = 'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT =\n    'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT =\n    'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT';\nexport const CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE = 'CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE';\nexport const CARDSET_CHANGE_TEXT = 'CARDSET_CHANGE_TEXT';\nexport const CARDSET_CHANGE_IMAGE = 'CARDSET_CHANGE_IMAGE';\nexport const CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER = 'CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER';\nexport const CARDSET_UPDATE_DATA_REQUEST = 'CARDSET_UPDATE_DATA_REQUEST';\nexport const CARDSET_UPDATE_DATA_SUCCESS = 'CARDSET_UPDATE_DATA_SUCCESS';\nexport const CARDSET_UPDATE_DATA_FAILURE = 'CARDSET_UPDATE_DATA_FAILURE';\nexport const CARDSET_SELECT_FAILURE = 'CARDSET_SELECT_FAILURE';\nexport const CARDSET_SET_SIDEBAR_STATE = 'CARDSET_SET_SIDEBAR_STATE';\nexport const CARDSET_SET_ZOOM = 'CARDSET_SET_ZOOM';\nexport const CARDSET_UPLOAD_IMAGE = 'CARDSET_UPLOAD_IMAGE';\nexport const CARDSET_UPLOAD_IMAGE_SUCCESS = 'CARDSET_UPLOAD_IMAGE_SUCCESS';\nexport const CARDSET_UPLOAD_IMAGE_FAILURE = 'CARDSET_UPLOAD_IMAGE_FAILURE';\nexport const CARDSET_DELETE_IMAGE = 'CARDSET_DELETE_IMAGE';\nexport const IMAGE_LIST_REQUEST = 'IMAGE_LIST_REQUEST';\nexport const IMAGE_LIST_SUCCESS = 'IMAGE_LIST_SUCCESS';\nexport const IMAGE_LIST_FAILURE = 'IMAGE_LIST_FAILURE';\n\n// Data types\n\nexport type IdsArray = string[];\n\nexport interface MessageType {\n    id: string;\n    type: string;\n    text: string;\n}\n\nexport interface GameType {\n    id: string;\n    name: string;\n}\n\nexport interface GamesCollection {\n    [propName: string]: GameType;\n}\n\nexport interface PlaceholderBase {\n    id: string;\n    type: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    locked?: boolean;\n    name?: string;\n}\n\nexport interface TextPlaceholderType extends PlaceholderBase {\n    type: 'text';\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n}\n\nexport interface ImagePlaceholderType extends PlaceholderBase {\n    id: string;\n    type: 'image';\n}\n\nexport type PlaceholderType = TextPlaceholderType | ImagePlaceholderType;\n\nexport interface PlaceholdersCollection {\n    [propName: string]: PlaceholderType;\n}\n\nexport interface TextInfo {\n    value: string;\n}\n\nexport interface PlaceholdersTextInfoCollection {\n    [propName: string]: TextInfo;\n}\n\nexport interface PlaceholdersTextInfoByCardCollection {\n    [propName: string]: PlaceholdersTextInfoCollection;\n}\n\nexport interface ImageInfo {\n    url: string;\n    global?: boolean;\n}\n\nexport interface PlaceholdersImageInfoCollection {\n    [propName: string]: ImageInfo;\n}\n\nexport interface PlaceholdersImageInfoByCardCollection {\n    [propName: string]: PlaceholdersImageInfoCollection;\n}\n\nexport interface CardType {\n    id: string;\n    count: number;\n}\n\nexport interface CardsCollection {\n    [propName: string]: CardType;\n}\n\nexport interface CardSetType {\n    id: string;\n    name: string;\n}\n\nexport interface CardSetsCollection {\n    [propName: string]: CardSetType;\n}\n\nexport interface Credentials {\n    username: string;\n    password: string;\n}\n\nexport interface Image {\n    id: number;\n    name: string;\n}\n\nexport type ImageArray = Image[];\n\n// Actions\n\nexport interface InitAction {\n    type: typeof INIT_REQUEST;\n}\n\nexport interface MessageDisplay {\n    type: typeof MESSAGE_DISPLAY;\n    message: MessageType;\n}\nexport type MessageAction = MessageDisplay | { type: typeof MESSAGE_HIDE; messageId: string };\n\nexport interface LoginRequest {\n    type: typeof LOGIN_REQUEST;\n    creds: Credentials;\n}\nexport type LoginAction =\n    | LoginRequest\n    | { type: typeof LOGIN_SUCCESS }\n    | { type: typeof LOGIN_FAILURE; message: string }\n    | { type: typeof LOGOUT_REQUEST }\n    | { type: typeof LOGOUT_FAILURE }\n    | { type: typeof LOGOUT_SUCCESS };\n\nexport interface SignUpRequest {\n    type: typeof SIGNUP_REQUEST;\n    creds: Credentials;\n}\nexport type SignUpAction = SignUpRequest | { type: typeof SIGNUP_SUCCESS } | { type: typeof SIGNUP_FAILURE };\n\nexport interface GameCreateRequest {\n    type: typeof GAME_CREATE_REQUEST;\n    gamename: string;\n}\nexport type GameCreateAction =\n    | GameCreateRequest\n    | { type: typeof GAME_CREATE_SUCCESS }\n    | { type: typeof GAME_CREATE_FAILURE };\n\nexport interface GameListSuccess {\n    type: typeof GAME_LIST_SUCCESS;\n    byId: GamesCollection;\n    allIds: IdsArray;\n}\nexport type GameListAction =\n    | { type: typeof GAME_LIST_REQUEST }\n    | GameListSuccess\n    | { type: typeof GAME_LIST_FAILURE }\n    | { type: typeof GAME_LIST_RESET };\n\nexport interface GameSelectRequest {\n    type: typeof GAME_SELECT_REQUEST;\n    id: string;\n    updateCardSets: boolean;\n}\nexport type GameSelectAction =\n    | GameSelectRequest\n    | { type: typeof GAME_SELECT_SUCCESS; id: string }\n    | { type: typeof GAME_SELECT_FAILURE };\n\nexport interface GameCreatePdfRequest {\n    type: typeof GAME_CREATE_PDF_REQUEST;\n    pageWidth: number;\n    pageHeight: number;\n    topBottomMargin: number;\n    leftRightMargin: number;\n}\n\nexport type GameCreatePdfAction =\n    | GameCreatePdfRequest\n    | { type: typeof GAME_CREATE_PDF_SUCCESS }\n    | { type: typeof GAME_CREATE_PDF_FAILURE };\n\nexport type GameAction = GameCreateAction | GameListAction | GameSelectAction | GameCreatePdfAction;\n\nexport interface CardSetCreateRequest {\n    type: typeof CARDSET_CREATE_REQUEST;\n    cardsetname: string;\n    width: number;\n    height: number;\n    gameId: string;\n}\nexport type CardSetCreateAction =\n    | CardSetCreateRequest\n    | { type: typeof CARDSET_CREATE_SUCCESS }\n    | { type: typeof CARDSET_CREATE_FAILURE };\n\nexport interface CardSetImportData {\n    type: typeof CARDSET_IMPORT_DATA;\n    data: object;\n}\n\nexport interface CardSetListSuccess {\n    type: typeof CARDSET_LIST_SUCCESS;\n    byId: CardSetsCollection;\n    allIds: IdsArray;\n}\nexport type CardSetListAction =\n    | { type: typeof CARDSET_LIST_REQUEST }\n    | CardSetListSuccess\n    | { type: typeof CARDSET_LIST_FAILURE }\n    | { type: typeof CARDSET_LIST_RESET };\n\nexport interface CardSetSelectRequest {\n    type: typeof CARDSET_SELECT_REQUEST;\n    id: string;\n}\nexport interface CardSetSelectSuccess {\n    type: typeof CARDSET_SELECT_SUCCESS;\n    id: string;\n    name: string;\n    data: {\n        width: number;\n        height: number;\n        cardsAllIds: IdsArray;\n        cardsById: CardsCollection;\n        placeholders: PlaceholdersCollection;\n        placeholdersAllIds: IdsArray;\n        texts: PlaceholdersTextInfoByCardCollection;\n        images: PlaceholdersImageInfoByCardCollection;\n        zoom: number;\n    };\n    gameId: string;\n}\nexport interface CardSetCreateCard {\n    type: typeof CARDSET_CREATE_CARD;\n    card: CardType;\n}\nexport interface CardSetCloneCard {\n    type: typeof CARDSET_CLONE_CARD;\n    card: CardType;\n}\nexport interface CardSetRemoveCard {\n    type: typeof CARDSET_REMOVE_CARD;\n    card: CardType;\n}\nexport interface CardSetUpdateCardCount {\n    type: typeof CARDSET_UPDATE_CARD_COUNT;\n    card: CardType;\n    count: number;\n}\nexport interface CardSetAddTextPlaceholder {\n    type: typeof CARDSET_ADD_TEXT_PLACEHOLDER;\n}\nexport interface CardSetAddImagePlaceholder {\n    type: typeof CARDSET_ADD_IMAGE_PLACEHOLDER;\n}\nexport interface CardSetChangeActivePlaceholderName {\n    type: typeof CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME;\n    name: string;\n}\nexport interface CardSetRemoveActivePlaceholder {\n    type: typeof CARDSET_REMOVE_ACTIVE_PLACEHOLDER;\n}\nexport interface CardSetRaiseActivePlaceholderToTop {\n    type: typeof CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP;\n}\nexport interface CardSetLowerActivePlaceholderToBottom {\n    type: typeof CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM;\n}\nexport interface CardSetLockActivePlaceholder {\n    type: typeof CARDSET_LOCK_ACTIVE_PLACEHOLDER;\n}\nexport interface CardSetUnlockActivePlaceholder {\n    type: typeof CARDSET_UNLOCK_ACTIVE_PLACEHOLDER;\n}\n\nexport interface CardSetChangeWidth {\n    type: typeof CARDSET_CHANGE_WIDTH;\n    width: number;\n}\n\nexport interface CardSetChangeHeight {\n    type: typeof CARDSET_CHANGE_HEIGHT;\n    height: number;\n}\n\nexport interface CardSetChangePlaceholderPosition {\n    type: typeof CARDSET_CHANGE_PLACEHOLDER_POSITION;\n    placeholder: PlaceholderType;\n    x: number;\n    y: number;\n}\nexport interface CardSetChangePlaceholderSize {\n    type: typeof CARDSET_CHANGE_PLACEHOLDER_SIZE;\n    placeholder: PlaceholderType;\n    width: number;\n    height: number;\n}\nexport interface CardSetChangePlaceholderAngle {\n    type: typeof CARDSET_CHANGE_PLACEHOLDER_ANGLE;\n    placeholder: PlaceholderType;\n    angle: number;\n}\nexport interface CardSetChangeActiveTextPlaceholderAlign {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN;\n    align: string;\n}\nexport interface CardSetChangeActiveTextPlaceholderColor {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR;\n    color: string;\n}\nexport interface CardSetChangeActiveTextPlaceholderFontFamily {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY;\n    fontFamily: string;\n}\nexport interface CardSetChangeActiveTextPlaceholderFontVariant {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT;\n    fontVariant: string;\n}\nexport interface CardSetChangeActiveTextPlaceholderFontFamilyAndVariant {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT;\n    fontFamily: string;\n    fontVariant: string;\n}\nexport interface CardSetChangeActiveTextPlaceholderFontSize {\n    type: typeof CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE;\n    fontSize: number;\n}\nexport interface CardSetChangeText {\n    type: typeof CARDSET_CHANGE_TEXT;\n    cardId: string;\n    placeholderId: string;\n    textInfo: TextInfo;\n}\nexport interface CardSetChangeImage {\n    type: typeof CARDSET_CHANGE_IMAGE;\n    cardId: string;\n    placeholderId: string;\n    imageInfo: ImageInfo;\n}\nexport interface CardSetSetActiveCardAndPlaceholder {\n    type: typeof CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER;\n    cardId: string | null;\n    placeholderId: string | null;\n}\n\nexport enum SidebarState {\n    Details,\n    Image,\n    Text,\n    Upload,\n    ImportExport,\n}\nexport interface CardSetSetSidebarState {\n    type: typeof CARDSET_SET_SIDEBAR_STATE;\n    sidebarState: SidebarState | null;\n}\nexport interface CardSetSetZoom {\n    type: typeof CARDSET_SET_ZOOM;\n    zoom: number;\n}\n\nexport type FPLoadCallback = (id: string) => void;\nexport type FPErrorCallback = (error: string) => void;\nexport type FPProgressCallback = (computable: boolean, loaded: number, total: number) => void;\nexport type FPAbortCallback = () => void;\nexport type FPRevertLoadCallback = () => void;\n\nexport interface CardSetUploadImage {\n    type: typeof CARDSET_UPLOAD_IMAGE;\n    gameId: string;\n    file: File;\n    load: FPLoadCallback;\n    error: FPErrorCallback;\n    progress: FPProgressCallback;\n    abort: FPAbortCallback;\n    cancelToken: CancelToken;\n}\n\nexport interface CardSetDeleteImage {\n    type: typeof CARDSET_DELETE_IMAGE;\n    imageId: string;\n    load: FPRevertLoadCallback;\n    error: FPErrorCallback;\n}\n\nexport interface CardSetUploadImageSuccess {\n    type: typeof CARDSET_UPLOAD_IMAGE_SUCCESS;\n}\n\nexport interface CardSetUploadImageFailure {\n    type: typeof CARDSET_UPLOAD_IMAGE_FAILURE;\n}\n\nexport type CardSetSelectAction = CardSetSelectRequest | CardSetSelectSuccess | { type: typeof CARDSET_SELECT_FAILURE };\n\nexport interface CardSetUpdateDataRequest {\n    type: typeof CARDSET_UPDATE_DATA_REQUEST;\n}\nexport interface CardSetUpdateDataSuccess {\n    type: typeof CARDSET_UPDATE_DATA_SUCCESS;\n}\nexport interface CardSetUpdateDataFailure {\n    type: typeof CARDSET_UPDATE_DATA_FAILURE;\n}\nexport type CardSetUpdateDataAction = CardSetUpdateDataRequest | CardSetUpdateDataSuccess | CardSetUpdateDataFailure;\n\nexport type CardSetModifyAction =\n    | CardSetCreateCard\n    | CardSetCloneCard\n    | CardSetRemoveCard\n    | CardSetUpdateCardCount\n    | CardSetAddTextPlaceholder\n    | CardSetAddImagePlaceholder\n    | CardSetChangeActivePlaceholderName\n    | CardSetRemoveActivePlaceholder\n    | CardSetRaiseActivePlaceholderToTop\n    | CardSetLowerActivePlaceholderToBottom\n    | CardSetLockActivePlaceholder\n    | CardSetUnlockActivePlaceholder\n    | CardSetChangeWidth\n    | CardSetChangeHeight\n    | CardSetChangePlaceholderPosition\n    | CardSetChangePlaceholderSize\n    | CardSetChangePlaceholderAngle\n    | CardSetChangeActiveTextPlaceholderAlign\n    | CardSetChangeActiveTextPlaceholderColor\n    | CardSetChangeActiveTextPlaceholderFontFamily\n    | CardSetChangeActiveTextPlaceholderFontVariant\n    | CardSetChangeActiveTextPlaceholderFontFamilyAndVariant\n    | CardSetChangeActiveTextPlaceholderFontSize\n    | CardSetChangeText\n    | CardSetChangeImage\n    | CardSetSetActiveCardAndPlaceholder\n    | CardSetSetSidebarState\n    | CardSetSetZoom\n    | CardSetUploadImage\n    | CardSetDeleteImage\n    | CardSetUploadImageSuccess\n    | CardSetUploadImageFailure;\n\nexport type CardSetAction =\n    | CardSetCreateAction\n    | CardSetImportData\n    | CardSetListAction\n    | CardSetSelectAction\n    | CardSetUpdateDataAction\n    | CardSetModifyAction;\n\nexport interface ImageListRequest {\n    type: typeof IMAGE_LIST_REQUEST;\n    filter: string;\n    location: string;\n}\nexport interface ImageListSuccess {\n    type: typeof IMAGE_LIST_SUCCESS;\n    images: ImageArray;\n}\nexport type ImageListAction = ImageListRequest | ImageListSuccess | { type: typeof IMAGE_LIST_FAILURE };\n\nexport type Action =\n    | InitAction\n    | LoginAction\n    | SignUpAction\n    | GameAction\n    | CardSetAction\n    | ImageListAction\n    | MessageAction;\n\nexport type Dispatch = ReduxDispatch<Action>;\n\nexport const messageDisplay = (type: string, text: string): MessageDisplay => {\n    return {\n        type: MESSAGE_DISPLAY,\n        message: {\n            id: shortid.generate(),\n            type: type,\n            text: text,\n        },\n    };\n};\n\nexport const initRequest = (): InitAction => {\n    return { type: INIT_REQUEST };\n};\n\nexport const loginRequest = (creds: Credentials): LoginAction => {\n    return {\n        type: LOGIN_REQUEST,\n        creds: creds,\n    };\n};\n\nexport const logoutRequest = (): LoginAction => {\n    return {\n        type: LOGOUT_REQUEST,\n    };\n};\n\nexport const signupRequest = (creds: Credentials): SignUpAction => {\n    return {\n        type: SIGNUP_REQUEST,\n        creds: creds,\n    };\n};\n\nexport const gameCreateRequest = (gamename: string): GameAction => {\n    return {\n        type: GAME_CREATE_REQUEST,\n        gamename: gamename,\n    };\n};\n\nexport const gameListRequest = (): GameAction => {\n    return {\n        type: GAME_LIST_REQUEST,\n    };\n};\n\nexport const gameSelectRequest = (id: string, updateCardSets: boolean): GameAction => {\n    return {\n        type: GAME_SELECT_REQUEST,\n        id,\n        updateCardSets,\n    };\n};\n\nexport const gameCreatePdfRequest = (\n    pageWidth: number,\n    pageHeight: number,\n    topBottomMargin: number,\n    leftRightMargin: number,\n): GameCreatePdfRequest => {\n    return {\n        type: GAME_CREATE_PDF_REQUEST,\n        pageWidth,\n        pageHeight,\n        topBottomMargin,\n        leftRightMargin,\n    };\n};\n\nexport const cardSetCreateRequest = (\n    cardsetname: string,\n    width: number,\n    height: number,\n    gameId: string,\n): CardSetAction => {\n    return {\n        type: CARDSET_CREATE_REQUEST,\n        cardsetname: cardsetname,\n        width,\n        height,\n        gameId,\n    };\n};\n\nexport const cardSetImportData = (data: object): CardSetImportData => {\n    return {\n        type: CARDSET_IMPORT_DATA,\n        data,\n    };\n};\n\nexport const cardSetSelectRequest = (id: string): CardSetSelectRequest => {\n    return {\n        type: CARDSET_SELECT_REQUEST,\n        id,\n    };\n};\n\nexport const cardSetCreateCard = (card: CardType): CardSetCreateCard => {\n    return {\n        type: CARDSET_CREATE_CARD,\n        card,\n    };\n};\n\nexport const cardSetCloneCard = (card: CardType): CardSetCloneCard => {\n    return {\n        type: CARDSET_CLONE_CARD,\n        card,\n    };\n};\n\nexport const cardSetRemoveCard = (card: CardType): CardSetRemoveCard => {\n    return {\n        type: CARDSET_REMOVE_CARD,\n        card,\n    };\n};\n\nexport const cardSetUpdateCardCount = (card: CardType, count: number): CardSetUpdateCardCount => {\n    return {\n        type: CARDSET_UPDATE_CARD_COUNT,\n        card,\n        count,\n    };\n};\n\nexport const cardSetAddTextPlaceholder = (): CardSetAddTextPlaceholder => {\n    return {\n        type: CARDSET_ADD_TEXT_PLACEHOLDER,\n    };\n};\n\nexport const cardSetAddImagePlaceholder = (): CardSetAddImagePlaceholder => {\n    return {\n        type: CARDSET_ADD_IMAGE_PLACEHOLDER,\n    };\n};\n\nexport const cardSetChangeActivePlaceholderName = (name: string): CardSetChangeActivePlaceholderName => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME,\n        name,\n    };\n};\n\nexport const cardSetRemoveActivePlaceholder = (): CardSetRemoveActivePlaceholder => {\n    return {\n        type: CARDSET_REMOVE_ACTIVE_PLACEHOLDER,\n    };\n};\n\nexport const cardSetRaiseActivePlaceholderToTop = (): CardSetRaiseActivePlaceholderToTop => {\n    return {\n        type: CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP,\n    };\n};\n\nexport const cardSetLowerActivePlaceholderToBottom = (): CardSetLowerActivePlaceholderToBottom => {\n    return {\n        type: CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM,\n    };\n};\n\nexport const cardSetLockActivePlaceholder = (): CardSetLockActivePlaceholder => {\n    return {\n        type: CARDSET_LOCK_ACTIVE_PLACEHOLDER,\n    };\n};\n\nexport const cardSetUnlockActivePlaceholder = (): CardSetUnlockActivePlaceholder => {\n    return {\n        type: CARDSET_UNLOCK_ACTIVE_PLACEHOLDER,\n    };\n};\n\nexport const cardSetChangeWidth = (width: number): CardSetChangeWidth => {\n    return {\n        type: CARDSET_CHANGE_WIDTH,\n        width,\n    };\n};\n\nexport const cardSetChangeHeight = (height: number): CardSetChangeHeight => {\n    return {\n        type: CARDSET_CHANGE_HEIGHT,\n        height,\n    };\n};\n\nexport const cardSetChangePlaceholderPosition = (\n    placeholder: PlaceholderType,\n    x: number,\n    y: number,\n): CardSetChangePlaceholderPosition => {\n    return {\n        type: CARDSET_CHANGE_PLACEHOLDER_POSITION,\n        placeholder,\n        x,\n        y,\n    };\n};\n\nexport const cardSetChangePlaceholderSize = (\n    placeholder: PlaceholderType,\n    width: number,\n    height: number,\n): CardSetChangePlaceholderSize => {\n    return {\n        type: CARDSET_CHANGE_PLACEHOLDER_SIZE,\n        placeholder,\n        width,\n        height,\n    };\n};\n\nexport const cardSetChangePlaceholderAngle = (\n    placeholder: PlaceholderType,\n    angle: number,\n): CardSetChangePlaceholderAngle => {\n    return {\n        type: CARDSET_CHANGE_PLACEHOLDER_ANGLE,\n        placeholder,\n        angle,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderAlign = (align: string): CardSetChangeActiveTextPlaceholderAlign => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN,\n        align,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderColor = (color: string): CardSetChangeActiveTextPlaceholderColor => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR,\n        color,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderFontFamily = (\n    fontFamily: string,\n): CardSetChangeActiveTextPlaceholderFontFamily => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY,\n        fontFamily,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderFontVariant = (\n    fontVariant: string,\n): CardSetChangeActiveTextPlaceholderFontVariant => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT,\n        fontVariant,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderFontFamilyAndVariant = (\n    fontFamily: string,\n    fontVariant: string,\n): CardSetChangeActiveTextPlaceholderFontFamilyAndVariant => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT,\n        fontFamily,\n        fontVariant,\n    };\n};\n\nexport const cardSetChangeActiveTextPlaceholderFontSize = (\n    fontSize: number,\n): CardSetChangeActiveTextPlaceholderFontSize => {\n    return {\n        type: CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE,\n        fontSize,\n    };\n};\n\nexport const cardSetChangeText = (cardId: string, placeholderId: string, textInfo: TextInfo): CardSetChangeText => {\n    return {\n        type: CARDSET_CHANGE_TEXT,\n        cardId,\n        placeholderId,\n        textInfo,\n    };\n};\n\nexport const cardSetChangeImage = (cardId: string, placeholderId: string, imageInfo: ImageInfo): CardSetChangeImage => {\n    return {\n        type: CARDSET_CHANGE_IMAGE,\n        cardId,\n        placeholderId,\n        imageInfo,\n    };\n};\n\nexport const cardSetActiveCardAndPlaceholder = (\n    cardId: string | null,\n    placeholderId: string | null,\n): CardSetSetActiveCardAndPlaceholder => {\n    return {\n        type: CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER,\n        cardId,\n        placeholderId,\n    };\n};\n\nexport const cardSetSetSidebarState = (sidebarState: SidebarState | null): CardSetSetSidebarState => {\n    return {\n        type: CARDSET_SET_SIDEBAR_STATE,\n        sidebarState,\n    };\n};\n\nexport const cardSetSetZoom = (zoom: number): CardSetSetZoom => {\n    return {\n        type: CARDSET_SET_ZOOM,\n        zoom,\n    };\n};\n\nexport const cardSetUploadImage = (\n    gameId: string,\n    file: File,\n    load: FPLoadCallback,\n    error: FPErrorCallback,\n    progress: FPProgressCallback,\n    abort: FPAbortCallback,\n    cancelToken: CancelToken,\n): CardSetUploadImage => {\n    return {\n        type: CARDSET_UPLOAD_IMAGE,\n        gameId,\n        file,\n        load,\n        error,\n        progress,\n        abort,\n        cancelToken,\n    };\n};\n\nexport const cardSetDeleteImage = (\n    imageId: string,\n    load: FPRevertLoadCallback,\n    error: FPErrorCallback,\n): CardSetDeleteImage => {\n    return {\n        type: CARDSET_DELETE_IMAGE,\n        imageId,\n        load,\n        error,\n    };\n};\n\nexport const imageListRequest = (filter: string, location: string): ImageListAction => {\n    return {\n        type: IMAGE_LIST_REQUEST,\n        filter,\n        location,\n    };\n};\n","import axios, { AxiosError, CancelToken } from 'axios';\n\nimport { Credentials } from './actions';\n\nexport function handleAxiosError(error: AxiosError) {\n    if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        // error.response.status);\n        throw new Error(error.response.data.message);\n    } else if (error.request) {\n        console.log(error.request);\n        throw new Error(error.request);\n    } else {\n        throw new Error('Unknown error :(');\n    }\n}\n\nexport function getTokens(creds: Credentials) {\n    return axios\n        .post('/api/tokens', creds)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function refreshToken(refreshTokenValue: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${refreshTokenValue}` },\n    };\n    return axios\n        .post('/api/access_tokens', {}, config)\n        .then(resp => {\n            return resp.data.accessToken;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteAccessToken(token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete('/api/access_tokens', config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (error.response.status === 401) return {};\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteRefreshToken(token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete('/api/refresh_tokens', config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (error.response.status === 401) return {};\n            handleAxiosError(error);\n        });\n}\n\nexport function registerUser(creds: Credentials) {\n    return axios\n        .post('/api/users', creds)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function getRequest(url: string, token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .get(url, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function postRequest(url: string, token: string, data: object) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .post(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function postRequestFormDataCancelable(\n    url: string,\n    token: string,\n    data: FormData,\n    progressCallback: (event: ProgressEvent) => void,\n    cancelToken: CancelToken,\n    cancelCallback: () => void,\n) {\n    let config = {\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data',\n        },\n        cancelToken,\n        onUploadProgress: progressCallback,\n    };\n\n    return axios\n        .post(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            if (axios.isCancel(error)) {\n                cancelCallback();\n            } else {\n                handleAxiosError(error);\n            }\n        });\n}\n\nexport function putRequest(url: string, token: string, data: object) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .put(url, data, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n\nexport function deleteRequest(url: string, token: string) {\n    let config = {\n        headers: { Authorization: `Bearer ${token}` },\n    };\n    return axios\n        .delete(url, config)\n        .then(resp => {\n            return resp.data;\n        })\n        .catch(error => {\n            handleAxiosError(error);\n        });\n}\n","export function downloadBlob(blobURL: string, filename: string, resolve?: () => void) {\n    const tempLink = document.createElement('a');\n    tempLink.style.display = 'none';\n    tempLink.href = blobURL;\n    tempLink.setAttribute('download', filename);\n    if (typeof tempLink.download === 'undefined') {\n        tempLink.setAttribute('target', '_blank');\n    }\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    document.body.removeChild(tempLink);\n    setTimeout(() => {\n        window.URL.revokeObjectURL(blobURL);\n        if (resolve) resolve();\n    }, 100);\n}\n","import {\n    CardsCollection,\n    PlaceholdersCollection,\n    PlaceholdersImageInfoByCardCollection,\n    PlaceholdersTextInfoByCardCollection,\n} from './actions';\nimport { downloadBlob } from './utils';\n\nexport const generatePdfUsingWorker = (\n    width: number,\n    height: number,\n    cardsAllIds: string[],\n    cardsById: CardsCollection,\n    placeholders: PlaceholdersCollection,\n    placeholdersAllIds: string[],\n    texts: PlaceholdersTextInfoByCardCollection,\n    images: PlaceholdersImageInfoByCardCollection,\n    pageWidth: number,\n    pageHeight: number,\n    topBottomMargin: number,\n    leftRightMargin: number,\n) => {\n    // @ts-ignore\n    if (!window.Worker) {\n        throw new Error('We can not generate PDF because of browser you use. Try using different browser');\n    }\n\n    return new Promise((resolve, reject) => {\n        try {\n            const worker = new Worker('/js/worker.js');\n            worker.addEventListener('message', event => {\n                const blobURL = event.data;\n                downloadBlob(blobURL, 'card.pdf', resolve);\n            });\n\n            worker.postMessage({\n                width,\n                height,\n                cardsAllIds,\n                cardsById,\n                placeholders,\n                placeholdersAllIds,\n                texts,\n                images,\n                pageWidth,\n                pageHeight,\n                topBottomMargin,\n                leftRightMargin,\n            });\n        } catch (e) {\n            reject(e);\n        }\n    });\n};\n","export function saveTokens(data: { accessToken: string; refreshToken: string }) {\n    localStorage.setItem('accessToken', data.accessToken);\n    localStorage.setItem('refreshToken', data.refreshToken);\n}\n\nexport function saveAccessToken(accessToken: string) {\n    localStorage.setItem('accessToken', accessToken);\n}\n\nexport function cleanTokens() {\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n}\n\nexport function getTokenFromStorage() {\n    let token = localStorage.getItem('accessToken') || null;\n    return token;\n}\n\nexport function getRefreshTokenFromStorage() {\n    let token = localStorage.getItem('refreshToken') || null;\n    return token;\n}\n","import WebFont from 'webfontloader';\n\nimport { PlaceholdersCollection } from './actions';\n\nexport const DEFAULT_FONT = 'Roboto';\nexport const DEFAULT_FONT_VARIANT = 'regular';\nexport const DEFAULT_FONT_SIZE = 8;\n\nconst webFontsLoadPromise = (config: WebFont.Config) =>\n    new Promise((resolve, reject) => {\n        WebFont.load({ ...config, active: resolve, inactive: reject });\n    });\n\nexport const loadFontsUsedInPlaceholders = (data: { placeholders: PlaceholdersCollection }) => {\n    let fontsToLoad: Set<string> = new Set();\n    fontsToLoad.add(DEFAULT_FONT);\n    for (const plId in data.placeholders) {\n        const pl = data.placeholders[plId];\n        if (pl.type === 'text' && pl.fontFamily) {\n            let fontToLoad = pl.fontFamily;\n            if (pl.fontVariant && pl.fontVariant !== 'regular') {\n                fontToLoad += ':' + pl.fontVariant;\n            }\n\n            fontsToLoad.add(fontToLoad);\n        }\n    }\n\n    const config: WebFont.Config = {\n        google: {\n            families: [...Array.from(fontsToLoad)],\n        },\n    };\n\n    return webFontsLoadPromise(config);\n};\n","import { CancelToken } from 'axios';\nimport { all, call, put, select, takeEvery, takeLatest } from 'redux-saga/effects';\nimport { delay, SagaIterator } from 'redux-saga';\nimport jwtDecode from 'jwt-decode';\n\nimport {\n    CARDSET_ADD_IMAGE_PLACEHOLDER,\n    CARDSET_ADD_TEXT_PLACEHOLDER,\n    CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT,\n    CARDSET_CHANGE_HEIGHT,\n    CARDSET_CHANGE_IMAGE,\n    CARDSET_CHANGE_PLACEHOLDER_ANGLE,\n    CARDSET_CHANGE_PLACEHOLDER_POSITION,\n    CARDSET_CHANGE_PLACEHOLDER_SIZE,\n    CARDSET_CHANGE_TEXT,\n    CARDSET_CHANGE_WIDTH,\n    CARDSET_CLONE_CARD,\n    CARDSET_CREATE_CARD,\n    CARDSET_CREATE_FAILURE,\n    CARDSET_CREATE_REQUEST,\n    CARDSET_CREATE_SUCCESS,\n    CARDSET_DELETE_IMAGE,\n    CARDSET_IMPORT_DATA,\n    CARDSET_LIST_RESET,\n    CARDSET_LIST_SUCCESS,\n    CARDSET_LOCK_ACTIVE_PLACEHOLDER,\n    CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM,\n    CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP,\n    CARDSET_REMOVE_ACTIVE_PLACEHOLDER,\n    CARDSET_REMOVE_CARD,\n    CARDSET_SELECT_FAILURE,\n    CARDSET_SELECT_REQUEST,\n    CARDSET_SELECT_SUCCESS,\n    CARDSET_SET_ZOOM,\n    CARDSET_UNLOCK_ACTIVE_PLACEHOLDER,\n    CARDSET_UPDATE_CARD_COUNT,\n    CARDSET_UPDATE_DATA_FAILURE,\n    CARDSET_UPDATE_DATA_REQUEST,\n    CARDSET_UPDATE_DATA_SUCCESS,\n    CARDSET_UPLOAD_IMAGE,\n    CARDSET_UPLOAD_IMAGE_FAILURE,\n    CARDSET_UPLOAD_IMAGE_SUCCESS,\n    CardSetCreateRequest,\n    CardSetDeleteImage,\n    CardSetSelectRequest,\n    CardSetType,\n    CardSetUploadImage,\n    CardSetsCollection,\n    GAME_CREATE_FAILURE,\n    GAME_CREATE_PDF_FAILURE,\n    GAME_CREATE_PDF_REQUEST,\n    GAME_CREATE_PDF_SUCCESS,\n    GAME_CREATE_REQUEST,\n    GAME_CREATE_SUCCESS,\n    GAME_LIST_FAILURE,\n    GAME_LIST_REQUEST,\n    GAME_LIST_RESET,\n    GAME_LIST_SUCCESS,\n    GAME_SELECT_FAILURE,\n    GAME_SELECT_REQUEST,\n    GAME_SELECT_SUCCESS,\n    GameCreatePdfRequest,\n    GameCreateRequest,\n    GameSelectRequest,\n    GameType,\n    GamesCollection,\n    IMAGE_LIST_FAILURE,\n    IMAGE_LIST_REQUEST,\n    IMAGE_LIST_SUCCESS,\n    INIT_REQUEST,\n    ImageListRequest,\n    LOGIN_FAILURE,\n    LOGIN_REQUEST,\n    LOGIN_SUCCESS,\n    LOGOUT_FAILURE,\n    LOGOUT_REQUEST,\n    LOGOUT_SUCCESS,\n    LoginRequest,\n    MESSAGE_DISPLAY,\n    MESSAGE_HIDE,\n    MessageDisplay,\n    SIGNUP_FAILURE,\n    SIGNUP_REQUEST,\n    SIGNUP_SUCCESS,\n    SignUpRequest,\n    gameSelectRequest,\n    messageDisplay,\n} from './actions';\nimport {\n    deleteAccessToken,\n    deleteRefreshToken,\n    deleteRequest,\n    getRequest,\n    getTokens,\n    postRequest,\n    postRequestFormDataCancelable,\n    putRequest,\n    refreshToken,\n    registerUser,\n} from './requests';\nimport { generatePdfUsingWorker } from './workerController';\nimport { getTokenFromStorage, getRefreshTokenFromStorage, saveAccessToken, saveTokens, cleanTokens } from './storage';\nimport { loadFontsUsedInPlaceholders } from './fontLoader';\n\n// Messages\nexport function* putError(message: string): SagaIterator {\n    yield put(messageDisplay('error', message));\n}\n\nexport function* putInfo(message: string): SagaIterator {\n    yield put(messageDisplay('info', message));\n}\n\nexport function* putProgress(text: string): SagaIterator {\n    const message = messageDisplay('progress', text);\n    yield put(message);\n    return message.message.id;\n}\n\nexport function* hideProgress(messageId: string): SagaIterator {\n    yield put({ type: MESSAGE_HIDE, messageId });\n}\n\nexport function* handleMessageDisplay(action: MessageDisplay): SagaIterator {\n    if (action.message.type === 'progress') return;\n\n    yield call(delay, 5000);\n    yield put({ type: MESSAGE_HIDE, messageId: action.message.id });\n}\n\n// Login & Signup\n// Token handling\n\nexport function validateToken(token: string): boolean {\n    try {\n        const decoded = jwtDecode<{ exp: number }>(token);\n        const valid = decoded.exp - new Date().getTime() / 1000 > 5;\n        return valid;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport function* getToken(withErrorIfMissing: boolean): SagaIterator {\n    const token = yield call(getTokenFromStorage);\n    if (token) {\n        const tokenValid = yield call(validateToken, token);\n        if (tokenValid) return token;\n    }\n\n    const refreshTokenValue = yield call(getRefreshTokenFromStorage);\n    if (!refreshTokenValue) {\n        if (withErrorIfMissing) throw new Error('Token not found.');\n        return null;\n    }\n\n    const refreshTokenValid = yield call(validateToken, refreshTokenValue);\n    if (!refreshTokenValid) {\n        yield put({ type: LOGOUT_REQUEST });\n        if (withErrorIfMissing) throw new Error('Token not found.');\n        return null;\n    }\n\n    const newToken = yield call(refreshToken, refreshTokenValue);\n    yield call(saveAccessToken, newToken);\n    return newToken;\n}\n\n// Login\n\nexport function* handleLoginRequest(action: LoginRequest): SagaIterator {\n    try {\n        const data = yield call(getTokens, action.creds);\n        yield call(saveTokens, data);\n        yield put({ type: LOGIN_SUCCESS });\n    } catch (e) {\n        yield put({ type: LOGIN_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleLoginSuccess(): SagaIterator {\n    yield put({ type: GAME_LIST_REQUEST });\n}\n\n// Logout\n\nexport function* logoutToken(): SagaIterator {\n    const token = yield call(getTokenFromStorage);\n    if (token) {\n        const tokenValid = yield call(validateToken, token);\n        if (tokenValid) {\n            yield call(deleteAccessToken, token);\n        }\n    }\n}\n\nexport function* logoutRefreshToken(): SagaIterator {\n    const refreshTokenValue = yield call(getRefreshTokenFromStorage);\n    if (refreshTokenValue) {\n        const refreshTokenValid = yield call(validateToken, refreshTokenValue);\n        if (refreshTokenValid) {\n            yield call(deleteRefreshToken, refreshTokenValue);\n        }\n    }\n}\n\nexport function* handleLogoutRequest(): SagaIterator {\n    try {\n        yield call(logoutToken);\n        yield call(logoutRefreshToken);\n        yield call(cleanTokens);\n\n        yield put({ type: CARDSET_LIST_RESET });\n        yield put({ type: GAME_LIST_RESET });\n        yield put({ type: LOGOUT_SUCCESS });\n    } catch (e) {\n        yield put({ type: LOGOUT_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\n// Sign-up\n\nexport function* handleSignupRequest(action: SignUpRequest): SagaIterator {\n    try {\n        const data = yield call(registerUser, action.creds);\n        yield call(saveTokens, data);\n        yield put({ type: SIGNUP_SUCCESS });\n        yield put({ type: LOGIN_SUCCESS });\n    } catch (e) {\n        yield put({ type: SIGNUP_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\n// Init\nexport function* handleInitRequest(): SagaIterator {\n    try {\n        let token = yield call(getToken, false);\n        if (token) {\n            yield put({ type: LOGIN_SUCCESS });\n        }\n    } catch (e) {}\n}\n\n// Authorized Requests\nexport function* authorizedGetRequest(url: string): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(getRequest, url, token);\n}\n\nexport function* authorizedPostRequest(url: string, data: object): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(postRequest, url, token, data);\n}\n\nexport function* authorizedDeleteRequest(url: string): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(deleteRequest, url, token);\n}\n\nexport function* authorizedPostFormDataRequest(\n    url: string,\n    data: FormData,\n    progressCallback: (event: ProgressEvent) => void,\n    cancelToken: CancelToken,\n    cancelCallback: () => void,\n): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(postRequestFormDataCancelable, url, token, data, progressCallback, cancelToken, cancelCallback);\n}\n\nexport function* authorizedPutRequest(url: string, data: object): SagaIterator {\n    const token = yield call(getToken, true);\n    return yield call(putRequest, url, token, data);\n}\n\n// Game\nexport function* handleGameCreateRequest(action: GameCreateRequest): SagaIterator {\n    try {\n        yield call(authorizedPostRequest, '/api/games', { name: action.gamename });\n        yield put({\n            type: GAME_CREATE_SUCCESS,\n        });\n        yield put({ type: GAME_LIST_REQUEST });\n    } catch (e) {\n        yield put({ type: GAME_CREATE_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleGameListRequest(): SagaIterator {\n    try {\n        const data = yield call(authorizedGetRequest, '/api/games');\n        const allIds = data.games.map((g: GameType) => g.id);\n        const byId = data.games.reduce((obj: GamesCollection, g: GameType) => {\n            obj[g.id] = g;\n            return obj;\n        }, {});\n        yield put({\n            type: GAME_LIST_SUCCESS,\n            allIds,\n            byId,\n        });\n    } catch (e) {\n        yield put({ type: GAME_LIST_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleGameSelectRequest(action: GameSelectRequest): SagaIterator {\n    try {\n        const data = yield call(authorizedGetRequest, '/api/games/' + action.id);\n        yield put({\n            type: GAME_SELECT_SUCCESS,\n            id: action.id,\n        });\n\n        if (action.updateCardSets) {\n            const allIds = data.cardsets.map((g: CardSetType) => g.id);\n            const byId = data.cardsets.reduce((obj: CardSetsCollection, g: CardSetType) => {\n                obj[g.id] = g;\n                return obj;\n            }, {});\n            yield put({\n                type: CARDSET_LIST_SUCCESS,\n                allIds,\n                byId,\n            });\n        }\n    } catch (e) {\n        yield put({ type: GAME_SELECT_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleGameCreatePdfRequest(action: GameCreatePdfRequest): SagaIterator {\n    let progressId = null;\n    try {\n        const state = yield select();\n        progressId = yield call(putProgress, 'Generating PDF');\n\n        yield call(\n            generatePdfUsingWorker,\n            state.cardsets.width,\n            state.cardsets.height,\n            state.cardsets.cardsAllIds,\n            state.cardsets.cardsById,\n            state.cardsets.placeholders,\n            state.cardsets.placeholdersAllIds,\n            state.cardsets.texts,\n            state.cardsets.images,\n            action.pageWidth,\n            action.pageHeight,\n            action.topBottomMargin,\n            action.leftRightMargin,\n        );\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'PDF generated.');\n        yield put({\n            type: GAME_CREATE_PDF_SUCCESS,\n        });\n    } catch (e) {\n        yield put({ type: GAME_CREATE_PDF_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e.message);\n    }\n}\n\n// Card Set\n\nexport function* handleCardSetCreateRequest(action: CardSetCreateRequest): SagaIterator {\n    try {\n        yield call(authorizedPostRequest, '/api/cardsets', {\n            name: action.cardsetname,\n            gameId: action.gameId,\n            data: JSON.stringify({ width: action.width, height: action.height }),\n        });\n        yield put({\n            type: CARDSET_CREATE_SUCCESS,\n        });\n        yield put(gameSelectRequest(action.gameId, true));\n    } catch (e) {\n        yield put({ type: CARDSET_CREATE_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleCardSetSelectRequest(action: CardSetSelectRequest): SagaIterator {\n    try {\n        const data = yield call(authorizedGetRequest, '/api/cardsets/' + action.id);\n        const parsedData = JSON.parse(data.data);\n        if (!('placeholdersAllIds' in parsedData) && 'placeholders' in parsedData) {\n            parsedData.placeholdersAllIds = Object.keys(parsedData.placeholders);\n        }\n        yield call(loadFontsUsedInPlaceholders, parsedData);\n        yield put({\n            type: CARDSET_SELECT_SUCCESS,\n            id: data.id,\n            name: data.name,\n            data: parsedData,\n        });\n        yield put(gameSelectRequest(data.gameId, false));\n    } catch (e) {\n        yield put({ type: CARDSET_SELECT_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\nexport function* handleCardSetUploadImage(action: CardSetUploadImage): SagaIterator {\n    let progressId = null;\n    try {\n        progressId = yield call(putProgress, `Uploading ${action.file.name}`);\n        const formData = new FormData();\n        formData.set('gameId', action.gameId);\n        formData.append('image', action.file, action.file.name);\n\n        const data = yield call(\n            authorizedPostFormDataRequest,\n            '/api/images',\n            formData,\n            (event: ProgressEvent) => action.progress(event.lengthComputable, event.loaded, event.total),\n            action.cancelToken,\n            () => {\n                action.abort();\n            },\n        );\n        if (data !== undefined) {\n            // not cancelled\n            action.load(data.imageId.toString());\n            yield put({ type: CARDSET_UPLOAD_IMAGE_SUCCESS });\n            yield call(putInfo, `${action.file.name} uploaded`);\n        }\n        yield call(hideProgress, progressId);\n    } catch (e) {\n        yield put({ type: CARDSET_UPLOAD_IMAGE_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e.message);\n        action.error(e.message);\n    }\n}\n\nexport function* handleCardSetDeleteImage(action: CardSetDeleteImage): SagaIterator {\n    try {\n        yield call(authorizedDeleteRequest, '/api/images/' + action.imageId);\n        action.load();\n    } catch (e) {\n        action.error(e.message);\n    }\n}\n\nexport function* handleCardSetChange(): SagaIterator {\n    let progressId = null;\n\n    try {\n        yield call(delay, 1000);\n        progressId = yield call(putProgress, 'Saving Card Set');\n        const state = yield select();\n\n        yield put({\n            type: CARDSET_UPDATE_DATA_REQUEST,\n        });\n\n        const cardsetId = state.cardsets.active;\n        const data = {\n            width: state.cardsets.width,\n            height: state.cardsets.height,\n            cardsAllIds: state.cardsets.cardsAllIds,\n            cardsById: state.cardsets.cardsById,\n            placeholdersAllIds: state.cardsets.placeholdersAllIds,\n            placeholders: state.cardsets.placeholders,\n            texts: state.cardsets.texts,\n            images: state.cardsets.images,\n            zoom: state.cardsets.zoom,\n        };\n\n        yield call(authorizedPutRequest, '/api/cardsets/' + cardsetId, {\n            name: state.cardsets.byId[cardsetId].name,\n            data: JSON.stringify(data),\n        });\n        yield call(hideProgress, progressId);\n        yield call(putInfo, 'Card Set saved');\n        yield put({\n            type: CARDSET_UPDATE_DATA_SUCCESS,\n        });\n    } catch (e) {\n        yield put({ type: CARDSET_UPDATE_DATA_FAILURE });\n        if (progressId !== null) yield call(hideProgress, progressId);\n        yield call(putError, e.message);\n    }\n}\n\n// Images\nexport function* handleImageListRequest(action: ImageListRequest): SagaIterator {\n    try {\n        yield call(delay, 200);\n        const state = yield select();\n\n        const filter = encodeURIComponent(action.filter);\n        const location = encodeURIComponent(action.location);\n        const game = encodeURIComponent(state.games.active);\n        const data = yield call(authorizedGetRequest, `/api/images?name=${filter}&location=${location}&game=${game}`);\n        const images = data.images;\n        yield put({\n            type: IMAGE_LIST_SUCCESS,\n            images,\n        });\n    } catch (e) {\n        yield put({ type: IMAGE_LIST_FAILURE });\n        yield call(putError, e.message);\n    }\n}\n\n// All\nexport function* rootSaga(): SagaIterator {\n    yield all([\n        takeEvery(MESSAGE_DISPLAY, handleMessageDisplay),\n        takeLatest(LOGIN_REQUEST, handleLoginRequest),\n        takeLatest(LOGIN_SUCCESS, handleLoginSuccess),\n        takeLatest(LOGOUT_REQUEST, handleLogoutRequest),\n        takeLatest(SIGNUP_REQUEST, handleSignupRequest),\n        takeLatest(GAME_CREATE_REQUEST, handleGameCreateRequest),\n        takeLatest(GAME_LIST_REQUEST, handleGameListRequest),\n        takeLatest(GAME_SELECT_REQUEST, handleGameSelectRequest),\n        takeLatest(GAME_CREATE_PDF_REQUEST, handleGameCreatePdfRequest),\n        takeLatest(CARDSET_CREATE_REQUEST, handleCardSetCreateRequest),\n        takeLatest(CARDSET_SELECT_REQUEST, handleCardSetSelectRequest),\n        takeEvery(CARDSET_UPLOAD_IMAGE, handleCardSetUploadImage),\n        takeEvery(CARDSET_DELETE_IMAGE, handleCardSetDeleteImage),\n\n        takeLatest(CARDSET_CREATE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_CLONE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_REMOVE_CARD, handleCardSetChange),\n        takeLatest(CARDSET_UPDATE_CARD_COUNT, handleCardSetChange),\n        takeLatest(CARDSET_ADD_TEXT_PLACEHOLDER, handleCardSetChange),\n        takeLatest(CARDSET_ADD_IMAGE_PLACEHOLDER, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME, handleCardSetChange),\n        takeLatest(CARDSET_REMOVE_ACTIVE_PLACEHOLDER, handleCardSetChange),\n        takeLatest(CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP, handleCardSetChange),\n        takeLatest(CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM, handleCardSetChange),\n        takeLatest(CARDSET_LOCK_ACTIVE_PLACEHOLDER, handleCardSetChange),\n        takeLatest(CARDSET_UNLOCK_ACTIVE_PLACEHOLDER, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_WIDTH, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_HEIGHT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_PLACEHOLDER_POSITION, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_PLACEHOLDER_SIZE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_PLACEHOLDER_ANGLE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_TEXT, handleCardSetChange),\n        takeLatest(CARDSET_CHANGE_IMAGE, handleCardSetChange),\n        takeLatest(CARDSET_SET_ZOOM, handleCardSetChange),\n        takeLatest(CARDSET_IMPORT_DATA, handleCardSetChange),\n\n        takeLatest(IMAGE_LIST_REQUEST, handleImageListRequest),\n\n        takeLatest(INIT_REQUEST, handleInitRequest),\n    ]);\n}\n","import { combineReducers } from 'redux';\nimport shortid from 'shortid';\n\nimport {\n    CARDSET_ADD_IMAGE_PLACEHOLDER,\n    CARDSET_ADD_TEXT_PLACEHOLDER,\n    CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE,\n    CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT,\n    CARDSET_CHANGE_HEIGHT,\n    CARDSET_CHANGE_IMAGE,\n    CARDSET_CHANGE_PLACEHOLDER_ANGLE,\n    CARDSET_CHANGE_PLACEHOLDER_POSITION,\n    CARDSET_CHANGE_PLACEHOLDER_SIZE,\n    CARDSET_CHANGE_TEXT,\n    CARDSET_CHANGE_WIDTH,\n    CARDSET_CLONE_CARD,\n    CARDSET_CREATE_CARD,\n    CARDSET_CREATE_FAILURE,\n    CARDSET_CREATE_REQUEST,\n    CARDSET_CREATE_SUCCESS,\n    CARDSET_IMPORT_DATA,\n    CARDSET_LIST_FAILURE,\n    CARDSET_LIST_REQUEST,\n    CARDSET_LIST_RESET,\n    CARDSET_LIST_SUCCESS,\n    CARDSET_LOCK_ACTIVE_PLACEHOLDER,\n    CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM,\n    CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP,\n    CARDSET_REMOVE_ACTIVE_PLACEHOLDER,\n    CARDSET_REMOVE_CARD,\n    CARDSET_SELECT_FAILURE,\n    CARDSET_SELECT_REQUEST,\n    CARDSET_SELECT_SUCCESS,\n    CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER,\n    CARDSET_SET_SIDEBAR_STATE,\n    CARDSET_SET_ZOOM,\n    CARDSET_UNLOCK_ACTIVE_PLACEHOLDER,\n    CARDSET_UPDATE_CARD_COUNT,\n    CARDSET_UPDATE_DATA_FAILURE,\n    CARDSET_UPDATE_DATA_REQUEST,\n    CARDSET_UPDATE_DATA_SUCCESS,\n    CardSetAction,\n    CardSetsCollection,\n    CardsCollection,\n    GAME_CREATE_FAILURE,\n    GAME_CREATE_PDF_FAILURE,\n    GAME_CREATE_PDF_REQUEST,\n    GAME_CREATE_PDF_SUCCESS,\n    GAME_CREATE_REQUEST,\n    GAME_CREATE_SUCCESS,\n    GAME_LIST_FAILURE,\n    GAME_LIST_REQUEST,\n    GAME_LIST_RESET,\n    GAME_LIST_SUCCESS,\n    GAME_SELECT_FAILURE,\n    GAME_SELECT_REQUEST,\n    GAME_SELECT_SUCCESS,\n    GameAction,\n    GamesCollection,\n    IMAGE_LIST_FAILURE,\n    IMAGE_LIST_REQUEST,\n    IMAGE_LIST_SUCCESS,\n    IdsArray,\n    ImageArray,\n    ImageListAction,\n    ImagePlaceholderType,\n    LOGIN_FAILURE,\n    LOGIN_REQUEST,\n    LOGIN_SUCCESS,\n    LOGOUT_SUCCESS,\n    LoginAction,\n    MESSAGE_DISPLAY,\n    MESSAGE_HIDE,\n    MessageAction,\n    MessageType,\n    PlaceholdersCollection,\n    PlaceholdersImageInfoByCardCollection,\n    PlaceholdersImageInfoCollection,\n    PlaceholdersTextInfoByCardCollection,\n    PlaceholdersTextInfoCollection,\n    SIGNUP_FAILURE,\n    SIGNUP_REQUEST,\n    SIGNUP_SUCCESS,\n    SidebarState,\n    SignUpAction,\n    TextPlaceholderType,\n} from './actions';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE, DEFAULT_FONT_VARIANT } from './fontLoader';\n\nexport const ACTIVITY_CREATING = 0x1;\nexport const ACTIVITY_LISTING = 0x2;\nexport const ACTIVITY_SELECTING = 0x4;\nexport const ACTIVITY_CREATING_PDF = 0x8;\nexport const ACTIVITY_UPDATING = 0x10;\n\nexport interface MessageState {\n    messages: MessageType[];\n}\n\nexport const DefaultMessageState: MessageState = {\n    messages: [],\n};\n\nexport interface AuthState {\n    isAuthenticated: boolean;\n    user: string;\n}\n\nexport const DefaultAuthState: AuthState = {\n    isAuthenticated: false,\n    user: '',\n};\n\nexport interface SignUpState {\n    signingup: boolean;\n}\n\nexport const DefaultSignUpState: SignUpState = {\n    signingup: false,\n};\n\nexport interface GameState {\n    byId: GamesCollection;\n    allIds: IdsArray;\n    activity: number;\n    active: string | null;\n}\n\nexport const DefaultGameState: GameState = {\n    byId: {},\n    allIds: [],\n    activity: 0,\n    active: null,\n};\n\nexport interface TextSettings {\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n}\n\nexport interface CardSetState {\n    width: number;\n    height: number;\n    byId: CardSetsCollection;\n    allIds: IdsArray;\n    activity: number;\n    active: string | null;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    activeCard: string | null;\n    activePlaceholder: string | null;\n    placeholders: PlaceholdersCollection;\n    placeholdersAllIds: IdsArray;\n    texts: PlaceholdersTextInfoByCardCollection;\n    images: PlaceholdersImageInfoByCardCollection;\n    textSettings: TextSettings;\n    activeSidebar: SidebarState | null;\n    zoom: number;\n}\n\nexport const DefaultCardSetState: CardSetState = {\n    width: 63.5,\n    height: 88.9,\n    byId: {},\n    allIds: [],\n    activity: 0,\n    active: null,\n    placeholders: {},\n    placeholdersAllIds: [],\n    cardsById: {},\n    cardsAllIds: [],\n    activeCard: null,\n    activePlaceholder: null,\n    texts: {},\n    images: {},\n    textSettings: {\n        align: 'left',\n        color: '#000000',\n        fontFamily: DEFAULT_FONT,\n        fontVariant: DEFAULT_FONT_VARIANT,\n        fontSize: DEFAULT_FONT_SIZE,\n    },\n    activeSidebar: null,\n    zoom: 1,\n};\n\nexport interface ImageState {\n    activity: number;\n    filter: string;\n    images: ImageArray;\n}\n\nexport const DefaultImageState: ImageState = {\n    activity: 0,\n    filter: '',\n    images: [],\n};\n\nexport interface State {\n    message: MessageState;\n    auth: AuthState;\n    signup: SignUpState;\n    games: GameState;\n    cardsets: CardSetState;\n    images: ImageState;\n}\n\nexport const DefaultState: State = {\n    message: DefaultMessageState,\n    auth: DefaultAuthState,\n    signup: DefaultSignUpState,\n    games: DefaultGameState,\n    cardsets: DefaultCardSetState,\n    images: DefaultImageState,\n};\n\nexport function message(state: MessageState = DefaultMessageState, action: MessageAction): MessageState {\n    switch (action.type) {\n        case MESSAGE_DISPLAY:\n            return Object.assign({}, state, {\n                messages: state.messages.concat(action.message),\n            });\n        case MESSAGE_HIDE:\n            return Object.assign({}, state, {\n                messages: state.messages.filter(m => m.id !== action.messageId),\n            });\n        default:\n            return state;\n    }\n}\n\nexport function auth(state: AuthState = DefaultAuthState, action: LoginAction): AuthState {\n    switch (action.type) {\n        case LOGIN_REQUEST:\n            return Object.assign({}, state, {\n                isAuthenticated: false,\n                user: action.creds.username,\n            });\n        case LOGIN_SUCCESS:\n            return Object.assign({}, state, {\n                isAuthenticated: true,\n            });\n        case LOGIN_FAILURE:\n            return Object.assign({}, state, {\n                isAuthenticated: false,\n            });\n        case LOGOUT_SUCCESS:\n            return Object.assign({}, state, {\n                isAuthenticated: false,\n            });\n        default:\n            return state;\n    }\n}\n\nexport function signup(state: SignUpState = DefaultSignUpState, action: SignUpAction): SignUpState {\n    switch (action.type) {\n        case SIGNUP_REQUEST:\n            return Object.assign({}, state, {\n                signingup: true,\n            });\n        case SIGNUP_SUCCESS:\n            return Object.assign({}, state, {\n                signingup: false,\n            });\n        case SIGNUP_FAILURE:\n            return Object.assign({}, state, {\n                signingup: false,\n            });\n        default:\n            return state;\n    }\n}\n\nexport function games(state: GameState = DefaultGameState, action: GameAction): GameState {\n    switch (action.type) {\n        case GAME_CREATE_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_CREATING,\n            });\n        case GAME_CREATE_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING,\n            });\n        case GAME_CREATE_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING,\n            });\n        case GAME_LIST_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_LISTING,\n            });\n        case GAME_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n                byId: action.byId,\n                allIds: action.allIds,\n            });\n        case GAME_LIST_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n            });\n        case GAME_LIST_RESET:\n            return Object.assign({}, state, {\n                activity: 0,\n                byId: {},\n                allIds: [],\n            });\n        case GAME_SELECT_REQUEST:\n            return Object.assign({}, state, {\n                activity: ACTIVITY_SELECTING,\n            });\n        case GAME_SELECT_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n                active: action.id,\n            });\n        case GAME_SELECT_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n            });\n        case GAME_CREATE_PDF_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_CREATING_PDF,\n            });\n        case GAME_CREATE_PDF_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PDF,\n            });\n        case GAME_CREATE_PDF_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING_PDF,\n            });\n        default:\n            return state;\n    }\n}\n\nexport function cardsets(state: CardSetState = DefaultCardSetState, action: CardSetAction): CardSetState {\n    switch (action.type) {\n        case CARDSET_CREATE_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_CREATING,\n            });\n        case CARDSET_CREATE_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING,\n            });\n        case CARDSET_CREATE_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_CREATING,\n            });\n        case CARDSET_UPDATE_DATA_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_UPDATING,\n            });\n        case CARDSET_UPDATE_DATA_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_UPDATING,\n            });\n        case CARDSET_UPDATE_DATA_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_UPDATING,\n            });\n        case CARDSET_LIST_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_LISTING,\n            });\n        case CARDSET_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n                byId: action.byId,\n                allIds: action.allIds,\n            });\n        case CARDSET_LIST_RESET:\n            return Object.assign({}, state, {\n                activity: 0,\n                byId: {},\n                allIds: [],\n            });\n        case CARDSET_LIST_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n            });\n        case CARDSET_SELECT_REQUEST:\n            return Object.assign({}, state, {\n                activity: state.activity | ACTIVITY_SELECTING,\n            });\n        case CARDSET_SELECT_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n                active: action.id,\n                byId: Object.assign({}, state.byId, {\n                    [action.id]: {\n                        id: action.id,\n                        name: action.name,\n                    },\n                }),\n                width: action.data.width || 63.5,\n                height: action.data.height || 88.9,\n                cardsAllIds: action.data.cardsAllIds || [],\n                cardsById: action.data.cardsById || {},\n                placeholders: action.data.placeholders || {},\n                placeholdersAllIds: action.data.placeholdersAllIds || [],\n                texts: action.data.texts || {},\n                images: action.data.images || {},\n                activeCard: null,\n                activePlaceholder: null,\n                zoom: action.data.zoom || 1,\n            });\n        case CARDSET_SELECT_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_SELECTING,\n            });\n        case CARDSET_CREATE_CARD:\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [action.card.id]: action.card,\n                },\n                cardsAllIds: state.cardsAllIds ? state.cardsAllIds.concat(action.card.id) : [action.card.id],\n            };\n        case CARDSET_CLONE_CARD: {\n            let newCard = { ...action.card, id: shortid.generate() };\n\n            const index = state.cardsAllIds.indexOf(action.card.id) + 1;\n            const cardsAllIds = [...state.cardsAllIds.slice(0, index), newCard.id, ...state.cardsAllIds.slice(index)];\n\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [newCard.id]: newCard,\n                },\n                cardsAllIds,\n                texts: {\n                    ...state.texts,\n                    [newCard.id]: {\n                        ...state.texts[action.card.id],\n                    },\n                },\n                images: {\n                    ...state.images,\n                    [newCard.id]: {\n                        ...state.images[action.card.id],\n                    },\n                },\n            };\n        }\n        case CARDSET_REMOVE_CARD: {\n            const cardId = action.card.id;\n            let cardsById = { ...state.cardsById };\n            delete cardsById[cardId];\n\n            let texts = { ...state.texts };\n            if (cardId in texts) {\n                delete texts[cardId];\n            }\n\n            let images = { ...state.images };\n            if (cardId in images) {\n                delete images[cardId];\n            }\n\n            let activeCard = state.activeCard === cardId ? null : state.activeCard;\n\n            const cardsAllIds = state.cardsAllIds.filter(id => id !== cardId);\n\n            let placeholders = state.placeholders;\n            let placeholdersAllIds = state.placeholdersAllIds;\n            if (cardsAllIds.length === 0) {\n                placeholders = {};\n                placeholdersAllIds = [];\n            }\n\n            return {\n                ...state,\n                cardsById,\n                cardsAllIds,\n                placeholders,\n                placeholdersAllIds,\n                texts,\n                images,\n                activeCard,\n            };\n        }\n        case CARDSET_UPDATE_CARD_COUNT: {\n            const cardId = action.card.id;\n            let card = { ...state.cardsById[cardId] };\n            card.count = action.count;\n\n            return {\n                ...state,\n                cardsById: {\n                    ...state.cardsById,\n                    [cardId]: card,\n                },\n            };\n        }\n        case CARDSET_ADD_TEXT_PLACEHOLDER: {\n            let textSettings = { ...state.textSettings };\n            const id = shortid.generate();\n            const textPlaceholder: TextPlaceholderType = {\n                id,\n                type: 'text',\n                x: 5,\n                y: 5,\n                width: 20,\n                height: 10,\n                angle: 0,\n                align: textSettings.align,\n                color: textSettings.color,\n                fontFamily: textSettings.fontFamily,\n                fontVariant: textSettings.fontVariant,\n                fontSize: textSettings.fontSize,\n            };\n\n            return {\n                ...state,\n                placeholders: {\n                    ...state.placeholders,\n                    [id]: textPlaceholder,\n                },\n                placeholdersAllIds: [...state.placeholdersAllIds, id],\n            };\n        }\n        case CARDSET_ADD_IMAGE_PLACEHOLDER: {\n            const id = shortid.generate();\n            const imagePlaceholder: ImagePlaceholderType = {\n                id,\n                type: 'image',\n                x: 5,\n                y: 5,\n                width: 20,\n                height: 20,\n                angle: 0,\n            };\n\n            return {\n                ...state,\n                placeholders: {\n                    ...state.placeholders,\n                    [id]: imagePlaceholder,\n                },\n                placeholdersAllIds: [...state.placeholdersAllIds, id],\n            };\n        }\n        case CARDSET_CHANGE_ACTIVE_PLACEHOLDER_NAME: {\n            if (state.activePlaceholder !== null) {\n                let placeholders = { ...state.placeholders };\n                placeholders[state.activePlaceholder] = {\n                    ...placeholders[state.activePlaceholder],\n                    name: action.name,\n                };\n\n                return {\n                    ...state,\n                    placeholders,\n                };\n            }\n\n            return state;\n        }\n\n        case CARDSET_REMOVE_ACTIVE_PLACEHOLDER: {\n            const placeholderId = state.activePlaceholder;\n            if (placeholderId !== undefined && placeholderId !== null) {\n                const activePlaceholder = state.placeholders[placeholderId];\n                if (activePlaceholder.locked) {\n                    return state;\n                }\n\n                let placeholders = { ...state.placeholders };\n                let placeholdersAllIds = [...state.placeholdersAllIds];\n                if (placeholderId in placeholders) {\n                    delete placeholders[placeholderId];\n                }\n                let placeholderIndex = placeholdersAllIds.indexOf(placeholderId);\n                if (placeholderIndex !== -1) {\n                    placeholdersAllIds.splice(placeholderIndex, 1);\n                }\n\n                let texts = { ...state.texts };\n                for (const cardId in texts) {\n                    if (placeholderId in texts[cardId]) {\n                        let placeholderTexts = { ...texts[cardId] };\n                        delete placeholderTexts[placeholderId];\n                        texts[cardId] = placeholderTexts;\n                    }\n                }\n\n                let images = { ...state.images };\n                for (const cardId in images) {\n                    if (placeholderId in images[cardId]) {\n                        let placeholderImages = { ...images[cardId] };\n                        delete placeholderImages[placeholderId];\n                        images[cardId] = placeholderImages;\n                    }\n                }\n\n                return {\n                    ...state,\n                    placeholders,\n                    placeholdersAllIds,\n                    texts,\n                    images,\n                    activePlaceholder: null,\n                };\n            }\n            return state;\n        }\n        case CARDSET_RAISE_ACTIVE_PLACEHOLDER_TO_TOP: {\n            let placeholdersAllIds = [...state.placeholdersAllIds];\n\n            if (state.activePlaceholder !== null) {\n                let index = placeholdersAllIds.indexOf(state.activePlaceholder);\n                if (index !== -1) {\n                    placeholdersAllIds.push(placeholdersAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                placeholdersAllIds,\n            };\n        }\n        case CARDSET_LOWER_ACTIVE_PLACEHOLDER_TO_BOTTOM: {\n            let placeholdersAllIds = [...state.placeholdersAllIds];\n\n            if (state.activePlaceholder !== null) {\n                let index = placeholdersAllIds.indexOf(state.activePlaceholder);\n                if (index !== -1) {\n                    placeholdersAllIds.unshift(placeholdersAllIds.splice(index, 1)[0]);\n                }\n            }\n\n            return {\n                ...state,\n                placeholdersAllIds,\n            };\n        }\n        case CARDSET_LOCK_ACTIVE_PLACEHOLDER: {\n            if (state.activePlaceholder) {\n                const placeholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    locked: true,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: placeholder,\n                    },\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_UNLOCK_ACTIVE_PLACEHOLDER: {\n            if (state.activePlaceholder) {\n                const placeholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    locked: false,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: placeholder,\n                    },\n                };\n            }\n\n            return state;\n        }\n        case CARDSET_CHANGE_WIDTH: {\n            return {\n                ...state,\n                width: action.width,\n            };\n        }\n        case CARDSET_CHANGE_HEIGHT: {\n            return {\n                ...state,\n                height: action.height,\n            };\n        }\n        case CARDSET_CHANGE_PLACEHOLDER_POSITION: {\n            const placeholder = {\n                ...state.placeholders[action.placeholder.id],\n                x: action.x,\n                y: action.y,\n            };\n\n            return {\n                ...state,\n                placeholders: {\n                    ...state.placeholders,\n                    [action.placeholder.id]: placeholder,\n                },\n            };\n        }\n        case CARDSET_CHANGE_PLACEHOLDER_SIZE: {\n            const placeholder = {\n                ...state.placeholders[action.placeholder.id],\n                width: action.width,\n                height: action.height,\n            };\n\n            return {\n                ...state,\n                placeholders: {\n                    ...state.placeholders,\n                    [action.placeholder.id]: placeholder,\n                },\n            };\n        }\n        case CARDSET_CHANGE_PLACEHOLDER_ANGLE: {\n            const placeholder = {\n                ...state.placeholders[action.placeholder.id],\n                angle: action.angle,\n            };\n\n            return {\n                ...state,\n                placeholders: {\n                    ...state.placeholders,\n                    [action.placeholder.id]: placeholder,\n                },\n            };\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_ALIGN: {\n            let textSettings = {\n                ...state.textSettings,\n                align: action.align,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    align: action.align,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_COLOR: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.color,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    color: action.color,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.fontFamily,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    fontFamily: action.fontFamily,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_VARIANT: {\n            let textSettings = {\n                ...state.textSettings,\n                color: action.fontVariant,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    fontVariant: action.fontVariant,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_FAMILY_AND_VARIANT: {\n            let textSettings = {\n                ...state.textSettings,\n                fontFamily: action.fontFamily,\n                fontVariant: action.fontVariant,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    fontFamily: action.fontFamily,\n                    fontVariant: action.fontVariant,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_ACTIVE_TEXT_PLACEHOLDER_FONT_SIZE: {\n            let textSettings = {\n                ...state.textSettings,\n                fontSize: action.fontSize,\n            };\n\n            if (state.activePlaceholder) {\n                const textPlaceholder = {\n                    ...state.placeholders[state.activePlaceholder],\n                    fontSize: action.fontSize,\n                };\n\n                return {\n                    ...state,\n                    placeholders: {\n                        ...state.placeholders,\n                        [state.activePlaceholder]: textPlaceholder,\n                    },\n                    textSettings,\n                };\n            } else {\n                return {\n                    ...state,\n                    textSettings,\n                };\n            }\n        }\n        case CARDSET_CHANGE_TEXT: {\n            let placeholdersByCard: PlaceholdersTextInfoCollection = {};\n            if (state.texts && action.cardId in state.texts) {\n                placeholdersByCard = { ...state.texts[action.cardId] };\n            }\n\n            const placeholder = state.placeholders[action.placeholderId];\n            const name = placeholder.name || placeholder.id;\n\n            for (const plId in state.placeholders) {\n                const pl = state.placeholders[plId];\n\n                if ((pl.name === name || pl.id === name) && pl.type === 'text') {\n                    placeholdersByCard[plId] = action.textInfo;\n                }\n            }\n\n            return {\n                ...state,\n                texts: {\n                    ...state.texts,\n                    [action.cardId]: placeholdersByCard,\n                },\n            };\n        }\n        case CARDSET_CHANGE_IMAGE: {\n            let placeholdersByCard: PlaceholdersImageInfoCollection = {};\n            if (state.images && action.cardId in state.images) {\n                placeholdersByCard = { ...state.images[action.cardId] };\n            }\n\n            const placeholder = state.placeholders[action.placeholderId];\n            const name = placeholder.name || placeholder.id;\n\n            for (const plId in state.placeholders) {\n                const pl = state.placeholders[plId];\n\n                if ((pl.name === name || pl.id === name) && pl.type === 'image') {\n                    placeholdersByCard[plId] = action.imageInfo;\n                }\n            }\n\n            return {\n                ...state,\n                images: {\n                    ...state.images,\n                    [action.cardId]: placeholdersByCard,\n                },\n            };\n        }\n        case CARDSET_SET_ACTIVE_CARD_AND_PLACEHOLDER: {\n            let textSettings = { ...state.textSettings };\n            let activeSidebar = action.cardId !== null ? SidebarState.Details : state.activeSidebar;\n            if (action.placeholderId !== null) {\n                const placeholder = state.placeholders[action.placeholderId];\n                if (placeholder.type === 'text') {\n                    textSettings.align = placeholder.align;\n                    textSettings.color = placeholder.color;\n                    textSettings.fontFamily = placeholder.fontFamily;\n                    textSettings.fontVariant = placeholder.fontVariant;\n                    textSettings.fontSize = placeholder.fontSize;\n\n                    activeSidebar = SidebarState.Text;\n                } else {\n                    activeSidebar = SidebarState.Image;\n                }\n            }\n\n            return {\n                ...state,\n                activeCard: action.cardId,\n                activePlaceholder: action.placeholderId,\n                textSettings,\n                activeSidebar,\n            };\n        }\n\n        case CARDSET_SET_SIDEBAR_STATE: {\n            return {\n                ...state,\n                activeSidebar: action.sidebarState,\n            };\n        }\n        case CARDSET_SET_ZOOM: {\n            return {\n                ...state,\n                zoom: action.zoom,\n            };\n        }\n        case CARDSET_IMPORT_DATA: {\n            return {\n                ...state,\n                ...action.data,\n            };\n        }\n        default:\n            return state;\n    }\n}\n\nexport function images(state: ImageState = DefaultImageState, action: ImageListAction): ImageState {\n    switch (action.type) {\n        case IMAGE_LIST_REQUEST:\n            return Object.assign({}, state, {\n                filter: action.filter,\n                activity: state.activity | ACTIVITY_LISTING,\n            });\n        case IMAGE_LIST_SUCCESS:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n                images: action.images,\n            });\n        case IMAGE_LIST_FAILURE:\n            return Object.assign({}, state, {\n                activity: state.activity & ~ACTIVITY_LISTING,\n            });\n        default:\n            return state;\n    }\n}\n\nconst reducers = combineReducers({\n    message,\n    auth,\n    signup,\n    games,\n    cardsets,\n    images,\n});\n\nexport default reducers;\n","import { Ghost, Browser } from 'react-kawaii';\nimport React, { Component } from 'react';\n\nexport enum Character {\n    Ghost,\n    Browser,\n}\ninterface Props {\n    character: Character;\n    mood?: string;\n}\n\nexport default class KawaiiMessage extends Component<Props> {\n    render() {\n        const { character, mood } = this.props;\n\n        return (\n            <div\n                style={{\n                    padding: '1em',\n                    borderRadius: '1em',\n                    backgroundColor: 'var(--color-2)',\n                    display: 'grid',\n                    grid: 'auto-flow / minmax(120px, auto) 1fr',\n                }}\n            >\n                {character === Character.Ghost && <Ghost size={120} mood={mood || 'blissful'} color=\"#faebef\" />}\n                {character === Character.Browser && <Browser size={120} mood={mood || 'blissful'} color=\"#faebef\" />}\n                <div style={{ marginLeft: '1em' }}>{this.props.children}</div>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nexport default class AboutPage extends Component {\n    render() {\n        return (\n            <div>\n                <h2>About</h2>\n                <p>\n                    \"Card-a-mon\" is card game development tool. At the moment it is project of single person (me) with a\n                    vision. My aim is to create affordable and practical tool to develop card games from A (prototyping)\n                    to Z (printing). If you have ideas, suggestions, proposals, comments and etc. then you can contact\n                    me by e-mail <a href=\"mailto:dalius@ffff.lt\">dalius@ffff.lt</a>.\n                </p>\n                <h2>Credits</h2>\n                This project is available because of number amazing open source projects. Some of them:\n                <ul>\n                    <li>\n                        <a href=\"https://reactjs.org/\">React</a> and all the ecosystem around it.\n                    </li>\n                    <li>\n                        <a href=\"https://fonts.google.com/\">Google Fonts</a>\n                    </li>\n                    <li>\n                        <a href=\"https://github.com/game-icons/icons\">Game icons</a>\n                    </li>\n                    <li>\n                        <a href=\"http://pdfkit.org/\">PDFKit</a>\n                    </li>\n                </ul>\n                <p>... and many more.</p>\n            </div>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React from 'react';\n\nimport { Dispatch } from '../actions';\nimport { State } from '../reducers';\nimport resize from './resize.svg';\nimport rotate from './rotate.svg';\nimport style from './FieldController.module.css';\n\ninterface OwnProps {\n    cardId: string;\n    placeholderId: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    angle: number;\n    children: React.ReactNode;\n    onDrag: (x: number, y: number) => void;\n    onResize: (width: number, height: number) => void;\n    onRotate: (angle: number) => void;\n    cardWidth: number;\n    cardHeight: number;\n}\n\ninterface StateProps {\n    isActive: boolean;\n    isActivePlaceholder: boolean;\n    isLocked: boolean;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass FieldController extends React.Component<Props> {\n    moving: boolean;\n    cDiv: React.RefObject<HTMLDivElement>;\n    resizeDiv: React.RefObject<HTMLImageElement>;\n    rotateDiv: React.RefObject<HTMLImageElement>;\n    relX: number;\n    relY: number;\n    startX: number;\n    startY: number;\n    originalW: number;\n    originalH: number;\n    rotatedPointX: number;\n    rotatedPointY: number;\n    centerX: number;\n    centerY: number;\n    originalAngle: number;\n    currentAngle: number;\n    activatedUsingTouch: boolean;\n    originalBodyCursor: string | null;\n\n    constructor(props: Props) {\n        super(props);\n        this.cDiv = React.createRef();\n        this.resizeDiv = React.createRef();\n        this.rotateDiv = React.createRef();\n        this.currentAngle = props.angle;\n        this.moving = false;\n        this.relX = 0;\n        this.relY = 0;\n        this.startX = 0;\n        this.startY = 0;\n        this.originalW = 0;\n        this.originalH = 0;\n        this.rotatedPointX = 0;\n        this.rotatedPointY = 0;\n        this.centerX = 0;\n        this.centerY = 0;\n        this.originalAngle = 0;\n        this.activatedUsingTouch = false;\n        this.originalBodyCursor = null;\n    }\n\n    componentDidMount() {\n        if (this.cDiv.current === null) return;\n        if (this.resizeDiv.current === null) return;\n        if (this.rotateDiv.current === null) return;\n\n        this.originalBodyCursor = document.body.style.cursor;\n\n        this.cDiv.current.addEventListener('dragstart', this.handleBrowserDragStart);\n        this.cDiv.current.addEventListener('mousedown', this.handleMouseDown);\n        this.cDiv.current.addEventListener('touchstart', this.handleTouchStart);\n        this.resizeDiv.current.addEventListener('mousedown', this.handleResizeMouseDown);\n        this.resizeDiv.current.addEventListener('touchstart', this.handleResizeTouchStart);\n        this.rotateDiv.current.addEventListener('mousedown', this.handleRotateMouseDown);\n        this.rotateDiv.current.addEventListener('touchstart', this.handleRotateTouchStart);\n    }\n\n    componentDidUpdate() {\n        if (this.cDiv.current === null) return;\n\n        this.currentAngle = this.props.angle;\n    }\n\n    rotateVec = (x: number, y: number, a: number) => {\n        const sinA = Math.sin(a);\n        const cosA = Math.cos(a);\n        const rx = cosA * x - sinA * y;\n        const ry = sinA * x + cosA * y;\n\n        return { rx, ry };\n    };\n\n    handleBrowserDragStart = (event: DragEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    // Dragging handling\n\n    handleMouseDown = (event: MouseEvent) => {\n        this.handleDragStart(event);\n\n        document.addEventListener('mousemove', this.handleMouseMove);\n        document.addEventListener('mouseup', this.handleMouseUp);\n        event.stopPropagation();\n    };\n\n    handleTouchStart = (event: TouchEvent) => {\n        this.handleDragStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n        event.stopPropagation();\n    };\n\n    handleDragStart = (co: { clientX: number; clientY: number }) => {\n        if (this.cDiv.current === null) return;\n\n        this.cDiv.current.style.cursor = 'grabbing';\n\n        this.relX = co.clientX - this.cDiv.current.offsetLeft;\n        this.relY = co.clientY - this.cDiv.current.offsetTop;\n    };\n\n    handleMouseUp = (event: MouseEvent) => {\n        this.handleComplete(event, false);\n\n        document.removeEventListener('mousemove', this.handleMouseMove);\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    handleTouchEnd = (event: TouchEvent) => {\n        this.handleComplete(event, true);\n\n        document.removeEventListener('touchmove', this.handleTouchMove);\n        document.removeEventListener('touchend', this.handleTouchEnd);\n    };\n\n    handleComplete = (event: Event, isTouchEvent: boolean) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null) return;\n        if (this.moving && !isLocked) {\n            this.props.onDrag(this.cDiv.current.offsetLeft, this.cDiv.current.offsetTop);\n            this.moving = false;\n        }\n        this.activatedUsingTouch = isTouchEvent;\n\n        this.cDiv.current.style.cursor = 'grab';\n\n        event.preventDefault();\n    };\n\n    handleMouseMove = (event: MouseEvent) => {\n        this.handleDragMove(event);\n        event.preventDefault();\n    };\n\n    handleTouchMove = (event: TouchEvent) => {\n        this.handleDragMove(event.changedTouches[0]);\n        event.preventDefault();\n    };\n\n    handleDragMove = (co: { clientX: number; clientY: number }) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null || isLocked) return;\n        const { width, height, cardWidth, cardHeight } = this.props;\n        this.moving = true;\n\n        const { rx, ry } = this.rotateVec(width / 2, height / 2, this.currentAngle);\n\n        const dx = Math.abs(rx) - width / 2;\n        const dy = Math.abs(ry) - height / 2;\n        const dx2 = Math.abs(rx) + width / 2;\n        const dy2 = Math.abs(ry) + height / 2;\n\n        const x = Math.min(Math.max(co.clientX - this.relX, dx), cardWidth - dx2);\n        const y = Math.min(Math.max(co.clientY - this.relY, dy), cardHeight - dy2);\n        this.cDiv.current.style.left = x + 'px';\n        this.cDiv.current.style.top = y + 'px';\n    };\n\n    // Resize handling\n\n    handleResizeMouseDown = (event: MouseEvent) => {\n        this.handleResizeStart(event);\n\n        document.addEventListener('mousemove', this.handleResizeMouseMove);\n        document.addEventListener('mouseup', this.handleResizeMouseUp);\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handleResizeTouchStart = (event: TouchEvent) => {\n        this.handleResizeStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleResizeTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleResizeTouchEnd, { passive: false });\n        event.stopPropagation();\n    };\n\n    handleResizeStart = (co: { clientX: number; clientY: number }) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null || isLocked) return;\n\n        document.body.style.cursor = `url(${resize}), auto`;\n\n        this.originalW = this.cDiv.current.clientWidth;\n        this.originalH = this.cDiv.current.clientHeight;\n\n        const dx = this.cDiv.current.clientWidth / 2;\n        const dy = this.cDiv.current.clientHeight / 2;\n        const { rx, ry } = this.rotateVec(-dx, -dy, this.currentAngle);\n\n        this.rotatedPointX = this.cDiv.current.offsetLeft + dx + rx;\n        this.rotatedPointY = this.cDiv.current.offsetTop + dy + ry;\n\n        this.startX = co.clientX;\n        this.startY = co.clientY;\n    };\n\n    handleResizeMouseUp = (event: MouseEvent) => {\n        this.handleResizeComplete(event);\n\n        document.removeEventListener('mousemove', this.handleResizeMouseMove);\n        document.removeEventListener('mouseup', this.handleResizeMouseUp);\n    };\n\n    handleResizeTouchEnd = (event: TouchEvent) => {\n        this.handleResizeComplete(event);\n\n        document.removeEventListener('touchmove', this.handleResizeTouchMove);\n        document.removeEventListener('touchend', this.handleResizeTouchEnd);\n    };\n\n    handleResizeComplete = (event: Event) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null) return;\n\n        if (this.moving && !isLocked) {\n            const { offsetLeft, offsetTop, clientWidth, clientHeight } = this.cDiv.current;\n            this.props.onDrag(offsetLeft, offsetTop);\n            this.props.onResize(clientWidth, clientHeight);\n            this.moving = false;\n        }\n\n        document.body.style.cursor = this.originalBodyCursor;\n\n        event.preventDefault();\n    };\n\n    handleResizeMouseMove = (event: MouseEvent) => {\n        this.handleResizeMove(event);\n        event.preventDefault();\n    };\n\n    handleResizeTouchMove = (event: TouchEvent) => {\n        this.handleResizeMove(event.changedTouches[0]);\n        event.preventDefault();\n    };\n\n    handleResizeMove = (co: { clientX: number; clientY: number }) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null || isLocked) return;\n        this.moving = true;\n\n        const vx = co.clientX - this.startX;\n        const vy = co.clientY - this.startY;\n\n        const { rx, ry } = this.rotateVec(vx, vy, -this.currentAngle);\n\n        const w = this.originalW + rx;\n        const h = this.originalH + ry;\n        this.cDiv.current.style.width = w + 'px';\n        this.cDiv.current.style.height = h + 'px';\n\n        const rotatedV = this.rotateVec(w / 2, h / 2, this.currentAngle);\n        const nx = this.rotatedPointX + rotatedV.rx;\n        const ny = this.rotatedPointY + rotatedV.ry;\n\n        this.cDiv.current.style.left = nx - w / 2 + 'px';\n        this.cDiv.current.style.top = ny - h / 2 + 'px';\n    };\n\n    // Rotation handling\n\n    handleRotateMouseDown = (event: MouseEvent) => {\n        this.handleRotateStart(event);\n\n        document.addEventListener('mousemove', this.handleRotateMouseMove);\n        document.addEventListener('mouseup', this.handleRotateMouseUp);\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    handleRotateTouchStart = (event: TouchEvent) => {\n        this.handleRotateStart(event.changedTouches[0]);\n\n        document.addEventListener('touchmove', this.handleRotateTouchMove, { passive: false });\n        document.addEventListener('touchend', this.handleRotateTouchEnd, { passive: false });\n        event.stopPropagation();\n    };\n\n    handleRotateStart = (co: { clientX: number; clientY: number }) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null || isLocked) return;\n\n        document.body.style.cursor = `url(${rotate}), auto`;\n\n        const rect = this.cDiv.current.getBoundingClientRect();\n        this.centerX = rect.left + this.cDiv.current.clientWidth / 2;\n        this.centerY = rect.top + this.cDiv.current.clientHeight / 2;\n\n        this.originalAngle = Math.atan2(this.centerX - co.clientX, this.centerY - co.clientY) + this.currentAngle;\n    };\n\n    handleRotateMouseUp = (event: MouseEvent) => {\n        this.handleRotateComplete(event);\n\n        document.removeEventListener('mousemove', this.handleRotateMouseMove);\n        document.removeEventListener('mouseup', this.handleRotateMouseUp);\n    };\n\n    handleRotateTouchEnd = (event: TouchEvent) => {\n        this.handleRotateComplete(event);\n\n        document.removeEventListener('touchmove', this.handleRotateTouchMove);\n        document.removeEventListener('touchend', this.handleRotateTouchEnd);\n    };\n\n    handleRotateComplete = (event: Event) => {\n        const { isLocked } = this.props;\n\n        if (this.moving && !isLocked) {\n            this.props.onRotate(this.currentAngle);\n            this.moving = false;\n        }\n\n        document.body.style.cursor = this.originalBodyCursor;\n\n        event.preventDefault();\n    };\n\n    handleRotateMouseMove = (event: MouseEvent) => {\n        this.handleRotateMove(event);\n        event.preventDefault();\n    };\n\n    handleRotateTouchMove = (event: TouchEvent) => {\n        this.handleRotateMove(event.changedTouches[0]);\n        event.preventDefault();\n    };\n\n    handleRotateMove = (co: { clientX: number; clientY: number }) => {\n        const { isLocked } = this.props;\n\n        if (this.cDiv.current === null || isLocked) return;\n        this.moving = true;\n\n        const angle = Math.atan2(this.centerX - co.clientX, this.centerY - co.clientY);\n        this.currentAngle = this.originalAngle - angle;\n\n        this.cDiv.current.style.transform = `rotate(${this.currentAngle}rad)`;\n    };\n\n    // Rendering\n\n    render() {\n        const { x, y, width, height, angle, children, isActive, isActivePlaceholder } = this.props;\n\n        return (\n            <div\n                ref={this.cDiv}\n                className={`${style.fieldcontroller} ${\n                    isActivePlaceholder ? style.fieldcontrolleractiveplaceholder : ''\n                } ${isActive ? style.fieldcontrolleractive : ''} ${\n                    isActive && this.activatedUsingTouch ? style.touchactivated : ''\n                } `}\n                style={{\n                    position: 'absolute',\n                    left: x,\n                    top: y,\n                    width: width,\n                    height: height,\n                    cursor: 'grab',\n                    transform: `rotate(${angle}rad)`,\n                }}\n            >\n                {children}\n                <img\n                    src={resize}\n                    alt=\"resize\"\n                    ref={this.resizeDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        right: 0,\n                        bottom: 0,\n                        cursor: `url(${resize}), auto`,\n                    }}\n                />\n                <img\n                    src={rotate}\n                    alt=\"rotate\"\n                    ref={this.rotateDiv}\n                    className={style.controller}\n                    style={{\n                        position: 'absolute',\n                        left: 0,\n                        bottom: 0,\n                        cursor: `url(${rotate}), auto`,\n                    }}\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    const isActivePlaceholder = props.placeholderId === state.cardsets.activePlaceholder;\n    const isActive =\n        props.cardId === state.cardsets.activeCard && props.placeholderId === state.cardsets.activePlaceholder;\n    const isLocked = state.cardsets.placeholders[props.placeholderId].locked === true;\n\n    return {\n        isActive,\n        isActivePlaceholder,\n        isLocked,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(FieldController);\n","import { connect } from 'react-redux';\nimport React, { PureComponent } from 'react';\n\nimport {\n    Dispatch,\n    ImagePlaceholderType,\n    cardSetActiveCardAndPlaceholder,\n    cardSetChangePlaceholderAngle,\n    cardSetChangePlaceholderPosition,\n    cardSetChangePlaceholderSize,\n} from '../actions';\nimport { State } from '../reducers';\nimport FieldController from './FieldController';\nimport emptyImageImage from './image.svg';\n\ninterface OwnProps {\n    cardId: string;\n    ppmm: number;\n    imagePlaceholder: ImagePlaceholderType;\n    cardWidth: number;\n    cardHeight: number;\n}\n\ninterface StateProps {\n    imageUrl: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass ImageField extends PureComponent<Props> {\n    imageDiv: React.RefObject<HTMLDivElement>;\n    wasMoved: boolean;\n\n    constructor(props: Props) {\n        super(props);\n        this.imageDiv = React.createRef();\n        this.wasMoved = false;\n    }\n\n    componentDidMount() {\n        if (!this.imageDiv.current) return;\n        this.imageDiv.current.addEventListener('mousedown', this.handleMouseDown);\n        this.imageDiv.current.addEventListener('touchstart', this.handleTouchStart);\n        this.imageDiv.current.addEventListener('mousemove', this.handleMouseMove);\n        this.imageDiv.current.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        this.imageDiv.current.addEventListener('mouseup', this.handleMouseUp);\n        this.imageDiv.current.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n    }\n\n    handleDrag = (x: number, y: number) => {\n        const { dispatch, imagePlaceholder, ppmm } = this.props;\n        dispatch(cardSetChangePlaceholderPosition(imagePlaceholder, x / ppmm, y / ppmm));\n    };\n\n    handleResize = (width: number, height: number) => {\n        const { dispatch, imagePlaceholder, ppmm } = this.props;\n        dispatch(cardSetChangePlaceholderSize(imagePlaceholder, width / ppmm, height / ppmm));\n    };\n\n    handleRotate = (angle: number) => {\n        const { dispatch, imagePlaceholder } = this.props;\n        dispatch(cardSetChangePlaceholderAngle(imagePlaceholder, angle));\n    };\n\n    handleMouseDown = (event: MouseEvent) => {\n        this.wasMoved = false;\n        event.preventDefault();\n    };\n\n    handleTouchStart = (event: TouchEvent) => {\n        this.wasMoved = false;\n        event.preventDefault();\n    };\n\n    handleMouseMove = (event: MouseEvent) => {\n        this.wasMoved = true;\n        event.preventDefault();\n    };\n\n    handleTouchMove = (event: TouchEvent) => {\n        this.wasMoved = true;\n        event.preventDefault();\n    };\n\n    handleMouseUp = (event: MouseEvent) => {\n        this.handleComplete(event);\n    };\n\n    handleTouchEnd = (event: TouchEvent) => {\n        this.handleComplete(event);\n    };\n\n    handleComplete = (event: Event) => {\n        const { dispatch, cardId, imagePlaceholder } = this.props;\n        if (!this.wasMoved) {\n            event.preventDefault();\n            dispatch(cardSetActiveCardAndPlaceholder(cardId, imagePlaceholder.id));\n        }\n    };\n\n    render() {\n        const { imagePlaceholder, imageUrl, ppmm, cardWidth, cardHeight } = this.props;\n\n        return (\n            <FieldController\n                cardId={this.props.cardId}\n                placeholderId={imagePlaceholder.id}\n                x={imagePlaceholder.x * ppmm}\n                y={imagePlaceholder.y * ppmm}\n                width={imagePlaceholder.width * ppmm}\n                height={imagePlaceholder.height * ppmm}\n                angle={imagePlaceholder.angle}\n                onDrag={this.handleDrag}\n                onResize={this.handleResize}\n                onRotate={this.handleRotate}\n                cardWidth={cardWidth}\n                cardHeight={cardHeight}\n            >\n                <div\n                    ref={this.imageDiv}\n                    style={{\n                        width: '100%',\n                        height: '100%',\n                    }}\n                >\n                    <img\n                        style={{ opacity: imageUrl.length > 0 ? 1 : 0.5, width: '100%', height: 'auto' }}\n                        src={imageUrl || emptyImageImage}\n                        alt=\"\"\n                    />\n                </div>\n            </FieldController>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    const imageUrl =\n        state.cardsets.images &&\n        state.cardsets.images[props.cardId] &&\n        state.cardsets.images[props.cardId][props.imagePlaceholder.id]\n            ? state.cardsets.images[props.cardId][props.imagePlaceholder.id].url\n            : '';\n    return {\n        imageUrl,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(ImageField);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../fontLoader';\nimport { Dispatch, TextInfo, cardSetActiveCardAndPlaceholder, cardSetChangeText } from '../actions';\nimport { State } from '../reducers';\n\ninterface OwnProps {\n    cardId: string;\n    placeholderId: string;\n    align: string;\n    color: string;\n    fontFamily: string;\n    fontVariant: string;\n    fontSize: number;\n}\n\ninterface StateProps {\n    isActive: boolean;\n    textValue: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass ContentEditable extends Component<Props> {\n    editDiv: React.RefObject<HTMLDivElement>;\n    currentText: string;\n    currentAlign: string;\n    currentColor: string;\n    currentFontFamily: string;\n    currentFontVariant: string;\n    currentFontSize: number;\n    timeout: NodeJS.Timeout | null;\n    wasMoved: boolean;\n\n    constructor(props: Props) {\n        super(props);\n        this.editDiv = React.createRef();\n        this.currentText = '';\n        this.currentAlign = '';\n        this.currentColor = '';\n        this.currentFontFamily = '';\n        this.currentFontVariant = '';\n        this.currentFontSize = DEFAULT_FONT_SIZE;\n        this.timeout = null;\n        this.wasMoved = false;\n    }\n\n    componentDidMount() {\n        const { isActive } = this.props;\n\n        if (!this.editDiv.current) return;\n\n        this.editDiv.current.addEventListener('mousedown', this.handleMouseDown);\n        this.editDiv.current.addEventListener('touchstart', this.handleTouchStart);\n        this.editDiv.current.addEventListener('mousemove', this.handleMouseMove);\n        this.editDiv.current.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        this.editDiv.current.addEventListener('mouseup', this.handleMouseUp);\n        this.editDiv.current.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n\n        if (isActive) {\n            this.editDiv.current.focus();\n        }\n    }\n\n    shouldComponentUpdate(nextProps: Props) {\n        const shouldUpdate =\n            nextProps.textValue !== this.currentText ||\n            nextProps.align !== this.currentAlign ||\n            nextProps.color !== this.currentColor ||\n            nextProps.fontFamily !== this.currentFontFamily ||\n            nextProps.fontVariant !== this.currentFontVariant ||\n            nextProps.fontSize !== this.currentFontSize ||\n            this.props.isActive !== nextProps.isActive;\n\n        return shouldUpdate;\n    }\n\n    componentDidUpdate() {\n        const { textValue, align, color, fontFamily, fontVariant, fontSize } = this.props;\n        this.currentText = textValue;\n        this.currentAlign = align;\n        this.currentColor = color;\n        this.currentFontFamily = fontFamily;\n        this.currentFontVariant = fontVariant;\n        this.currentFontSize = fontSize;\n    }\n\n    handleMouseDown = (event: MouseEvent) => {\n        this.handleStart(event);\n    };\n\n    handleTouchStart = (event: TouchEvent) => {\n        this.handleStart(event);\n    };\n\n    handleStart = (event: Event) => {\n        const { isActive } = this.props;\n        if (isActive) {\n            event.stopPropagation();\n        } else {\n            this.wasMoved = false;\n            event.preventDefault();\n        }\n    };\n\n    handleMouseMove = (event: MouseEvent) => {\n        this.handleMove(event);\n    };\n\n    handleTouchMove = (event: TouchEvent) => {\n        this.handleMove(event);\n    };\n\n    handleMove = (event: Event) => {\n        const { isActive } = this.props;\n        if (isActive) {\n            event.stopPropagation();\n        } else {\n            this.wasMoved = true;\n            event.preventDefault();\n        }\n    };\n\n    handleMouseUp = (event: MouseEvent) => {\n        this.handleComplete(event);\n    };\n\n    handleTouchEnd = (event: TouchEvent) => {\n        this.handleComplete(event);\n    };\n\n    handleComplete = (event: Event) => {\n        const { dispatch, cardId, placeholderId, isActive } = this.props;\n        if (isActive) {\n            event.stopPropagation();\n        } else if (!this.wasMoved) {\n            event.preventDefault();\n            dispatch(cardSetActiveCardAndPlaceholder(cardId, placeholderId));\n\n            if (!this.editDiv.current) return;\n            this.editDiv.current.focus();\n        }\n    };\n\n    onFocus = () => {\n        if (!this.editDiv.current) return;\n\n        const { textValue, align, color, fontFamily, fontVariant, fontSize } = this.props;\n        this.currentText = textValue;\n        this.currentAlign = align;\n        this.currentColor = color;\n        this.currentFontFamily = fontFamily;\n        this.currentFontVariant = fontVariant;\n        this.currentFontSize = fontSize;\n\n        const range = document.createRange();\n        range.selectNodeContents(this.editDiv.current);\n        range.collapse(false);\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n\n    updateContent = (timeoutInMiliseconds: number) => {\n        if (!this.editDiv.current) return;\n        let value = this.editDiv.current.innerHTML;\n        value = value.replace(/<br>/g, '');\n\n        if (value !== this.currentText) {\n            this.currentText = value;\n\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            }\n\n            this.timeout = setTimeout(() => {\n                const { dispatch, cardId, placeholderId } = this.props;\n                const textInfo: TextInfo = { value };\n\n                dispatch(cardSetChangeText(cardId, placeholderId, textInfo));\n            }, timeoutInMiliseconds);\n        }\n    };\n\n    handleBlur = () => {\n        this.updateContent(0);\n    };\n\n    handleInput = () => {\n        this.updateContent(500);\n    };\n\n    render() {\n        const { color, align, fontFamily, fontVariant, fontSize } = this.props;\n        const isItalic = fontVariant && fontVariant.indexOf('italic') !== -1;\n        const fontWeight = isItalic\n            ? fontVariant === 'italic'\n                ? 400\n                : parseInt(fontVariant.slice(0, 3))\n            : fontVariant === 'regular'\n            ? 400\n            : parseInt(fontVariant);\n\n        return (\n            <div\n                ref={this.editDiv}\n                contentEditable={true}\n                onFocus={this.onFocus}\n                onBlur={this.handleBlur}\n                onInput={this.handleInput}\n                style={{\n                    width: '100%',\n                    height: '100%',\n                    textAlign: align === 'left' ? 'left' : align === 'right' ? 'right' : 'center',\n                    color: color,\n                    fontFamily: `'${fontFamily}'` || DEFAULT_FONT,\n                    fontStyle: isItalic ? 'italic' : 'normal',\n                    fontWeight,\n                    fontSize: `${fontSize}px`,\n                    outline: 'none',\n                    overflowWrap: 'break-word',\n                    lineHeight: 1.27,\n                }}\n                dangerouslySetInnerHTML={{ __html: this.props.textValue }}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    const textInfo =\n        state.cardsets.texts &&\n        state.cardsets.texts[props.cardId] &&\n        state.cardsets.texts[props.cardId][props.placeholderId]\n            ? state.cardsets.texts[props.cardId][props.placeholderId]\n            : { value: '' };\n    return {\n        textValue: textInfo.value,\n        isActive:\n            props.cardId === state.cardsets.activeCard && props.placeholderId === state.cardsets.activePlaceholder,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(ContentEditable);\n","import { connect } from 'react-redux';\nimport React, { PureComponent } from 'react';\n\nimport {\n    Dispatch,\n    TextPlaceholderType,\n    cardSetChangePlaceholderAngle,\n    cardSetChangePlaceholderPosition,\n    cardSetChangePlaceholderSize,\n} from '../actions';\nimport { State } from '../reducers';\nimport ContentEditable from './ContentEditable';\nimport FieldController from './FieldController';\nimport emptyTextImage from './text.svg';\n\ninterface OwnProps {\n    cardId: string;\n    ppmm: number;\n    textPlaceholder: TextPlaceholderType;\n    cardWidth: number;\n    cardHeight: number;\n}\n\ninterface StateProps {\n    text: string;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass TextField extends PureComponent<Props> {\n    handleDrag = (x: number, y: number) => {\n        const { dispatch, textPlaceholder, ppmm } = this.props;\n        dispatch(cardSetChangePlaceholderPosition(textPlaceholder, x / ppmm, y / ppmm));\n    };\n\n    handleResize = (width: number, height: number) => {\n        const { dispatch, textPlaceholder, ppmm } = this.props;\n        dispatch(cardSetChangePlaceholderSize(textPlaceholder, width / ppmm, height / ppmm));\n    };\n\n    handleRotate = (angle: number) => {\n        const { dispatch, textPlaceholder } = this.props;\n        dispatch(cardSetChangePlaceholderAngle(textPlaceholder, angle));\n    };\n\n    render() {\n        const { textPlaceholder, text, ppmm, cardWidth, cardHeight } = this.props;\n\n        return (\n            <FieldController\n                cardId={this.props.cardId}\n                placeholderId={textPlaceholder.id}\n                x={textPlaceholder.x * ppmm}\n                y={textPlaceholder.y * ppmm}\n                width={textPlaceholder.width * ppmm}\n                height={textPlaceholder.height * ppmm}\n                angle={textPlaceholder.angle}\n                onDrag={this.handleDrag}\n                onResize={this.handleResize}\n                onRotate={this.handleRotate}\n                cardWidth={cardWidth}\n                cardHeight={cardHeight}\n            >\n                {text === '' && (\n                    <div\n                        style={{\n                            width: '100%',\n                            height: '100%',\n                            position: 'fixed',\n                            left: 0,\n                            top: 0,\n                            zIndex: -1,\n                            textAlign:\n                                textPlaceholder.align === 'left'\n                                    ? 'left'\n                                    : textPlaceholder.align === 'right'\n                                    ? 'right'\n                                    : 'center',\n                        }}\n                    >\n                        <img style={{ opacity: 0.5, width: 'auto', height: '100%' }} src={emptyTextImage} alt=\"\" />\n                    </div>\n                )}\n\n                <ContentEditable\n                    cardId={this.props.cardId}\n                    placeholderId={textPlaceholder.id}\n                    align={textPlaceholder.align}\n                    color={textPlaceholder.color}\n                    fontFamily={textPlaceholder.fontFamily}\n                    fontVariant={textPlaceholder.fontVariant}\n                    fontSize={textPlaceholder.fontSize * ppmm}\n                />\n            </FieldController>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    let text =\n        state.cardsets.texts &&\n        state.cardsets.texts[props.cardId] &&\n        state.cardsets.texts[props.cardId][props.textPlaceholder.id]\n            ? state.cardsets.texts[props.cardId][props.textPlaceholder.id].value\n            : '';\n    return {\n        text,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(TextField);\n","import { connect } from 'react-redux';\nimport Measure from 'react-measure';\nimport React, { Component } from 'react';\n\nimport { CardType, Dispatch, PlaceholdersCollection, cardSetActiveCardAndPlaceholder, IdsArray } from '../actions';\nimport { State } from '../reducers';\nimport ImageField from './ImageField';\nimport TextField from './TextField';\nimport style from './Card.module.css';\n\ninterface OwnProps {\n    card: CardType;\n}\n\ninterface StateProps {\n    placeholders: PlaceholdersCollection;\n    placeholdersAllIds: IdsArray;\n    width: number;\n    height: number;\n    isActiveCard: boolean;\n    zoom: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface LocalState {\n    dimensions: {\n        width: number;\n        height: number;\n    };\n}\n\nclass Card extends Component<Props, LocalState> {\n    state = {\n        dimensions: {\n            width: -1,\n            height: -1,\n        },\n    };\n\n    handleFieldDeselect = (event: React.MouseEvent | React.TouchEvent) => {\n        const { dispatch, card } = this.props;\n        const el = event.target as HTMLElement;\n        if (el.getAttribute('id') === `card_${card.id}`) {\n            dispatch(cardSetActiveCardAndPlaceholder(card.id, null));\n            event.stopPropagation();\n        }\n    };\n\n    render() {\n        const { placeholders, placeholdersAllIds, card, width, height, isActiveCard, zoom } = this.props;\n        const ppmm = this.state.dimensions.width / width;\n\n        return (\n            <Measure\n                client\n                onResize={contentRect => {\n                    if (!contentRect.client) {\n                        return;\n                    }\n                    this.setState({ dimensions: contentRect.client });\n                }}\n            >\n                {({ measureRef }) => (\n                    <div\n                        className={`${style.card} ${isActiveCard ? style.active : ''}`}\n                        id={`card_${card.id}`}\n                        ref={measureRef}\n                        style={{\n                            width: `${width * zoom}mm`,\n                            height: `${height * zoom}mm`,\n                            position: 'relative',\n                            overflow: 'hidden',\n                        }}\n                        onMouseDown={this.handleFieldDeselect}\n                        onTouchStart={this.handleFieldDeselect}\n                    >\n                        {placeholdersAllIds.map(id => {\n                            const p = placeholders[id];\n                            if (p.type === 'image') {\n                                return (\n                                    <ImageField\n                                        key={p.id}\n                                        cardId={card.id}\n                                        imagePlaceholder={p}\n                                        ppmm={ppmm}\n                                        cardWidth={this.state.dimensions.width}\n                                        cardHeight={this.state.dimensions.height}\n                                    />\n                                );\n                            } else if (p.type === 'text') {\n                                return (\n                                    <TextField\n                                        key={p.id}\n                                        cardId={card.id}\n                                        textPlaceholder={p}\n                                        ppmm={ppmm}\n                                        cardWidth={this.state.dimensions.width}\n                                        cardHeight={this.state.dimensions.height}\n                                    />\n                                );\n                            }\n                            return null;\n                        })}\n                    </div>\n                )}\n            </Measure>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State, props: OwnProps): StateProps => {\n    return {\n        placeholders: state.cardsets.placeholders,\n        placeholdersAllIds: state.cardsets.placeholdersAllIds,\n        width: state.cardsets.width,\n        height: state.cardsets.height,\n        isActiveCard: state.cardsets.activeCard === props.card.id,\n        zoom: state.cardsets.zoom,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(Card);\n","import React, { Component } from 'react';\n\nimport style from './Loader.module.css';\n\ninterface Props {\n    fixed?: boolean;\n    small?: boolean;\n}\n\nexport default class Loader extends Component<Props> {\n    render() {\n        const { fixed, small } = this.props;\n\n        return (\n            <div className={`${style.loader} ${fixed ? style.fixed : style.relative} ${small ? style.small : ''}`}>\n                <div />\n                <div />\n            </div>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardType, cardSetCloneCard, cardSetRemoveCard, cardSetUpdateCardCount } from '../actions';\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport style from './SidebarDetails.module.css';\n\ninterface StateProps {\n    isAuthenticated: boolean;\n    activeCard: CardType | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarDetails extends Component<Props> {\n    handleCloneCardClick = () => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetCloneCard(activeCard));\n        }\n    };\n\n    handleRemoveCardClick = () => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetRemoveCard(activeCard));\n        }\n    };\n\n    handleCountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activeCard, dispatch } = this.props;\n        if (activeCard !== null) {\n            dispatch(cardSetUpdateCardCount(activeCard, parseInt(event.target.value)));\n        }\n    };\n\n    render() {\n        const { activeCard, visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                <button\n                    onClick={this.handleCloneCardClick}\n                    title=\"Clone card\"\n                    className={activeCard === null ? style.disabled : ''}\n                >\n                    <i className=\"material-icons\">file_copy</i>\n                </button>\n\n                <input\n                    type=\"number\"\n                    value={activeCard !== null ? activeCard.count.toString() : 0}\n                    onChange={this.handleCountChange}\n                    title=\"Number of card's copies\"\n                    className={activeCard === null ? style.disabled : ''}\n                />\n                <button\n                    onClick={this.handleRemoveCardClick}\n                    title=\"Remove card\"\n                    className={activeCard === null ? style.disabled : ''}\n                >\n                    <i className=\"material-icons\">delete</i>\n                </button>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activeCard: state.cardsets.activeCard !== null ? state.cardsets.cardsById[state.cardsets.activeCard] : null,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarDetails);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport {\n    CardType,\n    ImageArray,\n    ImageInfo,\n    PlaceholderType,\n    cardSetAddImagePlaceholder,\n    cardSetChangeActivePlaceholderName,\n    cardSetChangeImage,\n    cardSetLockActivePlaceholder,\n    cardSetLowerActivePlaceholderToBottom,\n    cardSetRaiseActivePlaceholderToTop,\n    cardSetRemoveActivePlaceholder,\n    cardSetUnlockActivePlaceholder,\n    imageListRequest,\n} from '../actions';\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport style from './SidebarImage.module.css';\n\ninterface StateProps {\n    isAuthenticated: boolean;\n    activePlaceholder: PlaceholderType | null;\n    imageUrl: string;\n    activeCard: CardType | null;\n    filter: string;\n    images: ImageArray;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\ninterface LocalState {\n    location: string;\n}\n\nexport class SidebarImage extends Component<Props, LocalState> {\n    state = {\n        location: 'all',\n    };\n\n    handleAddImageClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetAddImagePlaceholder());\n    };\n\n    handleRemoveClick = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetRemoveActivePlaceholder());\n        }\n    };\n\n    handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activePlaceholder, dispatch } = this.props;\n        const name = event.target.value.trim();\n        if (activePlaceholder !== null) {\n            dispatch(cardSetChangeActivePlaceholderName(name));\n        }\n    };\n\n    handleFilterChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        const { location } = this.state;\n        const filter = event.target.value;\n        dispatch(imageListRequest(filter, location));\n    };\n\n    handleImageSelect = (imageName: string) => {\n        const { dispatch, activeCard, activePlaceholder } = this.props;\n\n        if (activeCard && activePlaceholder) {\n            const ii: ImageInfo = { url: `/api/imagefiles/${imageName}` };\n            dispatch(cardSetChangeImage(activeCard.id, activePlaceholder.id, ii));\n        }\n    };\n\n    handleRaiseToTop = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetRaiseActivePlaceholderToTop());\n        }\n    };\n\n    handleLowerToBottom = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetLowerActivePlaceholderToBottom());\n        }\n    };\n\n    handleLockField = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetLockActivePlaceholder());\n        }\n    };\n\n    handleUnlockField = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetUnlockActivePlaceholder());\n        }\n    };\n\n    handleOptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { filter, dispatch } = this.props;\n        const location = event.target.value;\n\n        this.setState({ location });\n        dispatch(imageListRequest(filter, location));\n    };\n\n    render() {\n        const { activePlaceholder, imageUrl, filter, visible } = this.props;\n        const { location } = this.state;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>\n                    <button onClick={this.handleAddImageClick} title=\"Add image field\">\n                        <i className=\"material-icons\">add_photo_alternate</i>\n                    </button>\n\n                    <button onClick={this.handleRaiseToTop} title=\"Raise image to top\">\n                        <i className=\"material-icons\">arrow_upward</i>\n                    </button>\n                    <button onClick={this.handleLowerToBottom} title=\"Lower image to bottom\">\n                        <i className=\"material-icons\">arrow_downward</i>\n                    </button>\n\n                    {activePlaceholder !== null && !activePlaceholder.locked && (\n                        <button\n                            onClick={this.handleLockField}\n                            title=\"Lock image field. Locked field can't be dragged, rotated, resized and removed.\"\n                        >\n                            <i className=\"material-icons\">lock_open</i>\n                        </button>\n                    )}\n\n                    {activePlaceholder !== null && activePlaceholder.locked && (\n                        <button\n                            onClick={this.handleUnlockField}\n                            title=\"Unlock image field. Unlocked text field can be dragged, rotated, resized and removed.\"\n                        >\n                            <i className=\"material-icons\">lock</i>\n                        </button>\n                    )}\n\n                    <button\n                        className={activePlaceholder === null || activePlaceholder.locked ? style.disabled : ''}\n                        onClick={this.handleRemoveClick}\n                        title=\"Remove field\"\n                    >\n                        <i className=\"material-icons\">remove</i>\n                    </button>\n\n                    {activePlaceholder !== null && (\n                        <input\n                            type=\"text\"\n                            value={activePlaceholder.type === 'image' ? activePlaceholder.name || '' : ''}\n                            placeholder={activePlaceholder.id}\n                            onChange={this.handleNameChange}\n                            title=\"Change name of image field.\"\n                        />\n                    )}\n                </div>\n\n                {activePlaceholder && activePlaceholder.type === 'image' && (\n                    <>\n                        <div className={style.image}>\n                            <img src={imageUrl} alt=\"\" />\n                        </div>\n                        <div>\n                            Where to look for images?\n                            <form>\n                                <div>\n                                    <label>\n                                        <input\n                                            type=\"radio\"\n                                            value=\"all\"\n                                            checked={location === 'all'}\n                                            onChange={this.handleOptionChange}\n                                        />\n                                        All images\n                                    </label>\n                                </div>\n                                <div>\n                                    <label>\n                                        <input\n                                            type=\"radio\"\n                                            value=\"user\"\n                                            checked={location === 'user'}\n                                            onChange={this.handleOptionChange}\n                                        />\n                                        User images\n                                    </label>\n                                </div>\n                                <div>\n                                    <label>\n                                        <input\n                                            type=\"radio\"\n                                            value=\"game\"\n                                            checked={location === 'game'}\n                                            onChange={this.handleOptionChange}\n                                        />\n                                        Game images\n                                    </label>\n                                </div>\n                            </form>\n                        </div>\n                        <div>\n                            <input type=\"text\" value={filter} onChange={this.handleFilterChange} />\n                        </div>\n                        <div className={style.images}>\n                            {this.props.images.map(im => {\n                                return (\n                                    <img\n                                        key={im.id}\n                                        src={`/api/imagefiles/${im.name}`}\n                                        onClick={() => this.handleImageSelect(im.name)}\n                                        alt=\"\"\n                                    />\n                                );\n                            })}\n                        </div>\n                    </>\n                )}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    const activePlaceholder =\n        state.cardsets.activePlaceholder !== null\n            ? state.cardsets.placeholders[state.cardsets.activePlaceholder]\n            : null;\n\n    const activeCard = state.cardsets.activeCard !== null ? state.cardsets.cardsById[state.cardsets.activeCard] : null;\n\n    const imageUrl =\n        state.cardsets.images &&\n        activeCard &&\n        state.cardsets.images[activeCard.id] &&\n        activePlaceholder !== null &&\n        activePlaceholder.type === 'image' &&\n        state.cardsets.images[activeCard.id][activePlaceholder.id]\n            ? state.cardsets.images[activeCard.id][activePlaceholder.id].url\n            : '';\n\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activePlaceholder,\n        imageUrl,\n        activeCard,\n        images: state.images.images,\n        filter: state.images.filter,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarImage);\n","import 'filepond/dist/filepond.min.css';\n\nimport { FilePond, registerPlugin } from 'react-filepond';\nimport { connect } from 'react-redux';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport Papa from 'papaparse';\nimport React, { Component } from 'react';\nimport md5 from 'md5';\nimport shortid from 'shortid';\n\nimport {\n    CardType,\n    CardsCollection,\n    FPLoadCallback,\n    FPRevertLoadCallback,\n    IdsArray,\n    PlaceholdersCollection,\n    PlaceholdersImageInfoByCardCollection,\n    PlaceholdersTextInfoByCardCollection,\n    cardSetImportData,\n    messageDisplay,\n} from '../actions';\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { State } from '../reducers';\nimport { downloadBlob } from '../utils';\nimport style from './SidebarImportExport.module.css';\n\nregisterPlugin(FilePondPluginFileValidateType);\n\ninterface StateProps {\n    activeGame: string | null;\n    width: number;\n    height: number;\n    cardsAllIds: IdsArray;\n    cardsById: CardsCollection;\n    placeholders: PlaceholdersCollection;\n    placeholdersAllIds: IdsArray;\n    texts: PlaceholdersTextInfoByCardCollection;\n    images: PlaceholdersImageInfoByCardCollection;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarImportExport extends Component<Props> {\n    prepareImagePaths = (images: PlaceholdersImageInfoByCardCollection) => {\n        const { activeGame } = this.props;\n        if (activeGame === null) return images;\n\n        const ending = '_' + md5(activeGame);\n\n        let preparedImages: PlaceholdersImageInfoByCardCollection = {};\n\n        for (const cardId in images) {\n            let imagesByCard = { ...images[cardId] };\n            for (const placeholderId in imagesByCard) {\n                let imageInfo = { ...imagesByCard[placeholderId] };\n                let url = imageInfo.url;\n                if (url.endsWith(ending)) {\n                    url = url.replace(ending, '');\n                } else {\n                    imageInfo.global = true;\n                }\n\n                imageInfo.url = url.replace('/api/imagefiles/', '');\n\n                imagesByCard[placeholderId] = imageInfo;\n            }\n            preparedImages[cardId] = imagesByCard;\n        }\n\n        return preparedImages;\n    };\n\n    handleExportJson = () => {\n        const { width, height, cardsAllIds, cardsById, placeholders, placeholdersAllIds, texts, images } = this.props;\n\n        const preparedImages = this.prepareImagePaths(images);\n\n        const data = {\n            width,\n            height,\n            cardsAllIds,\n            cardsById,\n            placeholders,\n            placeholdersAllIds,\n            texts,\n            images: preparedImages,\n        };\n\n        let json = JSON.stringify(data, null, 4);\n        let blob = new Blob([json], { type: 'octet/stream' });\n        let url = window.URL.createObjectURL(blob);\n        downloadBlob(url, 'cardset.json');\n    };\n\n    handleExportCsv = () => {\n        const { cardsAllIds, cardsById, placeholders, placeholdersAllIds, texts, images } = this.props;\n\n        const preparedImages = this.prepareImagePaths(images);\n\n        let csvData: (string | number)[][] = [];\n        let header = ['card_id', 'card_count'];\n        let usedNames: { [key: string]: boolean } = {};\n        for (const plId of placeholdersAllIds) {\n            const placeholder = placeholders[plId];\n            const name = placeholder.name || placeholder.id;\n            if (!(name in usedNames)) {\n                header.push(name);\n                if (placeholder.type === 'image') {\n                    header.push(`${name}_global`);\n                }\n                usedNames[name] = false;\n            }\n        }\n        csvData.push(header);\n\n        for (const cardId of cardsAllIds) {\n            let card = cardsById[cardId];\n\n            let dataRow: (string | number)[] = [cardId, card.count];\n\n            let written = { ...usedNames };\n            for (const plId of placeholdersAllIds) {\n                const placeholder = placeholders[plId];\n                const name = placeholder.name || placeholder.id;\n\n                if (!written[name]) {\n                    if (placeholder.type === 'text') {\n                        dataRow.push(texts[cardId][plId].value);\n                    } else if (placeholder.type === 'image') {\n                        const image = preparedImages[cardId][plId];\n                        dataRow.push(image.url);\n                        dataRow.push(image.global ? 'y' : 'n');\n                    }\n                    written[name] = true;\n                }\n            }\n            csvData.push(dataRow);\n        }\n\n        let csv = Papa.unparse(csvData);\n        let blob = new Blob([csv], { type: 'octet/stream' });\n        let url = window.URL.createObjectURL(blob);\n        downloadBlob(url, 'cardset.csv');\n    };\n\n    handleProcess = (fieldName: string, file: File, metadata: { [propName: string]: string }, load: FPLoadCallback) => {\n        const { dispatch, activeGame, placeholders } = this.props;\n        if (activeGame === null) return;\n\n        var reader = new FileReader();\n        reader.readAsText(file, 'UTF-8');\n        reader.onload = function(e) {\n            if (e.target === null) return;\n\n            let data = null;\n            const ending = '_' + md5(activeGame);\n\n            if (file.type === 'application/json') {\n                // eslint-disable-next-line\n                data = JSON.parse((e.target as any).result);\n\n                for (const cardId in data.images) {\n                    const loadedPlaceholders = data.images[cardId];\n                    for (const placeholderId in loadedPlaceholders) {\n                        let imageInfo = loadedPlaceholders[placeholderId];\n                        let isGlobal = imageInfo.global || false;\n\n                        imageInfo.url = `/api/imagefiles/${imageInfo.url}${isGlobal ? '' : ending}`;\n                        delete imageInfo.global;\n                    }\n                }\n            } else if (file.type === 'text/csv') {\n                // eslint-disable-next-line\n                const csvData = Papa.parse((e.target as any).result, { header: true });\n\n                let cardsAllIds: IdsArray = [];\n                let cardsById: CardsCollection = {};\n                let texts: PlaceholdersTextInfoByCardCollection = {};\n                let images: PlaceholdersImageInfoByCardCollection = {};\n\n                for (const row of csvData.data) {\n                    const card: CardType = {\n                        id: row['card_id'] || shortid.generate(),\n                        count: row['card_count'] || 1,\n                    };\n\n                    cardsAllIds.push(card.id);\n                    cardsById[card.id] = card;\n\n                    for (const plId in placeholders) {\n                        const pl = placeholders[plId];\n                        const name = pl.name || pl.id;\n\n                        if (row[name]) {\n                            if (pl.type === 'image') {\n                                const isGlobal = row[`${name}_global`] === 'y';\n                                const url = row[name];\n\n                                if (!(card.id in images)) {\n                                    images[card.id] = {};\n                                }\n\n                                images[card.id][plId] = {\n                                    url: `/api/imagefiles/${url}${isGlobal ? '' : ending}`,\n                                };\n                            } else if (pl.type === 'text') {\n                                if (!(card.id in texts)) {\n                                    texts[card.id] = {};\n                                }\n                                texts[card.id][plId] = { value: row[name] };\n                            }\n                        }\n                    }\n                }\n\n                data = {\n                    cardsAllIds,\n                    cardsById,\n                    texts,\n                    images,\n                };\n            }\n\n            if (data !== null) {\n                dispatch(cardSetImportData(data));\n            }\n        };\n        reader.onerror = function() {\n            dispatch(messageDisplay('error', 'Problem during import.'));\n        };\n\n        load(file.name);\n    };\n\n    handleRevert = (uniqueFileId: string, load: FPRevertLoadCallback) => {\n        load();\n    };\n\n    render() {\n        const { visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>\n                    Here you can export and import your card set data. JSON file contains templates of cards, text and\n                    image data by card, CSV file contains only text and image data by card.\n                </div>\n                <button onClick={this.handleExportJson}>\n                    <i className=\"material-icons\">cloud_download</i> Get JSON\n                </button>\n                <button onClick={this.handleExportCsv}>\n                    <i className=\"material-icons\">cloud_download</i> Get CSV\n                </button>\n\n                <div>Drag & Drop or browser for JSON or CSV file here:</div>\n\n                <FilePond\n                    server={{\n                        process: this.handleProcess,\n                        revert: this.handleRevert,\n                    }}\n                    acceptedFileTypes={['text/csv', 'application/json']}\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeGame: state.games.active,\n        width: state.cardsets.width,\n        height: state.cardsets.height,\n        cardsAllIds: state.cardsets.cardsAllIds,\n        cardsById: state.cardsets.cardsById,\n        placeholders: state.cardsets.placeholders,\n        placeholdersAllIds: state.cardsets.placeholdersAllIds,\n        texts: state.cardsets.texts,\n        images: state.cardsets.images,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarImportExport);\n","import { ChromePicker, ColorResult } from 'react-color';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, cardSetChangeActiveTextPlaceholderColor } from '../actions';\n\ninterface Props {\n    dispatch: Dispatch;\n}\ninterface State {\n    displayColorPicker: boolean;\n}\n\nclass ColorButton extends Component<Props, State> {\n    state = {\n        displayColorPicker: false,\n    };\n\n    handleClick = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker });\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false });\n    };\n\n    handleChange = (color: ColorResult) => {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        if (selection.rangeCount === 1 && range.collapsed) {\n            const { dispatch } = this.props;\n            dispatch(cardSetChangeActiveTextPlaceholderColor(color.hex));\n        } else {\n            document.execCommand('forecolor', false, color.hex);\n        }\n    };\n\n    render() {\n        const popover: React.CSSProperties = {\n            position: 'absolute',\n            zIndex: 2,\n        };\n        const cover: React.CSSProperties = {\n            position: 'fixed',\n            top: '0px',\n            right: '0px',\n            bottom: '0px',\n            left: '0px',\n        };\n        return (\n            <>\n                <button onClick={this.handleClick} title=\"Change text color\">\n                    <i className=\"material-icons\">format_color_text</i>\n                </button>\n                {this.state.displayColorPicker ? (\n                    <div style={popover}>\n                        <div style={cover} onClick={this.handleClose} />\n                        <ChromePicker disableAlpha={true} onChange={this.handleChange} />\n                    </div>\n                ) : null}\n            </>\n        );\n    }\n}\n\nexport default connect()(ColorButton);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport WebFont from 'webfontloader';\n\nimport {\n    Dispatch,\n    cardSetChangeActiveTextPlaceholderFontFamilyAndVariant,\n    cardSetChangeActiveTextPlaceholderFontSize,\n    cardSetChangeActiveTextPlaceholderFontVariant,\n} from '../actions';\nimport { State } from '../reducers';\nimport style from './FontSelector.module.css';\nimport webfonts from './webfonts.json';\n\ninterface WebFontsInfo {\n    [propName: string]: {\n        [propName: string]: string;\n    };\n}\n\ninterface FontOption {\n    value: string;\n    label: string;\n}\n\nconst options: FontOption[] = Object.keys(webfonts)\n    .sort()\n    .map(fi => ({ value: fi, label: fi }));\n\ninterface StateProps {\n    activeFont: string;\n    activeFontVariant: string;\n    activeFontSize: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass FontSelector extends Component<Props> {\n    getFontStringForLoad = (family: string, variant: string) => {\n        let stringForLoad = family;\n        if (variant !== 'regular') {\n            stringForLoad += ':' + variant;\n        }\n        return stringForLoad;\n    };\n\n    handleChange = (selectedOption?: FontOption | FontOption[] | null) => {\n        if (!selectedOption) return;\n\n        const fontFamily = (selectedOption as FontOption).value;\n\n        let fontVariant = this.props.activeFontVariant;\n        const wf: WebFontsInfo = webfonts;\n        if (!(fontVariant in wf[fontFamily])) {\n            fontVariant = Object.keys(wf[fontFamily]).sort()[0];\n        }\n\n        WebFont.load({\n            google: {\n                families: [this.getFontStringForLoad(fontFamily, fontVariant)],\n            },\n            active: () => {\n                const { dispatch } = this.props;\n                dispatch(cardSetChangeActiveTextPlaceholderFontFamilyAndVariant(fontFamily, fontVariant));\n            },\n        });\n    };\n\n    handleFontVariantChange = (selectedOption?: FontOption | FontOption[] | null) => {\n        if (!selectedOption) return;\n\n        const value = (selectedOption as FontOption).value;\n        WebFont.load({\n            google: {\n                families: [this.getFontStringForLoad(this.props.activeFont, value)],\n            },\n            active: () => {\n                const { dispatch } = this.props;\n                dispatch(cardSetChangeActiveTextPlaceholderFontVariant(value));\n            },\n        });\n    };\n\n    handleFontSizeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextPlaceholderFontSize(parseFloat(event.target.value)));\n    };\n\n    render() {\n        const selectedFontFamily = options.find(f => f.value === this.props.activeFont);\n\n        const fontVariantOptions: FontOption[] = Object.keys((webfonts as WebFontsInfo)[this.props.activeFont])\n            .sort()\n            .map(fv => ({ value: fv, label: fv }));\n\n        const selectedFontVariant = fontVariantOptions.find(f => f.value === this.props.activeFontVariant);\n\n        return (\n            <>\n                <input\n                    type=\"number\"\n                    value={this.props.activeFontSize}\n                    onChange={this.handleFontSizeChange}\n                    title=\"Font size\"\n                />\n                <Select\n                    className={style.fontFamily}\n                    value={selectedFontFamily}\n                    onChange={this.handleChange}\n                    options={options}\n                />\n                <Select\n                    className={style.fontVariant}\n                    value={selectedFontVariant}\n                    onChange={this.handleFontVariantChange}\n                    options={fontVariantOptions}\n                />\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    let activeFont = state.cardsets.textSettings.fontFamily;\n    let activeFontVariant = state.cardsets.textSettings.fontVariant;\n    let activeFontSize = state.cardsets.textSettings.fontSize;\n\n    return {\n        activeFont,\n        activeFontVariant,\n        activeFontSize,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(FontSelector);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport {\n    PlaceholderType,\n    cardSetAddTextPlaceholder,\n    cardSetChangeActivePlaceholderName,\n    cardSetChangeActiveTextPlaceholderAlign,\n    cardSetLockActivePlaceholder,\n    cardSetLowerActivePlaceholderToBottom,\n    cardSetRaiseActivePlaceholderToTop,\n    cardSetRemoveActivePlaceholder,\n    cardSetUnlockActivePlaceholder,\n} from '../actions';\nimport { State } from '../reducers';\nimport ColorButton from './ColorButton';\nimport FontSelector from './FontSelector';\nimport style from './SidebarText.module.css';\n\ninterface StateProps {\n    isAuthenticated: boolean;\n    activePlaceholder: PlaceholderType | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarText extends Component<Props> {\n    handleAddTextClick = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetAddTextPlaceholder());\n    };\n\n    handleSetTextAlignLeft = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextPlaceholderAlign('left'));\n    };\n\n    handleSetTextAlignCenter = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextPlaceholderAlign('center'));\n    };\n\n    handleSetTextAlignRight = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeActiveTextPlaceholderAlign('right'));\n    };\n\n    handleRemoveClick = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetRemoveActivePlaceholder());\n        }\n    };\n\n    handleRaiseToTop = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetRaiseActivePlaceholderToTop());\n        }\n    };\n\n    handleLowerToBottom = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetLowerActivePlaceholderToBottom());\n        }\n    };\n\n    handleLockField = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetLockActivePlaceholder());\n        }\n    };\n\n    handleUnlockField = () => {\n        const { activePlaceholder, dispatch } = this.props;\n        if (activePlaceholder !== null) {\n            dispatch(cardSetUnlockActivePlaceholder());\n        }\n    };\n\n    handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { activePlaceholder, dispatch } = this.props;\n        const name = event.target.value.trim();\n        if (activePlaceholder !== null) {\n            dispatch(cardSetChangeActivePlaceholderName(name));\n        }\n    };\n\n    render() {\n        const { activePlaceholder, visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'initial' : 'none' }}>\n                <button onClick={this.handleAddTextClick} title=\"Add text field\">\n                    <i className=\"material-icons\">text_fields</i>\n                </button>\n                <button onClick={this.handleRaiseToTop} title=\"Raise text to top\">\n                    <i className=\"material-icons\">arrow_upward</i>\n                </button>\n                <button onClick={this.handleLowerToBottom} title=\"Lower text to bottom\">\n                    <i className=\"material-icons\">arrow_downward</i>\n                </button>\n\n                {activePlaceholder !== null && !activePlaceholder.locked && (\n                    <button\n                        onClick={this.handleLockField}\n                        title=\"Lock text field. Locked field can't be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock_open</i>\n                    </button>\n                )}\n\n                {activePlaceholder !== null && activePlaceholder.locked && (\n                    <button\n                        onClick={this.handleUnlockField}\n                        title=\"Unlock text field. Unlocked text field can be dragged, rotated, resized and removed.\"\n                    >\n                        <i className=\"material-icons\">lock</i>\n                    </button>\n                )}\n\n                <button\n                    className={activePlaceholder === null || activePlaceholder.locked ? style.disabled : ''}\n                    onClick={this.handleRemoveClick}\n                    title=\"Remove field\"\n                >\n                    <i className=\"material-icons\">remove</i>\n                </button>\n\n                {activePlaceholder !== null && (\n                    <input\n                        type=\"text\"\n                        value={activePlaceholder.type === 'text' ? activePlaceholder.name || '' : ''}\n                        placeholder={activePlaceholder.id}\n                        onChange={this.handleNameChange}\n                        title=\"Change name of text field.\"\n                    />\n                )}\n\n                <div>\n                    <button onClick={this.handleSetTextAlignLeft} title=\"Align text left\">\n                        <i className=\"material-icons\">format_align_left</i>\n                    </button>\n                    <button onClick={this.handleSetTextAlignCenter} title=\"Align text center\">\n                        <i className=\"material-icons\">format_align_center</i>\n                    </button>\n                    <button onClick={this.handleSetTextAlignRight} title=\"Align text right\">\n                        <i className=\"material-icons\">format_align_right</i>\n                    </button>\n                    <ColorButton />\n                    <FontSelector />\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    const activePlaceholder =\n        state.cardsets.activePlaceholder !== null\n            ? state.cardsets.placeholders[state.cardsets.activePlaceholder]\n            : null;\n\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activePlaceholder,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarText);\n","import 'filepond/dist/filepond.min.css';\n\nimport './SidebarUpload.css';\n\nimport { FilePond, registerPlugin } from 'react-filepond';\nimport { connect } from 'react-redux';\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport {\n    FPAbortCallback,\n    FPErrorCallback,\n    FPLoadCallback,\n    FPProgressCallback,\n    FPRevertLoadCallback,\n    cardSetDeleteImage,\n    cardSetUploadImage,\n} from '../actions';\nimport { State } from '../reducers';\nimport style from './SidebarUpload.module.css';\n\nregisterPlugin(FilePondPluginFileValidateSize);\nregisterPlugin(FilePondPluginFileValidateType);\n\ninterface StateProps {\n    activeGame: string | null;\n}\n\ntype Props = StateProps & DispatchProps & SidebarOwnProps;\n\nexport class SidebarUpload extends Component<Props> {\n    handleProcess = (\n        fieldName: string,\n        file: File,\n        metadata: { [propName: string]: string },\n        load: FPLoadCallback,\n        error: FPErrorCallback,\n        progress: FPProgressCallback,\n        abort: FPAbortCallback,\n    ) => {\n        const { dispatch, activeGame } = this.props;\n\n        if (activeGame === null) {\n            abort();\n            return;\n        }\n\n        let source = axios.CancelToken.source();\n\n        dispatch(cardSetUploadImage(activeGame, file, load, error, progress, abort, source.token));\n\n        return { abort: source.cancel };\n    };\n\n    handleRevert = (uniqueFileId: string, load: FPRevertLoadCallback, error: FPErrorCallback) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetDeleteImage(uniqueFileId, load, error));\n    };\n\n    render() {\n        const { visible } = this.props;\n\n        return (\n            <div className={style.view} style={{ display: visible ? 'grid' : 'none' }}>\n                <div>\n                    Uploaded imaged are kept for limited time. If they are deleted then simply re-upload them again.\n                </div>\n                <FilePond\n                    allowMultiple={true}\n                    server={{\n                        process: this.handleProcess,\n                        revert: this.handleRevert,\n                    }}\n                    acceptedFileTypes={['image/png', 'image/jpeg', 'image/svg+xml']}\n                    allowFileSizeValidation={true}\n                    maxFileSize=\"500KB\"\n                />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activeGame: state.games.active,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, SidebarOwnProps, State>(mapStateToProps)(SidebarUpload);\n","import { connect, ConnectedComponentClass } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { DispatchProps, SidebarOwnProps } from '../types';\nimport { SidebarState, cardSetSetSidebarState } from '../actions';\nimport { State } from '../reducers';\nimport SidebarDetails from './SidebarDetails';\nimport SidebarImage from './SidebarImage';\nimport SidebarImportExport from './SidebarImportExport';\nimport SidebarText from './SidebarText';\nimport SidebarUpload from './SidebarUpload';\nimport style from './Sidebar.module.css';\n\ninterface StateProps {\n    isAuthenticated: boolean;\n    activeSidebar: SidebarState | null;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface SidebarInfo {\n    state: SidebarState;\n    title: string;\n    icon: string;\n    component: ConnectedComponentClass<typeof Component, SidebarOwnProps>;\n}\n\nconst SIDEBARS: SidebarInfo[] = [\n    {\n        state: SidebarState.Details,\n        title: 'Details',\n        icon: 'details',\n        component: SidebarDetails,\n    },\n    {\n        state: SidebarState.Image,\n        title: 'Images',\n        icon: 'photo',\n        component: SidebarImage,\n    },\n    {\n        state: SidebarState.Text,\n        title: 'Texts',\n        icon: 'text_fields',\n        component: SidebarText,\n    },\n    {\n        state: SidebarState.Upload,\n        title: 'Upload',\n        icon: 'cloud_upload',\n        component: SidebarUpload,\n    },\n    {\n        state: SidebarState.ImportExport,\n        title: 'Import/Export',\n        icon: 'import_export',\n        component: SidebarImportExport,\n    },\n    // picture_as_pdf\n];\n\nexport class Sidebar extends Component<Props> {\n    handleSidebar = (state: SidebarState) => {\n        const { activeSidebar, dispatch } = this.props;\n        if (activeSidebar === state) {\n            dispatch(cardSetSetSidebarState(null));\n        } else {\n            dispatch(cardSetSetSidebarState(state));\n        }\n    };\n\n    render() {\n        const { activeSidebar } = this.props;\n        return (\n            <div className={style.sidebar}>\n                <div className={style.controls}>\n                    {SIDEBARS.map(sb => (\n                        <i\n                            key={sb.state}\n                            title={sb.title}\n                            className={`material-icons ${activeSidebar === sb.state ? style.active : ''}`}\n                            onClick={() => this.handleSidebar(sb.state)}\n                        >\n                            {sb.icon}\n                        </i>\n                    ))}\n                </div>\n                <div className={`${style.view} ${activeSidebar === null ? style.hidden : ''}`}>\n                    {SIDEBARS.map(sb => (\n                        <sb.component key={sb.state} visible={activeSidebar === sb.state} />\n                    ))}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activeSidebar: state.cardsets.activeSidebar,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(Sidebar);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport shortid from 'shortid';\n\nimport { ACTIVITY_CREATING_PDF, ACTIVITY_SELECTING, State } from '../reducers';\nimport {\n    CardType,\n    CardsCollection,\n    Dispatch,\n    cardSetActiveCardAndPlaceholder,\n    cardSetChangeHeight,\n    cardSetChangeWidth,\n    cardSetCreateCard,\n    cardSetSetZoom,\n    gameCreatePdfRequest,\n} from '../actions';\nimport Card from './Card';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\nimport Loader from './Loader';\nimport Sidebar from './Sidebar';\nimport style from './CardSet.module.css';\n\ninterface StateProps {\n    width: number;\n    height: number;\n    isAuthenticated: boolean;\n    cardsAllIds: string[];\n    cardsById: CardsCollection;\n    isCreatingPdf: boolean;\n    activity: number;\n    zoom: number;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface LocalState {\n    pageWidth: number;\n    pageHeight: number;\n    topBottomMargin: number;\n    leftRightMargin: number;\n}\n\nexport class CardSet extends Component<Props, LocalState> {\n    state = {\n        pageWidth: 210,\n        pageHeight: 297,\n        topBottomMargin: 15,\n        leftRightMargin: 9,\n    };\n\n    handleCreateCardClick = () => {\n        const { dispatch } = this.props;\n\n        const newCard: CardType = { id: shortid.generate(), count: 1 };\n\n        dispatch(cardSetCreateCard(newCard));\n    };\n\n    handleGeneratePdfClick = () => {\n        const { dispatch } = this.props;\n        const { pageWidth, pageHeight, topBottomMargin, leftRightMargin } = this.state;\n\n        dispatch(gameCreatePdfRequest(pageWidth, pageHeight, topBottomMargin, leftRightMargin));\n    };\n\n    handleWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeWidth(parseFloat(event.target.value)));\n    };\n\n    handleHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetChangeHeight(parseFloat(event.target.value)));\n    };\n\n    handleZoom = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { dispatch } = this.props;\n        dispatch(cardSetSetZoom(parseFloat(event.target.value)));\n    };\n\n    handlePageWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ pageWidth: parseFloat(event.target.value) });\n    };\n\n    handlePageHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ pageHeight: parseFloat(event.target.value) });\n    };\n\n    handleTopBottomMarginChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ topBottomMargin: parseFloat(event.target.value) });\n    };\n\n    handleLeftRightMarginChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ leftRightMargin: parseFloat(event.target.value) });\n    };\n\n    handleClickOutsideOfCard = () => {\n        const { dispatch } = this.props;\n        dispatch(cardSetActiveCardAndPlaceholder(null, null));\n    };\n\n    render() {\n        const { isAuthenticated, cardsAllIds, cardsById, width, height, isCreatingPdf, activity, zoom } = this.props;\n\n        return (\n            isAuthenticated && (\n                <div>\n                    <KawaiiMessage character={Character.Ghost}>\n                        <p>Here you can design your cards.</p>\n                    </KawaiiMessage>\n\n                    <div className={style.cardsetview}>\n                        <div className={style.sidebar}>\n                            <Sidebar />\n                        </div>\n                        <div onMouseDown={this.handleClickOutsideOfCard} onTouchStart={this.handleClickOutsideOfCard}>\n                            <div className=\"form\">\n                                <label htmlFor=\"card_width\">Card width (mm):</label>\n                                <input\n                                    id=\"card_width\"\n                                    type=\"number\"\n                                    min=\"0\"\n                                    step=\"0.1\"\n                                    onChange={this.handleWidthChange}\n                                    className=\"form-control\"\n                                    placeholder=\"width\"\n                                    value={width}\n                                />\n                                <label htmlFor=\"card_height\">Card height (mm):</label>\n                                <input\n                                    id=\"card_height\"\n                                    type=\"number\"\n                                    min=\"0\"\n                                    step=\"0.1\"\n                                    onChange={this.handleHeightChange}\n                                    className=\"form-control\"\n                                    placeholder=\"height\"\n                                    value={height}\n                                />\n                            </div>\n                            <div className=\"form\">\n                                <label htmlFor=\"zoom\">Zoom (if you want to see details or big picture)</label>\n                                <input\n                                    id=\"zoom\"\n                                    type=\"number\"\n                                    min=\"0.1\"\n                                    step=\"0.1\"\n                                    onChange={this.handleZoom}\n                                    className=\"form-control\"\n                                    placeholder=\"zoom\"\n                                    value={zoom}\n                                />\n                            </div>\n                            {(activity & ACTIVITY_SELECTING) === ACTIVITY_SELECTING && <Loader />}\n                            <div className={style.cardset}>\n                                <ul\n                                    style={{\n                                        gridTemplateColumns: `repeat(auto-fill, minmax(${width * zoom}mm, 1fr))`,\n                                    }}\n                                >\n                                    {cardsAllIds &&\n                                        cardsAllIds.map(cardId => (\n                                            <li key={cardId}>\n                                                <Card card={cardsById[cardId]} />\n                                            </li>\n                                        ))}\n                                </ul>\n                            </div>\n                            <div className=\"form\">\n                                <button onClick={this.handleCreateCardClick}>Create Card</button>\n                            </div>\n                        </div>\n                    </div>\n\n                    <KawaiiMessage character={Character.Ghost} mood=\"excited\">\n                        <p>Here you can generate PDF for your cardset.</p>\n                        <p>Hint 1: A4 page size is 210 mm x 297 mm. Letter page size is 215.9 x 279.4 mm.</p>\n                        <p>Hint 2: 1 inch is equal to 25.4 mm.</p>\n                    </KawaiiMessage>\n\n                    <div className=\"form\">\n                        <label htmlFor=\"page_width\">Page width (mm):</label>\n                        <input\n                            id=\"page_width\"\n                            type=\"number\"\n                            onChange={this.handlePageWidthChange}\n                            placeholder=\"Page width\"\n                            value={this.state.pageWidth}\n                        />\n                        <label htmlFor=\"page_height\">Page height (mm):</label>\n                        <input\n                            id=\"page_height\"\n                            type=\"number\"\n                            onChange={this.handlePageHeightChange}\n                            placeholder=\"Page Height\"\n                            value={this.state.pageHeight}\n                        />\n                        <label htmlFor=\"page_topbottom_margin\">Margin from top/bottom (mm):</label>\n                        <input\n                            id=\"page_topbottom_margin\"\n                            type=\"number\"\n                            onChange={this.handleTopBottomMarginChange}\n                            placeholder=\"Top/Bottom margin\"\n                            value={this.state.topBottomMargin}\n                        />\n                        <label htmlFor=\"page_leftright_margin\">Margin from left/right (mm):</label>\n                        <input\n                            id=\"page_leftright_margin\"\n                            type=\"number\"\n                            onChange={this.handleLeftRightMarginChange}\n                            placeholder=\"Left/Right margin\"\n                            value={this.state.leftRightMargin}\n                        />\n                        <button disabled={isCreatingPdf} onClick={this.handleGeneratePdfClick}>\n                            Generate PDF\n                        </button>\n                    </div>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n    return {\n        activity: state.cardsets.activity,\n        width: state.cardsets.width,\n        height: state.cardsets.height,\n        zoom: state.cardsets.zoom,\n        isAuthenticated: state.auth.isAuthenticated,\n        cardsAllIds: state.cardsets.cardsAllIds,\n        cardsById: state.cardsets.cardsById,\n        isCreatingPdf: (state.games.activity & ACTIVITY_CREATING_PDF) === ACTIVITY_CREATING_PDF,\n    };\n};\n\nexport default connect<StateProps, DispatchProps, {}, State>(mapStateToProps)(CardSet);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, cardSetSelectRequest } from './actions';\nimport { State } from './reducers';\nimport CardSet from './components/CardSet';\n\ninterface Props {\n    dispatch: Dispatch;\n    match: { params: { id: string } };\n    isAuthenticated: boolean;\n}\n\nexport class CardSetPage extends Component<Props> {\n    componentDidMount() {\n        const { dispatch, match } = this.props;\n        dispatch(cardSetSelectRequest(match.params.id));\n    }\n\n    render() {\n        return <CardSet />;\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(CardSetPage);\n","import React, { Component } from 'react';\n\nexport default class ChangelogPage extends Component {\n    render() {\n        return (\n            <div>\n                <p>Here you can find list of future plans and what was implemented recently.</p>\n                <h2>Future plans</h2>\n                <ul>\n                    <li>\n                        Image improvements:\n                        <ul>\n                            <li>Change color of images (for SVG images).</li>\n                            <li>Generating list of author's of icons if attribution is required.</li>\n                            <li>Various ideas for advanced images controls.</li>\n                        </ul>\n                    </li>\n                    <li>Card templates.</li>\n                    <li>Two-sided cards.</li>\n                    <li>UI improvements (snapping, keyboard support and etc.).</li>\n                    <li>PDF generation for all the game.</li>\n                    <li>Possibility to order your games for printing from various printing providers.</li>\n                </ul>\n                <h2>2019-03-03</h2>\n                <ul>\n                    <li>Data import/export in JSON and CSV formats.</li>\n                    <li>\n                        Named fields. If multiple fields have the same name then by editing one you change value in all\n                        of them. As well named fields look better in data export/import.\n                    </li>\n                </ul>\n\n                <h2>2019-03-02</h2>\n                <ul>\n                    <li>You can upload your own images now. Images are limited.</li>\n                    <li>\n                        Image order support added. E.g.: now you can upload background image and lower it to the bottom.\n                    </li>\n                    <li>Progress indicators and user messages improvements.</li>\n                </ul>\n\n                <h2>2019-02-24</h2>\n                <ul>\n                    <li>Sidebar created for lighter, cleaner and faster UI.</li>\n                    <li>Zoom added to card set for more flexibility while viewing or editing.</li>\n                </ul>\n                <h2>2019-02-23</h2>\n                <ul>\n                    <li>Text rendering changed and should be working properly now.</li>\n                    <li>Crash with new card set fixed.</li>\n                    <li>Minor UI improvements.</li>\n                </ul>\n                <h2>2019-02-17</h2>\n                <p>Initial public version.</p>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\n\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\n\ninterface Props {\n    children: React.ReactNode;\n}\n\ninterface State {\n    hasError: boolean;\n}\n\nexport default class ErrorBoundary extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = { hasError: false };\n    }\n\n    componentDidCatch() {\n        this.setState({ hasError: true });\n        // You can also log the error to an error reporting service\n        // logErrorToMyService(error, info);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <KawaiiMessage character={Character.Browser} mood=\"ko\">\n                    Something unexpected has happened. If you want this problem to be fixed write me to{' '}\n                    <a href=\"mailto:dalius@ffff.lt\">dalius@ffff.lt</a>.\n                </KawaiiMessage>\n            );\n        }\n        return this.props.children;\n    }\n}\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardSetsCollection, Dispatch, IdsArray, cardSetCreateRequest, messageDisplay } from '../actions';\nimport { State } from '../reducers';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated: boolean;\n    activeGame: string | null;\n    allIds: IdsArray;\n    byId: CardSetsCollection;\n}\n\ninterface LocalState {\n    cardSetName: string;\n    width: number;\n    height: number;\n}\n\nexport class CardSets extends Component<Props, LocalState> {\n    state: LocalState = {\n        cardSetName: '',\n        width: 63.5,\n        height: 88.9,\n    };\n\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ cardSetName: event.target.value });\n    };\n\n    handleWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ width: parseFloat(event.target.value) });\n    };\n\n    handleHeightChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ height: parseFloat(event.target.value) });\n    };\n\n    handleCreateCardSetClick = () => {\n        const { dispatch, activeGame } = this.props;\n\n        if (activeGame === null) {\n            return;\n        }\n\n        const cardSetName = this.state.cardSetName.trim();\n\n        if (cardSetName) {\n            dispatch(cardSetCreateRequest(cardSetName, this.state.width, this.state.height, activeGame));\n        } else {\n            dispatch(messageDisplay('error', 'Card Set name should be non empty.'));\n        }\n    };\n\n    render() {\n        const { isAuthenticated, activeGame, allIds, byId } = this.props;\n\n        const cardsetItems = allIds\n            .map(gameId => byId[gameId])\n            .map(cardset => (\n                <li key={cardset.id}>\n                    <Link to={`/cardset/${cardset.id}`}>{cardset.name}</Link>\n                </li>\n            ));\n\n        return (\n            isAuthenticated &&\n            activeGame !== null && (\n                <div>\n                    <KawaiiMessage character={Character.Ghost}>\n                        Each game is made from card sets. Card set is collection of cards that share the same properties\n                        but have different text and images.\n                    </KawaiiMessage>\n\n                    <ul>{cardsetItems}</ul>\n\n                    <div className=\"form\">\n                        <label htmlFor=\"cardset_name\">Card Set name:</label>\n                        <input\n                            id=\"cardset_name\"\n                            type=\"text\"\n                            onChange={this.handleChange}\n                            className=\"form-control\"\n                            placeholder=\"Card Set name\"\n                        />\n                        <label htmlFor=\"card_width\">Card width:</label>\n                        <input\n                            id=\"card_width\"\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onChange={this.handleWidthChange}\n                            className=\"form-control\"\n                            placeholder=\"Card width\"\n                            value={this.state.width}\n                        />\n                        <label htmlFor=\"card_height\">Card height:</label>\n                        <input\n                            id=\"card_height\"\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onChange={this.handleHeightChange}\n                            className=\"form-control\"\n                            placeholder=\"Card height\"\n                            value={this.state.height}\n                        />\n                        <button onClick={this.handleCreateCardSetClick}>Create Card Set</button>\n                    </div>\n\n                    <KawaiiMessage character={Character.Ghost} mood=\"excited\">\n                        Hint: Poker card size 63.5mm x 88.9mm. Bridge card size 56mm x 88.9mm. But you can cards of any\n                        size.\n                    </KawaiiMessage>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        activeGame: state.games.active,\n        allIds: state.cardsets.allIds,\n        byId: state.cardsets.byId,\n    };\n};\n\nexport default connect(mapStateToProps)(CardSets);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, gameSelectRequest } from './actions';\nimport { State } from './reducers';\nimport CardSets from './components/CardSets';\n\ninterface Props {\n    dispatch: Dispatch;\n    match: { params: { id: string } };\n    isAuthenticated: boolean;\n}\n\nexport class GamePage extends Component<Props> {\n    componentDidMount() {\n        const { dispatch, match } = this.props;\n        dispatch(gameSelectRequest(match.params.id, true));\n    }\n\n    render() {\n        return <CardSets />;\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(GamePage);\n","import React, { Component } from 'react';\n\ninterface Props {\n    onLogin: (creds: { username: string; password: string }) => void;\n    onLoginFailure: (message: string) => void;\n}\n\ninterface LocalState {\n    username: string;\n    password: string;\n}\n\nexport default class Login extends Component<Props, LocalState> {\n    state = {\n        username: '',\n        password: '',\n    };\n\n    handleUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ username: event.target.value });\n    };\n\n    handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ password: event.target.value });\n    };\n\n    handleSubmit = (event: React.FormEvent) => {\n        const username = this.state.username.trim();\n        const password = this.state.password.trim();\n        if (username && password) {\n            const creds = { username, password };\n            this.props.onLogin(creds);\n        } else {\n            this.props.onLoginFailure('Missing username and/or password.');\n        }\n        event.preventDefault();\n    };\n\n    render() {\n        return (\n            <div>\n                <form className=\"form\" onSubmit={this.handleSubmit}>\n                    <input\n                        type=\"text\"\n                        onChange={this.handleUsernameChange}\n                        className=\"form-control\"\n                        placeholder=\"Username\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordChange}\n                        className=\"form-control\"\n                        placeholder=\"Password\"\n                    />\n                    <input type=\"submit\" value=\"Login\" />\n                </form>\n            </div>\n        );\n    }\n}\n","import { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, loginRequest, messageDisplay } from './actions';\nimport { State } from './reducers';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport Login from './components/Login';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated: boolean;\n}\n\nexport class LoginPage extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated } = this.props;\n\n        return (\n            <div className=\"App\">\n                {!isAuthenticated && (\n                    <>\n                        <KawaiiMessage character={Character.Ghost}>\n                            Please enter your credentials to login. If you don't have account yet then you can create\n                            one here: <a href=\"/signup\">Sign-up</a>.\n                        </KawaiiMessage>\n\n                        <Login\n                            onLogin={creds => dispatch(loginRequest(creds))}\n                            onLoginFailure={msg => dispatch(messageDisplay('error', msg))}\n                        />\n                    </>\n                )}\n                {isAuthenticated && <Redirect to=\"/\" />}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(LoginPage);\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, GamesCollection, IdsArray, gameCreateRequest, messageDisplay } from '../actions';\nimport { State } from '../reducers';\nimport KawaiiMessage, { Character } from './KawaiiMessage';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated: boolean;\n    allIds: IdsArray;\n    byId: GamesCollection;\n}\n\ninterface LocalState {\n    gameName: string;\n}\n\nexport class Games extends Component<Props, LocalState> {\n    state: LocalState = {\n        gameName: '',\n    };\n\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ gameName: event.target.value });\n    };\n\n    handleCreateGameClick = () => {\n        const { dispatch } = this.props;\n\n        const gamename = this.state.gameName.trim();\n        if (gamename) {\n            dispatch(gameCreateRequest(gamename));\n        } else {\n            dispatch(messageDisplay('error', 'Game name should be non empty.'));\n        }\n    };\n\n    render() {\n        const { isAuthenticated, allIds, byId } = this.props;\n\n        const gameItems = allIds\n            .map(gameId => byId[gameId])\n            .map(game => (\n                <li key={game.id}>\n                    <Link to={`/game/${game.id}`}>{game.name}</Link>\n                </li>\n            ));\n\n        return (\n            isAuthenticated && (\n                <div>\n                    <KawaiiMessage character={Character.Ghost}>\n                        {allIds.length === 0 && (\n                            <>Here you can create your games and see list of your games when you have some.</>\n                        )}\n                        {allIds.length > 0 && (\n                            <>Here you can see a list of your games or you can create even more games.</>\n                        )}\n                    </KawaiiMessage>\n\n                    <ul>{gameItems}</ul>\n                    <div className=\"form\">\n                        <label htmlFor=\"game_name\">Game name:</label>\n                        <input\n                            id=\"game_name\"\n                            type=\"text\"\n                            onChange={this.handleChange}\n                            className=\"form-control\"\n                            placeholder=\"Game name\"\n                        />\n                        <button onClick={this.handleCreateGameClick}>Create Game</button>\n                    </div>\n                </div>\n            )\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        allIds: state.games.allIds,\n        byId: state.games.byId,\n    };\n};\n\nexport default connect(mapStateToProps)(Games);\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { State } from './reducers';\nimport Games from './components/Games';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\n\ninterface Props {\n    isAuthenticated: boolean;\n}\n\nexport class Main extends Component<Props> {\n    render() {\n        if (this.props.isAuthenticated) {\n            return <Games />;\n        } else {\n            return (\n                <KawaiiMessage character={Character.Ghost}>\n                    Hey! Here you can create your own card game but you need to <a href=\"/login\">Login</a> or{' '}\n                    <a href=\"/signup\">Sign-up</a> first.\n                </KawaiiMessage>\n            );\n        }\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n    };\n};\n\nexport default connect(mapStateToProps)(Main);\n","import { State } from './reducers';\n\nexport const getActiveGame = (state: State) => (state.games.active ? state.games.byId[state.games.active] : null);\n\nexport const getActiveCardSet = (state: State) =>\n    state.cardsets.active ? state.cardsets.byId[state.cardsets.active] : null;\n","import React from 'react';\n\ninterface Props {\n    onLogout: () => void;\n}\n\nfunction Logout(props: Props) {\n    return (\n        <button onClick={() => props.onLogout()} className=\"btn btn-primary\">\n            Logout\n        </button>\n    );\n}\n\nexport default Logout;\n","import { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { CardSetType, Dispatch, GameType, MessageType, logoutRequest } from '../actions';\nimport { State } from '../reducers';\nimport { getActiveCardSet, getActiveGame } from '../selectors';\nimport Loader from './Loader';\nimport Logout from './Logout';\nimport style from './Navbar.module.css';\n\ninterface OwnProps {\n    isAuthenticated: boolean;\n}\n\ninterface StateProps {\n    messages: MessageType[];\n    activeGame: GameType | null;\n    activeCardSet: CardSetType | null;\n}\n\ninterface DispatchProps {\n    dispatch: Dispatch;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nexport class Navbar extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated, messages, activeGame, activeCardSet } = this.props;\n\n        return (\n            <nav>\n                <div id=\"messages\" className={style.messages}>\n                    <ul>\n                        {messages.map(m => (\n                            <li key={m.id} className={m.type === 'error' ? style.error : style.info}>\n                                {m.type === 'error' && (\n                                    <>\n                                        <i className=\"material-icons\">error</i> {m.text}\n                                    </>\n                                )}\n                                {m.type === 'info' && (\n                                    <>\n                                        <i className=\"material-icons\">info</i> {m.text}\n                                    </>\n                                )}\n                                {m.type === 'progress' && (\n                                    <>\n                                        <Loader small={true} /> {m.text}\n                                    </>\n                                )}\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n                <div>\n                    <h1 className={style.header}>\n                        <Link to=\"/\">CARD-A-MON</Link>\n                    </h1>\n                    <div>\n                        <ul className={style.menu}>\n                            {isAuthenticated && (\n                                <>\n                                    <li>\n                                        <Link to=\"/\">Main</Link>\n                                    </li>\n                                    {activeGame && (\n                                        <li>\n                                            <Link to={`/game/${activeGame.id}`}>Game \"{activeGame.name}\"</Link>\n                                        </li>\n                                    )}\n                                    {activeCardSet && (\n                                        <li>\n                                            <Link to={`/cardset/${activeCardSet.id}`}>\n                                                Card Set \"{activeCardSet.name}\"\n                                            </Link>\n                                        </li>\n                                    )}\n                                </>\n                            )}\n                            <li>\n                                <Link to=\"/changelog\">Changelog</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/about\">About</Link>\n                            </li>\n                            {isAuthenticated && (\n                                <li>\n                                    <Logout onLogout={() => dispatch(logoutRequest())} />\n                                </li>\n                            )}\n                            {!isAuthenticated && (\n                                <>\n                                    <li>\n                                        <Link to=\"/login\">Login</Link>\n                                    </li>\n                                    <li>\n                                        <Link to=\"/signup\">Sign-up</Link>\n                                    </li>\n                                </>\n                            )}\n                        </ul>\n                    </div>\n                </div>\n            </nav>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        messages: state.message.messages,\n        activeGame: getActiveGame(state),\n        activeCardSet: getActiveCardSet(state),\n    };\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, State>(mapStateToProps)(Navbar);\n","import React, { Component } from 'react';\n\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\n\nexport default class NotFoundPage extends Component {\n    render() {\n        return (\n            <KawaiiMessage character={Character.Browser} mood=\"sad\">\n                There is nothing here.\n            </KawaiiMessage>\n        );\n    }\n}\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Credentials, Dispatch, messageDisplay } from '../actions';\n\ninterface Props {\n    dispatch: Dispatch;\n    onSignUp: (cred: Credentials) => void;\n}\n\nexport class SignUp extends Component<Props> {\n    state = {\n        username: '',\n        password: '',\n        passwordRepeat: '',\n    };\n\n    handleSubmit(event: React.FormEvent) {\n        const { dispatch, onSignUp } = this.props;\n\n        if (this.state.password !== this.state.passwordRepeat) {\n            dispatch(messageDisplay('error', 'Passwords do not match.'));\n        } else {\n            const creds = {\n                username: this.state.username.trim(),\n                password: this.state.password.trim(),\n            };\n            onSignUp(creds);\n        }\n\n        event.preventDefault();\n    }\n\n    handleUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ username: event.target.value });\n    };\n\n    handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ password: event.target.value });\n    };\n\n    handlePasswordRepeatChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ passwordRepeat: event.target.value });\n    };\n\n    render() {\n        return (\n            <div>\n                <form className=\"form\" onSubmit={event => this.handleSubmit(event)}>\n                    <input\n                        type=\"text\"\n                        onChange={this.handleUsernameChange}\n                        className=\"form-control\"\n                        placeholder=\"Username\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordChange}\n                        className=\"form-control\"\n                        placeholder=\"Password\"\n                    />\n                    <input\n                        type=\"password\"\n                        onChange={this.handlePasswordRepeatChange}\n                        className=\"form-control\"\n                        placeholder=\"Repeat password here\"\n                    />\n                    <input type=\"submit\" value=\"Sign Up\" />\n                </form>\n            </div>\n        );\n    }\n}\nexport default connect()(SignUp);\n","import { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, signupRequest } from './actions';\nimport { State } from './reducers';\nimport KawaiiMessage, { Character } from './components/KawaiiMessage';\nimport SignUp from './components/SignUp';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated: boolean;\n}\n\nexport class SignUpPage extends Component<Props> {\n    render() {\n        const { dispatch, isAuthenticated } = this.props;\n\n        return (\n            <div className=\"App\">\n                {!isAuthenticated && (\n                    <>\n                        <KawaiiMessage character={Character.Ghost}>\n                            Create your user here. Instead of user name you can use your e-mail. If you forget your\n                            password then you can send me e-mail (I will not send you any e-mails without your consent).\n                            If you use regular user name and forget your password then you will not be able to access\n                            your account.\n                        </KawaiiMessage>\n\n                        <SignUp onSignUp={creds => dispatch(signupRequest(creds))} />\n                    </>\n                )}\n                {isAuthenticated && <Redirect to=\"/\" />}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => ({ isAuthenticated: state.auth.isAuthenticated });\n\nexport default connect(mapStateToProps)(SignUpPage);\n","import './App.css';\n\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Dispatch, initRequest } from './actions';\nimport { State } from './reducers';\nimport AboutPage from './AboutPage';\nimport CardSetPage from './CardSetPage';\nimport ChangelogPage from './ChangelogPage';\nimport ErrorBoundry from './ErrorBoundry';\nimport GamePage from './GamePage';\nimport LoginPage from './LoginPage';\nimport Main from './Main';\nimport Navbar from './components/Navbar';\nimport NotFoundPage from './NotFoundPage';\nimport SignUpPage from './SignUpPage';\n\ninterface Props {\n    dispatch: Dispatch;\n    isAuthenticated: boolean;\n}\n\nexport class App extends Component<Props> {\n    componentDidMount() {\n        this.props.dispatch(initRequest());\n    }\n\n    render() {\n        const { isAuthenticated } = this.props;\n        return (\n            <Router>\n                <div className=\"App\">\n                    <ErrorBoundry>\n                        <Navbar isAuthenticated={isAuthenticated} />\n                        <Switch>\n                            <Route exact path=\"/\" component={Main} />\n                            <Route exact path=\"/login\" component={LoginPage} />\n                            <Route exact path=\"/signup\" component={SignUpPage} />\n                            <Route exact path=\"/game/:id\" component={GamePage} />\n                            <Route exact path=\"/cardset/:id\" component={CardSetPage} />\n                            <Route exact path=\"/changelog\" component={ChangelogPage} />\n                            <Route exact path=\"/about\" component={AboutPage} />\n                            <Route component={NotFoundPage} />\n                        </Switch>\n                        <div className=\"App-footer\">Dalius Dobravolskas &copy; {new Date().getFullYear()}</div>\n                    </ErrorBoundry>\n                </div>\n            </Router>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    const { auth } = state;\n    const { isAuthenticated } = auth;\n\n    return {\n        isAuthenticated,\n    };\n};\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ninterface Config {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit http://bit.ly/CRA-PWA',\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import './index.css';\n\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { createAppStore } from './store';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = createAppStore();\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { applyMiddleware, compose, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport { rootSaga } from './sagas';\nimport reducers from './reducers';\n\nexport function createAppStore() {\n    const sagaMiddleware = createSagaMiddleware();\n    const store = createStore(\n        reducers,\n        // @ts-ignore: __REDUX_DEVTOOLS_EXTENSION__ does not exists on window\n        window.__REDUX_DEVTOOLS_EXTENSION__\n            ? compose(\n                  applyMiddleware(sagaMiddleware),\n                  // @ts-ignore: __REDUX_DEVTOOLS_EXTENSION__ does not exists on window\n                  window.__REDUX_DEVTOOLS_EXTENSION__(),\n              )\n            : applyMiddleware(sagaMiddleware),\n    );\n    sagaMiddleware.run(rootSaga);\n    return store;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldcontroller\":\"FieldController_fieldcontroller__3ifWc\",\"fieldcontrolleractiveplaceholder\":\"FieldController_fieldcontrolleractiveplaceholder__3XZOP\",\"fieldcontrolleractive\":\"FieldController_fieldcontrolleractive__3fSLl\",\"controller\":\"FieldController_controller__VCesw\",\"touchactivated\":\"FieldController_touchactivated__16s2w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__3wMPS\",\"controls\":\"Sidebar_controls__3VVbM\",\"active\":\"Sidebar_active__4ldTH\",\"view\":\"Sidebar_view__-0BeZ\",\"hidden\":\"Sidebar_hidden__3xh5q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Navbar_header__FZp4U\",\"menu\":\"Navbar_menu__1JWvN\",\"messages\":\"Navbar_messages__h_dLG\",\"error\":\"Navbar_error__3urZl\",\"info\":\"Navbar_info__1h4Zc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixed\":\"Loader_fixed__3q8O9\",\"relative\":\"Loader_relative__1lapZ\",\"loader\":\"Loader_loader__1ZCGC\",\"small\":\"Loader_small__3TZen\",\"loader-small\":\"Loader_loader-small__3PPAu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarDetails_view__29V31\",\"disabled\":\"SidebarDetails_disabled__1htJF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"SidebarImage_view__2LKQM\",\"disabled\":\"SidebarImage_disabled__1tNhN\",\"images\":\"SidebarImage_images__3zDK2\",\"image\":\"SidebarImage_image__lREiD\"};","module.exports = __webpack_public_path__ + \"static/media/resize.0548e063.svg\";","module.exports = __webpack_public_path__ + \"static/media/rotate.470ffe2e.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardset\":\"CardSet_cardset__21qjI\",\"cardsetview\":\"CardSet_cardsetview__1rqd1\",\"sidebar\":\"CardSet_sidebar__3y8_T\"};"],"sourceRoot":""}